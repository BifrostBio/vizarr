(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{"+7vx":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("BQ9P"),f=n("K7jV"),h=n("ykdB"),d=n("0i8A"),p=[0,0,0,255],v={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:p},getLineColor:{type:"accessor",value:p},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(e){return Object(s.a)(Object(a.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.radiusUnits,o=r.radiusScale,a=r.radiusMinPixels,s=r.radiusMaxPixels,u=r.stroked,c=r.filled,l=r.lineWidthUnits,f=r.lineWidthScale,h=r.lineWidthMinPixels,d=r.lineWidthMaxPixels,p="pixels"===i?n.metersPerPixel:1,v="pixels"===l?n.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({stroked:u?1:0,filled:c,radiusScale:o*p,radiusMinPixels:a,radiusMaxPixels:s,lineWidthScale:f*v,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}},{key:"_getModel",value:function(e){return new h.a(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new d.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),t}(f.a);g.layerName="ScatterplotLayer",g.defaultProps=v},"+Jdq":function(e,t,n){"use strict";var r=n("QPTa");t.a={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n\n\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();\n  vec3 v = normalize(u_Camera - pbr_vPosition);\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0,\n    NdotV,\n    0.0,\n    0.0,\n    0.0,\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[r.a]}},"+qE3":function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,a,s;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"===typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var c=u.length,l=g(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"0i8A":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("vpQ4"),i=n("1OyB"),o=n("vuIU"),a=n("VdrS"),s=n("CxzY"),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.id,r=void 0===n?Object(a.c)("geometry"):n,o=t.drawMode,s=void 0===o?u.TRIANGLES:o,c=t.attributes,l=void 0===c?{}:c,f=t.indices,h=void 0===f?null:f,d=t.vertexCount,p=void 0===d?null:d;this.id=r,this.drawMode=0|s,this.attributes={},this.userData={},this._setAttributes(l,h),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}return Object(o.a)(e,null,[{key:"DRAW_MODE",get:function(){return u}}]),Object(o.a)(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Object(r.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var r=e[n];r=ArrayBuffer.isView(r)?{value:r}:r,Object(s.a)(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(Object(s.a)(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var n=1/0;for(var r in e){var i=e[r],o=i.value,a=i.size;!i.constant&&o&&a>=1&&(n=Math.min(n,o.length/a))}return Object(s.a)(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),e}()},3:function(e,t){},"3BRs":function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=S,S.WritableState=w;var a={deprecate:n("t9FE")},s=n("QpuX"),u=n("HDXh").Buffer,c=t.Uint8Array||function(){};var l,f=n("RoFp"),h=n("DbZ5").getHighWaterMark,d=n("ybjB").codes,p=d.ERR_INVALID_ARG_TYPE,v=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,m=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,O=d.ERR_UNKNOWN_ENCODING,E=f.errorOrDestroy;function x(){}function w(e,t,a){o=o||n("sZro"),e=e||{},"boolean"!==typeof a&&(a=t instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!==typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(L,e,t),e._writableState.errorEmitted=!0,E(e,i)):(o(i),e._writableState.errorEmitted=!0,E(e,i),L(e,t))}(e,n,i,t,o);else{var a=C(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||P(e,n),i?r.nextTick(A,e,n,a,o):A(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(e){var t=this instanceof(o=o||n("sZro"));if(!t&&!l.call(S,this))return new S(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function T(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function A(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),L(e,t)}function P(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),L(e,t)}))}function L(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n("P7XM")(S,s),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===S&&(e&&e._writableState instanceof w)}})):l=function(e){return e instanceof this},S.prototype.pipe=function(){E(this,new y)},S.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"===typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!==typeof n&&(n=x),o.ending?function(e,t){var n=new b;E(e,n),r.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var o;return null===n?o=new _:"string"===typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(E(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=u.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,s,r,i,o);return c}(this,o,s,e,t,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||P(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new O(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new v("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var i=this._writableState;return"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,L(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=f.destroy,S.prototype._undestroy=f.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this,n("yLpj"),n("8oxB"))},"3Cr/":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n("atKK");let i=r.a;function o(e){i=Object(r.b)(i,e)}function a(e){return i.deserialize(e)}function s(e){return i.serialize(e)}},"3DrS":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n("VmRL"),i=n.n(r);function o(e,t,n,r){for(var i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}function a(e,t,n,r){for(var i=t,o=n.length,a=0;a<o;a++)for(var s=0;s<r;s++)e[i++]=n[a][s]||0;if(!function(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(var u=0;u<r;u++)e[i++]=n[0][u]||0;return i}function s(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,s=(a=a||n.length)-i;if(s<=0)return t;for(var u=t,c=0;c<s;c++)e[u++]=n[i+c];if(!o(n,r,i,a))for(var l=0;l<r;l++)e[u++]=n[i+l];return u}function u(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);var n=[],r=[];if(e.positions){var i=e,o=i.positions,u=i.holeIndices;if(u){for(var c=0,l=0;l<=u.length;l++)c=s(n,c,o,t,u[l-1],u[l]),r.push(c);return r.pop(),{positions:n,holeIndices:r}}e=o}if(Number.isFinite(e[0]))return s(n,0,e,t),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){var f=0,h=!0,d=!1,p=void 0;try{for(var v,g=e[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){f=a(n,f,v.value,t),r.push(f)}}catch(y){d=!0,p=y}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}return r.pop(),{positions:n,holeIndices:r}}return a(n,0,e,t),n}function c(e,t,n){var r=null;e.holeIndices&&(r=e.holeIndices.map((function(e){return e/t})));var o=e.positions||e;if(n){var a=o.length;o=o.slice();for(var s=[],u=0;u<a;u+=t){s[0]=o[u],s[1]=o[u+1];var c=n(s);o[u]=c[0],o[u+1]=c[1]}}return i()(o,r,t)}},"3JDX":function(e,t,n){e.exports=function(e){function t(e){let n;function o(...e){if(!o.enabled)return;const r=o,i=Number(new Date),a=i-(n||i);r.diff=a,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;s++;const o=t.formatters[i];if("function"===typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n}),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=t.selectColor(e),o.destroy=r,o.extend=i,"function"===typeof t.init&&t.init(o),t.instances.push(o),o}function r(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function i(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("FGiv"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},4:function(e,t){},"43KI":function(e,t,n){(t=e.exports=n("rXFu")).Stream=t,t.Readable=t,t.Writable=n("3BRs"),t.Duplex=n("sZro"),t.Transform=n("J78i"),t.PassThrough=n("eA/Y"),t.finished=n("kDxh"),t.pipeline=n("XRzD")},"49sm":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"4JlD":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},"4abu":function(e,t,n){"use strict";const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+i+"$");t.isExist=function(e){return"undefined"!==typeof e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isName=function(e){const t=o.exec(e);return!(null===t||"undefined"===typeof t)},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=i},5:function(e,t){},"5lV4":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K7jV"),l=n("hZZG"),f=n("Zk56"),h=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(e){Object(s.a)(Object(a.a)(t.prototype),"setState",this).call(this,e),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(e){var t=e.info,n=t.object;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?Object.assign(t,{object:n.__source.object,index:n.__source.index}):t}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(e,t){var n=this.props._subLayerProps;return t&&t.length||n&&n[e]}},{key:"getSubLayerClass",value:function(e,t){var n=this.props._subLayerProps;return n&&n[e]&&n[e].type||t}},{key:"getSubLayerRow",value:function(e,t,n){return e.__source={parent:this,object:t,index:n},e}},{key:"getSubLayerAccessor",value:function(e){if("function"===typeof e){var t={data:this.props.data,target:[]};return function(n,r){return n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,r)}}return e}},{key:"getSubLayerProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.opacity,r=t.pickable,i=t.visible,o=t.parameters,a=t.getPolygonOffset,s=t.highlightedObjectIndex,u=t.autoHighlight,c=t.highlightColor,l=t.coordinateSystem,f=t.coordinateOrigin,h=t.wrapLongitude,d=t.positionFormat,p=t.modelMatrix,v=t.extensions,g=t._subLayerProps,y={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:u,highlightColor:c,coordinateSystem:l,coordinateOrigin:f,wrapLongitude:h,positionFormat:d,modelMatrix:p,extensions:v},m=g&&g[e.id],_=m&&m.updateTriggers,b=e.id||"sublayer";if(m){var O=this.constructor._propTypes;for(var E in m){var x=O[E];x&&"accessor"===x.type&&(m[E]=this.getSubLayerAccessor(m[E]))}}Object.assign(y,e,m,{id:"".concat(this.props.id,"-").concat(b),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers,_)});var w=!0,S=!1,T=void 0;try{for(var A,P=v[Symbol.iterator]();!(w=(A=P.next()).done);w=!0){var C=A.value,R=C.getSubLayerProps.call(this,C);R&&Object.assign(y,R,{updateTriggers:Object.assign(y.updateTriggers,R.updateTriggers)})}}catch(L){S=!0,T=L}finally{try{w||null==P.return||P.return()}finally{if(S)throw T}}return y}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers,t=!e||this.needsUpdate();t&&(e=this.renderLayers(),e=Object(f.b)(e,Boolean),this.internalState.subLayers=e),Object(l.a)("compositeLayer.renderLayers",this,t,e);var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.parent=this}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Object(s.a)(Object(a.a)(t.prototype),"isLoaded",this)&&this.getSubLayers().every((function(e){return e.isLoaded}))}}]),t}(c.a);h.layerName="CompositeLayer"},6:function(e,t){},"7tol":function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},"91Zk":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n("QPTa"),i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",o={name:"gouraud-lighting",dependencies:[r.a],vs:i,defines:{LIGHTING_VERTEX:1},getUniforms:c},a={name:"phong-lighting",dependencies:[r.a],fs:i,defines:{LIGHTING_FRAGMENT:1},getUniforms:c},s={};function u(e){var t=e.ambient,n=void 0===t?.35:t,r=e.diffuse,i=void 0===r?.6:r,o=e.shininess,a=void 0===o?32:o,s=e.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:i,lighting_uShininess:a,lighting_uSpecularColor:(void 0===s?[30,30,30]:s).map((function(e){return e/255}))}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!("material"in e))return{};var t=e.material;return t?u(t):{lighting_uEnabled:!1}}},"9peF":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("vpQ4"),i=n("1OyB"),o=n("md7G"),a=n("foSv"),s=n("Ji7U"),u=n("0i8A"),c=n("VdrS"),l=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),h=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),d=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),p={POSITION:{size:3,value:new Float32Array(f)},NORMAL:{size:3,value:new Float32Array(h)},TEXCOORD_0:{size:2,value:new Float32Array(d)}},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,s=void 0===n?Object(c.c)("cube-geometry"):n;return Object(o.a)(this,Object(a.a)(t).call(this,Object(r.a)({},e,{id:s,indices:{size:1,value:new Uint16Array(l)},attributes:Object(r.a)({},p,e.attributes)})))}return Object(s.a)(t,e),t}(u.a)},AHNb:function(e,t,n){"use strict";t.a={isWorkerRuntime:function(){const e="undefined"!==typeof self&&"undefined"!==typeof Window&&self instanceof Window;return!("undefined"===typeof self||!self.postMessage||e)},postMessageToMaster:function(e,t){self.postMessage(e,t)},subscribeToMasterMessages:function(e){const t=t=>{e(t.data)};return self.addEventListener("message",t),()=>{self.removeEventListener("message",t)}}}},AIJu:function(e,t,n){"use strict";var r={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};t.a={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){var n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;if(e.pickingHighlightColor){var i=Array.from(e.pickingHighlightColor,(function(e){return e/255}));Number.isFinite(i[3])||(i[3]=1),t.picking_uHighlightColor=i}return void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}}},Ab0Y:function(e,t,n){"use strict";n.r(t),n.d(t,"createSourceData",(function(){return _})),n.d(t,"initLayerStateFromSource",(function(){return O}));var r=n("o0o1"),i=n.n(r),o=n("HaE+"),a=n("ODXe"),s=n("KQm4"),u=n("QPfr"),c=n("ICJ1"),l=n("fdqv");function f(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n){var r=e.color,i=e.contrast_limits,o=e.visibility,a=e.name,s=e.colormap,u=void 0===s?"":s,c=e.opacity,f=void 0===c?1:c;return{loader:t,name:a,channel_axis:null,colors:[null!==r&&void 0!==r?r:l.a.white],names:["channel_0"],contrast_limits:[null!==i&&void 0!==i?i:[0,n]],visibilities:[null===o||void 0===o||o],defaults:{selection:Array(t.base.shape.length).fill(0),colormap:u,opacity:f}}}function p(e,t,n){for(var r=e.names,i=e.channel_axis,o=e.name,u=e.opacity,c=void 0===u?1:u,h=e.colormap,d=void 0===h?"":h,p=e.contrast_limits,v=e.visibilities,g=e.colors,y=t.base.shape[i],m=0,_=[p,v,r,g];m<_.length;m++){var b=_[m];if(b&&b.length!==y){var O=Object.keys({channelProp:b})[0];throw Error("channel_axis is length ".concat(y," and provided channel_axis property ").concat(O," is different size."))}}if(v||(v=y<=l.d?Array(y).fill(!0):[].concat(Object(s.a)(Array(l.d).fill(!0)),Object(s.a)(Array(y-l.d).fill(!1)))),!g)if(1==y)g=[l.a.white];else if(2==y)g=l.c;else if(3===y)g=l.e;else if(y<=l.d)g=l.b.slice(0,y);else{g=Array(y).fill(l.a.white);var E,x=f(v.flatMap((function(e,t){return e?t:[]})).entries());try{for(x.s();!(E=x.n()).done;){var w=Object(a.a)(E.value,2),S=w[0];g[w[1]]=l.b[S]}}catch(T){x.e(T)}finally{x.f()}}return{loader:t,name:o,channel_axis:i,colors:g,names:null!==r&&void 0!==r?r:Object(l.i)(y).map((function(e){return"channel_".concat(e)})),contrast_limits:null!==p&&void 0!==p?p:Array(y).fill([0,n]),visibilities:v,defaults:{selection:Array(t.base.shape.length).fill(0),colormap:d,opacity:c}}}function v(e,t,n){var r,i,o,a=e.name,s=e.opacity,u=void 0===s?1:s,c=e.colormap,l=void 0===c?"":c,f=t.rdefs,h=t.channels,d=null!==(r=f.defaultT)&&void 0!==r?r:0,p=null!==(i=f.defaultZ)&&void 0!==i?i:0,v=[],g=[],y=[],m=[];return h.forEach((function(e){v.push(e.color),g.push([e.window.start,e.window.end]),y.push(e.active),m.push(e.label)})),{loader:n,name:null!==(o=t.name)&&void 0!==o?o:a,channel_axis:1,colors:v,names:m,contrast_limits:g,visibilities:y,defaults:{selection:[d,0,p,0,0],colormap:l,opacity:u}}}function g(e){var t=e[0],n=t.chunks,r=t.shape,i=n.slice(-2),o=Object(a.a)(i,2),u=o[0],f=o[1],h=1===e.length||u!==f?t:e,d=[].concat(Object(s.a)(Object(l.i)(r.length-2)),["y","x"]).map((function(e){return{field:e}}));return new c.ZarrLoader({data:h,dimensions:d})}function y(e){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["0"],e.next=3,Object(l.f)(t,".zattrs");case 3:return"multiscales"in(r=e.sent)&&(o=r.multiscales[0].datasets,n=o.map((function(e){return e.path}))),a=n.map((function(e){return Object(u.openArray)({store:t,path:e})})),e.next=8,Promise.all(a);case 8:return s=e.sent,e.abrupt("return",{data:s,rootAttrs:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,s,f,h,m,_,b,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.source,f=Object(l.h)(o),e.next=4,f.containsItem(".zgroup");case 4:if(!e.sent){e.next=18;break}return e.prev=5,e.next=8,y(f);case 8:h=e.sent,a=h.data,s=h.rootAttrs,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),Error("Failed to open arrays in zarr.Group. Make sure group implements multiscales extension.");case 16:e.next=22;break;case 18:return e.next=20,Object(u.openArray)({store:f});case 20:e.t1=e.sent,a=[e.t1];case 22:if(m=g(a),_=m.base,(b=m.dtype)in c.DTYPE_VALUES){e.next=26;break}throw Error("Dtype not supported, must be u1, u2, u4, or f4");case 26:if(O="<f4"===b?1:c.DTYPE_VALUES[b].max,2!==_.shape.length&&(void 0!==t.channel_axis||(null===(n=s)||void 0===n?void 0:n.omero))){e.next=30;break}return e.abrupt("return",d(t,m,O));case 30:if(!Number.isInteger(t.channel_axis)){e.next=32;break}return e.abrupt("return",p(t,m,O));case 32:if(!(null===(r=s)||void 0===r?void 0:r.omero)){e.next=34;break}return e.abrupt("return",v(t,s.omero,m));case 34:throw Error("Failed to load image.");case 35:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function O(e,t){var n,r=e.loader,i=e.channel_axis,o=e.colors,a=e.visibilities,u=e.contrast_limits,h=e.defaults,d=h.selection,p=h.opacity,v=h.colormap,g=r.numLevels>1?c.MultiscaleImageLayer:c.ImageLayer,y=[],m=[],_=[],b=[],O=f(a.flatMap((function(e,t){return e?t:[]})));try{for(O.s();!(n=O.n()).done;){var E=n.value;if(Number.isInteger(i)){var x=Object(s.a)(d);x[i]=E,y.push(x)}else y.push(d);m.push(Object(l.g)(o[E])),_.push(u[E]),b.push(!0)}}catch(w){O.e(w)}finally{O.f()}return{Layer:g,layerProps:{id:t,loader:r,loaderSelection:y,colorValues:m,sliderValues:[].concat(_),contrastLimits:_,channelIsOn:b,opacity:p,colormap:v},on:!0}}},B8Yt:function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},B93f:function(e,t,n){"use strict";var r=n("DiGy");function i(e,t,n){if(3===e){var i=new r(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}e.exports=function(e,t){this.layers=e.readFields(i,{},t)}},B9OJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("rePB"),i=n("1OyB"),o=n("vuIU"),a=n("laie");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={id:"request-scheduler",throttleRequests:!0,maxRequests:6},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e),this.props=u(u({},c),t),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new a.a({id:t.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}return Object(o.a)(e,[{key:"scheduleRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var n={handle:e,getPriority:t},r=new Promise((function(e){return n.resolve=e,n}));return this.requestQueue.push(n),this.requestMap.set(e,r),this._issueNewRequests(),r}},{key:"_issueRequest",value:function(e){var t=this,n=e.handle,r=e.resolve,i=!1,o=function(){i||(i=!0,t.requestMap.delete(n),t.activeRequestCount--,t._issueNewRequests())};return this.activeRequestCount++,r?r({done:o}):Promise.resolve({done:o})}},{key:"_issueNewRequests",value:function(){var e=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return e._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var t=0;t<e;++t)if(this.requestQueue.length>0){var n=this.requestQueue.shift();this._issueRequest(n)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,t=0;t<e.length;++t){var n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort((function(e,t){return e.priority-t.priority}))}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}]),e}()},BQ9P:function(e,t,n){"use strict";var r=n("AIJu");t.a=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},r.a)},DbZ5:function(e,t,n){"use strict";var r=n("ybjB").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},DiGy:function(e,t,n){"use strict";var r=n("HfwV");function i(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){var t=null,n=e.readVarint()+e.pos;for(;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}e.exports=i,i.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,t,this.extent,this._keys,this._values)}},E1E9:function(e,t,n){"use strict";const r=n("4abu"),i=n("4abu").buildOptions,o=n("Y81X");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};t.defaultOptions=a;const s=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function u(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=l(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.parseTrueNumberOnly)),t}function c(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function l(e,t,n){if(t&&"string"===typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return r.isExist(e)?e:""}t.props=s;const f=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function h(e,t){if(!t.ignoreAttributes&&"string"===typeof e){e=e.replace(/\r?\n/g," ");const n=r.getAllMatches(e,f),i=n.length,o={};for(let e=0;e<i;e++){const r=c(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),o[t.attributeNamePrefix+r]=l(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+r]=!0))}if(!Object.keys(o).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=o,e}return o}}function d(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function p(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}t.getTraversalObj=function(e,t){e=e.replace(/(\r\n)|\n/," "),t=i(t,a,s);const n=new o("!xml");let c=n,l="";for(let i=0;i<e.length;i++){if("<"===e[i])if("/"===e[i+1]){const n=p(e,">",i,"Closing Tag is not closed.");let o=e.substring(i+2,n).trim();if(t.ignoreNameSpace){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1))}c&&(c.val?c.val=r.getValue(c.val)+""+u(o,l,t):c.val=u(o,l,t)),t.stopNodes.length&&t.stopNodes.includes(c.tagname)&&(c.child=[],void 0==c.attrsMap&&(c.attrsMap={}),c.val=e.substr(c.startIndex+1,i-c.startIndex-1)),c=c.parent,l="",i=n}else if("?"===e[i+1])i=p(e,"?>",i,"Pi Tag is not closed.");else if("!--"===e.substr(i+1,3))i=p(e,"--\x3e",i,"Comment is not closed.");else if("!D"===e.substr(i+1,2)){const t=p(e,">",i,"DOCTYPE is not closed.");i=e.substring(i,t).indexOf("[")>=0?e.indexOf("]>",i)+1:t}else if("!["===e.substr(i+1,2)){const n=p(e,"]]>",i,"CDATA is not closed.")-2,a=e.substring(i+9,n);if(l&&(c.val=r.getValue(c.val)+""+u(c.tagname,l,t),l=""),t.cdataTagName){const e=new o(t.cdataTagName,c,a);c.addChild(e),c.val=r.getValue(c.val)+t.cdataPositionChar,a&&(e.val=a)}else c.val=(c.val||"")+(a||"");i=n+2}else{const n=d(e,i+1);let a=n.data;const s=n.index,f=a.indexOf(" ");let p=a;if(-1!==f&&(p=a.substr(0,f).trimRight(),a=a.substr(f+1)),t.ignoreNameSpace){const e=p.indexOf(":");-1!==e&&(p=p.substr(e+1))}if(c&&l&&"!xml"!==c.tagname&&(c.val=r.getValue(c.val)+""+u(c.tagname,l,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===p[p.length-1]?(p=p.substr(0,p.length-1),a=p):a=a.substr(0,a.length-1);const e=new o(p,c,"");p!==a&&(e.attrsMap=h(a,t)),c.addChild(e)}else{const e=new o(p,c);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),p!==a&&(e.attrsMap=h(a,t)),c.addChild(e),c=e}l="",i=s}else l+=e[i]}return n}},EdPt:function(e,t,n){(function(t){var r=n("43KI").Transform,i=n("P7XM");function o(e){r.call(this,e),this._destroyed=!1}function a(e,t,n){n(null,e)}function s(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=a),"function"!=typeof r&&(r=null),e(t,n,r)}}i(o,r),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var n=this;t.nextTick((function(){e&&n.emit("error",e),n.emit("close")}))}},e.exports=s((function(e,t,n){var r=new o(e);return r._transform=t,n&&(r._flush=n),r})),e.exports.ctor=s((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=Object.assign({},e,t),o.call(this,this.options)}return i(r,o),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),e.exports.obj=s((function(e,t,n){var r=new o(Object.assign({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this,n("8oxB"))},FGiv:function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i,a=7*o,s=365.25*o;function u(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*a;case"days":case"day":case"d":return u*o;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return u(e,t,o,"day");if(t>=i)return u(e,t,i,"hour");if(t>=r)return u(e,t,r,"minute");if(t>=n)return u(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},FR1t:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("91Zk"),f=n("BQ9P"),h=n("K7jV"),d=n("ykdB"),p=n("0i8A"),v=[0,0,0,255],g=[0,0,1],y={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(e){return e.position}},getNormal:{type:"accessor",value:g},getColor:{type:"accessor",value:v},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};var m=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(e){return Object(s.a)(Object(a.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * radiusPixels, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:g},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:v}})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}i.dataChanged&&function(e){var t=e.header,n=e.attributes;t&&n&&(e.length=t.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}(n.data)}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.pointSize,o="meters"===r.sizeUnits?1/n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{radiusPixels:i*o})).draw()}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<3;n++){var r=n/3*Math.PI*2;t.push(2*Math.cos(r),2*Math.sin(r),0)}return new d.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new p.a({drawMode:4,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}))}}]),t}(h.a);m.layerName="PointCloudLayer",m.defaultProps=y},Ficz:function(e,t,n){"use strict";function r(e,t,n,r,a){!function e(t,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,u=n-r+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-u*l/s+f)),Math.min(o,Math.floor(n+(s-u)*l/s+f)),a)}var h=t[n],d=r,p=o;for(i(t,r,n),a(t[o],h)>0&&i(t,r,o);d<p;){for(i(t,d,p),d++,p--;a(t[d],h)<0;)d++;for(;a(t[p],h)>0;)p--}0===a(t[r],h)?i(t,r,p):i(t,++p,o),p<=n&&(r=p+1),n<=p&&(o=p-1)}}(e,t,n||0,r||e.length-1,a||o)}function i(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return e<t?-1:e>t?1:0}n.r(t),n.d(t,"default",(function(){return r}))},GA6j:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("1OyB"),i=n("md7G"),o=n("foSv"),a=n("vuIU"),s=n("Ji7U"),u=n("fxzv"),c=n("+H0l"),l=n("sSh/"),f=n("HwUG"),h=n("ZxFD"),d=n("n+fv"),p=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),g=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),y={},m=function(e){function t(e){var n;return Object(r.a)(this,t),n=Object(i.a)(this,Object(o.a)(t).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(e)?n.copy(e):n.identity(),n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return g}}],[{key:"IDENTITY",get:function(){return y.IDENTITY=y.IDENTITY||Object.freeze(new t(p)),y.IDENTITY}},{key:"ZERO",get:function(){return y.ZERO=y.ZERO||Object.freeze(new t(v)),y.ZERO}}]),Object(a.a)(t,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}},{key:"set",value:function(e,t,n,r,i,o,a,s,u){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this.check()}},{key:"setRowMajor",value:function(e,t,n,r,i,o,a,s,u){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=i,this[5]=s,this[6]=n,this[7]=o,this[8]=u,this.check()}},{key:"determinant",value:function(){return f.b(this)}},{key:"identity",value:function(){return this.copy(p)}},{key:"fromQuaternion",value:function(e){return f.c(this,e),this.check()}},{key:"transpose",value:function(){return f.i(this,this),this.check()}},{key:"invert",value:function(){return f.d(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return f.e(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return f.e(this,this,e),this.check()}},{key:"rotate",value:function(e){return f.f(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?f.g(this,this,e):f.g(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return f.h(this,this,e),this.check()}},{key:"transform",value:function(e,t){switch(e.length){case 2:t=h.i(t||[-0,-0],e,this);break;case 3:t=d.p(t||[-0,-0,-0],e,this);break;case 4:t=Object(l.d)(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(t,e.length),t}},{key:"transformVector",value:function(e,t){return Object(c.c)("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector2",value:function(e,t){return Object(c.c)("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector3",value:function(e,t){return Object(c.c)("Matrix3.transformVector"),this.transform(e,t)}}]),t}(u.a)},H7XF:function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),a=r[0],s=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},HDXh:function(e,t,n){"use strict";(function(e){var r=n("H7XF"),i=n("kVK+"),o=n("49sm");function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return V(U(t,e.length-n),e,n,r)}function O(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return O(e,t,n,r)}function x(e,t,n,r){return V(z(t),e,n,r)}function w(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"===typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=e.slice(t,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function k(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return o||k(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||k(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=u.isBuffer(e)?e:U(new u(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("yLpj"))},HfwV:function(e,t,n){"use strict";var r=n("xnQO");function i(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){var n=e.readVarint()+e.pos;for(;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function a(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,u=[];e.pos<n;){if(o<=0){var c=e.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&u.push(t),t=[]),t.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&u.push(t),u},i.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},i.prototype.toGeoJSON=function(e,t,n){var r,o,s=this.extent*Math.pow(2,n),u=this.extent*e,c=this.extent*t,l=this.loadGeometry(),f=i.types[this.type];function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/s;e[t]=[360*(n.x+u)/s-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(r=0;r<l.length;r++)d[r]=l[r][0];h(l=d);break;case 2:for(r=0;r<l.length;r++)h(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var s=a(e[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}n&&i.push(n);return i}(l),r=0;r<l.length;r++)for(o=0;o<l[r].length;o++)h(l[r][o])}1===l.length?l=l[0]:f="Multi"+f;var p={type:"Feature",geometry:{type:f,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p}},Im0j:function(e,t,n){"use strict";function r(e){for(var t=e.data,n=e.getIndex,r=e.dataRange,i=e.replace,o=r.startRow,a=void 0===o?0:o,s=r.endRow,u=void 0===s?1/0:s,c=t.length,l=c,f=c,h=0;h<c;h++){var d=n(t[h]);if(l>h&&d>=a&&(l=h),d>=u){f=h;break}}for(var p=l,v=f-l!==i.length,g=v&&t.slice(f),y=0;y<i.length;y++)t[p++]=i[y];if(v){for(var m=0;m<g.length;m++)t[p++]=g[m];t.length=p}return{startRow:l,endRow:l+i.length}}n.d(t,"a",(function(){return r}))},J78i:function(e,t,n){"use strict";e.exports=l;var r=n("ybjB").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n("sZro");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n("P7XM")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},K4gp:function(e,t,n){"use strict";var r=n("hJkN");t.a={name:"project32",dependencies:[r.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},KHNG:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("91Zk"),f=n("BQ9P"),h=n("V3d6"),d=n("K7jV"),p=n("d3kR"),v=n("tMmZ"),g=n("ykdB"),y=n("0i8A"),m=n("rePB"),_=n("3DrS"),b=n("xl5t"),O=n("cpv5");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x=function(e){function t(e){Object(r.a)(this,t);var n=e.fp64,i=e.IndexType,s=void 0===i?Uint32Array:i;return Object(o.a)(this,Object(a.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:s,size:1}}})))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"get",value:function(e){var t=this.attributes;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}},{key:"updateGeometry",value:function(e){Object(s.a)(Object(a.a)(t.prototype),"updateGeometry",this).call(this,e);var n=this.buffers.indices;n&&(this.vertexCount=(n.value||n).length)}},{key:"normalizeGeometry",value:function(e){if(this.normalize){if(e=_.b(e,this.positionSize),this.opts.resolution)return Object(O.a)(e.positions||e,e.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return Object(O.b)(e.positions||e,e.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return e}},{key:"getGeometrySize",value:function(e){if(Array.isArray(e)&&!Number.isFinite(e[0])){var t=0,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=this.getGeometrySize(s)}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}return(e.positions||e).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(e){return this.normalize||!this.buffers.indices?Object(s.a)(Object(a.a)(t.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"updateGeometryAttributes",value:function(e,t){if(Array.isArray(e)&&!Number.isFinite(e[0])){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=this.getGeometrySize(s);t.geometrySize=u,this.updateGeometryAttributes(s,t),t.vertexStart+=u,t.indexStart=this.indexStarts[t.geometryIndex+1]}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}else this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}},{key:"_updateIndices",value:function(e,t){var n=t.geometryIndex,r=t.vertexStart,i=t.indexStart,o=this.attributes,a=this.indexStarts,s=this.typedArrayManager,u=o.indices;if(u){var c=i,l=_.a(e,this.positionSize,this.opts.preproject);u=s.allocate(u,i+l.length,{copy:!0});for(var f=0;f<l.length;f++)u[c++]=l[f]+r;a[n+1]=i+l.length,o.indices=u}}},{key:"_updatePositions",value:function(e,t){var n=t.vertexStart,r=t.geometrySize,i=this.attributes.positions,o=this.positionSize;if(i)for(var a=e.positions||e,s=n,u=0;u<r;s++,u++){var c=a[u*o],l=a[u*o+1],f=o>2?a[u*o+2]:0;i[3*s]=c,i[3*s+1]=l,i[3*s+2]=f}}},{key:"_updateVertexValid",value:function(e,t){var n=t.vertexStart,r=t.geometrySize,i=this.attributes.vertexValid,o=this.positionSize,a=e&&e.holeIndices;if(e&&e.edgeTypes?i.set(e.edgeTypes,n):i.fill(1,n,n+r),a)for(var s=0;s<a.length;s++)i[n+a[s]/o-1]=0;i[n+r-1]=0}}]),t}(b.a),w="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n    \n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",S="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(w,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),T="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(w,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64Low = instancePositions64Low;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64Low = nextPositions64Low;\n\n  calculatePosition(props);\n}\n"),A=[0,0,0,255],P={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:A},getLineColor:{type:"accessor",value:A},material:!0},C={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},R=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(e){return Object(s.a)(Object(a.a)(t.prototype),"getShaders",this).call(this,{vs:e,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{},modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){var e=this,t=this.context,n=t.gl,r=t.viewport,i=this.props.coordinateSystem;r.isGeospatial&&i===h.a.DEFAULT&&(i=h.a.LNGLAT),this.setState({numInstances:0,polygonTesselator:new x({preproject:i===h.a.LNGLAT&&r.projectFlat,fp64:this.use64bitPositions(),IndexType:!n||Object(p.c)(n,v.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var o=this.getAttributeManager();o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:true},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:C,accessor:"getPolygon",update:this.calculatePositions,noAlloc:true,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:true},elevations:{size:1,transition:C,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:C,accessor:"getFillColor",defaultValue:A,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:C,accessor:"getLineColor",defaultValue:A,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(t&&t.__source?t.__source.index:r,i)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(e){var n=Object(s.a)(Object(a.a)(t.prototype),"getPickingInfo",this).call(this,e),r=n.index,i=this.props.data;return i[0]&&i[0].__source&&(n.object=i.find((function(e){return e.__source.index===r}))),n}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.extruded,i=n.filled,o=n.wireframe,a=n.elevationScale,s=this.state,u=s.topModel,c=s.sideModel,l=s.polygonTesselator,f=Object.assign({},t,{extruded:Boolean(r),elevationScale:a});c&&(c.setInstanceCount(l.instanceCount-1),c.setUniforms(f),o&&(c.setDrawMode(3),c.setUniforms({isWireframe:!0}).draw()),i&&(c.setDrawMode(6),c.setUniforms({isWireframe:!1}).draw())),u&&(u.setVertexCount(l.vertexCount),u.setUniforms(f).draw())}},{key:"updateState",value:function(e){Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var n=e.props,r=e.oldProps,i=e.changeFlags,o=this.getAttributeManager();(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded)&&(this.state.models&&this.state.models.forEach((function(e){return e.delete()})),this.setState(this._getModels(this.context.gl)),o.invalidateAll())}},{key:"updateGeometry",value:function(e){var t=e.props,n=(e.oldProps,e.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.state.polygonTesselator,i=t.data.attributes||{};r.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:r.instanceCount,startIndices:r.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(e){var t,n,r=this.props,i=r.id,o=r.filled,a=r.extruded;if(o){var s=this.getShaders(S);s.defines.NON_INSTANCED_MODEL=1,t=new g.a(e,Object.assign({},s,{id:"".concat(i,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return a&&((n=new g.a(e,Object.assign({},this.getShaders(T),{id:"".concat(i,"-side"),geometry:new y.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[n,t].filter(Boolean),topModel:t,sideModel:n}}},{key:"calculateIndices",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.indexStarts,e.value=t.get("indices")}},{key:"calculatePositions",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateVertexValid",value:function(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"wrapLongitude",get:function(){return!1}}]),t}(d.a);R.layerName="SolidPolygonLayer",R.defaultProps=P},KpGI:function(e,t,n){"use strict";n.r(t),n.d(t,"GreatCircleLayer",(function(){return f})),n.d(t,"S2Layer",(function(){return P})),n.d(t,"TileLayer",(function(){return $e})),n.d(t,"TripsLayer",(function(){return tt})),n.d(t,"H3ClusterLayer",(function(){return ot})),n.d(t,"H3HexagonLayer",(function(){return pt})),n.d(t,"Tile3DLayer",(function(){return ys})),n.d(t,"TerrainLayer",(function(){return Rs})),n.d(t,"MVTLayer",(function(){return tu}));var r={};n.r(r),n.d(r,"decode",(function(){return Fo})),n.d(r,"encode",(function(){return Bo}));var i={};n.r(i),n.d(i,"decode",(function(){return Xo})),n.d(i,"encode",(function(){return Zo}));var o={};n.r(o),n.d(o,"decode",(function(){return Jo})),n.d(o,"encode",(function(){return Qo}));var a={};n.r(a),n.d(a,"decode",(function(){return ta})),n.d(a,"encode",(function(){return na}));var s=n("1OyB"),u=n("md7G"),c=n("foSv"),l=n("Ji7U"),f=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(n("YKQg").a);f.layerName="GreatCircleLayer",f.defaultProps={getHeight:{type:"accessor",value:0},greatCircle:!0};var h=n("vuIU"),d=n("5lV4"),p=n("R1+Y"),v=n("ODXe"),g=n("yXba"),y=n.n(g),m=180/Math.PI;function _(e,t,n){var r=1<<t;return[(e[0]+n[0])/r,(e[1]+n[1])/r]}function b(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function O(e){return[b(e[0]),b(e[1])]}function E(e,t){var n=Object(v.a)(t,2),r=n[0],i=n[1];switch(e){case 0:return[1,r,i];case 1:return[-r,1,i];case 2:return[-r,-i,1];case 3:return[-1,-i,-r];case 4:return[i,-1,-r];case 5:return[i,r,-1];default:throw new Error("Invalid face")}}function x(e){var t=Object(v.a)(e,3),n=t[0],r=t[1],i=t[2],o=Math.atan2(i,Math.sqrt(n*n+r*r));return[Math.atan2(r,n)*m,o*m]}function w(e,t,n,r){if(0===r){1===n&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);var i=t[0];t[0]=t[1],t[1]=i}}function S(e){if("string"===typeof e){if(e.indexOf("/")>0)return e;e=function(e){var t=e.padEnd(16,"0");return y.a.fromString(t,16)}(e)}return function(e){for(var t=y.a.fromString(e,!0,10).toString(2);t.length<64;)t="0"+t;for(var n=t.lastIndexOf("1"),r=t.substring(0,3),i=t.substring(3,n),o=i.length/2,a=y.a.fromString(r,!0,2).toString(10),s=y.a.fromString(i,!0,2).toString(4);s.length<o;)s="0"+s;return"".concat(a,"/").concat(s)}(e.toString())}function T(e){return function(e){for(var t=e.face,n=e.ij,r=e.level,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],o=Math.max(1,Math.ceil(100*Math.pow(2,-r))),a=new Float64Array(4*o*2+2),s=0,u=0;u<4;u++)for(var c=i[u].slice(0),l=i[u+1],f=(l[0]-c[0])/o,h=(l[1]-c[1])/o,d=0;d<o;d++){c[0]+=f,c[1]+=h;var p=x(E(t,O(_(n,r,c))));a[s++]=p[0],a[s++]=p[1]}return a[s++]=a[0],a[s++]=a[1],a}(function(e){for(var t,n=e.split("/"),r=parseInt(n[0],10),i=n[1],o=i.length,a=[0,0],s=o-1;s>=0;s--){t=o-s;var u=i[s],c=0,l=0;"1"===u?l=1:"2"===u?(c=1,l=1):"3"===u&&(c=1);var f=Math.pow(2,t-1);w(f,a,c,l),a[0]+=f*c,a[1]+=f*l}if(r%2===1){var h=a[0];a[0]=a[1],a[1]=h}return{face:r,ij:a,level:t}}(S(e)))}var A=Object.assign({getS2Token:{type:"accessor",value:function(e){return e.token}}},p.a.defaultProps),P=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"renderLayers",value:function(){var e=this.props,t=e.data,n=e.getS2Token,r=this.props,i=r.elevationScale,o=r.extruded,a=r.wireframe,s=r.filled,u=r.stroked,c=r.lineWidthUnits,l=r.lineWidthScale,f=r.lineWidthMinPixels,h=r.lineWidthMaxPixels,d=r.lineJointRounded,v=r.lineMiterLimit,g=r.lineDashJustified,y=r.getElevation,m=r.getFillColor,_=r.getLineColor,b=r.getLineWidth,O=r.getLineDashArray,E=this.props,x=E.updateTriggers,w=E.material;return new(this.getSubLayerClass("cell",p.a))({filled:s,wireframe:a,extruded:o,elevationScale:i,stroked:u,lineWidthUnits:c,lineWidthScale:l,lineWidthMinPixels:f,lineWidthMaxPixels:h,lineJointRounded:d,lineMiterLimit:v,lineDashJustified:g,material:w,getElevation:y,getFillColor:m,getLineColor:_,getLineWidth:b,getLineDashArray:O},this.getSubLayerProps({id:"cell",updateTriggers:{getElevation:x.getElevation,getFillColor:x.getFillColor,getLineColor:x.getLineColor,getLineWidth:x.getLineWidth,getLineDashArray:x.getLineDashArray}}),{data:t,_normalize:!1,positionFormat:"XY",getPolygon:function(e,t){return T(n(e,t))}})}}]),t}(d.a);P.layerName="S2Layer",P.defaultProps=A;var C=n("Zk56"),R=n("cwYr"),L=n("o0o1"),I=n.n(L),M=n("HaE+"),j=n("Jh/b"),k=function(){function e(t){var n=t.x,r=t.y,i=t.z,o=t.onTileLoad,a=t.onTileError;Object(s.a)(this,e),this.x=n,this.y=r,this.z=i,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this._isCancelled=!1,this.onTileLoad=o,this.onTileError=a}return Object(h.a)(e,[{key:"_loadData",value:function(){var e=Object(M.a)(I.a.mark((function e(t,n){var r,i,o,a,s,u,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.x,i=this.y,o=this.z,a=this.bbox,e.next=3,n.scheduleRequest(this,(function(e){return e.isSelected?1:-1}));case 3:if(s=e.sent){e.next=7;break}return this._isCancelled=!0,e.abrupt("return");case 7:return this._isCancelled=!1,e.prev=8,e.next=11,t({x:r,y:i,z:o,bbox:a});case 11:u=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),c=e.t0||!0;case 17:return e.prev=17,s.done(),this._isLoaded=!0,e.finish(17);case 21:c?this.onTileError(c,this):(this.content=u,this.onTileLoad(this));case 22:case"end":return e.stop()}}),e,this,[[8,14,17,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(e,t){e&&(this._loader=this._loadData(e,t))}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isCancelled",get:function(){return this._isCancelled}},{key:"byteLength",get:function(){var e=this.content?this.content.byteLength:0;return Number.isFinite(e)||j.a.error("byteLength not defined in tile data")(),e}}]),e}(),N=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),F=n("zXfU"),D=new F.a,B=new F.a,U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(s.a)(this,e),r=r||D.copy(t).add(n).scale(.5),this.center=new F.a(r),this.halfDiagonal=new F.a(n).subtract(this.center),this.minimum=new F.a(t),this.maximum=new F.a(n)}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}},{key:"intersectPlane",value:function(e){var t=this.halfDiagonal,n=B.from(e.normal),r=t.x*Math.abs(n.x)+t.y*Math.abs(n.y)+t.z*Math.abs(n.z),i=this.center.dot(n)+e.distance;return i-r>0?N.INSIDE:i+r<0?N.OUTSIDE:N.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t,n=D.from(e).subtract(this.center),r=this.halfDiagonal,i=0;return(t=Math.abs(n.x)-r.x)>0&&(i+=t*t),(t=Math.abs(n.y)-r.y)>0&&(i+=t*t),(t=Math.abs(n.z)-r.z)>0&&(i+=t*t),i}}]),e}(),z=n("ZaHm"),V=new F.a,G=new F.a,H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(s.a)(this,e),this.radius=-0,this.center=new F.a,this.fromCenterRadius(t,n)}return Object(h.a)(e,[{key:"fromCenterRadius",value:function(e,t){return this.center.from(e),this.radius=t,this}},{key:"fromCornerPoints",value:function(e,t){return t=V.from(t),this.center=(new F.a).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}},{key:"clone",value:function(){return new e(this.center,this.radius)}},{key:"union",value:function(e){var t=this.center,n=this.radius,r=e.center,i=e.radius,o=V.copy(r).subtract(t),a=o.magnitude();if(n>=a+i)return this.clone();if(i>=a+n)return e.clone();var s=.5*(n+a+i);return G.copy(o).scale((-n+s)/a).add(t),this.center.copy(G),this.radius=s,this}},{key:"expand",value:function(e){var t=(e=V.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}},{key:"intersectPlane",value:function(e){var t=this.center,n=this.radius,r=e.normal.dot(t)+e.distance;return r<-n?N.OUTSIDE:r<n?N.INTERSECTING:N.INSIDE}},{key:"transform",value:function(e){this.center.transform(e);var t=z.e(V,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(e){return(e=V.from(e)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}}]),e}(),W=n("GA6j"),q=new F.a,X=new F.a,Z=new F.a,K=new F.a,Y=new F.a,J=new F.a,Q=new F.a,$=new F.a,ee=new F.a,te=new F.a,ne=0,re=1,ie=2,oe=3,ae=4,se=5,ue=6,ce=7,le=8,fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(s.a)(this,e),this.center=(new F.a).from(t),this.halfAxes=new W.a(n)}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.center,this.halfAxes)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}},{key:"getBoundingSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new H,t=this.halfAxes,n=t.getColumn(0,$),r=t.getColumn(1,ee),i=t.getColumn(2,te),o=q.copy(n).add(r).add(i);return e.center.copy(this.center),e.radius=o.magnitude(),e}},{key:"intersectPlane",value:function(e){var t=this.center,n=e.normal,r=this.halfAxes,i=n.x,o=n.y,a=n.z,s=Math.abs(i*r[ne]+o*r[re]+a*r[ie])+Math.abs(i*r[oe]+o*r[ae]+a*r[se])+Math.abs(i*r[ue]+o*r[ce]+a*r[le]),u=n.dot(t)+e.distance;return u<=-s?N.OUTSIDE:u>=s?N.INSIDE:N.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t=X.from(e).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,Z),i=n.getColumn(1,K),o=n.getColumn(2,Y),a=r.magnitude(),s=i.magnitude(),u=o.magnitude();r.normalize(),i.normalize(),o.normalize();var c,l=0;return(c=Math.abs(t.dot(r))-a)>0&&(l+=c*c),(c=Math.abs(t.dot(i))-s)>0&&(l+=c*c),(c=Math.abs(t.dot(o))-u)>0&&(l+=c*c),l}},{key:"computePlaneDistances",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=this.center,a=this.halfAxes,s=a.getColumn(0,Z),u=a.getColumn(1,K),c=a.getColumn(2,Y),l=J.copy(s).add(u).add(c).add(o),f=Q.copy(l).subtract(e),h=t.dot(f);return r=Math.min(h,r),i=Math.max(h,i),l.copy(o).add(s).add(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),l.copy(o).add(s).subtract(u).add(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),l.copy(o).add(s).subtract(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).add(u).add(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).add(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).subtract(u).add(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).subtract(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}},{key:"getTransform",value:function(){}}]),e}(),he=n("tS8E"),de=n("a3TU"),pe=new F.a,ve=new F.a,ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(s.a)(this,e),this.normal=new F.a,this.distance=-0,this.fromNormalDistance(t,n)}return Object(h.a)(e,[{key:"fromNormalDistance",value:function(e,t){return Object(he.a)(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}},{key:"fromPointNormal",value:function(e,t){e=pe.from(e),this.normal.from(t).normalize();var n=-this.normal.dot(e);return this.distance=n,this}},{key:"fromCoefficients",value:function(e,t,n,r){return this.normal.set(e,t,n),Object(he.a)(Object(de.d)(this.normal.len(),1)),this.distance=r,this}},{key:"clone",value:function(t){return new e(this.normal,this.distance)}},{key:"equals",value:function(e){return Object(de.d)(this.distance,e.distance)&&Object(de.d)(this.normal,e.normal)}},{key:"getPointDistance",value:function(e){return this.normal.dot(e)+this.distance}},{key:"transform",value:function(e){var t=ve.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,t)}},{key:"projectPointOntoPlane",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];e=pe.from(e);var n=this.getPointDistance(e),r=ve.copy(this.normal).scale(n);return e.subtract(r).to(t)}}]),e}(),ye=[new F.a([1,0,0]),new F.a([0,1,0]),new F.a([0,0,1])],me=new F.a,_e=new F.a,be=(new ge(new F.a(1,0,0),0),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(s.a)(this,e),this.planes=t,Object(he.a)(this.planes.every((function(e){return e instanceof ge})))}return Object(h.a)(e,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),Object(h.a)(e,[{key:"fromBoundingSphere",value:function(e){this.planes.length=2*ye.length;var t=e.center,n=e.radius,r=0,i=!0,o=!1,a=void 0;try{for(var s,u=ye[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=this.planes[r],f=this.planes[r+1];l||(l=this.planes[r]=new ge),f||(f=this.planes[r+1]=new ge);var h=me.copy(c).scale(-n).add(t);c.dot(h);l.fromPointNormal(h,c);var d=me.copy(c).scale(n).add(t),p=_e.copy(c).negate();p.dot(d);f.fromPointNormal(d,p),r+=2}}catch(v){o=!0,a=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return this}},{key:"computeVisibility",value:function(e){Object(he.a)(e);var t=N.INSIDE,n=!0,r=!1,i=void 0;try{for(var o,a=this.planes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;switch(e.intersectPlane(s)){case N.OUTSIDE:return N.OUTSIDE;case N.INTERSECTING:t=N.INTERSECTING}}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},{key:"computeVisibilityWithPlaneMask",value:function(t,n){if(Object(he.a)(t,"boundingVolume is required."),Object(he.a)(Number.isFinite(n),"parentPlaneMask is required."),n===e.MASK_OUTSIDE||n===e.MASK_INSIDE)return n;for(var r=e.MASK_INSIDE,i=this.planes,o=0;o<this.planes.length;++o){var a=o<31?1<<o:0;if(!(o<31&&0===(n&a))){var s=i[o],u=t.intersectPlane(s);if(u===N.OUTSIDE)return e.MASK_OUTSIDE;u===N.INTERSECTING&&(r|=a)}}return r}}]),e}()),Oe=n("rePB"),Ee=n("Nw31");function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(n,!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=new F.a,Te=new F.a,Ae=new F.a,Pe=new F.a,Ce=new F.a,Re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),t=we({near:1,far:5e8},t),this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=t.near,this._near=this.near,this.far=t.far,this._far=this.far,this._cullingVolume=new be([new ge,new ge,new ge,new ge,new ge,new ge]),this._perspectiveMatrix=new Ee.a,this._infinitePerspective=new Ee.a}return Object(h.a)(e,[{key:"clone",value:function(){return new e({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(t){return t&&t instanceof e&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far}},{key:"computeCullingVolume",value:function(e,t,n){Object(he.a)(e,"position is required."),Object(he.a)(t,"direction is required."),Object(he.a)(n,"up is required.");var r=this._cullingVolume.planes;n=Se.copy(n).normalize();var i=Te.copy(t).cross(n).normalize(),o=Ae.copy(t).multiplyByScalar(this.near).add(e),a=Pe.copy(t).multiplyByScalar(this.far).add(e),s=Ce;return s.copy(i).multiplyByScalar(this.left).add(o).subtract(e).cross(n),r[0].fromPointNormal(e,s),s.copy(i).multiplyByScalar(this.right).add(o).subtract(e).cross(n).negate(),r[1].fromPointNormal(e,s),s.copy(n).multiplyByScalar(this.bottom).add(o).subtract(e).cross(i).negate(),r[2].fromPointNormal(e,s),s.copy(n).multiplyByScalar(this.top).add(o).subtract(e).cross(i),r[3].fromPointNormal(e,s),s=(new F.a).copy(t),r[4].fromPointNormal(o,s),s.negate(),r[5].fromPointNormal(a,s),this._cullingVolume}},{key:"getPixelDimensions",value:function(e,t,n,r){Le(this),Object(he.a)(Number.isFinite(e)&&Number.isFinite(t)),Object(he.a)(e>0),Object(he.a)(t>0),Object(he.a)(n>0),Object(he.a)(r);var i=1/this.near,o=this.top*i,a=2*n*o/t,s=2*n*(o=this.right*i)/e;return r.x=s,r.y=a,r}},{key:"projectionMatrix",get:function(){return Le(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return Le(this),this._infinitePerspective}}]),e}();function Le(e){Object(he.a)(Number.isFinite(e.right)&&Number.isFinite(e.left)&&Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.near)&&Number.isFinite(e.far));var t=e.top,n=e.bottom,r=e.right,i=e.left,o=e.near,a=e.far;t===e._top&&n===e._bottom&&i===e._left&&r===e._right&&o===e._near&&a===e._far||(Object(he.a)(e.near>0&&e.near<e.far,"near must be greater than zero and less than far."),e._left=i,e._right=r,e._top=t,e._bottom=n,e._near=o,e._far=a,e._perspectiveMatrix=(new Ee.a).frustum({left:i,right:r,bottom:n,top:t,near:o,far:a}),e._infinitePerspective=(new Ee.a).frustum({left:i,right:r,bottom:n,top:t,near:o,far:1/0}))}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(n,!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),t=Me({near:1,far:5e8,xOffset:0,yOffset:0},t),this._offCenterFrustum=new Re,this.fov=t.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=t.aspectRatio,this._aspectRatio=void 0,this.near=t.near,this._near=this.near,this.far=t.far,this._far=this.far,this.xOffset=t.xOffset,this._xOffset=this.xOffset,this.yOffset=t.yOffset,this._yOffset=this.yOffset}Object(h.a)(e,[{key:"clone",value:function(){return new e({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(t){return null!==(n=t)&&"undefined"!==typeof n&&t instanceof e&&(je(this),je(t),this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this.near===t.near&&this.far===t.far&&this._offCenterFrustum.equals(t._offCenterFrustum));var n}},{key:"computeCullingVolume",value:function(e,t,n){return je(this),this._offCenterFrustum.computeCullingVolume(e,t,n)}},{key:"getPixelDimensions",value:function(e,t,n,r){return je(this),this._offCenterFrustum.getPixelDimensions(e,t,n,r)}},{key:"projectionMatrix",get:function(){return je(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return je(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return je(this),this._fovy}},{key:"sseDenominator",get:function(){return je(this),this._sseDenominator}}])}();function je(e){Object(he.a)(Number.isFinite(e.fov)&&Number.isFinite(e.aspectRatio)&&Number.isFinite(e.near)&&Number.isFinite(e.far));var t=e._offCenterFrustum;e.fov===e._fov&&e.aspectRatio===e._aspectRatio&&e.near===e._near&&e.far===e._far&&e.xOffset===e._xOffset&&e.yOffset===e._yOffset||(Object(he.a)(e.fov>=0&&e.fov<Math.PI),Object(he.a)(e.aspectRatio>0),Object(he.a)(e.near>=0&&e.near<e.far),e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset)}new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,new F.a,Math.PI;var ke=n("gOKY");new W.a,new W.a,new W.a,new W.a,new W.a;new F.a,new F.a,new F.a,new F.a,new F.a,new W.a,new W.a,new W.a;var Ne=function(){function e(t,n,r){Object(s.a)(this,e),this.x=t,this.y=n,this.z=r}return Object(h.a)(e,[{key:"update",value:function(e){var t=e.viewport,n=e.cullingVolume,r=e.elevationBounds,i=e.minZ,o=e.maxZ,a=e.offset,s=this.getBoundingVolume(r,a);if(n.computeVisibility(s)<0)return!1;if(!this.childVisible){var u=this.z;if(u<o&&u>=i){var c=s.distanceTo(t.cameraPosition)*t.scale/t.height;u+=Math.floor(Math.log2(c))}if(u>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var l=!0,f=!1,h=void 0;try{for(var d,p=this.children[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){d.value.update(e)}}catch(v){f=!0,h=v}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}return!0}},{key:"getSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&e.push(this),this._children){var t=!0,n=!1,r=void 0;try{for(var i,o=this._children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.getSelected(e)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}return e}},{key:"getBoundingVolume",value:function(e,t){var n=512/Math.pow(2,this.z),r=this.x*n+512*t,i=512-(this.y+1)*n;return new U([r,i,e[0]],[r+n,i+n,e[1]])}},{key:"children",get:function(){if(!this._children){var t=2*this.x,n=2*this.y,r=this.z+1;this._children=[new e(t,n,r),new e(t,n+1,r),new e(t+1,n,r),new e(t+1,n+1,r)]}return this._children}}]),e}();var Fe=[-1/0,-1/0,1/0,1/0],De={type:"url",value:"",validate:function(e){return"string"===typeof e||Array.isArray(e)&&e.every((function(e){return"string"===typeof e}))},equals:function(e,t){if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}};function Be(e,t){if(!e||!e.length)return null;Array.isArray(e)&&(e=e[Math.abs(t.x+t.y)%e.length]);return e.replace?e.replace(/\{ *([\w_-]+) *\}/g,(function(e,n){return t[n]})):null}function Ue(e,t){var n=Object(v.a)(e,2);return[n[0]*t/512,n[1]*t/512]}function ze(e){return Math.pow(2,e)}function Ve(e,t,n){var r=ze(n),i=e/r*360-180,o=Math.PI-2*Math.PI*t/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function Ge(e,t,n){var r=ze(n);return[e/r*512,t/r*512]}function He(e,t,n,r){if(e.isGeospatial){var i=Ve(t,n,r),o=Object(v.a)(i,2),a=o[0],s=o[1],u=Ve(t+1,n+1,r),c=Object(v.a)(u,2);return{west:a,north:s,east:c[0],south:c[1]}}var l=Ge(t,n,r),f=Object(v.a)(l,2),h=f[0],d=f[1],p=Ge(t+1,n+1,r),g=Object(v.a)(p,2);return{left:h,top:d,right:g[0],bottom:g[1]}}function We(e,t,n){for(var r=function(e,t,n){var r;if(t&&2===t.length){var i=Object(v.a)(t,2),o=i[0],a=i[1],s=e.getBounds({z:o}),u=e.getBounds({z:a});r=[Math.min(s[0],u[0]),Math.min(s[1],u[1]),Math.max(s[2],u[2]),Math.max(s[3],u[3])]}else r=e.getBounds();return[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]}(e,null,n),i=ze(t),o=Ue([r[0],r[1]],i),a=Object(v.a)(o,2),s=a[0],u=a[1],c=Ue([r[2],r[3]],i),l=Object(v.a)(c,2),f=l[0],h=l[1],d=[],p=Math.floor(s);p<f;p++)for(var g=Math.floor(u);g<h;g++)d.push({x:p,y:g,z:t});return d}function qe(e){var t=e.viewport,n=e.maxZoom,r=e.minZoom,i=e.zRange,o=e.extent,a=e.tileSize,s=void 0===a?512:a,u=Math.round(t.zoom+Math.log2(512/s));if(Number.isFinite(r)&&u<r){if(!o)return[];u=r}return Number.isFinite(n)&&u>n&&(u=n),t.isGeospatial?function(e,t,n){var r=Object.values(e.getFrustumPlanes()).map((function(e){var t=e.normal,n=e.distance;return new ge(t.clone().negate(),n)})),i=new be(r),o=e.distanceScales.unitsPerMeter[2],a=n&&n[0]*o||0,s=n&&n[1]*o||0,u=e.pitch<=60?t:0,c=new Ne(0,0,0),l={viewport:e,cullingVolume:i,elevationBounds:[a,s],minZ:u,maxZ:t,offset:0};if(c.update(l),e.subViewports&&e.subViewports.length>1){for(l.offset=-1;c.update(l)&&!(--l.offset<-3););for(l.offset=1;c.update(l)&&!(++l.offset>3););}return c.getSelected()}(t,u,i):We(t,u,o||Fe)}var Xe=n("B9OJ"),Ze=function(){function e(t){var n=this;Object(s.a)(this,e),this.opts=t,this._getTileData=t.getTileData,this.onTileError=t.onTileError,this.onTileLoad=function(e){t.onTileLoad(e),n.opts.maxCacheByteSize&&(n._cacheByteSize+=e.byteLength,n._resizeCache())},this._requestScheduler=new Xe.a({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(t)}return Object(h.a)(e,[{key:"setOptions",value:function(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.zRange;if(!e.equals(this._viewport)){this._viewport=e;var i=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r});this._selectedTiles=i.map((function(e){return t._getTile(e,!0)})),this._dirty&&this._rebuildTree()}var o=this.updateTileStates();return this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}},{key:"getTileIndices",value:function(e){var t=e.viewport,n=e.maxZoom,r=e.minZoom,i=e.zRange,o=this.opts;return qe({viewport:t,maxZoom:n,minZoom:r,zRange:i,tileSize:o.tileSize,extent:o.extent})}},{key:"getTileMetadata",value:function(e){var t=e.x,n=e.y,r=e.z;return{bbox:He(this._viewport,t,n,r)}}},{key:"getParentIndex",value:function(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}},{key:"updateTileStates",value:function(){this._updateTileStates(this.selectedTiles);var e=!1,t=!0,n=!1,r=void 0;try{for(var i,o=this._cache.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=Boolean(1&a.state);a.isVisible!==s&&(e=!0,a.isVisible=s),a.isSelected=5===a.state}}catch(u){n=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}},{key:"_rebuildTree",value:function(){var e=this._cache,t=!0,n=!1,r=void 0;try{for(var i,o=e.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.parent=null,a.children.length=0}}catch(p){n=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}var s=!0,u=!1,c=void 0;try{for(var l,f=e.values()[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=this._getNearestAncestor(h.x,h.y,h.z);h.parent=d,d&&d.children.push(h)}}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"_updateTileStates",value:function(e){var t=this._cache,n=this.opts.refinementStrategy||"best-available",r=!0,i=!1,o=void 0;try{for(var a,s=t.values()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.state=0}}catch(w){i=!0,o=w}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var u=!0,c=!1,l=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.state=5}}catch(w){c=!0,l=w}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}if("never"!==n){var d=!0,p=!1,v=void 0;try{for(var g,y=e[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){Ye(g.value,n)}}catch(w){p=!0,v=w}finally{try{d||null==y.return||y.return()}finally{if(p)throw v}}var m=!0,_=!1,b=void 0;try{for(var O,E=e[Symbol.iterator]();!(m=(O=E.next()).done);m=!0){var x=O.value;Ke(x)&&Je(x)}}catch(w){_=!0,b=w}finally{try{m||null==E.return||E.return()}finally{if(_)throw b}}}}},{key:"_resizeCache",value:function(){var e=this._cache,t=this.opts,n=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=t.maxCacheByteSize||1/0;if(e.size>n||this._cacheByteSize>r){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=Object(v.a)(s.value,2),l=c[0],f=c[1];if(f.isVisible||(this._cacheByteSize-=t.maxCacheByteSize?f.byteLength:0,e.delete(l)),e.size<=n&&this._cacheByteSize<=r)break}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((function(e,t){return e.z-t.z})),this._dirty=!1)}},{key:"_getTile",value:function(e,t){var n=e.x,r=e.y,i=e.z,o="".concat(n,",").concat(r,",").concat(i),a=this._cache.get(o);return!a&&t?(a=new k({x:n,y:r,z:i,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(a,this.getTileMetadata(a)),a.loadData(this._getTileData,this._requestScheduler),this._cache.set(o,a),this._dirty=!0):a&&a.isCancelled&&a.loadData(this._getTileData,this._requestScheduler),a}},{key:"_getNearestAncestor",value:function(e,t,n){for(var r=this._minZoom,i=void 0===r?0:r,o={x:e,y:t,z:n};o.z>i;){o=this.getParentIndex(o);var a=this._getTile(o);if(a)return a}return null}},{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles.every((function(e){return e.isLoaded}))}}]),e}();function Ke(e){for(var t=e;t;){if(!1&t.state)return!0;if(t.isLoaded)return!1;t=t.parent}return!0}function Ye(e,t){for(var n,r=3;n=e.parent;){if(e.isLoaded&&(r=4,"best-available"===t))return;n.state=Math.max(n.state,r),e=n}}function Je(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.state=Math.max(a.state,3),a.isLoaded||Je(a)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}var Qe={data:[],dataComparator:De.equals,renderSubLayers:{type:"function",value:function(e){return new R.a(e)},compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:function(e){},compare:!1},onTileError:{type:"function",value:function(e){return console.error(e)},compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:8},$e=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"initializeState",value:function(){this.state={tiles:[],isLoaded:!1}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,n=(e.oldProps,e.context,e.changeFlags),r=this.state.tileset;if(!r||n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getTileData)){var i=t.maxZoom,o=t.minZoom,a=t.tileSize,s=t.maxCacheSize,u=t.maxCacheByteSize,c=t.refinementStrategy,l=t.extent,f=t.maxRequests;r=new Ze({getTileData:this.getTileData.bind(this),maxCacheSize:s,maxCacheByteSize:u,maxZoom:i,minZoom:o,tileSize:a,refinementStrategy:c,extent:l,onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),maxRequests:f}),this.setState({tileset:r})}else(n.propsChanged||n.updateTriggersChanged)&&(r.setOptions(t),this.state.tileset.tiles.forEach((function(e){e.layers=null})));this._updateTileset()}},{key:"_updateTileset",value:function(){var e=this.state.tileset,t=this.props,n=t.onViewportLoad,r=t.zRange,i=e.update(this.context.viewport,{zRange:r}),o=e.isLoaded,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&n&&(a||s)&&n(e.selectedTiles.map((function(e){return e.data}))),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}},{key:"_onTileLoad",value:function(e){this.getCurrentLayer().props.onTileLoad(e),e.isVisible&&this.setNeedsUpdate()}},{key:"_onTileError",value:function(e,t){var n=this.getCurrentLayer();n.props.onTileError(e),n._updateTileset(),t.isVisible&&this.setNeedsUpdate()}},{key:"getTileData",value:function(e){var t=this.props.data,n=this.getCurrentLayer().props,r=n.getTileData,i=n.fetch;return e.url=Be(t,e),r?r(e):e.url?i(e.url,{layer:this}):null}},{key:"renderSubLayers",value:function(e){return this.props.renderSubLayers(e)}},{key:"getHighlightedObjectIndex",value:function(){return-1}},{key:"getPickingInfo",value:function(e){var t=e.info,n=e.sourceLayer;return t.sourceLayer=n,t.tile=n.props.tile,t}},{key:"renderLayers",value:function(){var e=this,t=this.props.visible;return this.state.tileset.tiles.map((function(n){var r=t&&n.isVisible,i=e.getHighlightedObjectIndex(n);if(n.isLoaded)if(n.layers)!n.layers[0]||n.layers[0].props.visible===r&&n.layers[0].props.highlightedObjectIndex===i||(n.layers=n.layers.map((function(e){return e.clone({visible:r,highlightedObjectIndex:i})})));else{var o=e.renderSubLayers(Object.assign({},e.props,{id:"".concat(e.id,"-").concat(n.x,"-").concat(n.y,"-").concat(n.z),data:n.data,visible:r,_offset:0,tile:n,highlightedObjectIndex:i}));n.layers=Object(C.b)(o,Boolean)}else;return n.layers}))}},{key:"isLoaded",get:function(){return this.state.tileset.selectedTiles.every((function(e){return e.layers&&e.layers.every((function(e){return e.isLoaded}))}))}}]),t}(d.a);$e.layerName="TileLayer",$e.defaultProps=Qe;var et=n("ReuC"),tt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"getShaders",value:function(){var e=Object(et.a)(Object(c.a)(t.prototype),"getShaders",this).call(this);return e.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || vTime < currentTime - trailLength) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"color.a *= 1.0 - (currentTime - vTime) / trailLength;"},e}},{key:"initializeState",value:function(e){Object(et.a)(Object(c.a)(t.prototype),"initializeState",this).call(this,e),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(e){var n=this.props,r=n.trailLength,i=n.currentTime;e.uniforms=Object.assign({},e.uniforms,{trailLength:r,currentTime:i}),Object(et.a)(Object(c.a)(t.prototype),"draw",this).call(this,e)}}]),t}(n("ctuC").a);tt.layerName="TripsLayer",tt.defaultProps={trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:null}};var nt=n("914O"),rt=n("rpwb"),it=Object.assign({getHexagons:{type:"accessor",value:function(e){return e.hexagons}}},p.a.defaultProps),ot=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"updateState",value:function(e){var t=e.props,n=(e.oldProps,e.changeFlags);if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagons){var r=t.data,i=t.getHexagons,o=[],a=Object(rt.a)(r),s=a.iterable,u=a.objectInfo,c=!0,l=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;u.index++;var v=i(p,u),g=Object(nt.g)(v,!0),y=!0,m=!1,_=void 0;try{for(var b,O=g[Symbol.iterator]();!(y=(b=O.next()).done);y=!0){var E=b.value;o.push(this.getSubLayerRow({polygon:E},p,u.index))}}catch(x){m=!0,_=x}finally{try{y||null==O.return||O.return()}finally{if(m)throw _}}}}catch(x){l=!0,f=x}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}this.setState({polygons:o})}}},{key:"renderLayers",value:function(){var e=this.props,t=e.elevationScale,n=e.extruded,r=e.wireframe,i=e.filled,o=e.stroked,a=e.lineWidthScale,s=e.lineWidthMinPixels,u=e.lineWidthMaxPixels,c=e.lineJointRounded,l=e.lineMiterLimit,f=e.lineDashJustified,h=e.material,d=e.getFillColor,v=e.getLineColor,g=e.getLineWidth,y=e.getLineDashArray,m=e.getElevation,_=e.updateTriggers;return new(this.getSubLayerClass("cluster-region",p.a))({filled:i,wireframe:r,extruded:n,elevationScale:t,stroked:o,lineWidthScale:a,lineWidthMinPixels:s,lineWidthMaxPixels:u,lineJointRounded:c,lineMiterLimit:l,lineDashJustified:f,material:h,getFillColor:this.getSubLayerAccessor(d),getLineColor:this.getSubLayerAccessor(v),getLineWidth:this.getSubLayerAccessor(g),getLineDashArray:this.getSubLayerAccessor(y),getElevation:this.getSubLayerAccessor(m)},this.getSubLayerProps({id:"cluster-region",updateTriggers:_}),{data:this.state.polygons,getPolygon:function(e){return e.polygon}})}}]),t}(d.a);ot.defaultProps=it,ot.layerName="H3ClusterLayer";var at=n("U8pU"),st=n("c9N0"),ut=n("XQ+Y");function ct(e,t){t=void 0===t?e[0][0]:t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s[0]-t;u>180?s[0]-=360:u<-180&&(s[0]+=360)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}function lt(e,t,n){var r=Object(nt.h)(e),i=Object(v.a)(r,2),o=i[0],a=i[1],s=t.length;ct(t,a);for(var u=t[0]===t[s-1]?s-1:s,c=0;c<u;c++)t[c][0]=Object(st.h)(a,t[c][0],n),t[c][1]=Object(st.h)(o,t[c][1],n)}function ft(e,t,n){var r=e(t,n),i=Object(nt.h)(r),o=Object(v.a)(i,2),a=o[0];return[o[1],a]}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=Object(nt.i)(e,!0);if(1!==t?lt(e,r,t):ct(r),n){var i=new Float64Array(2*r.length),o=0,a=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;i[o++]=f[0],i[o++]=f[1]}}catch(h){s=!0,u=h}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return i}return r}var dt=Object.assign({},p.a.defaultProps,{highPrecision:!1,coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:function(e){return e.hexagon}},extruded:!0});delete dt.getLineDashArray;var pt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"shouldUpdateState",value:function(e){var t=e.changeFlags;return this._shouldUseHighPrecision()?t.propsOrDataChanged:t.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,n=(e.oldProps,e.changeFlags);if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagon){var r=-1,i=!1,o=!1,a=Object(rt.a)(t.data),s=a.iterable,u=a.objectInfo,c=!0,l=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;u.index++;var v=t.getHexagon(p,u),g=Object(nt.e)(v);if(r<0)r=g;else if(r!==g){o=!0;break}if(Object(nt.f)(v)){i=!0;break}}}catch(y){l=!0,f=y}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}this.setState({resolution:r,edgeLengthKM:r>=0?Object(nt.b)(r,nt.a.km):0,hasMultipleRes:o,hasPentagon:i})}this._updateVertices(this.context.viewport)}},{key:"_shouldUseHighPrecision",value:function(){var e=this.state,t=e.resolution,n=e.hasPentagon,r=e.hasMultipleRes;return this.props.highPrecision||r||n||t>=0&&t<=5}},{key:"_updateVertices",value:function(e){if(!this._shouldUseHighPrecision()){var t=this.state,n=t.resolution,r=t.edgeLengthKM,i=t.centerHex;if(!(n<0)){var o=this.props.centerHexagon||Object(nt.c)(e.latitude,e.longitude,n);if(i!==o){if(i){var a=Object(nt.d)(i,o);if(a>=0&&a*r<10)return}var s=e.distanceScales.unitsPerMeter,u=ht(o),c=Object(nt.h)(o),l=Object(v.a)(c,2),f=l[0],h=l[1],d=e.projectFlat([h,f]),p=Object(v.a)(d,2),g=p[0],y=p[1];u=u.map((function(t){var n=e.projectFlat(t);return n[0]=(n[0]-g)/s[0],n[1]=(n[1]-y)/s[1],n})),this.setState({centerHex:o,vertices:u})}}}}},{key:"renderLayers",value:function(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}},{key:"_getForwardProps",value:function(){var e=this.props,t=e.elevationScale,n=e.material,r=e.coverage,i=e.extruded,o=e.wireframe,a=e.stroked,s=e.filled,u=e.lineWidthUnits,c=e.lineWidthScale,l=e.lineWidthMinPixels,f=e.lineWidthMaxPixels,h=e.getFillColor,d=e.getElevation,p=e.getLineColor,v=e.getLineWidth,g=e.updateTriggers;return{elevationScale:t,extruded:i,coverage:r,wireframe:o,stroked:a,filled:s,lineWidthUnits:u,lineWidthScale:c,lineWidthMinPixels:l,lineWidthMaxPixels:f,material:n,getElevation:d,getFillColor:h,getLineColor:p,getLineWidth:v,updateTriggers:{getFillColor:g.getFillColor,getElevation:g.getElevation,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}}},{key:"_renderPolygonLayer",value:function(){var e=this.props,t=e.data,n=e.getHexagon,r=e.updateTriggers,i=e.coverage,o=this.getSubLayerClass("hexagon-cell-hifi",p.a),a=this._getForwardProps();return a.updateTriggers.getPolygon=function(e,t){return void 0===e||null===e?t:"object"===Object(at.a)(e)?Object.assign({},e,{coverage:t}):{getHexagon:e,coverage:t}}(r.getHexagon,i),new o(a,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:a.updateTriggers}),{data:t,_normalize:!1,positionFormat:"XY",getPolygon:function(e,t){return ht(n(e,t),i,!0)}})}},{key:"_renderColumnLayer",value:function(){var e=this.props,t=e.data,n=e.getHexagon,r=e.updateTriggers,i=this.getSubLayerClass("hexagon-cell",ut.a),o=this._getForwardProps();return o.updateTriggers.getPosition=r.getHexagon,new i(o,this.getSubLayerProps({id:"hexagon-cell",updateTriggers:o.updateTriggers}),{data:t,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:ft.bind(null,n)})}}]),t}(d.a);pt.defaultProps=dt,pt.layerName="H3HexagonLayer";var vt=n("0i8A"),gt=n("V3d6"),yt=n("FR1t"),mt=n("K4gp"),_t=n("BQ9P"),bt=n("K7jV"),Ot=n("iein"),Et=n("+Jdq"),xt=n("VdrS"),wt=n("CxzY"),St=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e);var n=t.id;this.id=n||Object(xt.c)(this.constructor.name),this.display=!0,this.position=new st.d,this.rotation=new st.d,this.scale=new st.d(1,1,1),this.matrix=new st.a,this.userData={},this.props={},this._setScenegraphNodeProps(t)}return Object(h.a)(e,[{key:"delete",value:function(){}},{key:"setProps",value:function(e){return this._setScenegraphNodeProps(e),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(e){return Object(wt.a)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return Object(wt.a)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return Object(wt.a)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrix",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?this.matrix.copy(e):this.matrix=e}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,r=e.scale,i=e.update,o=void 0===i||i;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){Object(wt.a)(e),t=t||this.matrix;var n=new st.a(e).multiplyRight(t),r=n.invert(),i=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"_setScenegraphNodeProps",value:function(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}]),e}(),Tt=n("sc/6"),At=n("T2Hy"),Pt=n("KQm4"),Ct=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t);var r=n=Array.isArray(n)?{children:n}:n,i=r.children,o=void 0===i?[]:i;return Ot.h.assert(o.every((function(e){return e instanceof St})),"every child must an instance of ScenegraphNode"),(e=Object(u.a)(this,Object(c.a)(t).call(this,n))).children=o,e}return Object(l.a)(t,e),Object(h.a)(t,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];Array.isArray(o)?this.add.apply(this,Object(Pt.a)(o)):this.children.push(o)}return this}},{key:"remove",value:function(e){var t=this.children,n=t.indexOf(e);return n>-1&&t.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach((function(e){return e.delete()})),this.removeAll(),Object(et.a)(Object(c.a)(t.prototype),"delete",this).call(this)}},{key:"traverse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.worldMatrix,i=void 0===r?new st.a:r,o=new st.a(i).multiplyRight(this.matrix),a=!0,s=!1,u=void 0;try{for(var c,l=this.children[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;f instanceof t?f.traverse(e,{worldMatrix:o}):e(f,{worldMatrix:o})}}catch(h){s=!0,u=h}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}}]),t}(St),Rt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Lt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function It(e){if(!e._animation){var t=Lt[e.componentType],n=Rt[e.type],r=n*e.count,i=e.bufferView.data,o=new t(i.buffer,i.byteOffset+(e.byteOffset||0),r);if(1===n)e._animation=Array.from(o);else{for(var a=[],s=0;s<o.length;s+=n)a.push(Array.from(o.slice(s,s+n)));e._animation=a}}return e._animation}var Mt=new st.a;var jt=new st.b;function kt(e,t,n,r){var i=t.input,o=t.interpolation,a=t.output,s=e%i[i.length-1],u=i.findIndex((function(e){return e>=s})),c=Math.max(0,u-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:Ot.h.warn("Bad animation path ".concat(r))()}Object(wt.a)(n[r].length===a[c].length);var l=i[c],f=i[u];switch(o){case"STEP":!function(e,t,n){for(var r=0;r<n.length;r++)e[t][r]=n[r]}(n,r,a[c]);break;case"LINEAR":if(f>l){var h=(s-l)/(f-l);!function(e,t,n,r,i){if("rotation"===t){jt.slerp({start:n,target:r,ratio:i});for(var o=0;o<jt.length;o++)e[t][o]=jt[o]}else for(var a=0;a<n.length;a++)e[t][a]=i*r[a]+(1-i)*n[a]}(n,r,a[c],a[u],h)}break;case"CUBICSPLINE":if(f>l){var d=(s-l)/(f-l),p=f-l;!function(e,t,n){for(var r=n.p0,i=n.outTangent0,o=n.inTangent1,a=n.p1,s=n.tDiff,u=n.ratio,c=0;c<e[t].length;c++){var l=i[c]*s,f=o[c]*s;e[t][c]=(2*Math.pow(u,3)-3*Math.pow(u,2)+1)*r[c]+(Math.pow(u,3)-2*Math.pow(u,2)+u)*l+(-2*Math.pow(u,3)+3*Math.pow(u,2))*a[c]+(Math.pow(u,3)-Math.pow(u,2))*f}}(n,r,{p0:a[3*c+1],outTangent0:a[3*c+2],inTangent1:a[3*u+0],p1:a[3*u+1],tDiff:p,ratio:d})}break;default:Ot.h.warn("Interpolation ".concat(o," not supported"))()}}var Nt=function(){function e(t){Object(s.a)(this,e),this.startTime=0,this.playing=!0,this.speed=1,Object.assign(this,t)}return Object(h.a)(e,[{key:"animate",value:function(e){if(this.playing){var t=(e/1e3-this.startTime)*this.speed;this.channels.forEach((function(e){var n=e.sampler,r=e.target,i=e.path;kt(t,n,r,i),function(e,t){if(t.matrix.identity(),e.translation&&t.matrix.translate(e.translation),e.rotation){var n=Mt.fromQuaternion(e.rotation);t.matrix.multiplyRight(n)}e.scale&&t.matrix.scale(e.scale)}(r,r._node)}))}}}]),e}(),Ft=function(){function e(t){Object(s.a)(this,e),this.animations=t.animations.map((function(e,n){var r=e.name||"Animation-".concat(n),i=e.samplers.map((function(e){var n=e.input,r=e.interpolation,i=void 0===r?"LINEAR":r,o=e.output;return{input:It(t.accessors[n]),interpolation:i,output:It(t.accessors[o])}})),o=e.channels.map((function(e){var n=e.sampler,r=e.target;return{sampler:i[n],target:t.nodes[r.node],path:r.path}}));return new Nt({name:r,channels:o})}))}return Object(h.a)(e,[{key:"animate",value:function(e){this.setTime(e)}},{key:"setTime",value:function(e){this.animations.forEach((function(t){return t.animate(e)}))}},{key:"getAnimations",value:function(){return this.animations}}]),e}(),Dt=n("ykdB"),Bt=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,r))).onBeforeRender=null,n.AfterRender=null,e instanceof Dt.a?(n.model=e,n._setModelNodeProps(r)):n.model=new Dt.a(e,r),n.managedResources=r.managedResources||[],n}return Object(l.a)(t,e),Object(h.a)(t,[{key:"setProps",value:function(e){return Object(et.a)(Object(c.a)(t.prototype),"setProps",this).call(this,e),this._setModelNodeProps(e),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((function(e){return e.delete()})),this.managedResources=[]}},{key:"draw",value:function(){var e;return(e=this.model).draw.apply(e,arguments)}},{key:"setUniforms",value:function(){var e;return(e=this.model).setUniforms.apply(e,arguments),this}},{key:"setAttributes",value:function(){var e;return(e=this.model).setAttributes.apply(e,arguments),this}},{key:"updateModuleSettings",value:function(){var e;return(e=this.model).updateModuleSettings.apply(e,arguments),this}},{key:"_setModelNodeProps",value:function(e){this.model.setProps(e)}}]),t}(St),Ut=n("d3kR"),zt=n("tMmZ"),Vt=n("f5Sf"),Gt=function(){function e(t,n){var r=n.attributes,i=n.material,o=n.pbrDebug,a=n.imageBasedLightingEnvironment,u=n.lights,c=n.useTangents;Object(s.a)(this,e),this.gl=t,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Object(Ut.b)(t,zt.a.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],a&&(this.uniforms.u_DiffuseEnvSampler=a.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=a.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=a.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(a,"USE_IBL"),this.defineIfPresent(u,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),i&&this.parseMaterial(i)}return Object(h.a)(e,[{key:"defineIfPresent",value:function(e,t){e&&(this.defines[t]=1)}},{key:"parseTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},i=new Vt.a(this.gl,{id:e.name||e.id,parameters:r,pixelStore:Object(Oe.a)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1),data:e.texture.source.image});this.uniforms[t]=i,this.defineIfPresent(n,n),this.generatedTextures.push(i)}},{key:"parsePbrMetallicRoughness",value:function(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var t=e.metallicFactor,n=void 0===t?1:t,r=e.roughnessFactor,i=void 0===r?1:r;this.uniforms.u_MetallicRoughnessValues=[n,i]}},{key:"parseMaterial",value:function(e){if(e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var t=e.normalTexture.scale,n=void 0===t?1:t;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var r=e.occlusionTexture.strength,i=void 0===r?1:r;this.uniforms.u_OcclusionStrength=i}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){var o=e.alphaCutoff,a=void 0===o?.5:o;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=a}else"BLEND"===e.alphaMode&&(Ot.h.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}]),e}();function Ht(e,t){return Object(Ot.g)(e)?"#version 300 es\n".concat(t):t}var Wt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qt={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},Xt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,e),this.gl=t,this.options=Object.assign({},qt,n)}return Object(h.a)(e,[{key:"instantiate",value:function(e){var t=this;return this.gltf=e,(e.scenes||[]).map((function(e){return t.createScene(e)}))}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new Ft(this.gltf):null}},{key:"createScene",value:function(e){var t=this,n=(e.nodes||[]).map((function(e){return t.createNode(e)}));return new Ct({id:e.name||e.id,children:n})}},{key:"createNode",value:function(e){var t=this;if(!e._node){var n=(e.children||[]).map((function(e){return t.createNode(e)}));e.mesh&&n.push(this.createMesh(e.mesh));var r=new Ct({id:e.name||e.id,children:n});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){var i=(new st.a).fromQuaternion(e.rotation);r.matrix.multiplyRight(i)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}},{key:"createMesh",value:function(e){var t=this;if(!e._mesh){var n=(e.primitives||[]).map((function(n,r){return t.createPrimitive(n,r,e)})),r=new Ct({id:e.name||e.id,children:n});e._mesh=r}return e._mesh}},{key:"getVertexCount",value:function(e){Ot.h.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(e,t,n){return function(e,t){var n=t.id,r=t.drawMode,i=t.vertexCount,o=t.attributes,a=t.modelOptions,s=new Gt(e,t);Ot.h.info(4,"createGLTFModel defines: ",s.defines)();var u=[];u.push.apply(u,Object(Pt.a)(s.generatedTextures)),u.push.apply(u,Object(Pt.a)(Object.values(o).map((function(e){return e.buffer}))));var c=new Bt(e,Object.assign({id:n,drawMode:r,vertexCount:i,modules:[Et.a],defines:s.defines,parameters:s.parameters,vs:Ht(e,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:Ht(e,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:u},a));return c.setProps({attributes:o}),c.setUniforms(s.uniforms),c}(this.gl,Object.assign({id:e.name||"".concat(n.name||n.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}},{key:"createAttributes",value:function(e,t){var n=this,r={};return Object.keys(e).forEach((function(t){r[t]=n.createAccessor(e[t],n.createBuffer(e[t],n.gl.ARRAY_BUFFER))})),t&&(r.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),Ot.h.info(4,"glTF Attributes",{attributes:e,indices:t,generated:r})(),r}},{key:"createBuffer",value:function(e,t){e.bufferView||(e.bufferView={});var n=e.bufferView;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[t]||(n.lumaBuffers[t]=new Tt.a(this.gl,{id:"from-".concat(n.id),data:n.data||e.value,target:t})),n.lumaBuffers[t]}},{key:"createAccessor",value:function(e,t){return new At.a({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Wt[e.type]})}},{key:"createSampler",value:function(e){return e}},{key:"needsPOT",value:function(){return!1}}]),e}();function Zt(){return(Zt=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.scenes.forEach((function(e){e.traverse((function(e){Object.values(e.model.getUniforms()).forEach((function(e){!1===e.loaded&&n.push(e)}))}))})),e.next=4,Kt((function(){return n.some((function(e){return!e.loaded}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(M.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t()){e.next=5;break}return e.next=3,new Promise((function(e){return requestAnimationFrame(e)}));case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jt=Math.PI/180,Qt=new Float32Array(16),$t=new Float32Array(12);function en(e,t,n){var r=t[0]*Jt,i=t[1]*Jt,o=t[2]*Jt,a=Math.sin(o),s=Math.sin(r),u=Math.sin(i),c=Math.cos(o),l=Math.cos(r),f=Math.cos(i),h=n[0],d=n[1],p=n[2];e[0]=h*f*l,e[1]=h*u*l,e[2]=h*-s,e[3]=d*(-u*c+f*s*a),e[4]=d*(f*c+u*s*a),e[5]=d*l*a,e[6]=p*(u*a+f*s*c),e[7]=p*(-f*a+u*s*c),e[8]=p*l*c}function tn(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}var nn={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(e,t){var n=t.startRow,r=t.endRow,i=this.props,o=i.data,a=i.getOrientation,s=i.getScale,u=i.getTranslation,c=i.getTransformMatrix,l=Array.isArray(c),f=l&&16===c.length,h=Array.isArray(s),d=Array.isArray(a),p=Array.isArray(u),v=f||!l&&Boolean(c(o[0]));e.constant=v?f:d&&h&&p;var g=e.value;if(e.constant){var y;if(v)Qt.set(c),y=tn(Qt);else en(y=$t,a,s),y.set(u,9);e.value=new Float32Array(y)}else{var m=n*e.size,_=Object(rt.a)(o,n,r),b=_.iterable,O=_.objectInfo,E=!0,x=!1,w=void 0;try{for(var S,T=b[Symbol.iterator]();!(E=(S=T.next()).done);E=!0){var A=S.value;O.index++;var P=void 0;if(v)Qt.set(f?c:c(A,O)),P=tn(Qt);else en(P=$t,d?a:a(A,O),h?s:s(A,O)),P.set(p?u:u(A,O),9);g[m++]=P[0],g[m++]=P[1],g[m++]=P[2],g[m++]=P[3],g[m++]=P[4],g[m++]=P[5],g[m++]=P[6],g[m++]=P[7],g[m++]=P[8],g[m++]=P[9],g[m++]=P[10],g[m++]=P[11]}}catch(C){x=!0,w=C}finally{try{E||null==T.return||T.return()}finally{if(x)throw w}}}}};function rn(e,t){return t===gt.a.CARTESIAN||t===gt.a.METER_OFFSETS||t===gt.a.DEFAULT&&!e.isGeospatial}var on=[255,255,255,255],an={scenegraph:{type:"object",value:null,async:!0},getScene:function(e){return e&&e.scenes?"object"===Object(at.a)(e.scene)?e.scene:e.scenes[e.scene||0]:e},getAnimator:function(e){return e&&e.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:on},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},sn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:on,transition:!0},instanceModelMatrix:nn})}},{key:"updateState",value:function(e){Object(et.a)(Object(c.a)(t.prototype),"updateState",this).call(this,e);var n=e.props,r=e.oldProps;n.scenegraph!==r.scenegraph?this._updateScenegraph(n):n._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}},{key:"finalizeState",value:function(){Object(et.a)(Object(c.a)(t.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(e){var t,n=this,r=this.context.gl;if(e.scenegraph instanceof St)t={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){var i=e.scenegraph,o=function(e,t,n){var r=new Xt(e,n);return{scenes:r.instantiate(t),animator:r.createAnimator()}}(r,i,this.getLoadOptions());t=Object.assign({gltf:i},o),function(e){return Zt.apply(this,arguments)}(o).then((function(){return n.setNeedsRedraw()}))}else j.a.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),t=e.scenegraph;var a={layer:this,gl:r},s=e.getScene(t,a),u=e.getAnimator(t,a);s instanceof St?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,u,e._animations),this.setState({scenegraph:s,animator:u})):null!==s&&j.a.warn("invalid scenegraph:",s)()}},{key:"_applyAllAttributes",value:function(e){var t=this;if(this.state.attributesAvailable){var n=this.getAttributeManager().getAttributes();e.traverse((function(e){t._setModelAttributes(e.model,n)}))}}},{key:"_applyAnimationsProp",value:function(e,t,n){if(e&&t&&n){var r=t.getAnimations();Object.keys(n).sort().forEach((function(e){var t=n[e];if("*"===e)r.forEach((function(e){Object.assign(e,t)}));else if(Number.isFinite(Number(e))){var i=Number(e);i>=0&&i<r.length?Object.assign(r[i],t):j.a.warn("animation ".concat(e," not found"))()}else{var o=r.find((function(t){return t.name===e}));o?Object.assign(o,t):j.a.warn("animation ".concat(e," not found"))()}}))}}},{key:"_deleteScenegraph",value:function(){var e=this.state.scenegraph;e instanceof St&&e.delete()}},{key:"getLoadOptions",value:function(){var e=[mt.a,_t.a],t=this.props,n=t._lighting,r=t._imageBasedLightingEnvironment;"pbr"===n&&e.push(Et.a);var i=null;return r&&(i="function"===typeof r?r({gl:this.context.gl,layer:this}):r),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e,isInstanced:!0,transpileToGLSL100:!Object(Ot.g)(this.context.gl)},useTangents:!1}}},{key:"updateAttributes",value:function(e){var t=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((function(n){t._setModelAttributes(n.model,e)}))}},{key:"draw",value:function(e){var t=e.moduleParameters,n=void 0===t?null:t,r=e.parameters,i=void 0===r?{}:r,o=e.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&this.state.animator.animate(o.animationProps.time);var a=this.context.viewport,s=this.props,u=s.sizeScale,c=s.sizeMinPixels,l=s.sizeMaxPixels,f=s.opacity,h=s.coordinateSystem,d=this.getNumInstances();this.state.scenegraph.traverse((function(e,t){var r=t.worldMatrix;e.model.setInstanceCount(d),e.updateModuleSettings(n),e.draw({parameters:i,uniforms:{sizeScale:u,opacity:f,sizeMinPixels:c,sizeMaxPixels:l,composeModelMatrix:rn(a,h),sceneModelMatrix:r,u_Camera:e.model.getUniforms().project_uCameraPosition}})}))}}}]),t}(bt.a);sn.layerName="ScenegraphLayer",sn.defaultProps=an;var un=n("91Zk");function cn(e,t){(e.COLOR_0||e.colors)&&t||(e.colors={constant:!0,value:new Float32Array([1,1,1])}),j.a.assert(e.positions||e.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function ln(e,t){if(e.attributes)return cn(e.attributes,t),e instanceof vt.a?e:new vt.a(e);if(e.positions||e.POSITION)return cn(e,t),new vt.a({attributes:e});throw Error("Invalid mesh")}var fn={mesh:{value:null,type:"object",async:!0},texture:{type:"object",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},parameters:{depthTest:!0,depthFunc:515},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},hn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"getShaders",value:function(){var e=!Object(Ot.g)(this.context.gl),n={};return Object(Ut.b)(this.context.gl,zt.a.GLSL_DERIVATIVES)&&(n.DERIVATIVES_AVAILABLE=1),Object(et.a)(Object(c.a)(t.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[mt.a,un.b,_t.a],transpileToGLSL100:e,defines:n})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:nn}),this.setState({emptyTexture:new Vt.a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(Object(et.a)(Object(c.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.mesh!==r.mesh||i.extensionsChanged){if(this.state.model&&this.state.model.delete(),n.mesh){this.setState({model:this.getModel(n.mesh)});var o=n.mesh.attributes||n.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==r.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){Object(et.a)(Object(c.a)(t.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete(),this.state.texture&&this.state.texture.delete()}},{key:"draw",value:function(e){var t=e.uniforms;if(this.state.model){var n=this.context.viewport,r=this.props,i=r.sizeScale,o=r.coordinateSystem,a=r._instanced;this.state.model.draw({uniforms:Object.assign({},t,{sizeScale:i,composeModelMatrix:!a||rn(n,o),flatShading:!this.state.hasNormals})})}}},{key:"getModel",value:function(e){var t=new Dt.a(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:ln(e,this.props._useMeshColors),isInstanced:!0})),n=this.state,r=n.texture,i=n.emptyTexture;return t.setUniforms({sampler:r||i,hasTexture:Boolean(r)}),t}},{key:"setTexture",value:function(e){var t=this.context.gl,n=this.state,r=n.emptyTexture,i=n.model;this.state.texture&&this.state.texture.delete();var o=e?function(e,t,n){return t instanceof Vt.a?t:new Vt.a(e,Object.assign({data:t},n))}(t,e):null;this.setState({texture:o}),i&&i.setUniforms({sampler:o||r,hasTexture:Boolean(o)})}}]),t}(bt.a);hn.layerName="SimpleMeshLayer",hn.defaultProps=fn;var dn=n("JBga"),pn=n("n+fv"),vn=(Math.max(6378137,6378137,6356752.314245179),function(e){return e}),gn=new F.a;function yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn;return Object(de.f)(e)?(t[0]=n(e[0]),t[1]=n(e[1]),t[2]=e[2]):"longitude"in e?(t[0]=n(e.longitude),t[1]=n(e.latitude),t[2]=e.height):(t[0]=n(e.x),t[1]=n(e.y),t[2]=e.z),t}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;return yn(e,t,de.b._cartographicRadians?vn:de.j)}function _n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn;return Object(de.f)(t)?(t[0]=n(e[0]),t[1]=n(e[1]),t[2]=e[2]):"longitude"in t?(t.longitude=n(e[0]),t.latitude=n(e[1]),t.height=e[2]):(t.x=n(e[0]),t.y=n(e[1]),t.z=e[2]),t}function bn(e,t){return _n(e,t,de.b._cartographicRadians?vn:de.i)}var On=new F.a,En=new F.a,xn=new F.a;var wn=new F.a,Sn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Tn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},An={east:new F.a,north:new F.a,up:new F.a,west:new F.a,south:new F.a,down:new F.a},Pn=new F.a,Cn=new F.a,Rn=new F.a;function Ln(e,t,n,r,i,o){var a,s,u,c=Sn[t]&&Sn[t][n];Object(he.a)(c&&(!r||r===c));var l=wn.copy(i);if(Object(de.d)(l.x,0,1e-14)&&Object(de.d)(l.y,0,1e-14)){var f=Math.sign(l.z);a=Pn.fromArray(Tn[t]),"east"!==t&&"west"!==t&&a.scale(f),s=Cn.fromArray(Tn[n]),"east"!==n&&"west"!==n&&s.scale(f),u=Rn.fromArray(Tn[r]),"east"!==r&&"west"!==r&&u.scale(f)}else{var h=An.up,d=An.east,p=An.north;d.set(-l.y,l.x,0).normalize(),e.geodeticSurfaceNormal(l,h),p.copy(h).cross(d);var v=An.west,g=An.south;An.down.copy(h).scale(-1),v.copy(d).scale(-1),g.copy(p).scale(-1),a=An[t],s=An[n],u=An[r]}return o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=0,o[4]=s.x,o[5]=s.y,o[6]=s.z,o[7]=0,o[8]=u.x,o[9]=u.y,o[10]=u.z,o[11]=0,o[12]=l.x,o[13]=l.y,o[14]=l.z,o[15]=1,o}var In,Mn=new F.a,jn=new F.a,kn=new F.a,Nn=new F.a,Fn=new F.a,Dn=new F.a,Bn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(s.a)(this,e),Object(he.a)(t>=0),Object(he.a)(n>=0),Object(he.a)(r>=0),this.radii=new F.a(t,n,r),this.radiiSquared=new F.a(t*t,n*n,r*r),this.radiiToTheFourth=new F.a(t*t*t*t,n*n*n*n,r*r*r*r),this.oneOverRadii=new F.a(0===t?0:1/t,0===n?0:1/n,0===r?0:1/r),this.oneOverRadiiSquared=new F.a(0===t?0:1/(t*t),0===n?0:1/(n*n),0===r?0:1/(r*r)),this.minimumRadius=Math.min(t,n,r),this.maximumRadius=Math.max(t,n,r),this.centerToleranceSquared=ke.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(h.a)(e,null,[{key:"WGS84",get:function(){return In=In||new e(6378137,6378137,6356752.314245179)}}]),Object(h.a)(e,[{key:"equals",value:function(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=jn,r=kn,i=Object(v.a)(e,3),o=i[2];this.geodeticSurfaceNormalCartographic(e,n),r.copy(this.radiiSquared).scale(n);var a=Math.sqrt(n.dot(r));return r.scale(1/a),n.scale(o),r.add(n),r.to(t)}},{key:"cartesianToCartographic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];Dn.from(e);var n=this.scaleToGeodeticSurface(Dn,Nn);if(n){var r=this.geodeticSurfaceNormal(n,jn),i=Fn;i.copy(Dn).subtract(n);var o=Math.atan2(r.y,r.x),a=Math.asin(r.z),s=Math.sign(pn.d(i,Dn))*pn.g(i);return bn([o,a,s],t)}}},{key:"eastNorthUpToFixedFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ee.a;return Ln(this,"east","north","up",e,t)}},{key:"localFrameToFixedFrame",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ee.a;return Ln(this,e,t,n,r,i)}},{key:"geocentricSurfaceNormal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Mn.from(e).normalize().to(t)}},{key:"geodeticSurfaceNormalCartographic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=mn(e),r=n[0],i=n[1],o=Math.cos(i);return Mn.set(o*Math.cos(r),o*Math.sin(r),Math.sin(i)).normalize(),Mn.to(t)}},{key:"geodeticSurfaceNormal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Mn.from(e).scale(this.oneOverRadiiSquared).normalize().to(t)}},{key:"scaleToGeodeticSurface",value:function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new F.a,r=t.oneOverRadii,i=t.oneOverRadiiSquared,o=t.centerToleranceSquared;On.from(e);var a=e.x,s=e.y,u=e.z,c=r.x,l=r.y,f=r.z,h=a*a*c*c,d=s*s*l*l,p=u*u*f*f,v=h+d+p,g=Math.sqrt(1/v);if(Number.isFinite(g)){var y=En;if(y.copy(e).scale(g),v<o)return y.to(n);var m=i.x,_=i.y,b=i.z,O=xn;O.set(y.x*m*2,y.y*_*2,y.z*b*2);var E,x,w,S,T=(1-g)*e.len()/(.5*O.len()),A=0;do{var P=(E=1/(1+(T-=A)*m))*E,C=(x=1/(1+T*_))*x,R=(w=1/(1+T*b))*w;A=(S=h*P+d*C+p*R-1)/(-2*(h*(P*E)*m+d*(C*x)*_+p*(R*w)*b))}while(Math.abs(S)>ke.a.EPSILON12);return On.scale([E,x,w]).to(n)}}(e,this,t)}},{key:"scaleToGeocentricSurface",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];Nn.from(e);var n=Nn.x,r=Nn.y,i=Nn.z,o=this.oneOverRadiiSquared,a=1/Math.sqrt(n*n*o.x+r*r*o.y+i*i*o.z);return Nn.multiplyScalar(a).to(t)}},{key:"transformPositionToScaledSpace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Nn.from(e).scale(this.oneOverRadii).to(t)}},{key:"transformPositionFromScaledSpace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Nn.from(e).scale(this.radii).to(t)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(he.a)(Object(de.d)(this.radii.x,this.radii.y,ke.a.EPSILON15)),Object(he.a)(this.radii.z>0),Nn.from(e);var r=Nn.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(r)>=this.radii.z-t))return Nn.set(0,0,r).to(n)}}]),e}(),Un=n("laie"),zn=n("FR20"),Vn=n("qjAD"),Gn=function e(t,n,r){Object(s.a)(this,e),this.item=t,this.previous=n,this.next=r},Hn=function(){function e(){Object(s.a)(this,e),this.head=null,this.tail=null,this._length=0}return Object(h.a)(e,[{key:"add",value:function(e){var t=new Gn(e,this.tail,null);return this.tail?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t}},{key:"remove",value:function(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}},{key:"splice",value:function(e,t){e!==t&&(this.remove(t),this._insert(e,t))}},{key:"_insert",value:function(e,t){var n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e,++this._length}},{key:"length",get:function(){return this._length}}]),e}();function Wn(e){return void 0!==e&&null!==e}var qn=function(){function e(){Object(s.a)(this,e),this._list=new Hn,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return Object(h.a)(e,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(e){var t=e._cacheNode;Wn(t)&&this._list.splice(this._sentinel,t)}},{key:"add",value:function(e,t,n){Wn(t._cacheNode)||(t._cacheNode=this._list.add(t),n&&n(e,t))}},{key:"unloadTile",value:function(e,t,n){var r=t._cacheNode;Wn(r)&&(this._list.remove(r),t._cacheNode=void 0,n&&n(e,t))}},{key:"unloadTiles",value:function(e,t){var n=this._trimTiles;this._trimTiles=!1;for(var r=this._list,i=1024*e.maximumMemoryUsage*1024,o=this._sentinel,a=r.head;a!==o&&(e.gpuMemoryUsageInBytes>i||n);){var s=a.item;a=a.next,this.unloadTile(e,s,t)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),e}();var Xn=new F.a,Zn=new F.a,Kn=new be([new ge,new ge,new ge,new ge,new ge,new ge]);function Yn(e,t){var n=e.cameraDirection,r=e.cameraUp,i=e.height,o=e.distanceScales.metersPerUnit,a=[e.longitude,e.latitude,0],s=Bn.WGS84.cartographicToCartesian(a,new F.a),u=Bn.WGS84.eastNorthUpToFixedFrame(s),c=e.unprojectPosition(e.cameraPosition),l=Bn.WGS84.cartographicToCartesian(c,new F.a),f=new F.a(u.transformAsVector(new F.a(n).scale(o))).normalize(),h=new F.a(u.transformAsVector(new F.a(r).scale(o))).normalize();return function(e,t){var n=e.getFrustumPlanes(),r=0;for(var i in n){var o=n[i],a=o.normal.dot(e.center);Zn.copy(o.normal).scale(o.distance-a).add(e.center);var s=e.unprojectPosition(Zn),u=Bn.WGS84.cartographicToCartesian(s,new F.a);Kn.planes[r++].fromPointNormal(u,Xn.copy(t).subtract(u))}}(e,s),{camera:{position:l,direction:f,up:h},viewport:e,height:i,cullingVolume:Kn,frameNumber:t,sseDenominator:1.15}}var Jn=new F.a;var Qn=0,$n=1,er=3,tr=4,nr=5,rr=1,ir=2,or="empty",ar="scenegraph",sr="pointcloud",ur="mesh",cr="I3S",lr="TILES3D",fr="geometricError",hr=1;function dr(e){throw new Error('"'+e+'" is read-only')}function pr(e){return void 0!==e&&null!==e}new W.a;var vr=new F.a,gr=new F.a,yr=new F.a;new Ee.a;function mr(e,t,n){if(Object(zn.a)(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,n){var r=new F.a(e[0],e[1],e[2]);t.transform(r,r);var i=t.transformAsVector(e.slice(3,6)),o=t.transformAsVector(e.slice(6,9)),a=t.transformAsVector(e.slice(9,12)),s=new W.a([i[0],i[1],i[2],o[0],o[1],o[2],a[0],a[1],a[2]]);if(pr(n))return n.center=r,n.halfAxes=s,n;return new fe(r,s)}(e.box,t,n);if(e.region){var r=Object(v.a)(e.region,6),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=Bn.WGS84.cartographicToCartesian([Object(de.c)(i),Object(de.c)(s),u],gr),f=Bn.WGS84.cartographicToCartesian([Object(de.c)(a),Object(de.c)(o),c],yr),h=(new F.a).addVectors(l,f).multiplyScalar(.5),d=(new F.a).subVectors(l,f).len()/2;return _r([h[0],h[1],h[2],d],new Ee.a)}if(e.sphere)return _r(e.sphere,t,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function _r(e,t,n){var r=new F.a(e[0],e[1],e[2]);t.transform(r,r);var i=t.getScale(vr),o=Math.max(Math.max(i[0],i[1]),i[2]),a=e[3]*o;return pr(n)?(n.center=r,n.radius=a,n):new H(r,a)}new F.a,new F.a,new Ee.a,new F.a,new F.a,new F.a;function br(e,t){if(e.dynamicScreenSpaceError&&e._dynamicScreenSpaceErrorComputedDensity){var n=e._dynamicScreenSpaceErrorComputedDensity,r=e.dynamicScreenSpaceErrorFactor;return function(e,t){var n=e*t;return 1-Math.exp(-n*n)}(t,n)*r}return 0}var Or=Math.PI/2;function Er(e){var t=Object(v.a)(e,3),n=t[0],r=t[1],i=t[2],o=Object(de.j)(n),a=Object(de.j)(r),s=1+i/6378137,u=s*Math.cos(a);return[n=u*Math.cos(o),r=u*Math.sin(o),i=s*Math.sin(a)]}function xr(e,t){var n=Object(v.a)(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=Object(v.a)(t,3),u=s[0],c=s[1],l=s[2],f=Er([u,c,void 0===l?0:l]),h=Er([r,i,a]),d=h[0]-f[0],p=h[1]-f[1],g=h[2]-f[2];return d*d+p*p+g*g}function wr(e,t){var n=t.viewport,r=e.header.mbs[1],i=[e.header.mbs[0],r,e.header.mbs[2]],o=e.header.mbs[3]/6378137,a=xr(n.unprojectPosition(n.cameraPosition),i)-o*o;if(a<=0)return 170141175e30;var s=function(e,t){var n=t.viewport,r=n.width,i=n.height,o=n.pixelProjectionMatrix,a=Math.tan(Math.atan(Math.sqrt(1/(o[0]*o[0])+1/(o[5]*o[5]))));return Math.sqrt(i*i+r*r)/a}(0,t);return s*=o/Math.sqrt(a)/n.scale}function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ar=new F.a;function Pr(e){return e.isVisible?e.contentState===Qn?-1:Math.max(1e7-e._priority,0)||0:-1}var Cr=function(){function e(t,n,r){Object(s.a)(this,e),Object(zn.a)("object"===Object(at.a)(n)),this.header=n,this.tileset=t,this.id=n.id,this.url=n.url,this.parent=r,this.refine=this._getRefine(n.refine),this.type=n.type,this.contentUrl=n.contentUrl,this.lodMetricType=null,this.lodMetricValue=null,this.boundingVolume=null,this.content=null,this.contentState=Qn,this.gpuMemoryUsageInBytes=0,this.children=[],this.depth=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this._initializeLodMetric(n),this._initializeTransforms(n),this._initializeBoundingVolumes(n),this._initializeContent(n),this._initializeRenderingState(n),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}return Object(h.a)(e,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return null===this.header}},{key:"getScreenSpaceError",value:function(e,t){switch(this.tileset.type){case cr:return wr(this,e);case lr:return function(e,t,n){var r=e.tileset,i=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,o=n?i:e.lodMetricValue;if(0===o)return 0;var a=Math.max(e._distanceToCamera,1e-7),s=o*t.height/(a*t.sseDenominator);return s-br(r,a)}(this,e,t);default:return console.error("Unsupported tileset type"),null}}},{key:"loadContent",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n,r,i,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.content){e.next=4;break}return e.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=$n,e.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,Pr);case 9:if(t=e.sent){e.next=13;break}return this.contentState=Qn,e.abrupt("return",!1);case 13:return e.prev=13,n=this.tileset.getTileUrl(this.contentUrl),r=this.tileset.fetchOptions,i=this.tileset.loader,o=Tr(Tr({},r),{},Object(Oe.a)({},i.id,{tile:this.header,tileset:this.tileset.tileset})),e.next=20,Object(dn.a)(n,i,o);case 20:return this.content=e.sent,this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this,Vn.a.dirname(this.contentUrl)),this.contentState=er,this._onContentLoaded(),e.abrupt("return",!0);case 27:throw e.prev=27,e.t0=e.catch(13),this.contentState=nr,e.t0;case 31:return e.prev=31,t.done(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[13,27,31,34]])})));return function(){return e.apply(this,arguments)}}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.contentState=Qn,!0}},{key:"updateVisibility",value:function(e){if(this._frameNumber!==e.frameNumber){var t=this.parent,n=t?t.computedTransform:this.tileset.modelMatrix,r=t?t._visibilityPlaneMask:be.MASK_INDETERMINATE;this._updateTransform(n),this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,r),this._visible=this._visibilityPlaneMask!==be.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priority=this.lodMetricValue,this._frameNumber=e.frameNumber}}},{key:"visibility",value:function(e,t){var n=e.cullingVolume,r=this.boundingVolume;return n.computeVisibilityWithPlaneMask(r,t)}},{key:"contentVisibility",value:function(e){return!0}},{key:"distanceToTile",value:function(e){var t=this.boundingVolume;return Math.sqrt(Math.max(t.distanceSquaredTo(e.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(e){var t=e.camera,n=this.boundingVolume;return Ar.subVectors(n.center,t.position),t.direction.dot(Ar)}},{key:"insideViewerRequestVolume",value:function(e){var t=this._viewerRequestVolume;return!t||0===t.distanceToCamera(e)}},{key:"_initializeLodMetric",value:function(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(e){this.transform=e.transform?new Ee.a(e.transform):new Ee.a;var t=this.parent,n=this.tileset,r=t&&t.computedTransform?t.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new Ee.a(r).multiplyRight(this.transform);var i=t&&t._initialTransform?t._initialTransform.clone():new Ee.a;this._initialTransform=new Ee.a(i).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}},{key:"_initializeContent",value:function(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=Qn,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(e){this.depth=e.level,this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=be.MASK_INDETERMINATE,this._visible=!1,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(e){return e||this.parent&&this.parent.refine||ir}},{key:"_isTileset",value:function(){return-1!==this.contentUrl.indexOf(".json")}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset.traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(e){this.boundingVolume=mr(e.boundingVolume,this.computedTransform,this.boundingVolume);var t=e.content;t&&(t.boundingVolume&&(this._contentBoundingVolume=mr(t.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=mr(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ee.a,t=e.clone().multiplyRight(this.transform),n=!t.equals(this.computedTransform);n&&(this.computedTransform=t,this._updateBoundingVolume(this.header))}},{key:"updateExpiration",value:function(){if(void 0!==(t=this._expireDate)&&null!==t&&this.contentReady&&!this.hasEmptyContent){var e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=tr,this._expiredContent=this.content)}var t}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===er||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===Qn}},{key:"contentExpired",get:function(){return this.contentState===tr}},{key:"contentFailed",get:function(){return this.contentState===nr}},{key:"extras",get:function(){return this.header.extras}}]),e}(),Rr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(s.a)(this,e),this._array=new Array(t),this._map=new Map,this._length=t}return Object(h.a)(e,[{key:"get",value:function(e){return Object(zn.a)(e<this._array.length),this._array[e]}},{key:"set",value:function(e,t){Object(zn.a)(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=t,this._map.set(t,e)}},{key:"delete",value:function(e){var t=this._map.get(e);t>=0&&(this._array.splice(t,1),this._map.delete(e),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(e){if(!this._map.has(e)){var t=this.length++;this._array[t]=e,this._map.set(e,t)}}},{key:"pop",value:function(){var e=this._array[--this.length];return this._map.delete(e),e}},{key:"reserve",value:function(e){Object(zn.a)(e>=0),e>this._array.length&&(this._array.length=e)}},{key:"resize",value:function(e){Object(zn.a)(e>=0),this.length=e}},{key:"trim",value:function(e){null!==e&&void 0!==e||(e=this.length),this._array.length=e}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(e){return this._map.has(e)}},{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}}]),e}();function Lr(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ir(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2},Nr=function(){function e(t){Object(s.a)(this,e),this.options=jr(jr({},kr),t),this._traversalStack=new Rr,this._emptyTraversalStack=new Rr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return Object(h.a)(e,[{key:"traverse",value:function(e,t,n){this.root=e,this.options=jr(jr({},this.options),n),this.reset(),this.updateTile(e,t),this._frameNumber=t.frameNumber,this.executeTraversal(e,t)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(e,t){var n=this._traversalStack;for(n.push(e);n.length>0;){var r=n.pop(),i=!1;this.canTraverse(r,t)&&(this.updateChildTiles(r,t),i=this.updateAndPushChildren(r,t,n));var o=r.parent,a=Boolean(!o||o._shouldRefine),s=!i;r.hasRenderContent?r.refine===rr?(this.loadTile(r,t),this.selectTile(r,t)):r.refine===ir&&(this.loadTile(r,t),s&&this.selectTile(r,t)):(this.emptyTiles[r.id]=r,this.loadTile(r,t),s&&this.selectTile(r,t)),this.touchTile(r,t),r._shouldRefine=i&&a}this.options.onTraversalEnd&&this.options.onTraversalEnd(t)}},{key:"updateChildTiles",value:function(e,t){var n,r=Lr(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.updateTile(i,t)}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"updateAndPushChildren",value:function(e,t,n){var r=this.options,i=r.loadSiblings,o=r.skipLevelOfDetail,a=e.children;a.sort(this.compareDistanceToCamera);var s,u=!o&&e.refine===ir&&e.hasRenderContent,c=!1,l=Lr(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(f.isVisibleAndInRequestVolume?(n.find(f)&&n.delete(f),n.push(f),c=!0):(u||i)&&(this.loadTile(f,t),this.touchTile(f,t)),u){var h=void 0;if(!(h=!!f._inRequestVolume&&(f.hasRenderContent?f.contentAvailable:this.executeEmptyTraversal(f,t))))return h}}}catch(d){l.e(d)}finally{l.f()}return c}},{key:"updateTile",value:function(e,t){this.updateTileVisibility(e,t)}},{key:"selectTile",value:function(e,t){this.shouldSelectTile(e,t)&&(e._selectedFrame=t.frameNumber,this.selectedTiles[e.id]=e)}},{key:"loadTile",value:function(e,t){this.shouldLoadTile(e,t)&&(e._requestedFrame=t.frameNumber,e._priority=this.getPriority(e),this.requestedTiles[e.id]=e)}},{key:"touchTile",value:function(e,t){e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber}},{key:"canTraverse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(!r&&!e.isVisibleAndInRequestVolume)&&(!!e.hasChildren&&(e.hasTilesetContent?!e.contentExpired:this.shouldRefine(e,t,n)))}},{key:"shouldLoadTile",value:function(e,t){return e.hasUnloadedContent||e.contentExpired}},{key:"shouldSelectTile",value:function(e,t){return e.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(e,t,n){var r=e._screenSpaceError;return n&&(r=e.getScreenSpaceError(t,!0)),r>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(e,t){e.updateVisibility(t)}},{key:"compareDistanceToCamera",value:function(e,t){return e._distanceToCamera-t._distanceToCamera}},{key:"getPriority",value:function(e){var t=this.options;switch(e.refine){case rr:return e._distanceToCamera;case ir:var n=e.parent,r=n&&(!t.skipLevelOfDetail||0===e._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:e._screenSpaceError;return this.root._screenSpaceError-r;default:return Object(zn.a)(!1)}}},{key:"anyChildrenVisible",value:function(e,t){var n,r=!1,i=Lr(e.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.updateVisibility(t),r=r||o.isVisibleAndInRequestVolume}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"executeEmptyTraversal",value:function(e,t){for(var n=!0,r=this._emptyTraversalStack;r.length>0;){var i=r.pop();this.updateTile(i,t),i.isVisibleAndInRequestVolume||(this.loadTile(i,t),this.touchTile(i,t));var o=!i.hasRenderContent&&this.canTraverse(i,t,!1,!0);if(o||i.contentAvailable||(n=!1),o){var a,s=Lr(i.children.filter((function(e){return e})));try{for(s.s();!(a=s.n()).done;){var u=a.value;r.find(u)&&r.delete(u),r.push(u)}}catch(c){s.e(c)}finally{s.f()}}}return n}}]),e}();function Fr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Dr=function(e){Object(l.a)(n,e);var t=Fr(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"compareDistanceToCamera",value:function(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}},{key:"updateTileVisibility",value:function(e,t){if(e.updateVisibility(t),e.isVisibleAndInRequestVolume){var n=e.children.length>0;if(e.hasTilesetContent&&n){var r=e.children[0];return this.updateTileVisibility(r,t),void(e._visible=r._visible)}if(this.meetsScreenSpaceErrorEarly(e,t))e._visible=!1;else{var i=e.refine===ir,o=e._optimChildrenWithinParent===hr;i&&o&&n&&!this.anyChildrenVisible(e,t)&&(e._visible=!1)}}}},{key:"meetsScreenSpaceErrorEarly",value:function(e,t){var n=e.parent;return!(!n||n.hasTilesetContent||n.refine!==rr)&&!this.shouldRefine(e,t,!0)}}]),n}(Nr),Br="REQUESTED",Ur="COMPLETED",zr="ERROR",Vr=function(){function e(){Object(s.a)(this,e),this._statusMap={}}return Object(h.a)(e,[{key:"add",value:function(e,t,n,r){var i=this;this._statusMap[t]||(this._statusMap[t]={request:e,callback:n,key:t,frameState:r,status:Br},e().then((function(e){i._statusMap[t].status=Ur,i._statusMap[t].callback(e,r)})).catch((function(e){i._statusMap[t].status=zr,n(e)})))}},{key:"update",value:function(e,t){this._statusMap[e]&&(this._statusMap[e].frameState=t)}},{key:"find",value:function(e){return this._statusMap[e]}}]),e}();function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Zr=function(e){Object(l.a)(n,e);var t=Xr(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._tileManager=new Vr,r}return Object(h.a)(n,[{key:"shouldRefine",value:function(e,t){return e._lodJudge=function(e,t){var n=t.viewport,r=n.metersPerPixel,i=e.header.mbs[1],o=e.header.mbs[0],a=e.header.mbs[2],s=e.header.mbs[3],u=n.height,c=n.width,l=n.latitude,f=n.longitude,h=[f,l],d=[o,i,a],p=[f,i],v=[o,l],g=Math.sqrt(u*u+c*c)*r[0],y=.5*u+s/6378137,m=.5*c+s/6378137;if(xr(h,d)>g+s/6378137)return"OUT";if(xr(h,p)>y)return"OUT";if(xr(h,v)>m)return"OUT";if(0===e.lodMetricValue)return"DIG";var _=wr(e,t);return(_*=Or)<.5?"OUT":!e.header.children||_<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}(e,t),"DIG"===e._lodJudge}},{key:"updateChildTiles",value:function(e,t){var n,r=this,i=e.header.children||[],o=e.children,a=e.tileset,s=Wr(i);try{var u=function(){var i=n.value,s=o&&o.find((function(e){return e.id===i.id}));if(s)s&&r.updateTile(s,t);else{r._tileManager.find(i.id)?r._tileManager.update(i.id,t):r._tileManager.add((function(){return r._loadTile(i.id,a)}),i.id,(function(t){return r._onTileLoad(t,e)}),t)}};for(s.s();!(n=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}}},{key:"_loadTile",value:function(){var e=Object(M.a)(I.a.mark((function e(t,n){var r,i,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.loader,i=n.getTileUrl("".concat(n.url,"/nodes/").concat(t)),o={i3s:Hr(Hr({},n.fetchOptions),{},{isHeader:!0,loadContent:!1})},e.next=5,Object(dn.a)(i,r,o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(e,t){var n=this.options.basePath,r=new Cr(t.tileset,e,t,n);t.children.push(r);var i=this._tileManager.find(r.id).frameState;this.updateTile(r,i),this._frameNumber===i.frameNumber&&this.executeTraversal(r,i)}}]),n}(Nr);function Kr(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $r={ellipsoid:Bn.WGS84,modelMatrix:new Ee.a,throttleRequests:!1,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(e,t,n){},maximumScreenSpaceError:8},ei=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,e),Object(zn.a)(t),this.options=Qr(Qr({},$r),n),this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||Vn.a.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.fetchOptions=this.options.fetchOptions||{},this.options.headers&&(this.fetchOptions.headers=this.options.headers),this.options.token&&(this.fetchOptions.token=this.options.token),this.root=null,this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this._traverser=this._initializeTraverser(),this._cache=new qn,this._requestScheduler=new Xe.a({throttleRequests:this.options.throttleRequests}),this._frameNumber=0,this._updateFrameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._queryParams={},this._queryParamsString=null,this.maximumMemoryUsage=this.options.maximumMemoryUsage,this.gpuMemoryUsageInBytes=0,this.stats=new Un.a({id:this.url}),this._initializeStats(),this._hasMixedContent=!1,this._maximumScreenSpaceError=this.options.maximumScreenSpaceError,this._properties=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description,this._defaultGeometrySchema=[],this._initializeTileSet(t,this.options)}return Object(h.a)(e,[{key:"isLoaded",value:function(){return 0===this._pendingCount}},{key:"destroy",value:function(){this._destroy()}},{key:"getTileUrl",value:function(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}},{key:"update",value:function(e){this._cache.reset(),this._frameNumber++,this._frameState=Yn(e,this._frameNumber),this._traverser.traverse(this.root,this._frameState,this.options)}},{key:"_onTraversalEnd",value:function(){var e=Object.values(this._traverser.selectedTiles);this._tilesChanged(this.selectedTiles,e)&&this._updateFrameNumber++,this.selectedTiles=e;var t,n=Kr(this.selectedTiles);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._tiles[r.id]=r}}catch(i){n.e(i)}finally{n.f()}return this._requestedTiles=Object.values(this._traverser.requestedTiles),this._emptyTiles=Object.values(this._traverser.emptyTiles),this._loadTiles(this._frameState),this._unloadTiles(),this._updateStats(),this._updateFrameNumber}},{key:"_tilesChanged",value:function(e,t){if(e.length!==t.length)return!0;var n=new Set(e.map((function(e){return e.id}))),r=new Set(t.map((function(e){return e.id}))),i=e.filter((function(e){return!r.has(e.id)})).length>0;return i=i||t.filter((function(e){return!n.has(e.id)})).length>0}},{key:"_loadTiles",value:function(e){var t,n=Kr(this._requestedTiles);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.contentUnloaded&&this._loadTile(r,e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,(function(e,t){return e._unloadTile(t)}))}},{key:"_updateStats",value:function(){var e,t=0,n=0,r=Kr(this.selectedTiles);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.contentAvailable&&(t++,i.content.pointCount&&(n+=i.content.pointCount))}}catch(o){r.e(o)}finally{r.f()}this.stats.get("Tiles In View").count=this.selectedTiles.length,this.stats.get("Tiles To Render").count=t,this.stats.get("Points").count=n}},{key:"_initializeTileSet",value:function(e){this.root=this._initializeTileHeaders(e,null,this.basePath),this.type===lr&&this._initializeCesiumTileset(e),this.type===cr&&this._initializeI3STileset(e),this._calculateViewProps()}},{key:"_calculateViewProps",value:function(){var e=this.root,t=e.boundingVolume.center;if(!t)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new F.a,void(this.zoom=1);this.cartographicCenter=Bn.WGS84.cartesianToCartographic(t,new F.a),this.cartesianCenter=t,this.zoom=function(e){var t=e.halfAxes,n=e.radius,r=e.width,i=e.height;if(t){t.getColumn(0,Jn);var o=Jn.len();t.getColumn(1,Jn);var a=Jn.len();t.getColumn(2,Jn);var s=o/2,u=a/2,c=Jn.len()/2;return(Math.log2(6378137/s)+Math.log2(6378137/u)+Math.log2(6356752.314245179/c))/3}return n?Math.log2(6356752.314245179/n):i&&r?(Math.log2(6378137/r)+Math.log2(6378137/i))/2:1}(e.boundingVolume)}},{key:"_initializeStats",value:function(){this.stats.get("Tiles In Tileset(s)"),this.stats.get("Tiles Loading"),this.stats.get("Tiles In Memory"),this.stats.get("Tiles In View"),this.stats.get("Tiles To Render"),this.stats.get("Tiles Loaded"),this.stats.get("Tiles Unloaded"),this.stats.get("Failed Tile Loads"),this.stats.get("Points","memory"),this.stats.get("Tile Memory Use","memory")}},{key:"_initializeTileHeaders",value:function(e,t,n){var r=new Cr(this,e.root,t,n);if(t&&(t.children.push(r),r.depth=t.depth+1),this.type===lr){var i=[];for(i.push(r);i.length>0;){var o=i.pop();this.stats.get("Tiles In Tileset(s)").incrementCount();var a,s=Kr(o.header.children||[]);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=new Cr(this,u,o,n);o.children.push(c),c.depth=o.depth+1,i.push(c)}}catch(l){s.e(l)}finally{s.f()}}}return r}},{key:"_initializeTraverser",value:function(){var e;switch(this.type){case lr:e=Dr;break;case cr:e=Zr;break;default:e=Nr}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(e){this._destroySubtree(e)}},{key:"_loadTile",value:function(){var e=Object(M.a)(I.a.mark((function e(t,n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._onStartTileLoading(),e.next=4,t.loadContent(n);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this._onTileLoadError(t,e.t0);case 10:return e.prev=10,this._onEndTileLoading(),this._onTileLoad(t,r),e.finish(10);case 14:case"end":return e.stop()}}),e,this,[[0,7,10,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_onTileLoadError",value:function(e,t){this.stats.get("Failed Tile Loads").incrementCount();var n=t.message||t.toString(),r=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(n)),this.options.onTileError(e,n,r)}},{key:"_onTileLoad",value:function(e,t){t&&(e&&e.content&&function(e,t){Object(zn.a)(e),Object(zn.a)(t);var n=t.rtcCenter,r=t.rotateYtoZ,i=e.computedTransform,o=e.boundingVolume.center,a=new Ee.a(i);if(n&&a.translate(n),r){var s=(new Ee.a).rotateX(Math.PI/2);a=a.multiplyRight(s)}t.isQuantized&&a.translate(t.quantizedVolumeOffset).scale(t.quantizedVolumeScale);var u=new F.a(o);t.cartesianModelMatrix=a,t.cartesianOrigin=u;var c=Bn.WGS84.cartesianToCartographic(u,new F.a),l=Bn.WGS84.eastNorthUpToFixedFrame(u).invert();t.cartographicModelMatrix=l.multiplyRight(a),t.cartographicOrigin=c,t.modelMatrix=t.cartographicModelMatrix}(e,e.content),this._addTileToCache(e),this.options.onTileLoad(e))}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get("Tiles Loading").incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get("Tiles Loading").decrementCount()}},{key:"_addTileToCache",value:function(e){this._cache.add(this,e,(function(t){return t._updateCacheStats(e)}))}},{key:"_updateCacheStats",value:function(e){this.stats.get("Tiles Loaded").incrementCount(),this.stats.get("Tiles In Memory").incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(e){this.gpuMemoryUsageInBytes-=e.content.byteLength||0,this.stats.get("Tiles In Memory").decrementCount(),this.stats.get("Tiles Unloaded").incrementCount(),this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}},{key:"_destroy",value:function(){var e=[];for(this.root&&e.push(this.root);e.length>0;){var t,n=e.pop(),r=Kr(n.children);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.push(i)}}catch(o){r.e(o)}finally{r.f()}this._destroyTile(n)}this.root=null}},{key:"_destroySubtree",value:function(e){var t=e,n=[];for(n.push(t);n.length>0;){var r,i=Kr((e=n.pop()).children);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(a){i.e(a)}finally{i.f()}e!==t&&this._destroyTile(e)}t.children=[]}},{key:"_destroyTile",value:function(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}},{key:"_initializeCesiumTileset",value:function(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description,this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}},{key:"_initializeI3STileset",value:function(e){"token"in this.options&&(this._queryParams.token=this.options.token),this._defaultGeometrySchema=e.store.defaultGeometrySchema}},{key:"hasExtension",value:function(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.push("".concat(i,"=").concat(e[i]))}switch(t.length){case 0:return"";case 1:return"?".concat(t[0]);default:return"?".concat(t.join("&"))}}(this._queryParams)),this._queryParamsString}}]),e}(),ti={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"};Object.keys(ti);function ni(e,t,n){Object(zn.a)(e instanceof ArrayBuffer);var r=new TextDecoder("utf8"),i=new Uint8Array(e,t,n);return r.decode(i)}function ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new DataView(e);return"".concat(String.fromCharCode(n.getUint8(t+0))).concat(String.fromCharCode(n.getUint8(t+1))).concat(String.fromCharCode(n.getUint8(t+2))).concat(String.fromCharCode(n.getUint8(t+3)))}var ii,oi=n("oRz+"),ai=n("ItzM");function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ci(e){return li.apply(this,arguments)}function li(){return(li=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.modules||{}).draco3d){e.next=3;break}return e.abrupt("return",{draco:n.draco3d.createDecoderModule()});case 3:return ii=ii||fi(t),e.next=6,ii;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(e){return hi.apply(this,arguments)}function hi(){return(hi=Object(M.a)(I.a.mark((function e(t){var n,r,i,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.draco&&t.draco.decoderType,e.next="js"===e.t0?3:(e.t0,7);break;case 3:return e.next=5,Object(oi.a)("draco_decoder.js","draco",t);case 5:return n=e.sent,e.abrupt("break",21);case 7:return e.t1=Promise,e.next=10,Object(oi.a)("draco_wasm_wrapper.js","draco",t);case 10:return e.t2=e.sent,e.next=13,Object(oi.a)("draco_decoder.wasm","draco",t);case 13:return e.t3=e.sent,e.t4=[e.t2,e.t3],e.next=17,e.t1.all.call(e.t1,e.t4);case 17:i=e.sent,o=Object(v.a)(i,2),n=o[0],r=o[1];case 21:return n=n||ai.a.DracoDecoderModule,e.next=24,di(n,r);case 24:return e.abrupt("return",e.sent);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function di(e,t){var n={};return t&&(n.wasmBinary=t),new Promise((function(t){e(ui(ui({},n),{},{onModuleLoaded:function(e){return t({draco:e})}}))}))}var pi=n("zJdk"),vi=0,gi=1,yi={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},mi={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},_i=function(){function e(t){Object(s.a)(this,e),this.draco=t,this.drawMode="TRIANGLE"}return Object(h.a)(e,[{key:"destroy",value:function(){}},{key:"destroyGeometry",value:function(e){e&&this.draco.destroy(e.dracoGeometry)}},{key:"parseSync",value:function(e,t){var n=new this.draco.DecoderBuffer;n.Init(new Int8Array(e),e.byteLength);var r,i,o,a=new this.draco.Decoder,s={};try{var u=a.GetEncodedGeometryType(n);switch(u){case this.draco.TRIANGULAR_MESH:i=new this.draco.Mesh,r=a.DecodeBufferToMesh(n,i),o={type:vi,faceCount:i.num_faces(),attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;case this.draco.POINT_CLOUD:i=new this.draco.PointCloud,r=a.DecodeBufferToPointCloud(n,i),o={type:gi,attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!r.ok()||!i.ptr){var c="DRACO decompression failed: ".concat(r.error_msg());throw i&&this.draco.destroy(i),new Error(c)}s.loaderData={header:o},this.extractDRACOGeometry(a,i,u,s),s.header={vertexCount:o.vertexCount,boundingBox:Object(pi.a)(s.attributes)}}finally{this.draco.destroy(a),this.draco.destroy(n)}return s}},{key:"extractDRACOGeometry",value:function(e,t,n,r){var i=this.getAttributes(e,t),o=i.POSITION;if(!o)throw new Error("DRACO decompressor: No position attribute found.");return this.getPositionAttributeMetadata(o),n===this.draco.TRIANGULAR_MESH?(i.indices="TRIANGLE_STRIP"===this.drawMode?this.getMeshStripIndices(e,t):this.getMeshFaceIndices(e,t),r.mode="TRIANGLE_STRIP"===this.drawMode?5:4):r.mode=0,i.indices&&(r.indices={value:i.indices,size:1},delete i.indices),r.attributes=i,r}},{key:"getPositionAttributeMetadata",value:function(e){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var t=new this.draco.AttributeQuantizationTransform;if(t.InitFromAttribute(e)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=t.range(),this.metadata.attributes.position.numQuantizationBits=t.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var n=0;n<3;++n)this.metadata.attributes.position.minValues[n]=t.min_value(n)}this.draco.destroy(t)}},{key:"getAttributes",value:function(e,t){var n={},r=t.num_points();for(var i in yi){var o=this.draco[i],a=e.GetAttributeId(t,o);if(-1!==a){var s=e.GetAttribute(t,a),u=this.getAttributeTypedArray(e,t,s,i).typedArray;n[yi[i]]={value:u,size:u.length/r}}}return n}},{key:"getMeshFaceIndices",value:function(e,t){for(var n=t.num_faces(),r=new Uint32Array(3*n),i=new this.draco.DracoInt32Array,o=0;o<n;++o){e.GetFaceFromMesh(t,o,i);var a=3*o;r[a]=i.GetValue(0),r[a+1]=i.GetValue(1),r[a+2]=i.GetValue(2)}return this.draco.destroy(i),r}},{key:"getMeshStripIndices",value:function(e,t){var n=new this.draco.DracoInt32Array;e.GetTriangleStripsFromMesh(t,n);for(var r=new Uint32Array(n.size()),i=0;i<n.size();++i)r[i]=n.GetValue(i);return this.draco.destroy(n),r}},{key:"getAttributeTypedArray",value:function(e,t,n,r){if(0===n.ptr){var i="DRACO decode bad attribute ".concat(r);throw new Error(i)}var o,a,s=mi[n.data_type()],u=n.num_components(),c=t.num_points()*u;switch(s){case Float32Array:o=new this.draco.DracoFloat32Array,e.GetAttributeFloatForAllPoints(t,n,o),a=new Float32Array(c);break;case Int8Array:o=new this.draco.DracoInt8Array,e.GetAttributeInt8ForAllPoints(t,n,o),a=new Int8Array(c);break;case Int16Array:o=new this.draco.DracoInt16Array,e.GetAttributeInt16ForAllPoints(t,n,o),a=new Int16Array(c);break;case Int32Array:o=new this.draco.DracoInt32Array,e.GetAttributeInt32ForAllPoints(t,n,o),a=new Int32Array(c);break;case Uint8Array:o=new this.draco.DracoUInt8Array,e.GetAttributeUInt8ForAllPoints(t,n,o),a=new Uint8Array(c);break;case Uint16Array:o=new this.draco.DracoUInt16Array,e.GetAttributeUInt16ForAllPoints(t,n,o),a=new Uint16Array(c);break;case Uint32Array:o=new this.draco.DracoUInt32Array,e.GetAttributeUInt32ForAllPoints(t,n,o),a=new Uint32Array(c);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var l=0;l<c;l++)a[l]=o.GetValue(l);return this.draco.destroy(o),{typedArray:a,components:u}}},{key:"decode",value:function(e,t){return this.parseSync(e,t)}}]),e}();function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ei=Oi(Oi({},{id:"draco",name:"Draco",version:"2.2.8",extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,test:"DRACO",options:{draco:{decoderType:"object"===("undefined"===typeof WebAssembly?"undefined":Object(at.a)(WebAssembly))?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@".concat("2.2.8","/dist/draco-loader.worker.js"),localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js"}}}),{},{parse:function(e,t,n,r){return xi.apply(this,arguments)}});function xi(){return(xi=Object(M.a)(I.a.mark((function e(t,n,r,i){var o,a,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ci(n);case 2:return o=e.sent,a=o.draco,s=new _i(a),e.prev=5,e.abrupt("return",s.parseSync(t));case 7:return e.prev=7,s.destroy(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[5,,7,10]])})))).apply(this,arguments)}function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ti,Ai={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Pi=Si(Si({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6}),Ai),Ci=(Ti={},Object(Oe.a)(Ti,Ai.DOUBLE,Float64Array),Object(Oe.a)(Ti,Ai.FLOAT,Float32Array),Object(Oe.a)(Ti,Ai.UNSIGNED_SHORT,Uint16Array),Object(Oe.a)(Ti,Ai.UNSIGNED_INT,Uint32Array),Object(Oe.a)(Ti,Ai.UNSIGNED_BYTE,Uint8Array),Object(Oe.a)(Ti,Ai.BYTE,Int8Array),Object(Oe.a)(Ti,Ai.SHORT,Int16Array),Object(Oe.a)(Ti,Ai.INT,Int32Array),Ti),Ri={DOUBLE:Ai.DOUBLE,FLOAT:Ai.FLOAT,UNSIGNED_SHORT:Ai.UNSIGNED_SHORT,UNSIGNED_INT:Ai.UNSIGNED_INT,UNSIGNED_BYTE:Ai.UNSIGNED_BYTE,BYTE:Ai.BYTE,SHORT:Ai.SHORT,INT:Ai.INT},Li=function(){function e(){Object(s.a)(this,e)}return Object(h.a)(e,null,[{key:"fromTypedArray",value:function(e){for(var t in e=ArrayBuffer.isView(e)?e.constructor:e,Ci){if(Ci[t]===e)return t}throw new Error("Failed to convert GL type")}},{key:"fromName",value:function(e){var t=Ri[e];if(!t)throw new Error("Failed to convert GL type");return t}},{key:"getArrayType",value:function(e){switch(e){case Ai.UNSIGNED_SHORT_5_6_5:case Ai.UNSIGNED_SHORT_4_4_4_4:case Ai.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var t=Ci[e];if(!t)throw new Error("Failed to convert GL type");return t}}},{key:"getByteSize",value:function(t){return e.getArrayType(t).BYTES_PER_ELEMENT}},{key:"validate",value:function(t){return Boolean(e.getArrayType(t))}},{key:"createTypedArray",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;void 0===i&&(i=(n.byteLength-r)/e.getByteSize(t));var o=e.getArrayType(t);return new o(n,r,i)}}]),e}(),Ii=function(){function e(t,n){Object(s.a)(this,e),this.json=t,this.buffer=n,this.featuresLength=0,this._cachedTypedArrays={}}return Object(h.a)(e,[{key:"getExtension",value:function(e){return this.json.extensions&&this.json.extensions[e]}},{key:"hasProperty",value:function(e){return Boolean(this.json[e])}},{key:"getGlobalProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pi.UNSIGNED_INT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.json[e];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(e,t,n,1,r.byteOffset):r}},{key:"getPropertyArray",value:function(e,t,n){var r=this.json[e];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(t=Li.fromName(r.componentType)),this._getTypedArrayFromBinary(e,t,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(e,t,r)}},{key:"getProperty",value:function(e,t,n,r,i){var o=this.json[e];if(!o)return o;var a=this.getPropertyArray(e,t,n);if(1===n)return a[r];for(var s=0;s<n;++s)i[s]=a[n*r+s];return i}},{key:"_getTypedArrayFromBinary",value:function(e,t,n,r,i){var o=this._cachedTypedArrays,a=o[e];return a||(a=Li.createTypedArray(t,this.buffer.buffer,this.buffer.byteOffset+i,r*n),o[e]=a),a}},{key:"_getTypedArrayFromArray",value:function(e,t,n){var r=this._cachedTypedArrays,i=r[e];return i||(i=Li.createTypedArray(t,n),r[e]=i),i}}]),e}(),Mi={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ji={SCALAR:function(e,t){return e[t]},VEC2:function(e,t){return[e[2*t+0],e[2*t+1]]},VEC3:function(e,t){return[e[3*t+0],e[3*t+1],e[3*t+2]]},VEC4:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT2:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT3:function(e,t){return[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]]},MAT4:function(e,t){return[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]}},ki={SCALAR:function(e,t,n){t[n]=e},VEC2:function(e,t,n){t[2*n+0]=e[0],t[2*n+1]=e[1]},VEC3:function(e,t,n){t[3*n+0]=e[0],t[3*n+1]=e[1],t[3*n+2]=e[2]},VEC4:function(e,t,n){t[4*n+0]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]},MAT2:function(e,t,n){t[4*n+0]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]},MAT3:function(e,t,n){t[9*n+0]=e[0],t[9*n+1]=e[1],t[9*n+2]=e[2],t[9*n+3]=e[3],t[9*n+4]=e[4],t[9*n+5]=e[5],t[9*n+6]=e[6],t[9*n+7]=e[7],t[9*n+8]=e[8],t[9*n+9]=e[9]},MAT4:function(e,t,n){t[16*n+0]=e[0],t[16*n+1]=e[1],t[16*n+2]=e[2],t[16*n+3]=e[3],t[16*n+4]=e[4],t[16*n+5]=e[5],t[16*n+6]=e[6],t[16*n+7]=e[7],t[16*n+8]=e[8],t[16*n+9]=e[9],t[16*n+10]=e[10],t[16*n+11]=e[11],t[16*n+12]=e[12],t[16*n+13]=e[13],t[16*n+14]=e[14],t[16*n+15]=e[15]}};var Ni=function(e){return void 0!==e};function Fi(e,t,n){if(!t)return null;var r=e.getExtension("3DTILES_batch_table_hierarchy"),i=t.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(e,t){var n,r,i,o,a=e.instancesLength,s=e.classes,u=e.classIds,c=e.parentCounts,l=e.parentIds,f=a;Ni(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),dr("classIds"),u=i.createArrayBufferView(t.buffer,t.byteOffset+u.byteOffset,a));if(Ni(c))for(Ni(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),dr("parentCounts"),c=i.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,a)),o=new Uint16Array(a),dr("parentIdsLength"),f=0,n=0;n<a;++n)o[n]=f,f+=(dr("parentIdsLength"),c[n]);Ni(l)&&Ni(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),dr("parentIds"),l=i.createArrayBufferView(t.buffer,t.byteOffset+l.byteOffset,f));var h=s.length;for(n=0;n<h;++n){var d=s[n].length,p=s[n].instances,v=getBinaryProperties(d,p,t);s[n].instances=combine(v,p)}var g=new Array(h).fill(0),y=new Uint16Array(a);for(n=0;n<a;++n)r=u[n],y[n]=g[r],++g[r];var m={classes:s,classIds:u,classIndexes:y,parentCounts:c,parentIndexes:o,parentIds:l};return function(e){for(var t=e.classIds.length,n=0;n<t;++n)Bi(e,n,stack)}(m),m}(r,n):null}function Di(e,t,n){if(e){var r=e.parentCounts;return e.parentIds?n(e,t):r>0?function(e,t,n){var r=e.classIds,i=e.parentCounts,o=e.parentIds,a=e.parentIndexes,s=r.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,l=scratchStack;l.length=0,l.push(t);for(;l.length>0;)if(u[t=l.pop()]!==c){u[t]=c;var f=n(e,t);if(Ni(f))return f;for(var h=i[t],d=a[t],p=0;p<h;++p){var v=o[d+p];v!==t&&l.push(v)}}return null}(e,t,n):function(e,t,n){var r=!0;for(;r;){var i=n(e,t);if(Ni(i))return i;var o=e.parentIds[t];r=o!==t,t=o}throw new Error("traverseHierarchySingleParent")}(e,t,n)}}function Bi(e,t,n){var r=e.parentCounts,i=e.parentIds,o=e.parentIndexes,a=e.classIds.length;if(Ni(i)){assert(t<a,"Parent index ".concat(t," exceeds the total number of instances: ").concat(a)),assert(-1===n.indexOf(t),"Circular dependency detected in the batch table hierarchy."),n.push(t);for(var s=Ni(r)?r[t]:1,u=Ni(r)?o[t]:t,c=0;c<s;++c){var l=i[u+c];l!==t&&Bi(e,l,n)}n.pop(t)}}function Ui(e){return void 0!==e&&null!==e}var zi={HIERARCHY:!0,extensions:!0,extras:!0},Vi=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(var o in Object(s.a)(this,e),Object(zn.a)(r>=0),this.json=t||{},this.binary=n,this.featureCount=r,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)zi[o]||(this._properties[o]=this.json[o]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=Fi(this,this.json,this.binary))}return Object(h.a)(e,[{key:"getExtension",value:function(e){return this.json&&this.json.extensions&&this.json.extensions[e]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(e,t){return this._checkBatchId(e),Object(zn.a)("string"===typeof t,t),!!this._hierarchy&&Ui(Di(this._hierarchy,e,(function(e,n){var r=e.classIds[n];return e.classes[r].name===t})))}},{key:"isExactClass",value:function(e,t){return Object(zn.a)("string"===typeof t,t),this.getExactClassName(e)===t}},{key:"getExactClassName",value:function(e){if(this._checkBatchId(e),this._hierarchy){var t=this._hierarchy.classIds[e];return this._hierarchy.classes[t].name}}},{key:"hasProperty",value:function(e,t){return this._checkBatchId(e),Object(zn.a)("string"===typeof t,t),Ui(this._properties[t])||this._hasPropertyInHierarchy(e,t)}},{key:"getPropertyNames",value:function(e,t){var n;this._checkBatchId(e),(t=Ui(t)?t:[]).length=0;var r=Object.keys(this._properties);return(n=t).push.apply(n,Object(Pt.a)(r)),this._hierarchy&&this._getPropertyNamesInHierarchy(e,t),t}},{key:"getProperty",value:function(e,t){if(this._checkBatchId(e),Object(zn.a)("string"===typeof t,t),this._binaryProperties){var n=this._binaryProperties[t];if(Ui(n))return this._getBinaryProperty(n,e)}var r=this._properties[t];if(Ui(r))return r[e];if(this._hierarchy){var i=this._getHierarchyProperty(e,t);if(Ui(i))return i}}},{key:"setProperty",value:function(e,t,n){var r=this.featureCount;if(this._checkBatchId(e,r),Object(zn.a)("string"===typeof t,t),this._binaryProperties){var i=this._binaryProperties[t];if(i)return void this._setBinaryProperty(i,e,n)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,t,n)){var o=this._properties[t];Ui(o)||(this._properties[t]=new Array(r),o=this._properties[t]),o[e]=n}}},{key:"_checkBatchId",value:function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(e,t){return e.unpack(e.typedArray,t)}},{key:"_setBinaryProperty",value:function(e,t,n){e.pack(n,e.typedArray,t)}},{key:"_initializeBinaryProperties",value:function(){var e=null;for(var t in this._properties){var n=this._properties[t],r=this._initializeBinaryProperty(t,n);r&&((e=e||{})[t]=r)}return e}},{key:"_initializeBinaryProperty",value:function(e,t){if("byteOffset"in t){var n=t;Object(zn.a)(this.binary,"Property ".concat(e," requires a batch table binary.")),Object(zn.a)(n.type,"Property ".concat(e," requires a type."));var r=function(e,t,n,r){var i=e.componentType;Object(zn.a)(e.componentType);var o="string"===typeof i?Li.fromName(i):i,a=Mi[e.type],s=ji[e.type],u=ki[e.type];return n+=e.byteOffset,{values:Li.createTypedArray(o,t,n,a*r),type:o,size:a,unpacker:s,packer:u}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(e,t){if(!this._hierarchy)return!1;var n=Di(this._hierarchy,e,(function(e,n){var r=e.classIds[n];return Ui(e.classes[r].instances[t])}));return Ui(n)}},{key:"_getPropertyNamesInHierarchy",value:function(e,t){Di(this._hierarchy,e,(function(e,n){var r=e.classIds[n],i=e.classes[r].instances;for(var o in i)i.hasOwnProperty(o)&&-1===t.indexOf(o)&&t.push(o)}))}},{key:"_getHierarchyProperty",value:function(e,t){var n=this;return Di(this._hierarchy,e,(function(e,r){var i=e.classIds[r],o=e.classes[i],a=e.classIndexes[r],s=o.instances[t];return Ui(s)?Ui(s.typedArray)?n._getBinaryProperty(s,a):s[a]:null}))}},{key:"_setHierarchyProperty",value:function(e,t,n,r){var i=this,o=Di(this._hierarchy,t,(function(e,o){var a=e.classIds[o],s=e.classes[a],u=e.classIndexes[o],c=s.instances[n];return!!Ui(c)&&(Object(zn.a)(o===t,'Inherited property "'.concat(n,'" is read-only.')),Ui(c.typedArray)?i._setBinaryProperty(c,u,r):c[u]=r,!0)}));return Ui(o)}}]),e}();function Gi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new DataView(t);if(e.magic=r.getUint32(n,!0),n+=4,e.version=r.getUint32(n,!0),n+=4,e.byteLength=r.getUint32(n,!0),n+=4,1!==e.version)throw new Error("3D Tile Version ".concat(e.version," not supported"));return n}function Hi(e,t,n){var r=new DataView(t);return e.header=e.header||{},e.header.featureTableJsonByteLength=r.getUint32(n,!0),n+=4,e.header.featureTableBinaryByteLength=r.getUint32(n,!0),n+=4,e.header.batchTableJsonByteLength=r.getUint32(n,!0),n+=4,e.header.batchTableBinaryByteLength=r.getUint32(n,!0),n+=4}function Wi(e,t,n,r){return n=function(e,t,n,r){var i=e.header,o=i.featureTableJsonByteLength,a=i.featureTableBinaryByteLength;if(e.featureTableJson={BATCH_LENGTH:0},o>0){var s=ni(t,n,o);e.featureTableJson=JSON.parse(s)}return n+=o,e.featureTableBinary=new Uint8Array(t,n,a),n+=a}(e,t,n),n=function(e,t,n,r){var i=e.header,o=i.batchTableJsonByteLength,a=i.batchTableBinaryByteLength;if(o>0){var s=ni(t,n,o);e.batchTableJson=JSON.parse(s),n+=o,a>0&&(e.batchTableBinary=new Uint8Array(t,n,a),e.batchTableBinary=new Uint8Array(e.batchTableBinary),n+=a)}return n}(e,t,n)}function qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=e>>11&31,r=e>>5&63,i=31&e;return t[0]=n<<3,t[1]=r<<2,t[2]=i<<3,t}function Xi(e,t,n){if(!t&&(!e||!e.batchIds||!n))return null;var r=e.batchIds,i=e.isRGB565,o=e.pointCount;if(r&&n){for(var a=new Uint8ClampedArray(3*o),s=0;s<o;s++){var u=r[s],c=n.getProperty(u,"dimensions").map((function(e){return 255*e}));a[3*s]=c[0],a[3*s+1]=c[1],a[3*s+2]=c[2]}return{type:Pi.UNSIGNED_BYTE,value:a,size:3,normalized:!0}}if(i){for(var l=new Uint8ClampedArray(3*o),f=0;f<o;f++){var h=qi(t[f]);l[3*f]=h[0],l[3*f+1]=h[1],l[3*f+2]=h[2]}return{type:Pi.UNSIGNED_BYTE,value:l,size:3,normalized:!0}}return t&&t.length===3*o?{type:Pi.UNSIGNED_BYTE,value:t,size:3,normalized:!0}:{type:Pi.UNSIGNED_BYTE,value:t,size:4,normalized:!0}}var Zi=n("Oz/4");function Ki(e,t){if(!e)throw new Error("math.gl assertion failed. ".concat(t))}new Zi.a,new F.a,new Zi.a,new Zi.a,new Uint8Array(1);function Yi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Object(de.a)(e,0,t)/t*2-1}function Ji(e){return e<0?-1:1}function Qi(e,t,n,r){if(Ki(r),e<0||e>n||t<0||t>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(r.x=Yi(e,n),r.y=Yi(t,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){var i=r.x;r.x=(1-Math.abs(r.y))*Ji(i),r.y=(1-Math.abs(i))*Ji(r.y)}return r.normalize()}function $i(e,t,n){return Qi(e,t,255,n)}var eo=new F.a;function to(e,t,n){return e.isQuantized?n.decodeQuantizedPositions?(e.isQuantized=!1,function(e,t){for(var n=new F.a,r=new Float32Array(3*e.pointCount),i=0;i<e.pointCount;i++)n.set(t[3*i],t[3*i+1],t[3*i+2]).scale(1/e.quantizedRange).multiply(e.quantizedVolumeScale).add(e.quantizedVolumeOffset).toArray(r,3*i);return r}(e,t)):{type:Pi.UNSIGNED_SHORT,value:t,size:3,normalized:!0}:t}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n,r,i){return oo.apply(this,arguments)}function oo(){return(oo=Object(M.a)(I.a.mark((function e(t,n,r,i,o){var a,s,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gi(t,n,r,i),r=Hi(t,n,r),r=Wi(t,n,r),ao(t),a=so(t),s=a.featureTable,u=a.batchTable,e.next=7,fo(t,s,u,i,o);case 7:return uo(t,s,i),co(t,s,u),lo(t,s),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function so(e){var t=new Ii(e.featureTableJson,e.featureTableBinary),n=t.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");t.featuresLength=n,e.featuresLength=n,e.pointsLength=n,e.pointCount=n,e.rtcCenter=t.getGlobalProperty("RTC_CENTER",Pi.FLOAT,3);var r=function(e,t){var n=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",Pi.UNSIGNED_SHORT,1),e.batchIds)){var r=t.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=e.batchTableJson,o=e.batchTableBinary;n=new Vi(i,o,r)}return n}(e,t);return{featureTable:t,batchTable:r}}function uo(e,t,n){if(!e.attributes.positions)if(t.hasProperty("POSITION"))e.attributes.positions=t.getPropertyArray("POSITION",Pi.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){var r=t.getPropertyArray("POSITION_QUANTIZED",Pi.UNSIGNED_SHORT,3);if(e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Pi.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Pi.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=to(e,r,n)}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function co(e,t,n){if(!e.attributes.colors){var r=null;t.hasProperty("RGBA")?(r=t.getPropertyArray("RGBA",Pi.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?r=t.getPropertyArray("RGB",Pi.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(r=t.getPropertyArray("RGB565",Pi.UNSIGNED_SHORT,1),e.isRGB565=!0),e.attributes.colors=Xi(e,r,n)}t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",Pi.UNSIGNED_BYTE,4))}function lo(e,t){if(!e.attributes.normals){var n=null;t.hasProperty("NORMAL")?n=t.getPropertyArray("NORMAL",Pi.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(n=t.getPropertyArray("NORMAL_OCT16P",Pi.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0),e.attributes.normals=function(e,t){if(!t)return null;if(e.isOctEncoded16P){for(var n=new Float32Array(3*e.pointsLength),r=0;r<e.pointsLength;r++)$i(t[2*r],t[2*r+1],eo),eo.toArray(n,3*r);return{type:Pi.FLOAT,size:2,value:n}}return{type:Pi.FLOAT,size:2,value:t}}(e,n)}}function fo(e,t,n,r,i){return ho.apply(this,arguments)}function ho(){return(ho=Object(M.a)(I.a.mark((function e(t,n,r,i,o){var a,s,u,c,l,f,h,d;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=r&&r.getExtension("3DTILES_draco_point_compression"))&&(u=c.properties),!(l=n.getExtension("3DTILES_draco_point_compression"))){e.next=15;break}if(s=l.properties,f=l.byteOffset,h=l.byteLength,s&&Number.isFinite(f)&&h){e.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:a=t.featureTableBinary.slice(f,f+h),t.hasPositions=Number.isFinite(s.POSITION),t.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),t.hasNormals=Number.isFinite(s.NORMAL),t.hasBatchIds=Number.isFinite(s.BATCH_ID),t.isTranslucent=Number.isFinite(s.RGBA);case 15:if(a){e.next=17;break}return e.abrupt("return",!0);case 17:return d={buffer:a,properties:ro(ro({},s),u),featureTableProperties:s,batchTableProperties:u,dequantizeInShader:!1},e.next=20,po(t,d,i,o);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t,n,r){return vo.apply(this,arguments)}function vo(){return(vo=Object(M.a)(I.a.mark((function e(t,n,r,i){var o,a,s,u,c,l,f,h,d,p;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.parse,e.next=3,o(n.buffer,Ei,{});case 3:a=e.sent,s=a.attributes.POSITION&&a.attributes.POSITION.value,u=a.attributes.COLOR_0&&a.attributes.COLOR_0.value,c=a.attributes.NORMAL&&a.attributes.NORMAL.value,l=a.attributes.BATCH_ID&&a.attributes.BATCH_ID.value,f=s&&a.attributes.POSITION.value.quantization,h=c&&a.attributes.NORMAL.value.quantization,f&&(d=a.POSITION.data.quantization,p=d.range,t.quantizedVolumeScale=new F.a(p,p,p),t.quantizedVolumeOffset=new F.a(d.minValues),t.quantizedRange=(1<<d.quantizationBits)-1,t.isQuantizedDraco=!0),h&&(t.octEncodedRange=(1<<a.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0),t.attributes={positions:s,colors:Xi(t,u),normals:c,batchIds:l};case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var go=n("nJkv"),yo=n("LuF4"),mo=n("Xcno");function _o(e,t){if(!e)throw new Error(t||"assert failed: gltf")}function bo(e,t){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;var n=t.baseUri||t.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return n.substr(0,n.lastIndexOf("/")+1)+e}function Oo(e,t,n){var r=e.bufferViews[n];_o(r);var i=t[r.buffer];_o(i);var o=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,r.byteLength)}var Eo=n("Jv8n");var xo=["SCALAR","VEC2","VEC3","VEC4"],wo=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]),So={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},To={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ao={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Po(e){return xo[e-1]||xo[0]}function Co(e){var t=wo.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}function Ro(e,t){var n=Ao[e.componentType],r=So[e.type],i=To[e.componentType],o=e.count*r,a=e.count*r*i;return _o(a>=0&&a<=t.byteLength),{ArrayType:n,length:o,byteLength:a}}var Lo=function(){function e(t){if(Object(s.a)(this,e),t instanceof e)return t;t||(t={json:{version:2,buffers:[]},buffers:[]}),this.gltf=t,_o(this.gltf.json)}return Object(h.a)(e,[{key:"getApplicationData",value:function(e){return this.json[e]}},{key:"getExtraData",value:function(e){return(this.json.extras||{})[e]}},{key:"getExtension",value:function(e){var t=this.getUsedExtensions().find((function(t){return t===e})),n=this.json.extensions||{};return t?n[e]||!0:null}},{key:"getRequiredExtension",value:function(e){return this.getRequiredExtensions().find((function(t){return t===e}))?this.getExtension(e):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(e,t){return(e.extensions||{})[t]}},{key:"getScene",value:function(e){return this.getObject("scenes",e)}},{key:"getNode",value:function(e){return this.getObject("nodes",e)}},{key:"getSkin",value:function(e){return this.getObject("skins",e)}},{key:"getMesh",value:function(e){return this.getObject("meshes",e)}},{key:"getMaterial",value:function(e){return this.getObject("materials",e)}},{key:"getAccessor",value:function(e){return this.getObject("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this.getObject("textures",e)}},{key:"getSampler",value:function(e){return this.getObject("samplers",e)}},{key:"getImage",value:function(e){return this.getObject("images",e)}},{key:"getBufferView",value:function(e){return this.getObject("bufferViews",e)}},{key:"getBuffer",value:function(e){return this.getObject("buffers",e)}},{key:"getObject",value:function(e,t){if("object"===Object(at.a)(t))return t;var n=this.json[e]&&this.json[e][t];if(!n)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return n}},{key:"getTypedArrayForBufferView",value:function(e){var t=(e=this.getBufferView(e)).buffer,n=this.gltf.buffers[t];_o(n);var r=(e.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,e.byteLength)}},{key:"getTypedArrayForAccessor",value:function(e){e=this.getAccessor(e);var t=this.getBufferView(e.bufferView),n=this.getBuffer(t.buffer).data,r=Ro(e,t),i=r.ArrayType,o=r.length;return new i(n,t.byteOffset+e.byteOffset,o)}},{key:"getTypedArrayForImageData",value:function(e){e=this.getAccessor(e);var t=this.getBufferView(e.bufferView),n=this.getBuffer(t.buffer).data,r=t.byteOffset||0;return new Uint8Array(n,r,t.byteLength)}},{key:"addApplicationData",value:function(e,t){return this.json[e]=t,this}},{key:"addExtraData",value:function(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}},{key:"addObjectExtension",value:function(e,t,n){return _o(n),e.extensions=e.extensions||{},e.extensions[t]=n,this.registerUsedExtension(t),this}},{key:"removeObjectExtension",value:function(e,t){return delete(e.extensions||{})[t],this}},{key:"addExtension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _o(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}},{key:"addRequiredExtension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _o(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}},{key:"registerUsedExtension",value:function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((function(t){return t===e}))||this.json.extensionsUsed.push(e)}},{key:"registerRequiredExtension",value:function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((function(t){return t===e}))||this.json.extensionsRequired.push(e)}},{key:"removeExtension",value:function(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}},{key:"setObjectExtension",value:function(e,t,n){(e.extensions||{})[t]=n}},{key:"addMesh",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=this._addAttributes(e),i={primitives:[{attributes:r,indices:t,mode:n}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}},{key:"addPointCloud",value:function(e){var t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1}},{key:"addImage",value:function(e,t){t=t||function(e){var t=Object(Eo.a)(e);return t?t.mimeType:null}(e);var n={bufferView:this.addBufferView(e),mimeType:t};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}},{key:"addBufferView",value:function(e){var t=e.byteLength;_o(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var n={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=Object(mo.c)(t),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,t){var n={bufferView:e,type:Po(t.size),componentType:t.componentType,count:t.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},n=this.addBufferView(e),r={size:t.size,componentType:Co(e),count:Math.round(e.length/t.size)};return this.addAccessor(n,Object.assign(r,t))}},{key:"createBinaryChunk",value:function(){if(!this.arrayBuffer){for(var e=this.byteLength,t=new ArrayBuffer(e),n=new Uint8Array(t),r=0,i=0;i<this.sourceBuffers.length;i++){var o=this.sourceBuffers[i];r=Object(mo.a)(o,n,r)}this.json.buffers[0].byteLength=e,this.arrayBuffer=t,this.sourceBuffers=[]}}},{key:"_removeStringFromArray",value:function(e,t){for(var n=!0;n;){var r=e.indexOf(t);r>-1?e.splice(r,1):n=!1}}},{key:"json",get:function(){return this.gltf.json}}]),e}();function Io(e){var t={};for(var n in e){var r=e[n];if("indices"!==n){var i=Mo(r);t[n]=i}}return t}function Mo(e,t){var n=function(e,t){var n=e,r=1,i=0;e&&e.value&&(n=e.value,r=e.size||1);n&&(ArrayBuffer.isView(n)||(n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;if(Array.isArray(e))return new t(e);if(n&&!(e instanceof t))return new t(e);return e}(n,Float32Array)),i=n.length/r);return{buffer:n,size:r,count:i}}(e),r=n.buffer,i=n.size;return{value:r,size:i,bufferView:null,byteOffset:0,count:n.count,type:Po(i),componentType:Co(r)}}var jo=I.a.mark(Ho);function ko(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return No(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fo(e,t,n){return Do.apply(this,arguments)}function Do(){return(Do=Object(M.a)(I.a.mark((function e(t,n,r){var i,o,a,s,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.gltf.decompressMeshes){e.next=2;break}return e.abrupt("return");case 2:i=new Lo(t),o=[],a=ko(Ho(i));try{for(a.s();!(s=a.n()).done;)u=s.value,i.getObjectExtension(u,"KHR_draco_mesh_compression")&&o.push(Uo(u,i,n,r))}catch(c){a.e(c)}finally{a.f()}return e.next=8,Promise.all(o);case 8:i.removeExtension("KHR_draco_mesh_compression");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Lo(e),i=ko(r.json.meshes||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;Vo(o,n),r.addRequiredExtension("KHR_draco_mesh_compression")}}catch(a){i.e(a)}finally{i.f()}}function Uo(e,t,n,r){return zo.apply(this,arguments)}function zo(){return(zo=Object(M.a)(I.a.mark((function e(t,n,r,i){var o,a,s,u,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.getObjectExtension(t,"KHR_draco_mesh_compression"),a=n.getTypedArrayForBufferView(o.bufferView),s=Object(mo.b)(a.buffer,a.byteOffset),u=i.parse,e.next=6,u(s,Ei,r,i);case 6:c=e.sent,t.attributes=Io(c.attributes),c.indices&&(t.indices=Mo(c.indices)),Go(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter||!r.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var o=r.DracoWriter.encodeSync({attributes:e}),a=i.parseSync,s=a({attributes:e}),u=r._addFauxAttributes(s.attributes),c=r.addBufferView(o),l={primitives:[{attributes:u,mode:n,extensions:Object(Oe.a)({},"KHR_draco_mesh_compression",{bufferView:c,attributes:u})}]};return l}function Go(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("Empty glTF primitive detected: Draco decompression failure?")}function Ho(e){var t,n,r,i,o,a;return I.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=ko(e.json.meshes||[]),s.prev=1,t.s();case 3:if((n=t.n()).done){s.next=24;break}r=n.value,i=ko(r.primitives),s.prev=6,i.s();case 8:if((o=i.n()).done){s.next=14;break}return a=o.value,s.next=12,a;case 12:s.next=8;break;case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(6),i.e(s.t0);case 19:return s.prev=19,i.f(),s.finish(19);case 22:s.next=3;break;case 24:s.next=29;break;case 26:s.prev=26,s.t1=s.catch(1),t.e(s.t1);case 29:return s.prev=29,t.f(),s.finish(29);case 32:case"end":return s.stop()}}),jo,null,[[1,26,29,32],[6,16,19,22]])}function Wo(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qo(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xo(e,t){var n=new Lo(e),r=n.json,i=n.getExtension("KHR_lights_punctual");i&&(n.json.lights=i.lights,n.removeExtension("KHR_lights_punctual"));var o,a=Wo(r.nodes||[]);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=n.getObjectExtension(s,"KHR_lights_punctual");u&&(s.light=u.light),n.removeObjectExtension(s,"KHR_lights_punctual")}}catch(c){a.e(c)}finally{a.f()}}function Zo(e,t){var n=new Lo(e),r=n.json;if(r.lights){var i=n.addExtension("KHR_lights_punctual");_o(!i.lights),i.lights=r.lights,delete r.lights}if(n.json.lights){var o,a=Wo(n.json.lights);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.node;n.addObjectExtension(u,"KHR_lights_punctual",s)}}catch(c){a.e(c)}finally{a.f()}delete n.json.lights}}function Ko(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yo(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jo(e,t){var n=new Lo(e),r=n.json;n.removeExtension("KHR_materials_unlit");var i,o=Ko(r.materials||[]);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.extensions&&a.extensions.KHR_materials_unlit&&(a.unlit=!0),n.removeObjectExtension(a,"KHR_materials_unlit")}}catch(s){o.e(s)}finally{o.f()}}function Qo(e,t){var n=new Lo(e),r=n.json;if(n.materials){var i,o=Ko(r.materials);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.unlit&&(delete a.unlit,n.addObjectExtension(a,"KHR_materials_unlit"),n.addExtension("KHR_materials_unlit"))}}catch(s){o.e(s)}finally{o.f()}}}function $o(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ea(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ta(e,t){var n=new Lo(e),r=n.json,i=n.getExtension("KHR_techniques_webgl");if(i){var o,a=function(e,t){var n=e.programs,r=void 0===n?[]:n,i=e.shaders,o=void 0===i?[]:i,a=e.techniques,s=void 0===a?[]:a,u=new TextDecoder;return o.forEach((function(e){if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=u.decode(t.getTypedArrayForBufferView(e.bufferView))})),r.forEach((function(e){e.fragmentShader=o[e.fragmentShader],e.vertexShader=o[e.vertexShader]})),s.forEach((function(e){e.program=r[e.program]})),s}(i,n),s=$o(r.materials||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.getObjectExtension(u,"KHR_techniques_webgl");c&&(u.technique=Object.assign({},c,a[c.technique]),u.technique.values=ra(u.technique,n)),n.removeObjectExtension(u,"KHR_techniques_webgl")}}catch(l){s.e(l)}finally{s.f()}n.removeExtension("KHR_techniques_webgl")}}function na(e,t){}function ra(e,t){var n=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach((function(t){e.uniforms[t].value&&!(t in n)&&(n[t]=e.uniforms[t].value)})),Object.keys(n).forEach((function(e){"object"===Object(at.a)(n[e])&&void 0!==n[e].index&&(n[e].texture=t.getTexture(n[e].index))})),n}var ia={KHR_draco_mesh_compression:r,KHR_lights_punctual:i,KHR_materials_unlit:o,KHR_techniques_webgl:a};function oa(e){return aa.apply(this,arguments)}function aa(){return(aa=Object(M.a)(I.a.mark((function e(t){var n,r,i,o,a,s=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,n.gltf=n.gltf||{},e.t0=I.a.keys(ia);case 4:if((e.t1=e.t0()).done){e.next=14;break}if(i=e.t1.value,o=n.gltf.excludeExtensions||{},i in o&&!o[i]){e.next=12;break}return a=ia[i],e.next=12,a.decode(t,n,r);case 12:e.next=4;break;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sa,ua=!0;function ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(t+0))).concat(String.fromCharCode(e.getUint8(t+1))).concat(String.fromCharCode(e.getUint8(t+2))).concat(String.fromCharCode(e.getUint8(t+3)))}function la(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new DataView(e),i=n.magic,o=void 0===i?1735152710:i,a=r.getUint32(t,!1);return a===o||1735152710===a}function fa(e,t,n,r){for(;n+8<=e.header.byteLength;){var i=t.getUint32(n+0,ua),o=t.getUint32(n+4,ua);switch(n+=8,o){case 1313821514:ha(e,t,n,i,r);break;case 5130562:da(e,t,n,i,r);break;case 0:r.glb.strict||ha(e,t,n,i,r);break;case 1:r.glb.strict||da(e,t,n,i,r)}n+=Object(mo.c)(i)}return n}function ha(e,t,n,r,i){var o=new Uint8Array(t.buffer,n,r),a=new TextDecoder("utf8").decode(o);e.json=JSON.parse(a)}function da(e,t,n,r,i){e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:t.buffer})}function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ga={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ya={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ma={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},_a={magFilter:ma.TEXTURE_MAG_FILTER,minFilter:ma.TEXTURE_MIN_FILTER,wrapS:ma.TEXTURE_WRAP_S,wrapT:ma.TEXTURE_WRAP_T},ba=(sa={},Object(Oe.a)(sa,ma.TEXTURE_MAG_FILTER,ma.LINEAR),Object(Oe.a)(sa,ma.TEXTURE_MIN_FILTER,ma.NEAREST_MIPMAP_LINEAR),Object(Oe.a)(sa,ma.TEXTURE_WRAP_S,ma.REPEAT),Object(Oe.a)(sa,ma.TEXTURE_WRAP_,ma.REPEAT),sa);var Oa=function(){function e(){Object(s.a)(this,e)}return Object(h.a)(e,[{key:"postProcess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.json,r=e.buffers,i=void 0===r?[]:r,o=e.images,a=void 0===o?[]:o,s=e.baseUri,u=void 0===s?"":s;return _o(n),this.baseUri=u,this.json=n,this.buffers=i,this.images=a,this._resolveTree(this.json,t),this.json}},{key:"_resolveTree",value:function(e){var t=this;e.bufferViews&&(e.bufferViews=e.bufferViews.map((function(e,n){return t._resolveBufferView(e,n)}))),e.images&&(e.images=e.images.map((function(e,n){return t._resolveImage(e,n)}))),e.samplers&&(e.samplers=e.samplers.map((function(e,n){return t._resolveSampler(e,n)}))),e.textures&&(e.textures=e.textures.map((function(e,n){return t._resolveTexture(e,n)}))),e.accessors&&(e.accessors=e.accessors.map((function(e,n){return t._resolveAccessor(e,n)}))),e.materials&&(e.materials=e.materials.map((function(e,n){return t._resolveMaterial(e,n)}))),e.meshes&&(e.meshes=e.meshes.map((function(e,n){return t._resolveMesh(e,n)}))),e.nodes&&(e.nodes=e.nodes.map((function(e,n){return t._resolveNode(e,n)}))),e.skins&&(e.skins=e.skins.map((function(e,n){return t._resolveSkin(e,n)}))),e.scenes&&(e.scenes=e.scenes.map((function(e,n){return t._resolveScene(e,n)}))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}},{key:"getScene",value:function(e){return this._get("scenes",e)}},{key:"getNode",value:function(e){return this._get("nodes",e)}},{key:"getSkin",value:function(e){return this._get("skins",e)}},{key:"getMesh",value:function(e){return this._get("meshes",e)}},{key:"getMaterial",value:function(e){return this._get("materials",e)}},{key:"getAccessor",value:function(e){return this._get("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this._get("textures",e)}},{key:"getSampler",value:function(e){return this._get("samplers",e)}},{key:"getImage",value:function(e){return this._get("images",e)}},{key:"getBufferView",value:function(e){return this._get("bufferViews",e)}},{key:"getBuffer",value:function(e){return this._get("buffers",e)}},{key:"_get",value:function(e,t){if("object"===Object(at.a)(t))return t;var n=this.json[e]&&this.json[e][t];return n||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),n}},{key:"_resolveScene",value:function(e,t){var n=this;return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map((function(e){return n.getNode(e)})),e}},{key:"_resolveNode",value:function(e,t){var n=this;return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map((function(e){return n.getNode(e)}))),void 0!==e.mesh&&(e.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}},{key:"_resolveSkin",value:function(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}},{key:"_resolveMesh",value:function(e,t){var n=this;return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map((function(e){var t=(e=va({},e)).attributes;for(var r in e.attributes={},t)e.attributes[r]=n.getAccessor(t[r]);return void 0!==e.indices&&(e.indices=n.getAccessor(e.indices)),void 0!==e.material&&(e.material=n.getMaterial(e.material)),e}))),e}},{key:"_resolveMaterial",value:function(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture=va({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=va({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=va({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.pbrMetallicRoughness){e.pbrMetallicRoughness=va({},e.pbrMetallicRoughness);var n=e.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture=va({},n.baseColorTexture),n.baseColorTexture.texture=this.getTexture(n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture=va({},n.metallicRoughnessTexture),n.metallicRoughnessTexture.texture=this.getTexture(n.metallicRoughnessTexture.index))}return e}},{key:"_resolveAccessor",value:function(e,t){var n,r;if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=(n=e.componentType,ya[n]),e.components=(r=e.type,ga[r]),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var i=e.bufferView.buffer,o=Ro(e,e.bufferView),a=o.ArrayType,s=o.length,u=(e.bufferView.byteOffset||0)+i.byteOffset;e.value=new a(i.arrayBuffer,u,s)}return e}},{key:"_resolveTexture",value:function(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):ba,e.source=this.getImage(e.source),e}},{key:"_resolveSampler",value:function(e,t){for(var n in e.id=e.id||"sampler-".concat(t),e.parameters={},e){var r=this._enumSamplerParameter(n);void 0!==r&&(e.parameters[r]=e[n])}return e}},{key:"_enumSamplerParameter",value:function(e){return _a[e]}},{key:"_resolveImage",value:function(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));var n=this.images[t];return n&&(e.image=n),e}},{key:"_resolveBufferView",value:function(e,t){e.id=e.id||"bufferView-".concat(t);var n=e.buffer;e.buffer=this.buffers[n];var r=this.buffers[n].arrayBuffer,i=this.buffers[n].byteOffset||0;return"byteOffset"in e&&(i+=e.byteOffset),e.data=new Uint8Array(r,i,e.byteLength),e}},{key:"_resolveCamera",value:function(e,t){return e.id=e.id||"camera-".concat(t),e.perspective,e.orthographic,e}}]),e}();function Ea(e,t){return(new Oa).postProcess(e,t)}function xa(e,t){return wa.apply(this,arguments)}function wa(){return(wa=Object(M.a)(I.a.mark((function e(t,n){var r,i,o,a,s,u,c=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:0,i=c.length>3?c[3]:void 0,o=c.length>4?c[4]:void 0,Sa(t,n,r,i),a=[],i.gltf.loadImages&&(s=Pa(t,i,o),a.push(s)),!i.gltf.loadBuffers){e.next=9;break}return e.next=9,Ta(t,i,o);case 9:return u=oa(t,i,o),a.push(u),e.next=13,Promise.all(a);case 13:return e.abrupt("return",i.gltf.postProcess?Ea(t,i):t);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t,n,r){(r.uri&&(e.baseUri=r.uri),t instanceof ArrayBuffer&&!la(t,n,r))&&(t=(new TextDecoder).decode(t));if("string"===typeof t)e.json=Object(yo.a)(t);else if(t instanceof ArrayBuffer){var i={};n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new DataView(t);e.type=ca(i,n+0),e.version=i.getUint32(n+4,ua);var o=i.getUint32(n+8,ua);return e.header={byteOffset:n,byteLength:o},Object(zn.a)(2===e.version,"Invalid GLB version ".concat(e.version,". Only supports v2.")),Object(zn.a)(e.header.byteLength>20),e.json={},e.binChunks=[],fa(e,i,n+12,r),n+e.header.byteLength}(i,t,n,r),_o("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),e._glb=i,e.json=i.json}else _o(!1,"GLTF: must be ArrayBuffer or string");var o=e.json.buffers||[];if(e.buffers=new Array(o.length).fill(null),e._glb&&e._glb.header.hasBinChunk){var a=e._glb.binChunks;e.buffers[0]={arrayBuffer:a[0].arrayBuffer,byteOffset:a[0].byteOffset,byteLength:a[0].byteLength}}var s=e.json.images||[];e.images=new Array(s.length).fill({})}function Ta(e,t,n){return Aa.apply(this,arguments)}function Aa(){return(Aa=Object(M.a)(I.a.mark((function e(t,n,r){var i,o,a,s,u,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.json.buffers.length)){e.next=18;break}if(!(o=t.json.buffers[i]).uri){e.next=15;break}return _o(a=r.fetch),s=bo(o.uri,n),e.next=9,a(s);case 9:return u=e.sent,e.next=12,u.arrayBuffer();case 12:c=e.sent,t.buffers[i]={arrayBuffer:c,byteOffset:0,byteLength:c.byteLength},delete o.uri;case 15:++i,e.next=1;break;case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t,n){return Ca.apply(this,arguments)}function Ca(){return(Ca=Object(M.a)(I.a.mark((function e(t,n,r){var i,o,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.json.images||[],o=[],a=0;a<i.length;++a)o.push(Ra(t,i[a],a,n,r));return e.next=5,Promise.all(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(e,t,n,r,i){return La.apply(this,arguments)}function La(){return(La=Object(M.a)(I.a.mark((function e(t,n,r,i,o){var a,s,u,c,l,f,h;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.fetch,s=o.parse,!n.uri){e.next=9;break}return c=bo(n.uri,i),e.next=5,a(c);case 5:return l=e.sent,e.next=8,l.arrayBuffer();case 8:u=e.sent;case 9:return Number.isFinite(n.bufferView)&&(f=Oo(t.json,t.buffers,n.bufferView),u=Object(mo.b)(f.buffer,f.byteOffset,f.byteLength)),_o(u,"glTF image has no data"),e.next=13,s(u,go.a,{},o);case 13:h=e.sent,t.images[r]=h;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ja={id:"gltf",name:"glTF",version:"2.2.8",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,test:"glTF",parse:function(e){return Na.apply(this,arguments)},options:{gltf:{loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},uri:"",log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}},ka=ja;function Na(){return(Na=Object(M.a)(I.a.mark((function e(t){var n,r,i,o,a,s=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,(n=Ma(Ma({},ja.options),n)).gltf=Ma(Ma({},ja.options.gltf),n.gltf),Fa(n),i=n.byteOffset,o=void 0===i?0:i,a={},e.next=9,xa(a,t,o,n,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e){"fetchImages"in e&&(e.gltf.loadImages=e.fetchImages),"createImages"in e&&(e.gltf.loadImages=e.createImages),"fetchLinkedResources"in e&&(e.gltf.fetchBuffers=e.fetchLinkedResources),"decompress"in e&&(e.gltf.decompressMeshes=e.decompress),"decompress"in e.gltf&&(e.gltf.decompressMeshes=e.gltf.decompress),"postProcess"in e&&(e.gltf.postProcess=e.postProcess)}var Da=0,Ba=1;function Ua(e,t,n){e.rotateYtoZ=!0;var r=e.byteOffset+e.byteLength-n;if(0===r)throw new Error("glTF byte length must be greater than 0.");return e.gltfArrayBuffer=Object(mo.b)(t,n,r),e.gltfByteOffset=0,e.gltfByteLength=r,n%4===0||console.warn("".concat(e.type,": embedded glb is not aligned to a 4-byte boundary.")),e.byteOffset+e.byteLength}function za(e,t,n,r){return Va.apply(this,arguments)}function Va(){return(Va=Object(M.a)(I.a.mark((function e(t,n,r,i){var o,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga(t,n,r),!r.loadGLTF){e.next=15;break}if(o=i.parse,a=i.fetch,!t.gltfUrl){e.next=8;break}return e.next=6,a(t.gltfUrl,r);case 6:t.gltfArrayBuffer=e.sent,t.gltfByteOffset=0;case 8:if(!t.gltfArrayBuffer){e.next=15;break}return e.next=11,o(t.gltfArrayBuffer,ka,r,i);case 11:t.gltf=e.sent,delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(e,t,n){switch(t){case Da:var r=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),i=(new TextDecoder).decode(r);e.gltfUrl=i.replace(/[\s\0]+$/,""),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case Ba:break;default:throw new Error("b3dm: Illegal glTF format field")}}function Ha(e,t,n,r,i){return Wa.apply(this,arguments)}function Wa(){return(Wa=Object(M.a)(I.a.mark((function e(t,n,r,i,o){var a,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t,n,r,i,o),e.next=3,za(t,Ba,i,o);case 3:return a=t.gltf||{},(s=a.extensions)&&s.CESIUM_RTC&&(t.rtcCenter=s.CESIUM_RTC.center),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(e,t,n,r,i){n=Ua(e,t,n=Wi(e,t,n=Hi(e,t,n=Gi(e,t,n,r))));var o=new Ii(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=o.getGlobalProperty("RTC_CENTER",Pi.FLOAT,3),n}var Xa=n("Xjzu");function Za(e,t,n,r,i){return Ka.apply(this,arguments)}function Ka(){return(Ka=Object(M.a)(I.a.mark((function e(t,n,r,i,o){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ya(t,n,r,i,o),e.next=3,za(t,t.gltfFormat,i,o);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(e,t,n,r,i){if(n=Gi(e,t,n,r),1!==e.version)throw new Error("Instanced 3D Model version ".concat(e.version," is not supported"));n=Hi(e,t,n);var o=new DataView(t);if(e.gltfFormat=o.getUint32(n,!0),n=Ua(e,t,n=Wi(e,t,n+=4)),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var a=new Ii(e.featureTableJson,e.featureTableBinary),s=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=a.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=a.getGlobalProperty("RTC_CENTER",Pi.FLOAT,3);new Vi(e.batchTableJson,e.batchTableBinary,s);return function(e,t,n,r){for(var i=[new Array(r),e._batchTable][0],o=new F.a,a=new F.a,s=new F.a,u=new F.a,c=new W.a,l=new Xa.a,f=new F.a,h={},d=new Ee.a,p=[],v=[],g=new F.a,y=new F.a,m=0;m<r;m++){var _=void 0;if(t.hasProperty("POSITION"))_=t.getProperty("POSITION",Pi.FLOAT,3,m,o);else if(t.hasProperty("POSITION_QUANTIZED")){_=t.getProperty("POSITION_QUANTIZED",Pi.UNSIGNED_SHORT,3,m,o);var b=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Pi.FLOAT,3,g);if(!b)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var O=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Pi.FLOAT,3,y);if(!O)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var E=65535,x=0;x<3;x++)_[x]=_[x]/E*O[x]+b[x]}if(!_)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");o.copy(_),h.translation=o,e.normalUp=t.getProperty("NORMAL_UP",Pi.FLOAT,3,m,p),e.normalRight=t.getProperty("NORMAL_RIGHT",Pi.FLOAT,3,m,v);var w=!1;if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=t.getProperty("NORMAL_UP_OCT32P",Pi.UNSIGNED_SHORT,2,p),e.octNormalRight=t.getProperty("NORMAL_RIGHT_OCT32P",Pi.UNSIGNED_SHORT,2,v),e.octNormalUp){if(!e.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}e.eastNorthUp?(Bn.WGS84.eastNorthUpToFixedFrame(o,d),d.getRotationMatrix3(c)):c.identity()}w&&(u.copy(a).cross(s).normalize(),c.setColumn(0,a),c.setColumn(1,s),c.setColumn(2,u)),l.fromMatrix3(c),h.rotation=l,f.set(1,1,1);var S=t.getProperty("SCALE",Pi.FLOAT,1,m);Number.isFinite(S)&&f.multiplyByScalar(S);var T=t.getProperty("SCALE_NON_UNIFORM",Pi.FLOAT,3,m,p);T&&f.scale(T),h.scale=f;var A=t.getProperty("BATCH_ID",Pi.UNSIGNED_SHORT,1,m);void 0===A&&(A=m);var P=(new Ee.a).fromQuaternion(h.rotation);d.identity(),d.translate(h.translation),d.multiplyRight(P),d.scale(h.scale);var C=d.clone();i[m]={modelMatrix:C,batchId:A}}e.instances=i}(e,a,0,s),n}function Ja(e,t,n,r,i,o){return Qa.apply(this,arguments)}function Qa(){return(Qa=Object(M.a)(I.a.mark((function e(t,n,r,i,o,a){var s,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Gi(t,n,r,i),s=new DataView(n),t.tilesLength=s.getUint32(r,!0),r+=4,t.tiles=[];case 5:if(!(t.tiles.length<t.tilesLength&&t.byteLength-r>12)){e.next=13;break}return u={},t.tiles.push(u),e.next=10,a(n,r,i,o,u);case 10:r=e.sent,e.next=5;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e){return es.apply(this,arguments)}function es(){return(es=Object(M.a)(I.a.mark((function e(t){var n,r,i,o,a=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:0,r=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,o=a.length>4&&void 0!==a[4]?a[4]:{},r=r["3d-tiles"]||{},o.byteOffset=n,o.type=ri(t,n),e.t0=o.type,e.next=e.t0===ti.COMPOSITE?10:e.t0===ti.BATCHED_3D_MODEL?13:e.t0===ti.INSTANCED_3D_MODEL?16:e.t0===ti.POINT_CLOUD?19:22;break;case 10:return e.next=12,Ja(o,t,n,r,i,$a);case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,Ha(o,t,n,r,i);case 15:return e.abrupt("return",e.sent);case 16:return e.next=18,Za(o,t,n,r,i);case 18:return e.abrupt("return",e.sent);case 19:return e.next=21,io(o,t,n,r,i);case 21:return e.abrupt("return",e.sent);case 22:throw new Error("3DTileLoader: unknown type ".concat(o.type));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ts(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ns(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rs(e,t){if(e.content){var n=e.content.uri||e.content.url;e.contentUrl="".concat(t.basePath,"/").concat(n)}return e.id=e.contentUrl,e.lodMetricType=fr,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform,e.type=function(e){if(!e.contentUrl)return or;var t=e.contentUrl.split(".").pop();switch(t){case"pnts":return sr;case"i3dm":case"b3dm":return ar;default:return t}}(e),e.refine=function(e){switch(e){case"REPLACE":case"replace":return ir;case"ADD":case"add":return rr;default:return e}}(e.refine),e}function is(e){var t=e.basePath,n=rs(e.root,e),r=[];for(r.push(n);r.length>0;){var i,o=ts(r.pop().children||[]);try{for(o.s();!(i=o.n()).done;){var a=i.value;rs(a,{basePath:t}),r.push(a)}}catch(s){o.e(s)}finally{o.f()}}return n}function os(e){return Vn.a.dirname(e.url)}function as(e,t,n){return ss.apply(this,arguments)}function ss(){return(ss=Object(M.a)(I.a.mark((function e(t,n,r){var i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i={}).content=i.content||{},0,e.next=5,$a(t,0,n,r,i.content);case 5:return e.abrupt("return",i.content);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(e,t,n){return cs.apply(this,arguments)}function cs(){return(cs=Object(M.a)(I.a.mark((function e(t,n,r){var i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=JSON.parse((new TextDecoder).decode(t))).loader=n.loader||fs,i.url=r.url,i.basePath=os(i),i.root=is(i),i.type=lr,i.lodMetricType=fr,i.lodMetricValue=i.root.lodMetricValue,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(){return(ls=Object(M.a)(I.a.mark((function e(t,n,r,i){var o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n["3d-tiles"]||{},!("isTileset"in o?o.isTileset:r.url&&-1!==r.url.indexOf(".json"))){e.next=8;break}return e.next=5,us(t,n,r,i);case 5:t=e.sent,e.next=11;break;case 8:return e.next=10,as(t,n,r);case 10:t=e.sent;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fs={id:"3d-tiles",name:"3D Tiles",version:"2.2.8",extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],test:["cmpt","pnts","b3dm","i3dm"],parse:function(e,t,n,r){return ls.apply(this,arguments)},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1}}},hs=fs;function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vs=new st.d,gs={getPointColor:[0,0,0],pointSize:1,data:null,loadOptions:{},loader:hs,onTilesetLoad:function(e){},onTileLoad:function(e){},onTileUnload:function(e){},onTileError:function(e,t,n){}},ys=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&j.a.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(t.data&&t.data!==n.data&&this._loadTileset(t.data),r.viewportChanged){var i=this.state.tileset3d;this._updateTileset(i)}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=e.sourceLayer,r=this.state.layerMap,i=n&&n.id;if(i){var o=i.substring(this.id.length+1),a=o.substring(o.indexOf("-")+1);t.object=r[a]&&r[a].tile}return t}},{key:"_loadTileset",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n,r,i,o,a,s,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.loader,i=n.loadOptions,o=ps({},i),!r.preload){e.next=7;break}return e.next=5,r.preload(t,i);case 5:a=e.sent,Object.assign(o,a);case 7:return e.next=9,Object(dn.a)(t,r,o);case 9:s=e.sent,u=new ei(s,ps({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileLoadFail:this.props.onTileError},o)),this.setState({tileset3d:u,layerMap:{}}),this._updateTileset(u),this.props.onTilesetLoad(u);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(e){this.props.onTileLoad(e),this._updateTileset(this.state.tileset3d),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(e){delete this.state.layerMap[e.id],this.props.onTileUnload(e)}},{key:"_updateTileset",value:function(e){var t=this.context,n=t.timeline,r=t.viewport;if(n&&r&&e){var i=e.update(r);this.state.frameNumber!==i&&this.setState({frameNumber:i})}}},{key:"_create3DTileLayer",value:function(e){if(!e.content)return null;switch(e.type){case sr:return this._createPointCloudTileLayer(e);case ar:return this._create3DModelTileLayer(e);case ur:return this._createSimpleMeshLayer(e);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(e.content.type))}}},{key:"_createPointCloudTileLayer",value:function(e){var t=e.content,n=t.attributes,r=t.pointCount,i=t.constantRGBA,o=t.cartographicOrigin,a=t.modelMatrix,s=n.positions,u=n.normals,c=n.colors;if(!s)return null;var l=this.props,f=l.pointSize,h=l.getPointColor;return new(this.getSubLayerClass("pointcloud",yt.a))({pointSize:f},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(e.id),data:{header:{vertexCount:r},attributes:{POSITION:s,NORMAL:u,COLOR_0:c}},coordinateSystem:gt.a.METER_OFFSETS,coordinateOrigin:o,modelMatrix:a,getColor:i||h})}},{key:"_create3DModelTileLayer",value:function(e){var t=e.content,n=t.gltf,r=t.instances,i=t.cartographicOrigin,o=t.modelMatrix;return new(this.getSubLayerClass("scenegraph",sn))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(e.id),data:r||[{}],scenegraph:n,coordinateSystem:gt.a.METER_OFFSETS,coordinateOrigin:i,modelMatrix:o,getTransformMatrix:function(e){return e.modelMatrix},getPosition:function(e){return[0,0,0]}})}},{key:"_createSimpleMeshLayer",value:function(e){for(var t=e.content,n=t.attributes,r=t.modelMatrix,i=t.cartographicOrigin,o=t.texture,a=n.normals,s=n.texCoords,u=new Float32Array(n.positions.value.length),c=0;c<u.length;c+=3)vs.copy(n.positions.value.subarray(c,c+3)),u.set(vs,c);var l=new vt.a({drawMode:4,attributes:{positions:u,normals:a,texCoords:s}});return new(this.getSubLayerClass("mesh",hn))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(e.id),mesh:l,data:[{}],getPosition:[0,0,0],getColor:[255,255,255],texture:o,modelMatrix:r,coordinateOrigin:i,coordinateSystem:gt.a.METER_OFFSETS})}},{key:"renderLayers",value:function(){var e=this,t=this.state,n=t.tileset3d,r=t.layerMap;return n?n.tiles.map((function(t){var n=r[t.id]&&r[t.id].layer;return t.selected?(n||(n=e._create3DTileLayer(t),r[t.id]={layer:n,tile:t}),n&&n.props&&!n.props.visible&&(n=n.clone({visible:!0}),r[t.id].layer=n),n):(n&&n.props&&n.props.visible&&(n=n.clone({visible:!1}),r[t.id].layer=n),n)})).filter(Boolean):null}}]),t}(d.a);ys.layerName="Tile3DLayer",ys.defaultProps=gs;var ms=n("zGfa");class _s{constructor(e=257){this.gridSize=e;const t=e-1;if(t&t-1)throw new Error(`Expected grid size to be 2^n+1, got ${e}.`);this.numTriangles=t*t*2-2,this.numParentTriangles=this.numTriangles-t*t,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(4*this.numTriangles);for(let n=0;n<this.numTriangles;n++){let e=n+2,r=0,i=0,o=0,a=0,s=0,u=0;for(1&e?o=a=s=t:r=i=u=t;(e>>=1)>1;){const t=r+o>>1,n=i+a>>1;1&e?(o=r,a=i,r=s,i=u):(r=o,i=a,o=s,a=u),s=t,u=n}const c=4*n;this.coords[c+0]=r,this.coords[c+1]=i,this.coords[c+2]=o,this.coords[c+3]=a}}createTile(e){return new bs(e,this)}}class bs{constructor(e,t){const n=t.gridSize;if(e.length!==n*n)throw new Error(`Expected terrain data of length ${n*n} (${n} x ${n}), got ${e.length}.`);this.terrain=e,this.martini=t,this.errors=new Float32Array(e.length),this.update()}update(){const{numTriangles:e,numParentTriangles:t,coords:n,gridSize:r}=this.martini,{terrain:i,errors:o}=this;for(let a=e-1;a>=0;a--){const e=4*a,s=n[e+0],u=n[e+1],c=n[e+2],l=n[e+3],f=s+c>>1,h=u+l>>1,d=f+h-u,p=h+s-f,v=(i[u*r+s]+i[l*r+c])/2,g=h*r+f,y=Math.abs(v-i[g]);if(o[g]=Math.max(o[g],y),a<t){const e=(u+p>>1)*r+(s+d>>1),t=(l+p>>1)*r+(c+d>>1);o[g]=Math.max(o[g],o[e],o[t])}}}getMesh(e=0){const{gridSize:t,indices:n}=this.martini,{errors:r}=this;let i=0,o=0;const a=t-1;function s(a,u,c,l,f,h){const d=a+c>>1,p=u+l>>1;Math.abs(a-f)+Math.abs(u-h)>1&&r[p*t+d]>e?(s(f,h,a,u,d,p),s(c,l,f,h,d,p)):(n[u*t+a]=n[u*t+a]||++i,n[l*t+c]=n[l*t+c]||++i,n[h*t+f]=n[h*t+f]||++i,o++)}n.fill(0),s(0,0,a,a,a,0),s(a,a,0,0,0,a);const u=new Uint16Array(2*i),c=new Uint32Array(3*o);let l=0;function f(i,o,a,s,h,d){const p=i+a>>1,v=o+s>>1;if(Math.abs(i-h)+Math.abs(o-d)>1&&r[v*t+p]>e)f(h,d,i,o,p,v),f(a,s,h,d,p,v);else{const e=n[o*t+i]-1,r=n[s*t+a]-1,f=n[d*t+h]-1;u[2*e]=i,u[2*e+1]=o,u[2*r]=a,u[2*r+1]=s,u[2*f]=h,u[2*f+1]=d,c[l++]=e,c[l++]=r,c[l++]=f}}return f(0,0,a,a,a,0),f(a,a,0,0,0,a),{vertices:u,triangles:c}}}function Os(e,t){if(null===e)return null;var n=t.meshMaxError,r=t.bounds,i=t.elevationDecoder,o=e.data,a=e.width,s=a+1,u=function(e,t,n){for(var r=n.rScaler,i=n.bScaler,o=n.gScaler,a=n.offset,s=t+1,u=new Float32Array(s*s),c=0,l=0;l<t;l++)for(var f=0;f<t;f++,c++){var h=4*c,d=e[h+0],p=e[h+1],v=e[h+2];u[c+l]=d*r+p*o+v*i+a}for(var g=s*(s-1),y=0;y<s-1;y++,g++)u[g]=u[g-s];for(var m=s-1,_=0;_<s;_++,m+=s)u[m]=u[m-1];return u}(o,a,i),c=new _s(s).createTile(u).getMesh(n),l=c.vertices,f=c.triangles,h=function(e,t,n,r){for(var i=n+1,o=e.length/2,a=new Float32Array(3*o),s=new Float32Array(2*o),u=r||[0,0,n,n],c=Object(v.a)(u,4),l=c[0],f=c[1],h=c[2],d=c[3],p=(h-l)/n,g=(d-f)/n,y=0;y<o;y++){var m=e[2*y],_=e[2*y+1],b=_*i+m;a[3*y+0]=m*p+l,a[3*y+1]=-_*g+d,a[3*y+2]=t[b],s[2*y+0]=m/n,s[2*y+1]=_/n}return{POSITION:{value:a,size:3},TEXCOORD_0:{value:s,size:2}}}(l,u,a,r);return{loaderData:{header:{}},header:{vertexCount:f.length,boundingBox:Object(pi.a)(h)},mode:4,indices:{value:f,size:1},attributes:h}}function Es(){return(Es=Object(M.a)(I.a.mark((function e(t,n,r){var i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.image=n.image||{},n.image.type="data",e.next=4,r.parse(t,n,n.baseUri);case 4:return i=e.sent,e.abrupt("return",Os(i,n.terrain));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ss=ws(ws({},{id:"terrain",name:"Terrain",version:"2.2.8",extensions:["png","pngraw"],mimeTypes:["image/png"],options:{terrain:{bounds:null,workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat("2.2.8","/dist/terrain-loader.worker.js"),meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0}}}}),{},{parse:function(e,t,n){return Es.apply(this,arguments)}});function Ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var As=[1],Ps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},$e.defaultProps,{elevationData:De,texture:De,meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:{type:"string",value:null},wireframe:!1,material:!0});function Cs(e){return Array.isArray(e)?e.join(";"):e}var Rs=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=t.elevationData!==n.elevationData;if(r){var i=t.elevationData,o=i&&(Array.isArray(i)||i.includes("{x}")&&i.includes("{y}"));this.setState({isTiled:o})}var a=r||t.meshMaxError!==n.meshMaxError||t.elevationDecoder!==n.elevationDecoder||t.bounds!==n.bounds;if(!this.state.isTiled&&a){var s=this.loadTerrain(t);this.setState({terrain:s})}}},{key:"loadTerrain",value:function(e){var t=e.elevationData,n=e.bounds,r=e.elevationDecoder,i=e.meshMaxError,o=e.workerUrl;if(!t)return null;var a={terrain:{bounds:n,meshMaxError:i,elevationDecoder:r}};return null!==o&&(a.terrain.workerUrl=o),Object(dn.a)(t,Ss,a)}},{key:"getTiledTerrainData",value:function(e){var t=this.props,n=t.elevationData,r=t.texture,i=t.elevationDecoder,o=t.meshMaxError,a=t.workerUrl,s=Be(n,e),u=Be(r,e),c=e.bbox,l=e.z,f=new ms.a({longitude:(c.west+c.east)/2,latitude:(c.north+c.south)/2,zoom:l}),h=f.projectFlat([c.west,c.south]),d=f.projectFlat([c.east,c.north]),p=[h[0],h[1],d[0],d[1]],v=this.loadTerrain({elevationData:s,bounds:p,elevationDecoder:i,meshMaxError:o,workerUrl:a}),g=u?Object(dn.a)(u).catch((function(e){return null})):Promise.resolve(null);return Promise.all([v,g])}},{key:"renderSubLayers",value:function(e){var t=this.getSubLayerClass("mesh",hn),n=e.data,r=e.color;if(!n)return null;var i=Object(v.a)(n,2),o=i[0],a=i[1];return new t(e,{data:As,mesh:o,texture:a,coordinateSystem:gt.a.CARTESIAN,getPosition:function(e){return[0,0,0]},getColor:r})}},{key:"onViewportLoad",value:function(e){if(e&&0!==e.length&&!e.every((function(e){return!e}))){var t=this.state.zRange,n=e.filter(Boolean).map((function(e){return e[0].header.boundingBox.map((function(e){return e[2]}))})),r=Math.min.apply(Math,Object(Pt.a)(n.map((function(e){return e[0]})))),i=Math.max.apply(Math,Object(Pt.a)(n.map((function(e){return e[1]}))));(!t||r<t[0]||i>t[1])&&this.setState({zRange:[r,i]})}}},{key:"renderLayers",value:function(){var e=this.props,t=e.color,n=e.material,r=e.elevationData,i=e.texture,o=e.wireframe,a=e.meshMaxError,s=e.elevationDecoder,u=e.tileSize,c=e.maxZoom,l=e.minZoom,f=e.extent,h=e.maxRequests;return this.state.isTiled?new $e(this.getSubLayerProps({id:"tiles"}),{wireframe:o,color:t,material:n,getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:Cs(r),texture:Cs(i),meshMaxError:a,elevationDecoder:s}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:u,maxZoom:c,minZoom:l,extent:f,maxRequests:h}):new(this.getSubLayerClass("mesh",hn))(this.getSubLayerProps({id:"mesh"}),{data:As,mesh:this.state.terrain,texture:i,_instanced:!1,getPosition:function(e){return[0,0,0]},getColor:t,material:n,wireframe:o})}}]),t}(d.a);Rs.layerName="TerrainLayer",Rs.defaultProps=Ps;var Ls=n("dA7e"),Is=n("eRUA"),Ms=n.n(Is),js=["Unknown","Point","LineString","Polygon"];function ks(e,t){for(var n=0;n<e.length;n++){var r=e[n];e[n]=[r.x/t.extent,r.y/t.extent]}}function Ns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e},n=js[e.type],r=e.loadGeometry();switch(e.type){case 1:for(var i=[],o=0;o<r.length;o++)i[o]=r[o][0];t(r=i,e);break;case 2:for(var a=0;a<r.length;a++)t(r[a],e);break;case 3:r=Ds(r);for(var s=0;s<r.length;s++)for(var u=0;u<r[s].length;u++)t(r[s][u],e)}return Fs(n,e,r)}function Fs(e,t,n){var r=e;1===n.length?n=n[0]:r="Multi".concat(e);var i={type:"Feature",geometry:{type:r,coordinates:n},properties:t.properties||{}};return"id"in t&&(i.id=t.id),i}function Ds(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Bs(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function Bs(e){for(var t,n,r=e.length,i=0,o=0,a=r-1;o<r;a=o++)t=e[o],i+=((n=e[a]).x-t.x)*(t.y+n.y);return i}function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vs(e,t){if(0===e.byteLength)return[];var n=new Ls.VectorTile(new Ms.a(e)),r=t.mvt,i=[];return(Array.isArray(r.layers)?r.layers:Object.keys(n.layers)).forEach((function(e){var t=n.layers[e],o=zs(zs({},r),{},{layerName:e});if(t)for(var a=0;a<t.length;a++){var s=Gs(t.feature(a),o);i.push(s)}})),i}function Gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="wgs84"===t.coordinates,r=t.tileIndex&&t.tileIndex.x&&t.tileIndex.y&&t.tileIndex.z;if(n&&!r)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property. Check documentation.");var i=n&&r?e.toGeoJSON(t.tileIndex.x,t.tileIndex.y,t.tileIndex.z):Ns(e,ks);return t.layerProperty&&(i.properties[t.layerProperty]=t.layerName),i}function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){Object(Oe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qs=Ws(Ws({},{id:"mvt",name:"Mapbox Vector Tile",version:"2.2.8",extensions:["mvt"],mimeTypes:["application/x-protobuf"],category:"geometry",options:{mvt:{coordinates:"local",layerProperty:"layerName",layers:null,tileIndex:null,workerUrl:"https://unpkg.com/@loaders.gl/mvt@".concat("2.2.8","/dist/mvt-loader.worker.js")}}}),{},{parse:function(){var e=Object(M.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),parseSync:Vs,binary:!0}),Xs=n("ReQy"),Zs={clipBounds:[0,0,1,1]},Ks="\nuniform vec4 clip_bounds;\n\nbool clip_isInBounds(vec2 position) {\n  return position.x >= clip_bounds[0] && position.y >= clip_bounds[1] && position.x < clip_bounds[2] && position.y < clip_bounds[3];\n}\n",Ys={name:"clip-vs",vs:Ks},Js={"vs:#decl":"\nvarying float clip_isVisible;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));\n","fs:#decl":"\nvarying float clip_isVisible;\n","fs:DECKGL_FILTER_COLOR":"\n  if (clip_isVisible < 0.5) discard;\n"},Qs={name:"clip-fs",fs:Ks},$s={"vs:#decl":"\nvarying vec2 clip_commonPosition;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_commonPosition = geometry.position.xy;\n","fs:#decl":"\nvarying vec2 clip_commonPosition;\n","fs:DECKGL_FILTER_COLOR":"\n  if (!clip_isInBounds(clip_commonPosition)) discard;\n"},eu=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"getShaders",value:function(){var e="instancePositions"in this.getAttributeManager().attributes;return"clipByInstance"in this.props&&(e=this.props.clipByInstance),this.state.clipByInstance=e,e?{modules:[Ys],inject:Js}:{modules:[Qs],inject:$s}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.clipBounds,r=void 0===n?Zs.clipBounds:n;if(this.state.clipByInstance)t.clip_bounds=r;else{var i=this.projectPosition([r[0],r[1],0]),o=this.projectPosition([r[2],r[3],0]);t.clip_bounds=[Math.min(i[0],o[0]),Math.min(i[1],o[1]),Math.max(i[0],o[0]),Math.max(i[1],o[1])]}}}]),t}(Xs.a);eu.extensionName="ClipExtension",eu.defaultProps=Zs;var tu=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(h.a)(t,[{key:"getTileData",value:function(e){var t=Be(this.props.data,e);return t?Object(dn.a)(t,qs,this.getLoadOptions()):Promise.reject("Invalid URL")}},{key:"renderSubLayers",value:function(e){var n=e.tile,r=Math.pow(2,n.z),i=512/r,o=-i,a=512*n.x/r,s=512*(1-n.y/r),u=(new st.a).scale([i,o,1]);return e.autoHighlight=!1,e.modelMatrix=u,e.coordinateOrigin=[a,s,0],e.coordinateSystem=gt.a.CARTESIAN,e.extensions=[].concat(Object(Pt.a)(e.extensions||[]),[new eu]),Object(et.a)(Object(c.a)(t.prototype),"renderSubLayers",this).call(this,e)}},{key:"onHover",value:function(e,n){var r=this.props,i=r.uniqueIdProperty;if(r.autoHighlight){var o,a=this.state.hoveredFeatureId,s=e.object;s&&(o=nu(s,i)),a!==o&&this.setState({hoveredFeatureId:o})}return Object(et.a)(Object(c.a)(t.prototype),"onHover",this).call(this,e,n)}},{key:"getHighlightedObjectIndex",value:function(e){var t=this.state.hoveredFeatureId,n=this.props,r=n.uniqueIdProperty,i=n.highlightedFeatureId,o=e.data;if(!(ru(t)||ru(i))||!Array.isArray(o))return-1;var a=ru(i)?i:t;return o.findIndex((function(e){return nu(e,r)===a}))}}]),t}($e);function nu(e,t){return t?e.properties[t]:"id"in e?e.id:-1}function ru(e){return void 0!==e&&null!==e&&""!==e}tu.layerName="MVTLayer",tu.defaultProps={uniqueIdProperty:{type:"string",value:""},highlightedFeatureId:null}},LOvY:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},Lhll:function(e,t,n){"use strict";const r=()=>"function"===typeof Symbol,i=e=>r()&&Boolean(Symbol[e]),o=e=>i(e)?Symbol[e]:"@@"+e;i("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const a=o("iterator"),s=o("observable"),u=o("species");function c(e,t){const n=e[t];if(null!=n){if("function"!==typeof n)throw new TypeError(n+" is not a function");return n}}function l(e){let t=e.constructor;return void 0!==t&&(t=t[u],null===t&&(t=void 0)),void 0!==t?t:_}function f(e){f.log?f.log(e):setTimeout(()=>{throw e},0)}function h(e){Promise.resolve().then(()=>{try{e()}catch(t){f(t)}})}function d(e){const t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"===typeof t)t();else{const e=c(t,"unsubscribe");e&&e.call(t)}}catch(n){f(n)}}function p(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function v(e,t,n){e._state="running";const r=e._observer;try{const i=r?c(r,t):void 0;switch(t){case"next":i&&i.call(r,n);break;case"error":if(p(e),!i)throw n;i.call(r,n);break;case"complete":p(e),i&&i.call(r)}}catch(i){f(i)}"closed"===e._state?d(e):"running"===e._state&&(e._state="ready")}function g(e,t,n){if("closed"!==e._state)return"buffering"===e._state?(e._queue=e._queue||[],void e._queue.push({type:t,value:n})):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void h(()=>function(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const n of t)if(v(e,n.type,n.value),"closed"===e._state)break}}(e))):void v(e,t,n)}class y{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const n=new m(this);try{this._cleanup=t.call(void 0,n)}catch(r){n.error(r)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(p(this),d(this))}}class m{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){g(this._subscription,"next",e)}error(e){g(this._subscription,"error",e)}complete(){g(this._subscription,"complete")}}class _{constructor(e){if(!(this instanceof _))throw new TypeError("Observable cannot be called as a function");if("function"!==typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,t,n){return"object"===typeof e&&null!==e||(e={next:e,error:t,complete:n}),new y(e,this._subscriber)}pipe(e,...t){let n=this;for(const r of[e,...t])n=r(n);return n}tap(e,t,n){const r="object"!==typeof e||null===e?{next:e,error:t,complete:n}:e;return new _(e=>this.subscribe({next(t){r.next&&r.next(t),e.next(t)},error(t){r.error&&r.error(t),e.error(t)},complete(){r.complete&&r.complete(),e.complete()},start(e){r.start&&r.start(e)}}))}forEach(e){return new Promise((t,n)=>{if("function"!==typeof e)return void n(new TypeError(e+" is not a function"));function r(){i.unsubscribe(),t()}const i=this.subscribe({next(t){try{e(t,r)}catch(o){n(o),i.unsubscribe()}},error:n,complete:t})})}map(e){if("function"!==typeof e)throw new TypeError(e+" is not a function");return new(l(this))(t=>this.subscribe({next(n){let r=n;try{r=e(n)}catch(i){return t.error(i)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if("function"!==typeof e)throw new TypeError(e+" is not a function");return new(l(this))(t=>this.subscribe({next(n){try{if(!e(n))return}catch(r){return t.error(r)}t.next(n)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if("function"!==typeof e)throw new TypeError(e+" is not a function");const n=l(this),r=arguments.length>1;let i=!1,o=t;return new n(t=>this.subscribe({next(n){const a=!i;if(i=!0,!a||r)try{o=e(o,n)}catch(s){return t.error(s)}else o=n},error(e){t.error(e)},complete(){if(!i&&!r)return t.error(new TypeError("Cannot reduce an empty sequence"));t.next(o),t.complete()}}))}concat(...e){const t=l(this);return new t(n=>{let r,i=0;return function o(a){r=a.subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){i===e.length?(r=void 0,n.complete()):o(t.from(e[i++]))}})}(this),()=>{r&&(r.unsubscribe(),r=void 0)}})}flatMap(e){if("function"!==typeof e)throw new TypeError(e+" is not a function");const t=l(this);return new t(n=>{const r=[],i=this.subscribe({next(i){let a;if(e)try{a=e(i)}catch(u){return n.error(u)}else a=i;const s=t.from(a).subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){const e=r.indexOf(s);e>=0&&r.splice(e,1),o()}});r.push(s)},error(e){n.error(e)},complete(){o()}});function o(){i.closed&&0===r.length&&n.complete()}return()=>{r.forEach(e=>e.unsubscribe()),i.unsubscribe()}})}[s](){return this}static from(e){const t="function"===typeof this?this:_;if(null==e)throw new TypeError(e+" is not an object");const n=c(e,s);if(n){const r=n.call(e);if(Object(r)!==r)throw new TypeError(r+" is not an object");return function(e){return e instanceof _}(r)&&r.constructor===t?r:new t(e=>r.subscribe(e))}if(i("iterator")){const n=c(e,a);if(n)return new t(t=>{h(()=>{if(!t.closed){for(const r of n.call(e))if(t.next(r),t.closed)return;t.complete()}})})}if(Array.isArray(e))return new t(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){return new("function"===typeof this?this:_)(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})})}static get[u](){return this}}r()&&Object.defineProperty(_,Symbol("extensions"),{value:{symbol:s,hostReportError:f},configurable:!0});t.a=_},LuF4:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("rv+A");function i(e){try{return JSON.parse(e)}catch(t){throw new Error('Failed to parse JSON from data starting with "'.concat(Object(r.a)(e),'"'))}}},NEZD:function(e,t,n){"use strict";var r=n("Lhll"),i=n("qyNU");var o=function(e){"function"===typeof e?e():e&&"function"===typeof e.unsubscribe&&e.unsubscribe()};t.a=function(e){const t=new i.a;let n,a=0;return new r.a(r=>{n||(n=e.subscribe(t));const i=t.subscribe(r);return a++,()=>{a--,i.unsubscribe(),0===a&&(o(n),n=void 0)}})}},NOtv:function(e,t,n){(function(r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n("3JDX")(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n("8oxB"))},OImt:function(e,t,n){function r(e,t){"use strict";var n=(t=t||{}).pos||0,i="<".charCodeAt(0),o=">".charCodeAt(0),a="-".charCodeAt(0),s="/".charCodeAt(0),u="!".charCodeAt(0),c="'".charCodeAt(0),l='"'.charCodeAt(0),f="[".charCodeAt(0);"]".charCodeAt(0);function h(){for(var t=[];e[n];)if(e.charCodeAt(n)==i){if(e.charCodeAt(n+1)===s)return(n=e.indexOf(">",n))+1&&(n+=1),t;if(e.charCodeAt(n+1)===u){if(e.charCodeAt(n+2)==a){for(;-1!==n&&(e.charCodeAt(n)!==o||e.charCodeAt(n-1)!=a||e.charCodeAt(n-2)!=a||-1==n);)n=e.indexOf(">",n+1);-1===n&&(n=e.length)}else{if(e.charCodeAt(n+2)===f&&e.charCodeAt(n+8)===f&&"cdata"===e.substr(n+3,5).toLowerCase()){var r=e.indexOf("]]>",n);-1==r?(t.push(e.substr(n+8)),n=e.length):(t.push(e.substring(n+9,r)),n=r+3);continue}for(n+=2;e.charCodeAt(n)!==o&&e[n];)n++}n++;continue}var c=g();t.push(c)}else{var l=d();l.trim().length>0&&t.push(l),n++}return t}function d(){var t=n;return-2===(n=e.indexOf("<",n)-1)&&(n=e.length),e.slice(t,n+1)}function p(){for(var t=n;-1==="\r\n\t>/= ".indexOf(e[n])&&e[n];)n++;return e.slice(t,n)}var v=t.noChildNodes||["img","br","input","meta","link"];function g(){n++;const t=p(),r={};let i=[];for(;e.charCodeAt(n)!==o&&e[n];){var a=e.charCodeAt(n);if(a>64&&a<91||a>96&&a<123){for(var u=p(),f=e.charCodeAt(n);f&&f!==c&&f!==l&&!(f>64&&f<91||f>96&&f<123)&&f!==o;)n++,f=e.charCodeAt(n);if(f===c||f===l){var d=y();if(-1===n)return{tagName:t,attributes:r,children:i}}else d=null,n--;r[u]=d}n++}if(e.charCodeAt(n-1)!==s)if("script"==t){var g=n+1;n=e.indexOf("<\/script>",n),i=[e.slice(g,n)],n+=9}else if("style"==t){g=n+1;n=e.indexOf("</style>",n),i=[e.slice(g,n)],n+=8}else-1==v.indexOf(t)&&(n++,i=h());else n++;return{tagName:t,attributes:r,children:i}}function y(){var t=e[n],r=n+1;return n=e.indexOf(t,r),e.slice(r,n)}function m(){var n=new RegExp("\\s"+t.attrName+"\\s*=['\"]"+t.attrValue+"['\"]").exec(e);return n?n.index:-1}var _=null;if(void 0!==t.attrValue){t.attrName=t.attrName||"id";for(_=[];-1!==(n=m());)-1!==(n=e.lastIndexOf("<",n))&&_.push(g()),e=e.substr(n),n=0}else _=t.parseNode?g():h();return t.filter&&(_=r.filter(_,t.filter)),t.setPos&&(_.pos=n),_}r.simplify=function(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var n in e.forEach((function(e){if("object"===typeof e){t[e.tagName]||(t[e.tagName]=[]);var n=r.simplify(e.children);t[e.tagName].push(n),Object.keys(e.attributes).length&&(n._attributes=e.attributes)}})),t)1==t[n].length&&(t[n]=t[n][0]);return t},r.simplifyLostLess=function(e,t={}){var n={};return e.length?1===e.length&&"string"==typeof e[0]?Object.keys(t).length?{_attributes:t,value:e[0]}:e[0]:(e.forEach((function(e){if("object"===typeof e){n[e.tagName]||(n[e.tagName]=[]);var t=r.simplifyLostLess(e.children||[],e.attributes);n[e.tagName].push(t),Object.keys(e.attributes).length&&(t._attributes=e.attributes)}})),n):""},r.filter=function(e,t,n=0,i=""){var o=[];return e.forEach((function(e,a){if("object"===typeof e&&t(e,a,n,i)&&o.push(e),e.children){var s=r.filter(e.children,t,n+1,(i?i+".":"")+a+"."+e.tagName);o=o.concat(s)}})),o},r.stringify=function(e){var t="";function n(e){if(e)for(var n=0;n<e.length;n++)"string"==typeof e[n]?t+=e[n].trim():r(e[n])}function r(e){for(var r in t+="<"+e.tagName,e.attributes)null===e.attributes[r]?t+=" "+r:-1===e.attributes[r].indexOf('"')?t+=" "+r+'="'+e.attributes[r].trim()+'"':t+=" "+r+"='"+e.attributes[r].trim()+"'";t+=">",n(e.children),t+="</"+e.tagName+">"}return n(e),t},r.toContentString=function(e){if(Array.isArray(e)){var t="";return e.forEach((function(e){t=(t+=" "+r.toContentString(e)).trim()})),t}return"object"===typeof e?r.toContentString(e.children):" "+e},r.getElementById=function(e,t,n){var i=r(e,{attrValue:t});return n?r.simplify(i):i[0]},r.getElementsByClassName=function(e,t,n){const i=r(e,{attrName:"class",attrValue:"[a-zA-Z0-9- ]*"+t+"[a-zA-Z0-9- ]*"});return n?r.simplify(i):i},r.parseStream=function(e,t){if("string"===typeof t&&(t=t.length+2),"string"===typeof e){var i=n(4);e=i.createReadStream(e,{start:t}),t=0}var o=t,a="";return e.on("data",(function(t){a+=t;for(var n=0;;){if(!(o=a.indexOf("<",o)+1))return void(o=n);if("/"!==a[o+1]){var i=r(a,{pos:o-1,parseNode:!0,setPos:!0});if((o=i.pos)>a.length-1||o<n)return a=a.slice(n),o=0,void(n=0);e.emit("xml",i),n=o}else o+=1,n=pos}})),e},r.transformStream=function(e){const t=n("EdPt");"string"===typeof e&&(e=e.length+2);var i=e||0,o="";return t({readableObjectMode:!0},(function(e,t,n){o+=e;for(var a=0;;){if(!(i=o.indexOf("<",i)+1))return i=a,n();if("/"!==o[i+1]){var s=r(o,{pos:i-1,parseNode:!0,setPos:!0});if((i=s.pos)>o.length-1||i<a)return o=o.slice(a),i=0,n();this.push(s),a=i}else i+=1,a=pos}n()}))},e.exports=r,r.xml=r},P7XM:function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},QPTa:function(e,t,n){"use strict";var r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",i=(t.a={name:"lights",vs:r,fs:r,getUniforms:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if("lightSources"in t){var n=t.lightSources||{},r=n.ambientLight,o=n.pointLights,s=n.directionalLights,u=r||o&&o.length>0||s&&s.length>0;return u?Object.assign({},a({ambientLight:r,pointLights:o,directionalLights:s}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var c={pointLights:[],directionalLights:[]},l=!0,f=!1,h=void 0;try{for(var d,p=(t.lights||[])[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;switch(v.type){case"ambient":c.ambientLight=v;break;case"directional":c.directionalLights.push(v);break;case"point":c.pointLights.push(v)}}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}return e({lightSources:c})}return{}},defines:{MAX_LIGHTS:3}},{});function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?[0,0,0]:t,r=e.intensity,i=void 0===r?1:r;return n.map((function(e){return e*i/255}))}function a(e){var t=e.ambientLight,n=e.pointLights,r=void 0===n?[]:n,i=e.directionalLights,a=void 0===i?[]:i,s={};return s["lighting_uAmbientLight.color"]=t?o(t):[0,0,0],r.forEach((function(e,t){s["lighting_uPointLight[".concat(t,"].color")]=o(e),s["lighting_uPointLight[".concat(t,"].position")]=e.position,s["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),s.lighting_uPointLightCount=r.length,a.forEach((function(e,t){s["lighting_uDirectionalLight[".concat(t,"].color")]=o(e),s["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),s.lighting_uDirectionalLightCount=a.length,s}},QmWs:function(e,t,n){var r,i=(r=n("s4NR"))&&"object"==typeof r&&"default"in r?r.default:r,o=/https?|ftp|gopher|file/;function a(e){"string"==typeof e&&(e=_(e));var t=function(e,t,n){var r=e.auth,i=e.hostname,o=e.protocol||"",a=e.pathname||"",s=e.hash||"",u=e.query||"",c=!1;r=r?encodeURIComponent(r).replace(/%3A/i,":")+"@":"",e.host?c=r+e.host:i&&(c=r+(~i.indexOf(":")?"["+i+"]":i),e.port&&(c+=":"+e.port)),u&&"object"==typeof u&&(u=t.encode(u));var l=e.search||u&&"?"+u||"";return o&&":"!==o.substr(-1)&&(o+=":"),e.slashes||(!o||n.test(o))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),s&&"#"!==s[0]&&(s="#"+s),l&&"?"!==l[0]&&(l="?"+l),{protocol:o,host:c,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:l=l.replace("#","%23"),hash:s}}(e,i,o);return""+t.protocol+t.host+t.pathname+t.search+t.hash}var s="http://",u="w.w",c=s+u,l=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,f=/https?|ftp|gopher|file/;function h(e,t){var n="string"==typeof e?_(e):e;e="object"==typeof e?a(e):e;var r=_(t),i="";n.protocol&&!n.slashes&&(i=n.protocol,e=e.replace(n.protocol,""),i+="/"===t[0]||"/"===e[0]?"/":""),i&&r.protocol&&(i="",r.slashes||(i=r.protocol,t=t.replace(r.protocol,"")));var o=e.match(l);o&&!r.protocol&&(e=e.substr((i=o[1]+(o[2]||"")).length),/^\/\/[^/]/.test(t)&&(i=i.slice(0,-1)));var u=new URL(e,c+"/"),h=new URL(t,u).toString().replace(c,""),d=r.protocol||n.protocol;return d+=n.slashes||r.slashes?"//":"",!i&&d?h=h.replace(s,d):i&&(h=h.replace(s,"")),f.test(h)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==h.slice(-1)||(h=h.slice(0,-1)),i&&(h=i+("/"===h[0]?h.substr(1):h)),h}function d(){}d.prototype.parse=_,d.prototype.format=a,d.prototype.resolve=h,d.prototype.resolveObject=h;var p=/^https?|ftp|gopher|file/,v=/^(.*?)([#?].*)/,g=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,y=/^([a-z0-9.+-]*:)?\/\/\/*/i,m=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function _(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),e&&"object"==typeof e&&e instanceof d)return e;var r=(e=e.trim()).match(v);e=r?r[1].replace(/\\/g,"/")+r[2]:e.replace(/\\/g,"/"),m.test(e)&&"/"!==e.slice(-1)&&(e+="/");var o=!/(^javascript)/.test(e)&&e.match(g),s=y.test(e),l="";o&&(p.test(o[1])||(l=o[1].toLowerCase(),e=""+o[2]+o[3]),o[2]||(s=!1,p.test(o[1])?(l=o[1],e=""+o[3]):e="//"+o[3]),3!==o[2].length&&1!==o[2].length||(l=o[1],e="/"+o[3]));var f,h=(r?r[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),_=h&&h[1],b=new d,O="",E="";try{f=new URL(e)}catch(i){O=i,l||n||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(E="/",e=e.substr(1));try{f=new URL(e,c)}catch(e){return b.protocol=l,b.href=l,b}}b.slashes=s&&!E,b.host=f.host===u?"":f.host,b.hostname=f.hostname===u?"":f.hostname.replace(/(\[|\])/g,""),b.protocol=O?l||null:f.protocol,b.search=f.search.replace(/\\/g,"%5C"),b.hash=f.hash.replace(/\\/g,"%5C");var x=e.split("#");!b.search&&~x[0].indexOf("?")&&(b.search="?"),b.hash||""!==x[1]||(b.hash="#"),b.query=t?i.decode(f.search.substr(1)):b.search.substr(1),b.pathname=E+(o?function(e){return e.replace(/['^|`]/g,(function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()})).replace(/((?:%[0-9A-F]{2})+)/g,(function(e,t){try{return decodeURIComponent(t).split("").map((function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()})).join("")}catch(e){return t}}))}(f.pathname):f.pathname),"about:"===b.protocol&&"blank"===b.pathname&&(b.protocol="",b.pathname=""),O&&"/"!==e[0]&&(b.pathname=b.pathname.substr(1)),l&&!p.test(l)&&"/"!==e.slice(-1)&&"/"===b.pathname&&(b.pathname=""),b.path=b.pathname+b.search,b.auth=[f.username,f.password].map(decodeURIComponent).filter(Boolean).join(":"),b.port=f.port,_&&!b.host.endsWith(_)&&(b.host+=_,b.port=_.slice(1)),b.href=E?""+b.pathname+b.search+b.hash:a(b);var w=/^(file)/.test(b.href)?["host","hostname"]:[];return Object.keys(b).forEach((function(e){~w.indexOf(e)||(b[e]=b[e]||null)})),b}t.parse=_,t.format=a,t.resolve=h,t.resolveObject=function(e,t){return _(h(e,t))},t.Url=d},QpuX:function(e,t,n){e.exports=n("+qE3").EventEmitter},"R1+Y":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("Ji7U"),u=n("Jh/b"),c=n("rpwb"),l=n("5lV4"),f=n("KHNG"),h=n("ctuC"),d=n("3DrS"),p=n("Im0j"),v={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(e){return e.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&u.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=this,n=(e.oldProps,e.props,e.changeFlags),r=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon);if(r&&Array.isArray(n.dataChanged)){var i=this.state.paths.slice(),o=n.dataChanged.map((function(e){return Object(p.a)({data:i,getIndex:function(e){return e.__source.index},dataRange:e,replace:t._getPaths(e)})}));this.setState({paths:i,pathsDiff:o})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.data,r=t.getPolygon,i=t.positionFormat,o=t._normalize,a=[],s="XY"===i?2:3,u=e.startRow,l=e.endRow,f=Object(c.a)(n,u,l),h=f.iterable,p=f.objectInfo,v=!0,g=!1,y=void 0;try{for(var m,_=h[Symbol.iterator]();!(v=(m=_.next()).done);v=!0){var b=m.value;p.index++;var O=r(b,p);o&&(O=d.b(O,s));var E=O,x=E.holeIndices,w=O.positions||O;if(x)for(var S=0;S<=x.length;S++){var T=w.slice(x[S-1]||0,x[S]||w.length);a.push(this.getSubLayerRow({path:T},b,p.index))}else a.push(this.getSubLayerRow({path:w},b,p.index))}}catch(A){g=!0,y=A}finally{try{v||null==_.return||_.return()}finally{if(g)throw y}}return a}},{key:"renderLayers",value:function(){var e=this.props,t=e.data,n=e._dataDiff,r=e.stroked,i=e.filled,o=e.extruded,a=e.wireframe,s=e._normalize,u=e.elevationScale,c=e.transitions,l=e.positionFormat,d=this.props,p=d.lineWidthUnits,v=d.lineWidthScale,g=d.lineWidthMinPixels,y=d.lineWidthMaxPixels,m=d.lineJointRounded,_=d.lineMiterLimit,b=d.lineDashJustified,O=this.props,E=O.getFillColor,x=O.getLineColor,w=O.getLineWidth,S=O.getLineDashArray,T=O.getElevation,A=O.getPolygon,P=O.updateTriggers,C=O.material,R=this.state,L=R.paths,I=R.pathsDiff,M=this.getSubLayerClass("fill",f.a),j=this.getSubLayerClass("stroke",h.a),k=this.shouldRenderSubLayer("fill",L)&&new M({_dataDiff:n,extruded:o,elevationScale:u,filled:i,wireframe:a,_normalize:s,getElevation:T,getFillColor:E,getLineColor:x,material:C,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:P.getPolygon,getElevation:P.getElevation,getFillColor:P.getFillColor,getLineColor:P.getLineColor}}),{data:t,positionFormat:l,getPolygon:A});return[!o&&k,!o&&r&&this.shouldRenderSubLayer("stroke",L)&&new j({_dataDiff:I&&function(){return I},widthUnits:p,widthScale:v,widthMinPixels:g,widthMaxPixels:y,rounded:m,miterLimit:_,dashJustified:b,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(x),getWidth:this.getSubLayerAccessor(w),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:P.getLineWidth,getColor:P.getLineColor,getDashArray:P.getLineDashArray}}),{data:L,positionFormat:l,getPath:function(e){return e.path}}),o&&k]}}]),t}(l.a);g.layerName="PolygonLayer",g.defaultProps=v},R5E3:function(e,t){e.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},ReQy:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("1OyB"),i=n("vuIU"),o=n("LDVv"),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e),this.opts=t}return Object(i.a)(e,[{key:"equals",value:function(e){return this===e||this.constructor===e.constructor&&Object(o.a)(this.opts,e.opts)}},{key:"getShaders",value:function(e){return null}},{key:"getSubLayerProps",value:function(e){var t=e.constructor.defaultProps,n=void 0===t?{}:t,r={updateTriggers:{}};for(var i in n)if(i in this.props){var o=n[i],a=this.props[i];r[i]=a,o&&"accessor"===o.type&&(r.updateTriggers[i]=this.props.updateTriggers[i],"function"===typeof a&&(r[i]=this.getSubLayerAccessor(a,!0)))}return r}},{key:"initializeState",value:function(e,t){}},{key:"updateState",value:function(e,t){}},{key:"draw",value:function(e,t){}},{key:"finalizeState",value:function(e){}}]),e}()},RoFp:function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?t.nextTick(r,a):(a._writableState.errorEmitted=!0,t.nextTick(n,a,e)):t.nextTick(n,a,e):o?(t.nextTick(r,a),o(e)):t.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n("8oxB"))},SLVX:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},Tcbo:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"UB+q":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n("iceZ"),i=n.n(r),o=n("3Cr/"),a=n("zY86"),s=n("zqkD"),u=n("AHNb"),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};u.a.isWorkerRuntime;let l=!1;const f=new Map,h=e=>e&&e.type===s.a.run,d=e=>i()(e)||function(e){return e&&"object"===typeof e&&"function"===typeof e.subscribe}(e);function p(e){return Object(a.b)(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function v(e,t){const{payload:n,transferables:r}=p(t),i={type:s.b.error,uid:e,error:Object(o.c)(n)};u.a.postMessageToMaster(i,r)}function g(e,t,n){const{payload:r,transferables:i}=p(n),o={type:s.b.result,uid:e,complete:!!t||void 0,payload:r};u.a.postMessageToMaster(o,i)}function y(e){try{const t={type:s.b.uncaughtError,error:Object(o.c)(e)};u.a.postMessageToMaster(t)}catch(t){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",t,"\nOriginal error:",e)}}function m(e,t,n){return c(this,void 0,void 0,(function*(){let r;try{r=t(...n)}catch(a){return v(e,a)}const i=d(r)?"observable":"promise";if(function(e,t){const n={type:s.b.running,uid:e,resultType:t};u.a.postMessageToMaster(n)}(e,i),d(r)){const t=r.subscribe(t=>g(e,!1,Object(o.c)(t)),t=>{v(e,Object(o.c)(t)),f.delete(e)},()=>{g(e,!0),f.delete(e)});f.set(e,t)}else try{const t=yield r;g(e,!0,Object(o.c)(t))}catch(a){v(e,Object(o.c)(a))}}))}function _(e){if(!u.a.isWorkerRuntime())throw Error("expose() called in the master thread.");if(l)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(l=!0,"function"===typeof e)u.a.subscribeToMasterMessages(t=>{h(t)&&!t.method&&m(t.uid,e,t.args.map(o.a))}),function(){const e={type:s.b.init,exposed:{type:"function"}};u.a.postMessageToMaster(e)}();else{if("object"!==typeof e||!e)throw Error("Invalid argument passed to expose(). Expected a function or an object, got: "+e);u.a.subscribeToMasterMessages(t=>{h(t)&&t.method&&m(t.uid,e[t.method],t.args.map(o.a))});!function(e){const t={type:s.b.init,exposed:{type:"module",methods:e}};u.a.postMessageToMaster(t)}(Object.keys(e).filter(t=>"function"===typeof e[t]))}u.a.subscribeToMasterMessages(e=>{if((t=e)&&t.type===s.a.cancel){const t=e.uid,n=f.get(t);n&&(n.unsubscribe(),f.delete(t))}var t})}"undefined"!==typeof self&&"function"===typeof self.addEventListener&&u.a.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>y(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&"string"===typeof t.message&&setTimeout(()=>y(t),250)})),"undefined"!==typeof e&&"function"===typeof e.on&&u.a.isWorkerRuntime()&&(e.on("uncaughtException",e=>{setTimeout(()=>y(e),250)}),e.on("unhandledRejection",e=>{e&&"string"===typeof e.message&&setTimeout(()=>y(e),250)}))}).call(this,n("8oxB"))},Vm2G:function(e,t,n){"use strict";n.r(t);var r=n("yYqN");n.d(t,"DeckGL",(function(){return r.a})),n.d(t,"default",(function(){return r.a}))},VmRL:function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,s,u,c,l,d,p,g=t&&t.length,y=g?t[0]*n:e.length,m=i(e,0,y,n,!0),_=[];if(!m||m.next===m.prev)return _;if(g&&(m=function(e,t,n,r){var a,s,u,c=[];for(a=0,s=t.length;a<s;a++)(u=i(e,t[a]*r,a<s-1?t[a+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),c.push(v(u));for(c.sort(f),a=0;a<c.length;a++)h(c[a],n),n=o(n,n.next);return n}(e,t,m,n)),e.length>80*n){r=u=e[0],s=c=e[1];for(var b=n;b<y;b+=n)(l=e[b])<r&&(r=l),(d=e[b+1])<s&&(s=d),l>u&&(u=l),d>c&&(c=d);p=0!==(p=Math.max(u-r,c-s))?1/p:0}return a(m,_,n,r,s,p),_}function i(e,t,n,r,i){var o,a;if(i===P(e,t,n,r)>0)for(o=t;o<n;o+=r)a=S(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=S(o,e[o],e[o+1],a);return a&&_(a,a.next)&&(T(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,h){if(e){!h&&f&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=p(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,f);for(var d,v,g=e;e.prev!==e.next;)if(d=e.prev,v=e.next,f?u(e,r,i,f):s(e))t.push(d.i/n),t.push(e.i/n),t.push(v.i/n),T(e),e=v.next,g=v.next;else if((e=v)===g){h?1===h?a(e=c(o(e),t,n),t,n,r,i,f,2):2===h&&l(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(g(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(m(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=p(s,u,t,n,r),h=p(c,l,t,n,r),d=e.prevZ,v=e.nextZ;d&&d.z>=f&&v&&v.z<=h;){if(d!==e.prev&&d!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==e.prev&&v!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&m(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=h;){if(v!==e.prev&&v!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&m(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!_(i,a)&&b(i,r,r.next,a)&&x(i,a)&&x(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),T(r),T(r.next),r=e=a),r=r.next}while(r!==e);return o(r)}function l(e,t,n,r,i,s){var u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&y(u,c)){var l=w(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,t,n,r,i,s),void a(l,t,n,r,i,s)}c=c.next}u=u.next}while(u!==e)}function f(e,t){return e.x-t.x}function h(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&g(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),x(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}(e,t)){var n=w(t,e);o(t,t.next),o(n,n.next)}}function d(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function p(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function g(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||_(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,r){var i=E(m(e,t,n)),o=E(m(e,t,r)),a=E(m(n,r,e)),s=E(m(n,r,t));return i!==o&&a!==s||(!(0!==i||!O(e,n,t))||(!(0!==o||!O(e,r,t))||(!(0!==a||!O(n,e,r))||!(0!==s||!O(n,t,r)))))}function O(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function E(e){return e>0?1:e<0?-1:0}function x(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var n=new A(e.i,e.x,e.y),r=new A(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(e,t,n,r){var i=new A(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(P(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var c=t[s]*n,l=s<u-1?t[s+1]*n:e.length;a-=Math.abs(P(e,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},X0th:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.internalError="internalError",e.message="message",e.termination="termination"}(r||(r={}))},"XQ+Y":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("91Zk"),f=n("BQ9P"),h=n("K7jV"),d=n("ykdB"),p=n("rePB"),v=n("Jh/b"),g=n("VdrS");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.id,i=void 0===n?Object(g.c)("column-geometry"):n,s=b(e),u=s.indices,c=s.attributes;return Object(o.a)(this,Object(a.a)(t).call(this,m({},e,{id:i,indices:u,attributes:c})))}return Object(u.a)(t,e),t}(n("0i8A").a);function b(e){var t=e.radius,n=e.height,r=void 0===n?1:n,i=e.nradial,o=void 0===i?10:i,a=e.vertices;v.a.assert(!a||a.length>=o);for(var s=o+1,u=3*s,c=2*Math.PI/o,l=new Uint16Array(3*o*2),f=new Float32Array(3*u),h=new Float32Array(3*u),d=0,p=0;p<s;p++)for(var g=p*c,y=a&&a[p%o],m=a&&a[(p+1)%o],_=Math.sin(g),b=Math.cos(g),O=0;O<2;O++)f[d+0]=y?y[0]:b*t,f[d+1]=y?y[1]:_*t,f[d+2]=(.5-O)*r,h[d+0]=y?m[0]-y[0]:b,h[d+1]=y?m[1]-y[1]:_,d+=3;for(var E=0;E<s;E++){var x=Math.floor(E/2)*Math.sign(E%2-.5),w=x*c,S=a&&a[(x+o)%o],T=Math.sin(w),A=Math.cos(w);f[d+0]=S?S[0]:A*t,f[d+1]=S?S[1]:T*t,f[d+2]=r/2,h[d+2]=1,d+=3}for(var P=0,C=0;C<o;C++)l[P++]=2*C+0,l[P++]=2*C+2,l[P++]=2*C+0,l[P++]=2*C+1,l[P++]=2*C+1,l[P++]=2*C+3;return{indices:l,attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:h}}}}var O=[0,0,0,255],E={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(e){return e.position}},getFillColor:{type:"accessor",value:O},getLineColor:{type:"accessor",value:O},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},x=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(){return Object(s.a)(Object(a.a)(t.prototype),"getShaders",this).call(this,{vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio += sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:O},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:O},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i});var o=i.extensionsChanged;if(o){var u=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(u)}),this.getAttributeManager().invalidateAll()}(o||n.diskResolution!==r.diskResolution||n.vertices!==r.vertices)&&this._updateGeometry(n)}},{key:"getGeometry",value:function(e,t){var n=new _({radius:1,height:2,vertices:t,nradial:e}),r=0;if(t)for(var i=0;i<e;i++){var o=t[i];r+=Math.sqrt(o[0]*o[0]+o[1]*o[1])/e}else r=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*r}),n}},{key:"_getModel",value:function(e){return new d.a(e,Object.assign({},this.getShaders(),{id:this.props.id,isInstanced:!0}))}},{key:"_updateGeometry",value:function(e){var t=e.diskResolution,n=e.vertices,r=this.getGeometry(t,n);this.setState({fillVertexCount:r.attributes.POSITION.value.length/3,wireframeVertexCount:r.indices.value.length}),this.state.model.setProps({geometry:r})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.lineWidthUnits,o=r.lineWidthScale,a=r.lineWidthMinPixels,s=r.lineWidthMaxPixels,u=r.elevationScale,c=r.extruded,l=r.filled,f=r.stroked,h=r.wireframe,d=r.offset,p=r.coverage,v=r.radius,g=r.angle,y=this.state,m=y.model,_=y.fillVertexCount,b=y.wireframeVertexCount,O=y.edgeDistance,E="pixels"===i?n.metersPerPixel:1;m.setUniforms(Object.assign({},t,{radius:v,angle:g/180*Math.PI,offset:d,extruded:c,coverage:p,elevationScale:u,edgeDistance:O,widthScale:o*E,widthMinPixels:a,widthMaxPixels:s})),c&&h&&(m.setProps({isIndexed:!0}),m.setVertexCount(b).setDrawMode(1).setUniforms({isStroke:!0}).draw()),l&&(m.setProps({isIndexed:!1}),m.setVertexCount(_).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!c&&f&&(m.setProps({isIndexed:!1}),m.setVertexCount(2*_/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}]),t}(h.a);x.layerName="ColumnLayer",x.defaultProps=E},XRzD:function(e,t,n){"use strict";var r;var i=n("ybjB").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n("kDxh")),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!==typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&a.forEach(c),o||(a.forEach(c),i(r))}))}));return t.reduce(l)}},Xcno:function(e,t,n){"use strict";function r(e){return e+3&-4}function i(e,t,n){var r=n?new Uint8Array(e).subarray(t,t+n):new Uint8Array(e).subarray(t);return new Uint8Array(r).buffer}function o(e,t,n){var i;if(e instanceof ArrayBuffer)i=new Uint8Array(e);else{var o=e.byteOffset,a=e.byteLength;i=new Uint8Array(e.buffer,o,a)}return t.set(i,n),n+r(i.byteLength)}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))},Y81X:function(e,t,n){"use strict";e.exports=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},YKQg:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("BQ9P"),f=n("K7jV"),h=n("ykdB"),d=n("0i8A"),p=[0,0,0,255],v={getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getSourceColor:{type:"accessor",value:p},getTargetColor:{type:"accessor",value:p},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(){return Object(s.a)(Object(a.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  float unitZ = dh == 0.0 ? 0.0 : deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n  \n    float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n    float nextSegmentRatio = getSegmentRatio(min(numSegments, segmentIndex + 1.0));\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    source = project_position(instanceSourcePositions, instanceSourcePositions64Low);\n    target = project_position(instanceTargetPositions, instanceTargetPositions64Low);\n\n    float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:p},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:p},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.widthUnits,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,u=r.greatCircle,c="pixels"===i?n.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({greatCircle:u,widthScale:o*c,widthMinPixels:a,widthMaxPixels:s}).draw()}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<50;n++)t=t.concat([n,1,0,n,-1,0]);var r=new h.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new d.a({drawMode:5,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}));return r.setUniforms({numSegments:50}),r}}]),t}(f.a);g.layerName="ArcLayer",g.defaultProps=v},aFNf:function(e,t,n){"use strict";var r=n("vn/o"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,f,h){var d,p,v,g,y,m,_,b,O,E=h.bits,x=0,w=0,S=0,T=0,A=0,P=0,C=0,R=0,L=0,I=0,M=null,j=0,k=new r.Buf16(16),N=new r.Buf16(16),F=null,D=0;for(x=0;x<=15;x++)k[x]=0;for(w=0;w<u;w++)k[t[n+w]]++;for(A=E,T=15;T>=1&&0===k[T];T--);if(A>T&&(A=T),0===T)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(S=1;S<T&&0===k[S];S++);for(A<S&&(A=S),R=1,x=1;x<=15;x++)if(R<<=1,(R-=k[x])<0)return-1;if(R>0&&(0===e||1!==T))return-1;for(N[1]=0,x=1;x<15;x++)N[x+1]=N[x]+k[x];for(w=0;w<u;w++)0!==t[n+w]&&(f[N[t[n+w]]++]=w);if(0===e?(M=F=f,m=19):1===e?(M=i,j-=257,F=o,D-=257,m=256):(M=a,F=s,m=-1),I=0,w=0,x=S,y=l,P=A,C=0,v=-1,g=(L=1<<A)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){_=x-C,f[w]<m?(b=0,O=f[w]):f[w]>m?(b=F[D+f[w]],O=M[j+f[w]]):(b=96,O=0),d=1<<x-C,S=p=1<<P;do{c[y+(I>>C)+(p-=d)]=_<<24|b<<16|O|0}while(0!==p);for(d=1<<x-1;I&d;)d>>=1;if(0!==d?(I&=d-1,I+=d):I=0,w++,0===--k[x]){if(x===T)break;x=t[n+f[w]]}if(x>A&&(I&g)!==v){for(0===C&&(C=A),y+=S,R=1<<(P=x-C);P+C<T&&!((R-=k[P+C])<=0);)P++,R<<=1;if(L+=1<<P,1===e&&L>852||2===e&&L>592)return 1;c[v=I&g]=A<<24|P<<16|y-l|0}}return 0!==I&&(c[y+I]=x-C<<24|64<<16|0),h.bits=A,0}},atKK:function(e,t,n){"use strict";function r(e,t){const n=e.deserialize.bind(e),r=e.serialize.bind(e);return{deserialize:e=>t.deserialize(e,n),serialize:e=>t.serialize(e,r)}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const i={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})},o={deserialize(e){return(t=e)&&"object"===typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?i.deserialize(e):e;var t},serialize:e=>e instanceof Error?i.serialize(e):e}},bCCX:function(e,t,n){"use strict";n.r(t),function(e,r){var i,o=n("SLVX");i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var a=Object(o.a)(i);t.default=a}.call(this,n("yLpj"),n("3UD+")(e))},bDqb:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return _}));var r=n("NOtv"),i=n.n(r),o=n("Lhll"),a=n("NEZD"),s=n("3Cr/");const u=()=>{},c=e=>e,l=e=>Promise.resolve().then(e);function f(e){throw e}class h extends o.a{constructor(e){super(t=>{const n=this,r=Object.assign(Object.assign({},t),{complete(){t.complete(),n.onCompletion()},error(e){t.error(e),n.onError(e)},next(e){t.next(e),n.onNext(e)}});try{return this.initHasRun=!0,e(r)}catch(i){r.error(i)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(e){this.firstValueSet||(this.firstValue=e,this.firstValueSet=!0)}onError(e){this.state="rejected",this.rejection=e;for(const t of this.rejectionCallbacks)l(()=>t(e))}onCompletion(){this.state="fulfilled";for(const e of this.fulfillmentCallbacks)l(()=>e(this.firstValue))}then(e,t){const n=e||c,r=t||f;let i=!1;return new Promise((e,t)=>{const o=n=>{if(!i){i=!0;try{e(r(n))}catch(o){t(o)}}};return this.initHasRun||this.subscribe({error:o}),"fulfilled"===this.state?e(n(this.firstValue)):"rejected"===this.state?(i=!0,e(r(this.rejection))):(this.fulfillmentCallbacks.push(t=>{try{e(n(t))}catch(r){o(r)}}),void this.rejectionCallbacks.push(o))})}catch(e){return this.then(void 0,e)}finally(e){const t=e||u;return this.then(e=>(t(),e),()=>t())}static from(e){return function(e){return e&&"function"===typeof e.then}(e)?new h(t=>{e.then(e=>{t.next(e),t.complete()},e=>{t.error(e)})}):super.from(e)}}var d=n("zY86"),p=n("zqkD");const v=i()("threads:master:messages");let g=1;function y(e,t){return new o.a(n=>{let r;const i=o=>{var a;if(v("Message from worker:",o.data),o.data&&o.data.uid===t)if((a=o.data)&&a.type===p.b.running)r=o.data.resultType;else if((e=>e&&e.type===p.b.result)(o.data))"promise"===r?("undefined"!==typeof o.data.payload&&n.next(Object(s.a)(o.data.payload)),n.complete(),e.removeEventListener("message",i)):(o.data.payload&&n.next(Object(s.a)(o.data.payload)),o.data.complete&&(n.complete(),e.removeEventListener("message",i)));else if((e=>e&&e.type===p.b.error)(o.data)){const t=Object(s.a)(o.data.error);n.error(t),e.removeEventListener("message",i)}};return e.addEventListener("message",i),()=>{if("observable"===r||!r){const n={type:p.a.cancel,uid:t};e.postMessage(n)}e.removeEventListener("message",i)}})}function m(e,t){return(...n)=>{const r=g++,{args:i,transferables:o}=function(e){if(0===e.length)return{args:[],transferables:[]};const t=[],n=[];for(const i of e)Object(d.b)(i)?(t.push(Object(s.c)(i.send)),n.push(...i.transferables)):t.push(Object(s.c)(i));return{args:t,transferables:0===n.length?n:(r=n,Array.from(new Set(r)))};var r}(n),u={type:p.a.run,uid:r,method:t,args:i};v("Sending command to run function to worker:",u);try{e.postMessage(u,o)}catch(c){return h.from(Promise.reject(c))}return h.from(Object(a.a)(y(e,r)))}}function _(e,t){const n={};for(const r of t)n[r]=m(e,r);return n}},cIfH:function(e,t,n){"use strict";const r=n("4abu"),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function a(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return h("InvalidXml","XML declaration allowed only at the start of the document.",p(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function s(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=r.buildOptions(t,i,o);const n=[];let c=!1,d=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++){if("<"!==e[i]){if(" "===e[i]||"\t"===e[i]||"\n"===e[i]||"\r"===e[i])continue;return h("InvalidChar","char '"+e[i]+"' is not expected.",p(e,i))}if(i++,"?"===e[i]){if(i=a(e,++i),i.err)return i}else{if("!"===e[i]){i=s(e,i);continue}{let o=!1;"/"===e[i]&&(o=!0,i++);let a="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)a+=e[i];if(a=a.trim(),"/"===a[a.length-1]&&(a=a.substring(0,a.length-1),i--),v=a,!r.isName(v)){let t;return t=0===a.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+a+"' is an invalid name.",h("InvalidTag",t,p(e,i))}const g=u(e,i);if(!1===g)return h("InvalidAttr","Attributes for '"+a+"' have open quote.",p(e,i));let y=g.value;if(i=g.index,"/"===y[y.length-1]){y=y.substring(0,y.length-1);const n=l(y,t);if(!0!==n)return h(n.err.code,n.err.msg,p(e,i-y.length+n.err.line));c=!0}else if(o){if(!g.tagClosed)return h("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",p(e,i));if(y.trim().length>0)return h("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",p(e,i));{const t=n.pop();if(a!==t)return h("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+a+"'.",p(e,i));0==n.length&&(d=!0)}}else{const r=l(y,t);if(!0!==r)return h(r.err.code,r.err.msg,p(e,i-y.length+r.err.line));if(!0===d)return h("InvalidXml","Multiple possible root nodes found.",p(e,i));n.push(a),c=!0}for(i++;i<e.length;i++){if("<"===e[i]){if("!"===e[i+1]){i++,i=s(e,i);continue}break}if("&"===e[i]){const t=f(e,i);if(-1==t)return h("InvalidChar","char '&' is not expected.",p(e,i));i=t}}"<"===e[i]&&i--}}}var v;return c?!(n.length>0)||h("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):h("InvalidXml","Start tag expected.",1)};function u(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function l(e,t){const n=r.getAllMatches(e,c),i={};for(let r=0;r<n.length;r++){if(0===n[r][1].length)return h("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",v(e,n[r][0]));if(void 0===n[r][3]&&!t.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",v(e,n[r][0]));const o=n[r][2];if(!d(o))return h("InvalidAttr","Attribute '"+o+"' is an invalid name.",v(e,n[r][0]));if(i.hasOwnProperty(o))return h("InvalidAttr","Attribute '"+o+"' is repeated.",v(e,n[r][0]));i[o]=1}return!0}function f(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function h(e,t,n){return{err:{code:e,msg:t,line:n}}}function d(e){return r.isName(e)}function p(e,t){return e.substring(0,t).split(/\r?\n/).length}function v(e,t){return e.indexOf(t)+t.length}},cX6o:function(e,t,n){"use strict";var r=n("nm4c"),i=n("vn/o"),o=n("eydS"),a=n("LOvY"),s=n("Tcbo"),u=n("iTZm"),c=n("gBP8"),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==a.Z_OK))throw new Error(s[n])}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,u,c,f,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"===typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===a.Z_BUF_ERROR&&!0===v&&(n=a.Z_OK,v=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),c=h.next_out-u,f=o.buf2string(h.output,u),h.next_out=c,h.avail_out=d-c,c&&i.arraySet(h.output,h.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(v=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},cpv5:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return m}));var r=n("1OyB"),i=n("vuIU"),o=n("a3TU");!function(){function e(t){Object(r.a)(this,e),this.points=t,this.isClosed=Object(o.d)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}Object(i.a)(e,[{key:"getSignedArea",value:function(){var e=0;return this.forEachSegment((function(t,n){e+=(t[0]+n[0])*(t[1]-n[1])})),e/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){for(var t=this.points.length,n=0;n<t-1;n++)e(this.points[n],this.points[n+1],n,n+1);this.isClosed||e(this.points[t-1],this.points[0],t-1,0)}}])}();function a(e,t){var n=t.length,r=e.length;if(r>0){for(var i=!0,o=0;o<n;o++)if(e[r-n+o]!==t[o]){i=!1;break}if(i)return!1}for(var a=0;a<n;a++)e[r+a]=t[a];return!0}function s(e,t){for(var n=t.length,r=0;r<n;r++)e[r]=t[r]}function u(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=r+t*n,a=0;a<n;a++)i[a]=e[o+a];return i}function c(e,t,n,r){var i,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-e[1])/(t[1]-e[1]),o=3;else if(4&n)i=(r[1]-e[1])/(t[1]-e[1]),o=1;else if(2&n)i=(r[2]-e[0])/(t[0]-e[0]),o=2;else{if(!(1&n))return null;i=(r[0]-e[0])/(t[0]-e[0]),o=0}for(var s=0;s<e.length;s++)a[s]=(1&o)===s?r[o]:i*t[s]+(1-i)*e[s];return a}function l(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function f(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,o=void 0===i?2:i,f=r.broken,h=void 0!==f&&f,d=r.gridResolution,g=void 0===d?10:d,y=r.gridOffset,m=void 0===y?[0,0]:y,_=r.startIndex,b=void 0===_?0:_,O=r.endIndex,E=void 0===O?e.length:O,x=(E-b)/o,w=[],S=[w],T=u(e,0,o,b),A=p(T,g,m,[]),P=[];a(w,T);for(var C=1;C<x;C++){for(n=l(t=u(e,C,o,b,t),A);n;){c(T,t,n,A,P);var R=l(P,A);R&&(c(T,P,R,A,P),n=R),a(w,P),s(T,P),v(A,g,n),h&&w.length>o&&(w=[],S.push(w),a(w,T)),n=l(t,A)}a(w,t),s(T,t)}return h?S:S[0]}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.length)return[];for(var r=n.size,i=void 0===r?2:r,o=n.gridResolution,a=void 0===o?10:o,s=n.gridOffset,u=void 0===s?[0,0]:s,c=n.edgeTypes,f=void 0!==c&&c,h=[],v=[{pos:e,types:f&&new Array(e.length/i).fill(1),holes:t||[]}],y=[[],[]],m=[];v.length;){var _=v.shift(),b=_.pos,O=_.types,E=_.holes;g(b,i,y),m=p(y[0],a,u,m);var x=l(y[1],m);if(x){var w=d(b,O,i,0,E[0]||b.length,m,x),S={pos:w[0].pos,types:w[0].types,holes:[]},T={pos:w[1].pos,types:w[1].types,holes:[]};v.push(S,T);for(var A=0;A<E.length;A++)(w=d(b,O,i,E[A],E[A+1]||b.length,m,x))[0]&&(S.holes.push(S.pos.length),S.pos=S.pos.concat(w[0].pos),f&&(S.types=S.types.concat(w[0].types))),w[1]&&(T.holes.push(T.pos.length),T.pos=T.pos.concat(w[1].pos),f&&(T.types=T.types.concat(w[1].types)))}else{var P={positions:b};f&&(P.edgeTypes=O),E.length&&(P.holeIndices=E),h.push(P)}}return h}function d(e,t,n,r,i,o,l){for(var f,h,d,p=(i-r)/n,v=[],g=[],y=[],m=[],_=[],b=u(e,p-1,n,r),O=Math.sign(8&l?b[1]-o[3]:b[0]-o[2]),E=t&&t[p-1],x=0,w=0,S=0;S<p;S++)f=u(e,S,n,r,f),h=Math.sign(8&l?f[1]-o[3]:f[0]-o[2]),d=t&&t[r/n+S],h&&O&&O!==h&&(c(b,f,l,o,_),a(v,_)&&y.push(E),a(g,_)&&m.push(E)),h<=0?(a(v,f)&&y.push(d),x-=h):y.length&&(y[y.length-1]=0),h>=0?(a(g,f)&&m.push(d),w+=h):m.length&&(m[m.length-1]=0),s(b,f),O=h,E=d;return[x?{pos:v,types:t&&y}:null,w?{pos:g,types:t&&m}:null]}function p(e,t,n,r){var i=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return r[0]=i,r[1]=o,r[2]=i+t,r[3]=o+t,r}function v(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function g(e,t,n){for(var r=1/0,i=-1/0,o=1/0,a=-1/0,s=0;s<e.length;s+=t){var u=e[s],c=e[s+1];r=u<r?u:r,i=u>i?u:i,o=c<o?c:o,a=c>a?c:a}return n[0][0]=r,n[0][1]=o,n[1][0]=i,n[1][1]=a,n}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?2:n,i=t.startIndex,o=void 0===i?0:i,a=t.endIndex,s=void 0===a?e.length:a,u=t.normalize,c=void 0===u||u,l=e.slice(o,s);O(l,r,0,s-o);var h=f(l,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(c){var d=!0,p=!1,v=void 0;try{for(var g,y=h[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var m=g.value;E(m,r)}}catch(_){p=!0,v=_}finally{try{d||null==y.return||y.return()}finally{if(p)throw v}}}return h}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,i=void 0===r?2:r,o=n.normalize,a=void 0===o||o,s=n.edgeTypes,u=void 0!==s&&s;t=t||[];for(var c=[],l=[],f=0,d=0,p=0;p<=t.length;p++){for(var v=t[p]||e.length,g=d,y=_(e,i,f,v),m=y;m<v;m++)c[d++]=e[m];for(var x=f;x<y;x++)c[d++]=e[x];O(c,i,g,d),b(c,i,g,d,n.maxLatitude),f=v,l[p]=d}l.pop();var w=h(c,l,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:u});if(a){var S=!0,T=!1,A=void 0;try{for(var P,C=w[Symbol.iterator]();!(S=(P=C.next()).done);S=!0){var R=P.value;E(R.positions,i)}}catch(L){T=!0,A=L}finally{try{S||null==C.return||C.return()}finally{if(T)throw A}}}return w}function _(e,t,n,r){for(var i=-1,o=-1,a=n+1;a<r;a+=t){var s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function b(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85.051129,o=e[n],s=e[r-t];if(Math.abs(o-s)>180){var c=u(e,0,t,n);c[0]+=360*Math.round((s-o)/360),a(e,c),c[1]=Math.sign(c[1])*i,a(e,c),c[0]=o,a(e,c)}}function O(e,t,n,r){for(var i,o=e[0],a=n;a<r;a+=t){var s=(i=e[a])-o;(s>180||s<-180)&&(i-=360*Math.round(s/360)),e[a]=o=i}}function E(e,t){for(var n,r=e.length/t,i=0;i<r&&((n=e[i*t])+180)%360===0;i++);var o=360*-Math.round(n/360);if(0!==o)for(var a=0;a<r;a++)e[a*t]+=o}},ctuC:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("BQ9P"),f=n("Jh/b"),h=n("K7jV"),d=n("ykdB"),p=n("0i8A"),v=n("rePB"),g=n("xl5t"),y=n("cpv5");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=function(e){function t(e){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getGeometryFromBuffer",value:function(e){return this.normalize?Object(s.a)(Object(a.a)(t.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"normalizeGeometry",value:function(e){return this.normalize?function(e,t,n,r){var i=e;if(Array.isArray(e[0])){var o=e.length*t;i=new Array(o);for(var a=0;a<e.length;a++)for(var s=0;s<t;s++)i[a*t+s]=e[a][s]||0}return n?Object(y.c)(i,{size:t,gridResolution:n}):r?Object(y.d)(i,{size:t}):i}(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}},{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){if(Array.isArray(e[0])){var t=0,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=this.getGeometrySize(s)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}var u=this.getPathLength(e);return u<2?0:this.isClosed(e)?u<3?0:u+2:u}},{key:"updateGeometryAttributes",value:function(e,t){if(0!==t.geometrySize)if(e&&Array.isArray(e[0])){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=this.getGeometrySize(s);t.geometrySize=u,this.updateGeometryAttributes(s,t),t.vertexStart+=u}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}},{key:"_updateSegmentTypes",value:function(e,t){var n=this.attributes.segmentTypes,r=this.isClosed(e),i=t.vertexStart,o=t.geometrySize;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}},{key:"_updatePositions",value:function(e,t){var n=this.attributes.positions;if(n)for(var r=t.vertexStart,i=t.geometrySize,o=new Array(3),a=r,s=0;s<i;a++,s++)this.getPointOnPath(e,s,o),n[3*a]=o[0],n[3*a+1]=o[1],n[3*a+2]=o[2]}},{key:"getPathLength",value:function(e){return e.length/this.positionSize}},{key:"getPointOnPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.positionSize;t*r>=e.length&&(t+=1-e.length/r);var i=t*r;return n[0]=e[i],n[1]=e[i+1],n[2]=3===r&&e[i+2]||0,n}},{key:"isClosed",value:function(e){if(!this.normalize)return this.opts.loop;var t=this.positionSize,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}]),t}(g.a),b=[0,0,0,255],O={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:b},getWidth:{type:"accessor",value:1}},E={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},x=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(){return Object(s.a)(Object(a.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * jointType * 4.0 * flipIfTrue(isStartCap), isJoint);\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec2 width = project_pixel_size_to_clipspace(widthPixels);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      width\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    vec2 width = project_pixel_size(widthPixels);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (jointType > 0.0 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (jointType == 0.0 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:E,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:E,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:E,defaultValue:b},instancePickingColors:{size:3,type:5121,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(t&&t.__source?t.__source.index:r,i)}}}),this.setState({pathTesselator:new _({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&f.a.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var o=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var u=this.state.pathTesselator,c=r.data.attributes||{};u.updateGeometry({data:r.data,geometryBuffer:c.getPath,buffers:c,normalize:!r._pathType,loop:"loop"===r._pathType,getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:u.instanceCount,startIndices:u.vertexStarts}),i.dataChanged||o.invalidateAll()}if(i.extensionsChanged){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),o.invalidateAll()}}},{key:"getPickingInfo",value:function(e){var n=Object(s.a)(Object(a.a)(t.prototype),"getPickingInfo",this).call(this,e),r=n.index,i=this.props.data;return i[0]&&i[0].__source&&(n.object=i.find((function(e){return e.__source.index===r}))),n}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.rounded,o=r.billboard,a=r.miterLimit,s=r.widthUnits,u=r.widthScale,c=r.widthMinPixels,l=r.widthMaxPixels,f="pixels"===s?n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(i),billboard:o,widthScale:u*f,miterLimit:a,widthMinPixels:c,widthMaxPixels:l})).draw()}},{key:"_getModel",value:function(e){return new d.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new p.a({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateSegmentTypes",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}},{key:"wrapLongitude",get:function(){return!1}}]),t}(h.a);x.layerName="PathLayer",x.defaultProps=O},cwYr:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("1OyB"),i=n("vuIU"),o=n("md7G"),a=n("foSv"),s=n("Ji7U"),u=n("Jh/b"),c=n("5lV4"),l=n("+7vx"),f=n("ctuC"),h=n("KHNG"),d=n("Im0j");function p(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=n.startRow,o=void 0===i?0:i,a=n.endRow,s=void 0===a?e.length:a,c=o;c<s;c++){var l=e[c];u.a.assert(l&&l.geometry,"GeoJSON does not have geometry");var f=l.geometry;if("GeometryCollection"===f.type){u.a.assert(Array.isArray(f.geometries),"GeoJSON does not have geometries array");for(var h=f.geometries,d=0;d<h.length;d++){var p=h[d];v(p,r,t,l,c)}}else v(f,r,t,l,c)}return r}function v(e,t,n,r,i){var o=e.type,a=e.coordinates,s=t.pointFeatures,c=t.lineFeatures,l=t.polygonFeatures,f=t.polygonOutlineFeatures;if(function(e,t){var n=g[e];u.a.assert(n,"Unknown GeoJSON type ".concat(e));for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,a))switch(o){case"Point":s.push(n({geometry:e},r,i));break;case"MultiPoint":a.forEach((function(e){s.push(n({geometry:{type:"Point",coordinates:e}},r,i))}));break;case"LineString":c.push(n({geometry:e},r,i));break;case"MultiLineString":a.forEach((function(e){c.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"Polygon":l.push(n({geometry:e},r,i)),a.forEach((function(e){f.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"MultiPolygon":a.forEach((function(e){l.push(n({geometry:{type:"Polygon",coordinates:e}},r,i)),e.forEach((function(e){f.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}))}))}else u.a.warn("".concat(o," coordinates are malformed"))()}var g={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};var y={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusUnits:"meters",pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};function m(e){return e.geometry.coordinates}var _=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initializeState",value:function(){this.state={features:{}},this.props.getLineDashArray&&u.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.props,n=e.changeFlags;if(n.dataChanged){var r=function(e){if(Array.isArray(e))return e;switch(u.a.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return u.a.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),i=this.getSubLayerRow.bind(this);if(Array.isArray(n.dataChanged)){var o=this.state.features,a={},s={};for(var c in o)a[c]=o[c].slice(),s[c]=[];var l=!0,f=!1,h=void 0;try{for(var v,g=n.dataChanged[Symbol.iterator]();!(l=(v=g.next()).done);l=!0){var y=v.value,m=p(r,i,y);for(var _ in o)s[_].push(Object(d.a)({data:a[_],getIndex:function(e){return e.__source.index},dataRange:y,replace:m[_]}))}}catch(b){f=!0,h=b}finally{try{l||null==g.return||g.return()}finally{if(f)throw h}}this.setState({features:a,featuresDiff:s})}else this.setState({features:p(r,i),featuresDiff:{}})}}},{key:"renderLayers",value:function(){var e=this.state,t=e.features,n=e.featuresDiff,r=t.pointFeatures,i=t.lineFeatures,o=t.polygonFeatures,a=t.polygonOutlineFeatures,s=this.props,u=s.stroked,c=s.filled,d=s.extruded,p=s.wireframe,v=s.material,g=s.transitions,y=this.props,_=y.lineWidthUnits,b=y.lineWidthScale,O=y.lineWidthMinPixels,E=y.lineWidthMaxPixels,x=y.lineJointRounded,w=y.lineMiterLimit,S=y.pointRadiusUnits,T=y.pointRadiusScale,A=y.pointRadiusMinPixels,P=y.pointRadiusMaxPixels,C=y.elevationScale,R=y.lineDashJustified,L=this.props,I=L.getLineColor,M=L.getFillColor,j=L.getRadius,k=L.getLineWidth,N=L.getLineDashArray,F=L.getElevation,D=L.updateTriggers,B=this.getSubLayerClass("polygons-fill",h.a),U=this.getSubLayerClass("polygons-stroke",f.a),z=this.getSubLayerClass("line-strings",f.a),V=this.getSubLayerClass("points",l.a),G=this.shouldRenderSubLayer("polygons-fill",o)&&new B({_dataDiff:n.polygonFeatures&&function(){return n.polygonFeatures},extruded:d,elevationScale:C,filled:c,wireframe:p,material:v,getElevation:this.getSubLayerAccessor(F),getFillColor:this.getSubLayerAccessor(M),getLineColor:this.getSubLayerAccessor(I),transitions:g&&{getPolygon:g.geometry,getElevation:g.getElevation,getFillColor:g.getFillColor,getLineColor:g.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:D.getElevation,getFillColor:D.getFillColor,getLineColor:D.getLineColor}}),{data:o,getPolygon:m});return[!d&&G,!d&&u&&this.shouldRenderSubLayer("polygons-stroke",a)&&new U({_dataDiff:n.polygonOutlineFeatures&&function(){return n.polygonOutlineFeatures},widthUnits:_,widthScale:b,widthMinPixels:O,widthMaxPixels:E,rounded:x,miterLimit:w,dashJustified:R,getColor:this.getSubLayerAccessor(I),getWidth:this.getSubLayerAccessor(k),getDashArray:this.getSubLayerAccessor(N),transitions:g&&{getPath:g.geometry,getColor:g.getLineColor,getWidth:g.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:D.getLineColor,getWidth:D.getLineWidth,getDashArray:D.getLineDashArray}}),{data:a,getPath:m}),this.shouldRenderSubLayer("linestrings",i)&&new z({_dataDiff:n.lineFeatures&&function(){return n.lineFeatures},widthUnits:_,widthScale:b,widthMinPixels:O,widthMaxPixels:E,rounded:x,miterLimit:w,dashJustified:R,getColor:this.getSubLayerAccessor(I),getWidth:this.getSubLayerAccessor(k),getDashArray:this.getSubLayerAccessor(N),transitions:g&&{getPath:g.geometry,getColor:g.getLineColor,getWidth:g.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:D.getLineColor,getWidth:D.getLineWidth,getDashArray:D.getLineDashArray}}),{data:i,getPath:m}),this.shouldRenderSubLayer("points",r)&&new V({_dataDiff:n.pointFeatures&&function(){return n.pointFeatures},stroked:u,filled:c,radiusUnits:S,radiusScale:T,radiusMinPixels:A,radiusMaxPixels:P,lineWidthUnits:_,lineWidthScale:b,lineWidthMinPixels:O,lineWidthMaxPixels:E,getFillColor:this.getSubLayerAccessor(M),getLineColor:this.getSubLayerAccessor(I),getRadius:this.getSubLayerAccessor(j),getLineWidth:this.getSubLayerAccessor(k),transitions:g&&{getPosition:g.geometry,getFillColor:g.getFillColor,getLineColor:g.getLineColor,getRadius:g.getRadius,getLineWidth:g.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:D.getFillColor,getLineColor:D.getLineColor,getRadius:D.getRadius,getLineWidth:D.getLineWidth}}),{data:r,getPosition:m,highlightedObjectIndex:this._getHighlightedIndex(r)}),d&&G]}},{key:"_getHighlightedIndex",value:function(e){var t=this.props.highlightedObjectIndex;return Number.isFinite(t)?e.findIndex((function(e){return e.__source.index===t})):null}}]),t}(c.a);_.layerName="GeoJsonLayer",_.defaultProps=y},cxv0:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n("NOtv"),i=n.n(r),o=n("Lhll"),a=n("3Cr/"),s=n("f8Pb"),u=n("ewpT"),c=n("X0th"),l=n("bDqb"),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const h=i()("threads:master:messages"),d=i()("threads:master:spawn"),p=i()("threads:master:thread-utils"),v="undefined"!==typeof e&&e.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(e.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function g(e,t,n,r){const i=n.filter(e=>e.type===c.a.internalError).map(e=>e.error);return Object.assign(e,{[u.a]:i,[u.b]:n,[u.c]:r,[u.e]:t})}function y(e,t){return f(this,void 0,void 0,(function*(){d("Initializing new thread");const n=(yield function(e,t,n){return f(this,void 0,void 0,(function*(){let r;const i=new Promise((e,i)=>{r=setTimeout(()=>i(Error(n)),t)}),o=yield Promise.race([e,i]);return clearTimeout(r),o}))}(function(e){return new Promise((t,n)=>{const r=i=>{var o;h("Message from worker before finishing initialization:",i.data),(o=i.data)&&"init"===o.type?(e.removeEventListener("message",r),t(i.data)):(e=>e&&"uncaughtError"===e.type)(i.data)&&(e.removeEventListener("message",r),n(Object(a.a)(i.data.error)))};e.addEventListener("message",r)})}(e),t&&t.timeout?t.timeout:v,`Timeout: Did not receive an init message from worker after ${v}ms. Make sure the worker calls expose().`)).exposed,{termination:r,terminate:i}=function(e){const[t,n]=Object(s.a)();return{terminate:()=>f(this,void 0,void 0,(function*(){p("Terminating worker"),yield e.terminate(),n()})),termination:t}}(e),u=function(e,t){return new o.a(n=>{const r=e=>{const t={type:c.a.message,data:e.data};n.next(t)},i=e=>{p("Unhandled promise rejection event in thread:",e);const t={type:c.a.internalError,error:Error(e.reason)};n.next(t)};e.addEventListener("message",r),e.addEventListener("unhandledrejection",i),t.then(()=>{const t={type:c.a.termination};e.removeEventListener("message",r),e.removeEventListener("unhandledrejection",i),n.next(t),n.complete()})})}(e,r);if("function"===n.type){return g(Object(l.a)(e),e,u,i)}if("module"===n.type){return g(Object(l.b)(e,n.methods),e,u,i)}{const e=n.type;throw Error("Worker init message states unexpected type of expose(): "+e)}}))}}).call(this,n("8oxB"))},dA7e:function(e,t,n){e.exports.VectorTile=n("B93f"),e.exports.VectorTileFeature=n("HfwV"),e.exports.VectorTileLayer=n("DiGy")},"eA/Y":function(e,t,n){"use strict";e.exports=i;var r=n("J78i");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n("P7XM")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},eRUA:function(e,t,n){"use strict";e.exports=i;var r=n("kVK+");function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function a(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function s(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function u(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function c(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function l(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function m(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=m(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=m(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=m(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return s(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&o?function(e,t,n){return o.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){var r="",i=t;for(;i<n;){var o,a,s,u=e[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128===(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var n=a(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;this.buf[this.pos++]>127;);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(2.3283064365386963e-10*e),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(2.3283064365386963e-10*e),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;if(t.buf[t.pos++]|=n|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&u(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),r.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),r.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&u(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,i.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,l,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,v,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,g,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,y,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},elGS:function(e,t,n){"use strict";const r=n("j/LU"),i=n("E1E9"),o=n("E1E9"),a=n("4abu").buildOptions,s=n("cIfH");t.parse=function(e,t,n){if(n){!0===n&&(n={});const t=s.validate(e,n);if(!0!==t)throw Error(t.err.msg)}t=a(t,o.defaultOptions,o.props);const u=i.getTraversalObj(e,t);return r.convertToJson(u,t)},t.convertTonimn=n("vtNb").convert2nimn,t.getTraversalObj=i.getTraversalObj,t.convertToJson=r.convertToJson,t.convertToJsonString=n("t6xR").convertToJsonString,t.validate=s.validate,t.j2xParser=n("p1mf"),t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}},ewpT:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s}));const r=Symbol("thread.errors"),i=Symbol("thread.events"),o=Symbol("thread.terminate"),a=Symbol("thread.transferable"),s=Symbol("thread.worker")},eydS:function(e,t,n){"use strict";var r=n("vn/o"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(c){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,t.string2buf=function(e){var t,n,i,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296===(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320===(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),a=0,o=0;a<u;o++)55296===(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320===(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,o,s=t||e.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if((o=a[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&e[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},f8Pb:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r=()=>{};function i(){let e,t=!1,n=r;return[new Promise(r=>{t?r(e):n=r}),r=>{t=!0,e=r,n()}]}},fXKp:function(e,t,n){"use strict";var r=n("hwdV").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},fdqv:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"i",(function(){return g}));var r=n("o0o1"),i=n.n(r),o=n("HaE+"),a=n("QPfr"),s=6,u={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},c=[u.magenta,u.green],l=[u.red,u.green,u.blue],f=Object.values(u).slice(0,-2);function h(e,t){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(i.a.mark((function e(t,n){var r,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t.getItem(n);case 3:return e.t1=e.sent,r=new e.t0(e.t1),o=new TextDecoder("utf-8"),a=JSON.parse(o.decode(r)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return"string"===typeof e?new a.HTTPStore(e):e}function v(e){return e.startsWith("#")&&(e=e.slice(1)),[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function g(e){return Array.from({length:e},(function(e,t){return t}))}},frGm:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,u,c,l,f,h,d,p,v,g,y,m,_,b,O,E,x,w,S,T;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,T=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,v=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),_=v[d&y];t:for(;;){if(d>>>=b=_>>>24,p-=b,0===(b=_>>>16&255))T[o++]=65535&_;else{if(!(16&b)){if(0===(64&b)){_=v[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}O=65535&_,(b&=15)&&(p<b&&(d+=S[r++]<<p,p+=8),O+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),_=g[d&m];n:for(;;){if(d>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0===(64&b)){_=g[(65535&_)+(d&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&_,p<(b&=15)&&(d+=S[r++]<<p,(p+=8)<b&&(d+=S[r++]<<p,p+=8)),(E+=d&(1<<b)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=b,p-=b,E>(b=o-a)){if((b=E-b)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=0,w=h,0===f){if(x+=c-b,b<O){O-=b;do{T[o++]=h[x++]}while(--b);x=o-E,w=T}}else if(f<b){if(x+=c+f-b,(b-=f)<O){O-=b;do{T[o++]=h[x++]}while(--b);if(x=0,f<O){O-=b=f;do{T[o++]=h[x++]}while(--b);x=o-E,w=T}}}else if(x+=f-b,b<O){O-=b;do{T[o++]=h[x++]}while(--b);x=o-E,w=T}for(;O>2;)T[o++]=w[x++],T[o++]=w[x++],T[o++]=w[x++],O-=3;O&&(T[o++]=w[x++],O>1&&(T[o++]=w[x++]))}else{x=o-E;do{T[o++]=T[x++],T[o++]=T[x++],T[o++]=T[x++],O-=3}while(O>2);O&&(T[o++]=T[x++],O>1&&(T[o++]=T[x++]))}break}}break}}while(r<i&&o<s);r-=O=p>>3,d&=(1<<(p-=O<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},fsg6:function(e,t,n){"use strict";n.r(t),n.d(t,"ArcLayer",(function(){return r.a})),n.d(t,"BitmapLayer",(function(){return w})),n.d(t,"IconLayer",(function(){return B})),n.d(t,"LineLayer",(function(){return z})),n.d(t,"PointCloudLayer",(function(){return V.a})),n.d(t,"ScatterplotLayer",(function(){return G.a})),n.d(t,"ColumnLayer",(function(){return H.a})),n.d(t,"GridCellLayer",(function(){return q})),n.d(t,"PathLayer",(function(){return X.a})),n.d(t,"PolygonLayer",(function(){return Z.a})),n.d(t,"GeoJsonLayer",(function(){return K.a})),n.d(t,"TextLayer",(function(){return be})),n.d(t,"SolidPolygonLayer",(function(){return Oe.a})),n.d(t,"_MultiIconLayer",(function(){return $}));var r=n("YKQg"),i=n("1OyB"),o=n("vuIU"),a=n("md7G"),s=n("foSv"),u=n("ReuC"),c=n("Ji7U"),l=n("rePB"),f=n("K4gp"),h=n("BQ9P"),d=n("K7jV"),p=n("ykdB"),v=n("0i8A"),g=n("f5Sf"),y=n("c9N0"),m=new Uint16Array([0,2,1,0,3,2]),_=new Float32Array([0,1,0,0,1,0,1,1]);function b(e,t){if(!t)return function(e){for(var t=new Float64Array(12),n=0;n<e.length;n++)t[3*n+0]=e[n][0],t[3*n+1]=e[n][1],t[3*n+2]=e[n][2]||0;return{vertexCount:6,positions:t,indices:m,texCoords:_}}(e);for(var n=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),r=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(n/t)+1,o=Math.ceil(r/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),u=new Float32Array(i*o*2),c=new Float64Array(i*o*3),l=0,f=0,h=0;h<i;h++)for(var d=h/(i-1),p=0;p<o;p++){var v=p/(o-1),g=O(e,d,v);c[3*l+0]=g[0],c[3*l+1]=g[1],c[3*l+2]=g[2]||0,u[2*l+0]=d,u[2*l+1]=1-v,h>0&&p>0&&(s[f++]=l-o,s[f++]=l-o-1,s[f++]=l-1,s[f++]=l-o,s[f++]=l-1,s[f++]=l),l++}return{vertexCount:a,positions:c,indices:s,texCoords:u}}function O(e,t,n){return Object(y.h)(Object(y.h)(e[0],e[1],n),Object(y.h)(e[3],e[2],n),t)}var E,x=(E={},Object(l.a)(E,10241,9987),Object(l.a)(E,10240,9729),Object(l.a)(E,10242,33071),Object(l.a)(E,10243,33071),E),w=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(){return Object(u.a)(Object(s.a)(t.prototype),"getShaders",this).call(this,{vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:"\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvoid main(void) {\n  vec4 bitmapColor = texture2D(bitmapTexture, vTexCoord);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[f.a,h.a]})}},{key:"initializeState",value:function(){var e=this,t=this.getAttributeManager();t.remove(["instancePickingColors"]);t.add({indices:{size:1,isIndexed:!0,update:function(t){return t.value=e.state.mesh.indices},noAlloc:true},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:function(t){return t.value=e.state.mesh.positions},noAlloc:true},texCoords:{size:2,update:function(t){return t.value=e.state.mesh.texCoords},noAlloc:true}})}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps;if(e.changeFlags.extensionsChanged){var r=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(r)}),this.getAttributeManager().invalidateAll()}t.image!==n.image&&this.loadTexture(t.image);var i=this.getAttributeManager();if(t.bounds!==n.bounds){var o=this.state.mesh,a=this._createMesh();for(var s in this.state.model.setVertexCount(a.vertexCount),a)o&&o[s]!==a[s]&&i.invalidate(s);this.setState({mesh:a})}}},{key:"finalizeState",value:function(){Object(u.a)(Object(s.a)(t.prototype),"finalizeState",this).call(this),this.state.bitmapTexture&&this.state.bitmapTexture.delete()}},{key:"_createMesh",value:function(){var e=this.props.bounds,t=e;return Number.isFinite(e[0])&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),b(t,this.context.viewport.resolution)}},{key:"_getModel",value:function(e){return e?new p.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new v.a({drawMode:4,vertexCount:6}),isInstanced:!1})):null}},{key:"draw",value:function(e){var t=e.uniforms,n=this.state,r=n.bitmapTexture,i=n.model,o=this.props,a=o.image,s=o.desaturate,u=o.transparentColor,c=o.tintColor;r&&a instanceof HTMLVideoElement&&a.readyState>HTMLVideoElement.HAVE_METADATA&&(r.width!==a.videoWidth||r.height!==a.videoHeight?(r.resize({width:a.videoWidth,height:a.videoHeight,mipmaps:!0}),r.setSubImageData({data:a,paramters:x})):r.setSubImageData({data:a}),r.generateMipmap());r&&i&&i.setUniforms(Object.assign({},t,{bitmapTexture:r,desaturate:s,transparentColor:u.map((function(e){return e/255})),tintColor:c.slice(0,3).map((function(e){return e/255}))})).draw()}},{key:"loadTexture",value:function(e){var t=this.context.gl;this.state.bitmapTexture&&this.state.bitmapTexture.delete(),e instanceof g.a?this.setState({bitmapTexture:e}):e instanceof HTMLVideoElement?this.setState({bitmapTexture:new g.a(t,{width:1,height:1,parameters:x,mipmaps:!1})}):e&&this.setState({bitmapTexture:new g.a(t,{data:e,parameters:x})})}}]),t}(d.a);w.layerName="BitmapLayer",w.defaultProps={image:{type:"object",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};var S,T=n("MdWm"),A=n("p7wt"),P=n("nJkv"),C=n("JBga"),R=n("rpwb"),L=n("Jh/b"),I=function(){},M=(S={},Object(l.a)(S,10241,9987),Object(l.a)(S,10240,9729),Object(l.a)(S,10242,33071),Object(l.a)(S,10243,33071),S);function j(e){return e&&(e.id||e.url)}function k(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],o=i.icon,a=i.xOffset;e[j(o)]=Object.assign({},o,{x:a,y:n})}}var N=function(){function e(t,n){var r=n.onUpdate,o=void 0===r?I:r;Object(i.a)(this,e),this.gl=t,this.onUpdate=o,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return Object(o.a)(e,[{key:"finalize",value:function(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(e){var t=this._autoPacking?j(e):e;return this._mapping[t]||{}}},{key:"setProps",value:function(e){var t=e.loadOptions,n=e.autoPacking,r=e.iconAtlas,i=e.iconMapping,o=e.data,a=e.getIcon;t&&(this._loadOptions=t),void 0!==n&&(this._autoPacking=n),a&&(this._getIcon=a),i&&(this._mapping=i),r&&this._updateIconAtlas(r),this._autoPacking&&(o||a)&&"undefined"!==typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(o))}},{key:"_updateIconAtlas",value:function(e){this._texture&&(this._texture.delete(),this._texture=null),e instanceof g.a?(e.setParameters(M),this._externalTexture=e,this.onUpdate()):e&&(this._texture=new g.a(this.gl,{data:e,parameters:M}),this.onUpdate())}},{key:"_updateAutoPacking",value:function(e){var t=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};var r={},i=Object(R.a)(e),o=i.iterable,a=i.objectInfo,s=!0,u=!1,c=void 0;try{for(var l,f=o[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;a.index++;var d=t(h,a),p=j(d);if(!d)throw new Error("Icon is missing.");if(!d.url)throw new Error("Icon url is missing.");r[p]||n[p]&&d.url===n[p].url||(r[p]=d)}}catch(v){u=!0,c=v}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return r}(e,this._getIcon,this._mapping)||{});if(t.length>0){var n=function(e){for(var t,n=e.icons,r=e.buffer,i=e.mapping,o=void 0===i?{}:i,a=e.xOffset,s=void 0===a?0:a,u=e.yOffset,c=void 0===u?0:u,l=e.rowHeight,f=void 0===l?0:l,h=e.canvasWidth,d=[],p=0;p<n.length;p++){var v=n[p];if(!o[j(v)]){var g=v.height,y=v.width;s+y+r>h&&(k(o,d,c),s=0,c=f+c+r,f=0,d=[]),d.push({icon:v,xOffset:s}),s=s+y+r,f=Math.max(f,g)}}return d.length>0&&k(o,d,c),{mapping:o,rowHeight:f,xOffset:s,yOffset:c,canvasWidth:h,canvasHeight:(t=f+c+r,Math.pow(2,Math.ceil(Math.log2(t))))}}({icons:t,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),r=n.mapping,i=n.xOffset,o=n.yOffset,a=n.rowHeight,s=n.canvasHeight;this._rowHeight=a,this._mapping=r,this._xOffset=i,this._yOffset=o,this._canvasHeight=s,this._texture||(this._texture=new g.a(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:M})),this._texture.height!==this._canvasHeight&&(this._texture=function(e,t,n,r){var i=t.width,o=t.height,a=Object(T.a)(t,{width:n,height:r});return Object(A.b)(t,a,{targetY:0,width:i,height:o}),t.delete(),a}(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(t)}}},{key:"_loadIcons",value:function(e){var t=this,n=this._canvas.getContext("2d"),r=!0,i=!1,o=void 0;try{for(var a,s=function(){var e=a.value;t._pendingCount++,Object(C.a)(e.url,P.a,t._loadOptions).then((function(r){var i=j(e),o=t._mapping[i],a=o.x,s=o.y,u=o.width,c=o.height,l=function(e,t,n,r){return n===t.width&&r===t.height?t:(e.canvas.height=r,e.canvas.width=n,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,n,r),e.canvas)}(n,r,u,c);t._texture.setSubImageData({data:l,x:a,y:s,width:u,height:c}),t._texture.generateMipmap(),t.onUpdate()})).catch((function(e){L.a.error(e)()})).finally((function(){t._pendingCount--}))},u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s()}catch(c){i=!0,o=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"isLoaded",get:function(){return 0===this._pendingCount}}]),e}(),F=[0,0,0,255],D={iconAtlas:{type:"object",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(e){return e.position}},getIcon:{type:"accessor",value:function(e){return e.icon}},getColor:{type:"accessor",value:F},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]}},B=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(){return Object(u.a)(Object(s.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[f.a,h.a]})}},{key:"initializeState",value:function(){var e=this;this.state={iconManager:new N(this.context.gl,{onUpdate:function(){return e._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:F},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;Object(u.a)(Object(s.a)(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var o=this.getAttributeManager(),a=r.iconAtlas,c=r.iconMapping,l=r.data,f=r.getIcon,h=this.state.iconManager;h.setProps({loadOptions:r.loadOptions});var d=!1;if(a||this.internalState.isAsyncPropLoading("iconAtlas")?(n.iconAtlas!==r.iconAtlas&&h.setProps({iconAtlas:a,autoPacking:!1}),n.iconMapping!==r.iconMapping&&(h.setProps({iconMapping:c}),d=!0)):h.setProps({autoPacking:!0}),(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&(h.setProps({data:l,getIcon:f}),d=!0),d&&(o.invalidate("instanceOffsets"),o.invalidate("instanceIconFrames"),o.invalidate("instanceColorModes")),i.extensionsChanged){var p=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(p)}),o.invalidateAll()}}},{key:"finalizeState",value:function(){Object(u.a)(Object(s.a)(t.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.sizeScale,i=n.sizeMinPixels,o=n.sizeMaxPixels,a=n.sizeUnits,s=n.billboard,u=n.alphaCutoff,c=this.state.iconManager,l=this.context.viewport,f=c.getTexture();f&&f.loaded&&this.state.model.setUniforms(Object.assign({},t,{iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeScale:r*("pixels"===a?l.metersPerPixel:1),sizeMinPixels:i,sizeMaxPixels:o,billboard:s,alphaCutoff:u})).draw()}},{key:"_getModel",value:function(e){return new p.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new v.a({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"getInstanceOffset",value:function(e){var t=this.state.iconManager.getIconMapping(e);return[t.width/2-t.anchorX||0,t.height/2-t.anchorY||0]}},{key:"getInstanceColorMode",value:function(e){return this.state.iconManager.getIconMapping(e).mask?1:0}},{key:"getInstanceIconFrame",value:function(e){var t=this.state.iconManager.getIconMapping(e);return[t.x||0,t.y||0,t.width||0,t.height||0]}},{key:"isLoaded",get:function(){return Object(u.a)(Object(s.a)(t.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}}]),t}(d.a);B.layerName="IconLayer",B.defaultProps=D;var U={getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},z=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(){return Object(u.a)(Object(s.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[f.a,h.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(Object(u.a)(Object(s.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.widthUnits,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,u="pixels"===i?n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{widthScale:o*u,widthMinPixels:a,widthMaxPixels:s})).draw()}},{key:"_getModel",value:function(e){return new p.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new v.a({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0}))}}]),t}(d.a);z.layerName="LineLayer",z.defaultProps=U;var V=n("FR1t"),G=n("+7vx"),H=n("XQ+Y"),W=n("9peF"),q=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"getGeometry",value:function(e){return new W.a}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.elevationScale,i=n.extruded,o=n.offset,a=n.coverage,s=n.cellSize,u=n.angle;this.state.model.setUniforms(Object.assign({},t,{radius:s/2,angle:u,offset:o,extruded:i,coverage:a,elevationScale:r,edgeDistance:1,isWireframe:!1})).draw()}}]),t}(H.a);q.layerName="GridCellLayer",q.defaultProps={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",min:0,value:[1,1]}};var X=n("ctuC"),Z=n("R1+Y"),K=n("cwYr"),Y=n("ODXe"),J=n("5lV4"),Q=[],$=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(){return Object.assign({},Object(u.a)(Object(s.a)(t.prototype),"getShaders",this).call(this),{inject:{"vs:#decl":"\n  uniform float gamma;\n  varying float vGamma;\n","vs:#main-end":"\n  vGamma = gamma / (sizeScale * iconSize.y);\n"},fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform bool shouldDrawBackground;\nuniform vec3 backgroundColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    if (sdf) {\n      alpha = smoothstep(buffer - vGamma, buffer + vGamma, alpha);\n    }\n    float a = alpha * vColor.a;\n    \n    if (a < alphaCutoff) {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(backgroundColor, vColor.a);\n      } else {\n        discard;\n      }\n    } else {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(mix(backgroundColor, vColor.rgb, alpha), vColor.a * opacity);\n      } else {\n        gl_FragColor = vec4(vColor.rgb, a * opacity);\n      }\n      DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n    }\n  } else {\n    DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n  }\n}\n"})}},{key:"initializeState",value:function(){var e=this;Object(u.a)(Object(s.a)(t.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(r,i)}}})}},{key:"updateState",value:function(e){Object(u.a)(Object(s.a)(t.prototype),"updateState",this).call(this,e);var n=e.oldProps,r=e.props;if(r.backgroundColor!==n.backgroundColor){var i=Array.isArray(r.backgroundColor)?r.backgroundColor.map((function(e){return e/255})).slice(0,3):null;this.setState({backgroundColor:i})}}},{key:"draw",value:function(e){var n=e.uniforms,r=this.props.sdf,i=this.state.backgroundColor,o=Array.isArray(i);Object(u.a)(Object(s.a)(t.prototype),"draw",this).call(this,{uniforms:Object.assign({},n,{buffer:.75,gamma:.2,sdf:Boolean(r),backgroundColor:i||[0,0,0],shouldDrawBackground:o})})}},{key:"getInstanceOffset",value:function(e){var n=this;return e?Array.from(e).map((function(e){return Object(u.a)(Object(s.a)(t.prototype),"getInstanceOffset",n).call(n,e)})):Q}},{key:"getInstanceColorMode",value:function(e){return 1}},{key:"getInstanceIconFrame",value:function(e){var n=this;return e?Array.from(e).map((function(e){return Object(u.a)(Object(s.a)(t.prototype),"getInstanceIconFrame",n).call(n,e)})):Q}}]),t}(B);$.layerName="MultiIconLayer",$.defaultProps={backgroundColor:{type:"color",value:null,optional:!0},getIconOffsets:{type:"accessor",value:function(e){return e.offsets}},alphaCutoff:0};var ee=n("rxlC"),te=n.n(ee);function ne(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r],o=null,a=t&&t[i];a&&(o=a.width),n+=o}return n}function re(e,t,n){for(var r=[],i=0,o=0,a=0;a<e.length;a++){var s=ne(e[a],n);o+s>t&&(i<a&&r.push(e.substring(i,a)),i=a,o=0),o+=s}return i<e.length&&r.push(e.substring(i)),{rows:r,lastRowStartCharIndex:i,lastRowOffsetLeft:o}}function ie(e,t,n,r){return"break-all"===t?re(e,n,r):function(e,t,n){for(var r=[],i=0,o=0,a=0,s=null,u=0;u<e.length;u++)if(" "===e[u]?(s=e[u],o=u+1):u+1<e.length&&" "===e[u+1]||u+1===e.length?(s=e.substring(o,u+1),o=u+1):s=null,s){var c=ne(s,n);if(a+c>t){var l=o-s.length;if(i<l&&(r.push(e.substring(i,l)),i=l,a=0),c>t){var f=re(s,t,n);f.rows.length>1&&(r=r.concat(f.rows.slice(0,f.rows.length-1))),i+=f.lastRowStartCharIndex,c=f.lastRowOffsetLeft}}a+=c}return i<e.length&&r.push(e.substring(i)),{rows:r,lastRowStartCharIndex:i,lastRowOffsetLeft:a}}(e,n,r)}function oe(e,t){for(var n=0,r=0,i=new Array(e.length),o=0;o<e.length;o++){var a=e[o],s=t[a];s?(r||(r=s.height),i[o]=n+s.width/2,n+=s.width):(L.a.warn("Missing character: ".concat(a))(),i[o]=n,n+=32)}return{leftOffsets:i,rowWidth:n,rowHeight:r}}var ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;Object(i.a)(this,e),this.limit=t,this.clear()}return Object(o.a)(e,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(e){var t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}},{key:"set",value:function(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}},{key:"delete",value:function(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}},{key:"_deleteCache",value:function(e){delete this._cache[e]}},{key:"_deleteOrder",value:function(e){var t=this._order.findIndex((function(t){return t===e}));t>=0&&this._order.splice(t,1)}},{key:"_appendOrder",value:function(e){this._order.push(e)}}]),e}();var se=function(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),ue=new ae(3),ce=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function le(e,t){var n=ue.get(e);if(!n)return t;var r=[],i=n.mapping,o=Object.keys(i);o=new Set(o);var a=t;return a instanceof Array&&(a=new Set(a)),a.forEach((function(e){o.has(e)||r.push(e)})),r}function fe(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function he(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="baseline",e.textAlign="left"}var de=function(){function e(t){Object(i.a)(this,e),this.gl=t,this.props={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:se,fontSize:64,buffer:2,sdf:!1,cutoff:.25,radius:3},this._key=null,this._texture=new g.a(this.gl)}return Object(o.a)(e,[{key:"finalize",value:function(){this._texture.delete()}},{key:"setProps",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ce.forEach((function(n){n in t&&(e.props[n]=t[n])}));var n=this._key;this._key=this._getKey();var r=le(this._key,this.props.characterSet),i=ue.get(this._key);if(i&&0===r.length)this._key!==n&&this._updateTexture(i);else{var o=this._generateFontAtlas(this._key,r,i);this._updateTexture(o),ue.set(this._key,o)}}},{key:"_updateTexture",value:function(e){var t,n=e.data,r=e.width,i=e.height;this._texture.width===r&&this._texture.height===i||this._texture.resize({width:r,height:i}),this._texture.setImageData({data:n,width:r,height:i,parameters:(t={},Object(l.a)(t,10242,33071),Object(l.a)(t,10243,33071),t)}),this._texture.generateMipmap()}},{key:"_generateFontAtlas",value:function(e,t,n){var r=this.props,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=n&&n.data;f||((f=document.createElement("canvas")).width=1024);var h=f.getContext("2d");he(h,i,a,o);var d=function(e){var t=e.characterSet,n=e.getFontWidth,r=e.fontHeight,i=e.buffer,o=e.maxCanvasWidth,a=e.mapping,s=void 0===a?{}:a,u=e.xOffset,c=void 0===u?0:u,l=e.yOffset,f=void 0===l?0:l,h=0,d=c,p=0,v=!0,g=!1,y=void 0;try{for(var m,_=t[Symbol.iterator]();!(v=(m=_.next()).done);v=!0){var b=m.value;if(!s[b]){var O=n(b,p++);d+O+2*i>o&&(d=0,h++),s[b]={x:d+i,y:f+h*(r+2*i)+i,width:O,height:r},d+=O+2*i}}}catch(w){g=!0,y=w}finally{try{v||null==_.return||_.return()}finally{if(g)throw y}}var E,x=r+2*i;return{mapping:s,xOffset:d,yOffset:f+h*x,canvasHeight:(E=f+(h+1)*x,Math.pow(2,Math.ceil(Math.log2(E))))}}(Object.assign({getFontWidth:function(e){return h.measureText(e).width},fontHeight:1.2*a,buffer:s,characterSet:t,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),p=d.mapping,v=d.canvasHeight,g=d.xOffset,y=d.yOffset;if(f.height!==v){var m=h.getImageData(0,0,f.width,f.height);f.height=v,h.putImageData(m,0,0)}if(he(h,i,a,o),u){var _=new te.a(a,s,c,l,i,o),b=h.getImageData(0,0,_.size,_.size),O=!0,E=!1,x=void 0;try{for(var w,S=t[Symbol.iterator]();!(O=(w=S.next()).done);O=!0){var T=w.value;fe(_.draw(T),b),h.putImageData(b,p[T].x-s,p[T].y-s)}}catch(M){E=!0,x=M}finally{try{O||null==S.return||S.return()}finally{if(E)throw x}}}else{var A=!0,P=!1,C=void 0;try{for(var R,L=t[Symbol.iterator]();!(A=(R=L.next()).done);A=!0){var I=R.value;h.fillText(I,p[I].x,p[I].y+.9*a)}}catch(M){P=!0,C=M}finally{try{A||null==L.return||L.return()}finally{if(P)throw C}}}return{xOffset:g,yOffset:y,mapping:p,data:f,width:f.width,height:f.height}}},{key:"_getKey",value:function(){var e=this.props,t=e.gl,n=e.fontFamily,r=e.fontWeight,i=e.fontSize,o=e.buffer,a=e.sdf,s=e.radius,u=e.cutoff;return a?"".concat(t," ").concat(n," ").concat(r," ").concat(i," ").concat(o," ").concat(s," ").concat(u):"".concat(t," ").concat(n," ").concat(r," ").concat(i," ").concat(o)}},{key:"texture",get:function(){return this._texture}},{key:"mapping",get:function(){var e=ue.get(this._key);return e&&e.mapping}},{key:"scale",get:function(){return 1.2}}]),e}();function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ve={fontSize:64,buffer:2,sdf:!1,radius:3,cutoff:.25},ge={start:1,middle:0,end:-1},ye={top:1,center:0,bottom:-1},me=["fontSize","buffer","sdf","radius","cutoff"],_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,backgroundColor:{type:"color",value:null,optional:!0},characterSet:se,fontFamily:"Monaco, monospace",fontWeight:"normal",lineHeight:1,fontSettings:{},wordBreak:"word-break",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(e){return e.text}},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},be=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new de(this.context.gl)}}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=e.changeFlags,i=this._fontChanged(n,t);i&&this._updateFontAtlas(n,t);var o=i||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),o&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"finalizeState",value:function(){Object(u.a)(Object(s.a)(t.prototype),"finalizeState",this).call(this),this.state.fontAtlasManager.finalize()}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.index>=0?this.props.data[t.index]:null})}},{key:"_updateFontAtlas",value:function(e,t){var n=t.characterSet,r=t.fontSettings,i=t.fontFamily,o=t.fontWeight;this.state.fontAtlasManager.setProps(Object.assign({},ve,r,{characterSet:n,fontFamily:i,fontWeight:o})),this.setNeedsRedraw(!0)}},{key:"_fontChanged",value:function(e,t){if(e.fontFamily!==t.fontFamily||e.characterSet!==t.characterSet||e.fontWeight!==t.fontWeight)return!0;if(e.fontSettings===t.fontSettings)return!1;var n=e.fontSettings||{},r=t.fontSettings||{};return me.some((function(e){return n[e]!==r[e]}))}},{key:"_updateText",value:function(){var e,t=this.props.data,n=t.attributes&&t.attributes.getText,r=this.props.getText,i=t.startIndices;if(n&&i){var o=function(e){var t=e.value,n=e.length,r=e.stride,i=e.offset,o=e.startIndices,a=t.BYTES_PER_ELEMENT,s=r?r/a:1,u=i?i/a:0,c=o[n]||Math.floor((t.length-u-a)/s)+1,l=new Array(n),f=t;if(s>1||u>0){f=new t.constructor(c);for(var h=0;h<c;h++)f[h]=t[h*s+u]}for(var d=0;d<n;d++){var p=o[d],v=o[d+1]||c;l[d]=String.fromCodePoint.apply(null,f.subarray(p,v))}return{texts:l,characterCount:c}}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ArrayBuffer.isView(n)?{value:n}:n,{length:t.length,startIndices:i})),a=o.texts;e=o.characterCount,r=function(e,t){var n=t.index;return a[n]}}else{var s=Object(R.a)(t),u=s.iterable,c=s.objectInfo;i=[0],e=0;var f=!0,h=!1,d=void 0;try{for(var p,v=u[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;c.index++,e+=(r(g,c)||"").length,i.push(e)}}catch(y){h=!0,d=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}this.setState({getText:r,startIndices:i,numInstances:e})}},{key:"getIconOffsets",value:function(e,t){var n=this.state.fontAtlasManager.mapping,r=this.state.getText,i=this.props,o=i.wordBreak,a=i.maxWidth,s=i.lineHeight,u=i.getTextAnchor,c=i.getAlignmentBaseline,l=r(e,t)||"",f=function(e,t,n,r,i){for(var o=new Array(e.length),a=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,s=[0,0],u=0,c=0,l=0;l<=e.length;l++){var f=e[l],h=void 0;if("\n"!==f&&void 0!==f||(h=e.slice(c,l)),h){var d=a?ie(h,n,r,i).rows:[h],p=!0,v=!1,g=void 0;try{for(var y,m=d[Symbol.iterator]();!(p=(y=m.next()).done);p=!0){var _=oe(y.value,i),b=_.rowWidth,O=_.rowHeight,E=_.leftOffsets,x=!0,w=!1,S=void 0;try{for(var T,A=E[Symbol.iterator]();!(x=(T=A.next()).done);x=!0){var P=T.value;o[c++]={x:P,y:u+O/2,rowWidth:b}}}catch(C){w=!0,S=C}finally{try{x||null==A.return||A.return()}finally{if(w)throw S}}u+=O*t,s[0]=a?r:Math.max(s[0],b)}}catch(C){v=!0,g=C}finally{try{p||null==m.return||m.return()}finally{if(v)throw g}}}"\n"===f&&(o[c++]={x:0,y:0,rowWidth:0})}return s[1]=u,{characters:o,size:s}}(l,s,o,a,n),h=f.characters,d=Object(Y.a)(f.size,2),p=d[0],v=d[1],g=ge["function"===typeof u?u(e,t):u],y=ye["function"===typeof c?c(e,t):c],m=new Array(2*l.length),_=0,b=!0,O=!1,E=void 0;try{for(var x,w=h[Symbol.iterator]();!(b=(x=w.next()).done);b=!0){var S=x.value,T=S.rowWidth,A=S.x,P=S.y,C=(1-g)*(p-T)/2;m[_++]=(g-1)*p/2+C+A,m[_++]=(y-1)*v/2+P}}catch(R){O=!0,E=R}finally{try{b||null==w.return||w.return()}finally{if(O)throw E}}return m}},{key:"renderLayers",value:function(){var e=this.state,t=e.startIndices,n=e.numInstances,r=e.getText,i=e.fontAtlasManager,o=i.scale,a=i.texture,s=i.mapping,u=e.styleVersion,c=this.props,l=c.data,f=c._dataDiff,h=c.backgroundColor,d=c.getPosition,p=c.getColor,v=c.getSize,g=c.getAngle,y=c.getPixelOffset,m=c.billboard,_=c.fontSettings,b=c.sizeScale,O=c.sizeUnits,E=c.sizeMinPixels,x=c.sizeMaxPixels,w=c.transitions,S=c.updateTriggers,T=this.getIconOffsets.bind(this);return new(this.getSubLayerClass("characters",$))({sdf:_.sdf,iconAtlas:a,iconMapping:s,backgroundColor:h,getPosition:d,getColor:p,getSize:v,getAngle:g,getPixelOffset:y,billboard:m,sizeScale:b*o,sizeUnits:O,sizeMinPixels:E*o,sizeMaxPixels:x*o,transitions:w&&{getPosition:w.getPosition,getAngle:w.getAngle,getColor:w.getColor,getSize:w.getSize,getPixelOffset:S.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getPosition:S.getPosition,getAngle:S.getAngle,getColor:S.getColor,getSize:S.getSize,getPixelOffset:S.getPixelOffset,getIconOffsets:{getText:S.getText,getTextAnchor:S.getTextAnchor,getAlignmentBaseline:S.getAlignmentBaseline,styleVersion:u}}}),{data:l,_dataDiff:f,startIndices:t,numInstances:n,getIconOffsets:T,getIcon:r})}}]),t}(J.a);be.layerName="TextLayer",be.defaultProps=_e;var Oe=n("KHNG")},gBP8:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},gOKY:function(e,t,n){"use strict";t.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},gztc:function(e,t,n){"use strict";n.r(t),n.d(t,"registerSerializer",(function(){return r.b})),n.d(t,"Pool",(function(){return T})),n.d(t,"spawn",(function(){return A.a})),n.d(t,"Thread",(function(){return O})),n.d(t,"isWorkerRuntime",(function(){return f})),n.d(t,"BlobWorker",(function(){return P})),n.d(t,"Worker",(function(){return C})),n.d(t,"expose",(function(){return R.a})),n.d(t,"DefaultSerializer",(function(){return L.a})),n.d(t,"Transfer",(function(){return I.a}));var r=n("3Cr/");let i;function o(){return i||(i=function(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return(""+t[0]).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return"/"}()),i}const a="undefined"!==typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,s=e=>/^(file|https?:)?\/\//i.test(e);function u(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}let c;function l(){return c||(c=function(){if("undefined"===typeof Worker)return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(e,t){"string"===typeof e&&t&&t._baseURL?e=new URL(e,t._baseURL):"string"===typeof e&&!s(e)&&o().match(/^file:\/\//i)&&(e=new URL(e,o().replace(/\/[^\/]+$/,"/")),e=u(`importScripts(${JSON.stringify(e)});`)),"string"===typeof e&&s(e)&&(e=u(`importScripts(${JSON.stringify(e)});`)),super(e,t)}}class t extends e{constructor(e,t){super(window.URL.createObjectURL(e),t)}static fromText(e,n){const r=new window.Blob([e],{type:"text/javascript"});return new t(r,n)}}return{blob:t,default:e}}()),c}function f(){const e="undefined"!==typeof self&&"undefined"!==typeof Window&&self instanceof Window;return!("undefined"===typeof self||!self.postMessage||e)}var h,d=n("NOtv"),p=n.n(d),v=n("qyNU"),g=n("NEZD"),y=n("Lhll");function m(e){return Promise.all(e.map(e=>{const t=e=>({status:"fulfilled",value:e}),n=e=>({status:"rejected",reason:e}),r=Promise.resolve(e);try{return r.then(t,n)}catch(i){return Promise.reject(i)}}))}!function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"}(h||(h={}));var _=n("ewpT");function b(e){throw Error(e)}const O={errors:e=>e[_.a]||b("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:e=>e[_.b]||b("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:e=>e[_.c]()};var E=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};let x=1;class w{constructor(e,t){this.eventSubject=new v.a,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const n="number"===typeof t?{size:t}:t||{},{size:r=a}=n;this.debug=p()("threads:pool:"+(n.name||String(x++)).replace(/\W/g," ").trim().replace(/\s+/g,"-")),this.options=n,this.workers=function(e,t){return function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(t).map(()=>({init:e(),runningTasks:[]}))}(e,r),this.eventObservable=Object(g.a)(y.a.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:h.initialized,size:this.workers.length}),e=>{this.debug("Error while initializing pool worker:",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){const{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return E(this,void 0,void 0,(function*(){const n=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${n}...`),this.eventSubject.next({type:h.taskStart,taskID:t.id,workerID:n});try{const r=yield t.run(yield e.init);this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:h.taskCompleted,returnValue:r,taskID:t.id,workerID:n})}catch(r){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:h.taskFailed,taskID:t.id,error:r,workerID:n})}}))}run(e,t){return E(this,void 0,void 0,(function*(){const n=(()=>E(this,void 0,void 0,(function*(){var r;yield(r=0,new Promise(e=>setTimeout(e,r)));try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==n),this.isClosing||this.scheduleWork()}})))();e.runningTasks.push(n)}))}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const e=this.findIdlingWorker();if(!e)return;const t=this.taskQueue.shift();if(!t)return this.debug("Task queue is empty"),void this.eventSubject.next({type:h.taskQueueDrained});this.run(e,t)}taskCompletion(e){return new Promise((t,n)=>{const r=this.events().subscribe(i=>{i.type===h.taskCompleted&&i.taskID===e?(r.unsubscribe(),t(i.returnValue)):i.type===h.taskFailed&&i.taskID===e?(r.unsubscribe(),n(i.error)):i.type===h.terminated&&(r.unsubscribe(),n(Error("Pool has been terminated before task was run.")))})})}settled(e=!1){return E(this,void 0,void 0,(function*(){const t=()=>{return e=this.workers,t=e=>e.runningTasks,e.reduce((e,n)=>[...e,...t(n)],[]);var e,t},n=[],r=this.eventObservable.subscribe(e=>{e.type===h.taskFailed&&n.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?(yield m(t()),n):(yield new Promise((e,t)=>{const n=this.eventObservable.subscribe({next(t){t.type===h.taskQueueDrained&&(n.unsubscribe(),e())},error:t})}),yield m(t()),r.unsubscribe(),n)}))}completed(e=!1){return E(this,void 0,void 0,(function*(){const t=this.settled(e),n=new Promise((e,n)=>{const r=this.eventObservable.subscribe({next(i){i.type===h.taskQueueDrained?(r.unsubscribe(),e(t)):i.type===h.taskFailed&&(r.unsubscribe(),n(i.error))},error:n})}),r=yield Promise.race([t,n]);if(r.length>0)throw r[0]}))}events(){return this.eventObservable}queue(e){const{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const n=this.nextTaskID++,r=this.taskCompletion(n);r.catch(e=>{this.debug(`Task #${n} errored:`,e)});const i={id:n,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(e=>e!==i),this.eventSubject.next({type:h.taskCanceled,taskID:i.id}))},then:r.then.bind(r)};if(this.taskQueue.length>=t)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:h.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(e){return E(this,void 0,void 0,(function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:h.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>E(this,void 0,void 0,(function*(){return O.terminate(yield e.init)}))))}))}}function S(e,t){return new w(e,t)}w.EventType=h,S.EventType=h;const T=S;var A=n("cxv0");const P=l().blob,C=l().default;var R=n("UB+q"),L=n("atKK"),I=n("zY86")},hwdV:function(e,t,n){var r=n("HDXh"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},iTZm:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},iWIM:function(e,t,n){var r=n("n3AX");function i(t,n,o){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},iceZ:function(e,t,n){"use strict";const r=n("bCCX").default;e.exports=e=>Boolean(e&&e[r]&&e===e[r]())},"j/LU":function(e,t,n){"use strict";const r=n("4abu"),i=function(e,t){const n={};if(!(e.child&&!r.isEmptyObject(e.child)||e.attrsMap&&!r.isEmptyObject(e.attrsMap)))return r.isExist(e.val)?e.val:"";r.isExist(e.val)&&("string"!==typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&("strict"===t.arrayMode?n[t.textNodeName]=[e.val]:n[t.textNodeName]=e.val),r.merge(n,e.attrsMap,t.arrayMode);const o=Object.keys(e.child);for(let r=0;r<o.length;r++){var a=o[r];if(e.child[a]&&e.child[a].length>1)for(var s in n[a]=[],e.child[a])n[a].push(i(e.child[a][s],t));else if(!0===t.arrayMode){const r=i(e.child[a][0],t);n[a]="object"===typeof r?[r]:r}else"strict"===t.arrayMode?n[a]=[i(e.child[a][0],t)]:n[a]=i(e.child[a][0],t)}return n};t.convertToJson=i},kDxh:function(e,t,n){"use strict";var r=n("ybjB").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"===typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?v():t.on("request",v)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},"kVK+":function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*v}},kd2E:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,v=e[l].replace(s,"%20"),g=v.indexOf(n);g>=0?(f=v.substr(0,g),h=v.substr(g+1)):(f=v,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},n3AX:function(e,t,n){var r=n("Nsbk");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},nA4H:function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("kDxh"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[a]=null,e[s]=null,t(d(n,!1)))}}function v(e){t.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(d(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(void 0,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[a]=null,n[s]=null,e(d(r,!1))):(n[a]=e,n[s]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[l]=null,n[a]=null,n[s]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[s]=null,r(d(void 0,!0))),n[c]=!0})),e.on("readable",v.bind(null,n)),n}}).call(this,n("8oxB"))},nm4c:function(e,t,n){"use strict";var r=n("vn/o"),i=n("yDR0"),o=n("7tol"),a=n("frGm"),s=n("aFNf");function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,l(e)):-2}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,f(e))):-2}function d(e,t){var n,r;return e?(r=new c,e.state=r,r.window=null,0!==(n=h(e,t))&&(e.state=null),n):-2}var p,v,g=!0;function y(e){if(g){var t;for(p=new r.Buf32(512),v=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,v,0,e.work,{bits:5}),g=!1}e.lencode=p,e.lenbits=9,e.distcode=v,e.distbits=5}function m(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=f,t.inflateReset2=h,t.inflateResetKeep=l,t.inflateInit=function(e){return d(e,15)},t.inflateInit2=d,t.inflate=function(e,t){var n,c,l,f,h,d,p,v,g,_,b,O,E,x,w,S,T,A,P,C,R,L,I,M,j=0,k=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,v=n.hold,g=n.bits,_=d,b=p,L=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(2&n.wrap&&35615===v){n.check=0,k[0]=255&v,k[1]=v>>>8&255,n.check=o(n.check,k,2,0),v=0,g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!==(15&v)){e.msg="unknown compression method",n.mode=30;break}if(g-=4,R=8+(15&(v>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&v?10:12,v=0,g=0;break;case 2:for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(n.flags=v,8!==(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(k[0]=255&v,k[1]=v>>>8&255,n.check=o(n.check,k,2,0)),v=0,g=0,n.mode=3;case 3:for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.head&&(n.head.time=v),512&n.flags&&(k[0]=255&v,k[1]=v>>>8&255,k[2]=v>>>16&255,k[3]=v>>>24&255,n.check=o(n.check,k,4,0)),v=0,g=0,n.mode=4;case 4:for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(k[0]=255&v,k[1]=v>>>8&255,n.check=o(n.check,k,2,0)),v=0,g=0,n.mode=5;case 5:if(1024&n.flags){for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(k[0]=255&v,k[1]=v>>>8&255,n.check=o(n.check,k,2,0)),v=0,g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((O=n.length)>d&&(O=d),O&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,f,O,R)),512&n.flags&&(n.check=o(n.check,c,O,f)),d-=O,f+=O,n.length-=O),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break e;O=0;do{R=c[f+O++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R))}while(R&&O<d);if(512&n.flags&&(n.check=o(n.check,c,O,f)),d-=O,f+=O,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break e;O=0;do{R=c[f+O++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R))}while(R&&O<d);if(512&n.flags&&(n.check=o(n.check,c,O,f)),d-=O,f+=O,R)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=0,g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}e.adler=n.check=u(v),v=0,g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=v,n.bits=g,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&g,g-=7&g,n.mode=27;break}for(;g<3;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}switch(n.last=1&v,g-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(y(n),n.mode=20,6===t){v>>>=2,g-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if((65535&v)!==(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,v=0,g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(O=n.length){if(O>d&&(O=d),O>p&&(O=p),0===O)break e;r.arraySet(l,c,f,O,h),d-=O,f+=O,p-=O,h+=O,n.length-=O;break}n.mode=12;break;case 17:for(;g<14;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(n.nlen=257+(31&v),v>>>=5,g-=5,n.ndist=1+(31&v),v>>>=5,g-=5,n.ncode=4+(15&v),v>>>=4,g-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;g<3;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.lens[N[n.have++]]=7&v,v>>>=3,g-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},L=s(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,L){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=(j=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,T=65535&j,!((w=j>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(T<16)v>>>=w,g-=w,n.lens[n.have++]=T;else{if(16===T){for(M=w+2;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v>>>=w,g-=w,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],O=3+(3&v),v>>>=2,g-=2}else if(17===T){for(M=w+3;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}g-=w,R=0,O=3+(7&(v>>>=w)),v>>>=3,g-=3}else{for(M=w+7;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}g-=w,R=0,O=11+(127&(v>>>=w)),v>>>=7,g-=7}if(n.have+O>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;O--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,I={bits:n.lenbits},L=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,L){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},L=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,L){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(d>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=v,n.bits=g,a(e,b),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,v=n.hold,g=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=(j=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,T=65535&j,!((w=j>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(S&&0===(240&S)){for(A=w,P=S,C=T;S=(j=n.lencode[C+((v&(1<<A+P)-1)>>A)])>>>16&255,T=65535&j,!(A+(w=j>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}v>>>=A,g-=A,n.back+=A}if(v>>>=w,g-=w,n.back+=w,n.length=T,0===S){n.mode=26;break}if(32&S){n.back=-1,n.mode=12;break}if(64&S){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&S,n.mode=22;case 22:if(n.extra){for(M=n.extra;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,g-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=(j=n.distcode[v&(1<<n.distbits)-1])>>>16&255,T=65535&j,!((w=j>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(0===(240&S)){for(A=w,P=S,C=T;S=(j=n.distcode[C+((v&(1<<A+P)-1)>>A)])>>>16&255,T=65535&j,!(A+(w=j>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}v>>>=A,g-=A,n.back+=A}if(v>>>=w,g-=w,n.back+=w,64&S){e.msg="invalid distance code",n.mode=30;break}n.offset=T,n.extra=15&S,n.mode=24;case 24:if(n.extra){for(M=n.extra;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,g-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break e;if(O=b-p,n.offset>O){if((O=n.offset-O)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}O>n.wnext?(O-=n.wnext,E=n.wsize-O):E=n.wnext-O,O>n.length&&(O=n.length),x=n.window}else x=l,E=h-n.offset,O=n.length;O>p&&(O=p),p-=O,n.length-=O;do{l[h++]=x[E++]}while(--O);0===n.length&&(n.mode=21);break;case 26:if(0===p)break e;l[h++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;g<32;){if(0===d)break e;d--,v|=c[f++]<<g,g+=8}if(b-=p,e.total_out+=b,n.total+=b,b&&(e.adler=n.check=n.flags?o(n.check,l,b,h-b):i(n.check,l,b,h-b)),b=p,(n.flags?v:u(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=0,g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=0,g=0}n.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=v,n.bits=g,(n.wsize||b!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&m(e,e.output,e.next_out,b-e.avail_out)?(n.mode=31,-4):(_-=e.avail_in,b-=e.avail_out,e.total_in+=_,e.total_out+=b,n.total+=b,n.wrap&&b&&(e.adler=n.check=n.flags?o(n.check,l,b,e.next_out-b):i(n.check,l,b,e.next_out-b)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===b||4===t)&&0===L&&(L=-5),L)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0===(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:m(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},"oRz+":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("o0o1"),i=n.n(r),o=n("HaE+"),a=n("ItzM"),s=n(3),u=n("FR20"),c={};function l(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(i.a.mark((function e(t){var n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:{},n&&(t=h(t,n,r)),c[t]=c[t]||d(t),e.next=6,c[t];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){var r=n.modules||{};return r[e]?r[e]:a.b?n.CDN?(Object(u.a)(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(t,"@").concat("2.2.8","/dist/libs/").concat(e)):a.c?"../src/libs/".concat(e):"modules/".concat(t,"/src/libs/").concat(e):"modules/".concat(t,"/dist/libs/").concat(e)}function d(e){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endsWith("wasm")){e.next=7;break}return e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.arrayBuffer();case 6:return e.abrupt("return",e.sent);case 7:if(a.b){e.next=9;break}return e.abrupt("return",Object(s.requireFromFile)(t));case 9:if(!a.c){e.next=11;break}return e.abrupt("return",importScripts(t));case 11:return e.next=13,fetch(t);case 13:return r=e.sent,e.next=16,r.text();case 16:return o=e.sent,e.abrupt("return",v(o,t));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){if(!a.b)return Object(s.requireFromString)(e,t);if(a.c)return eval.call(a.a,e),null;var n=document.createElement("script");n.id=t;try{n.appendChild(document.createTextNode(e))}catch(r){n.text=e}return document.body.appendChild(n),null}},p1mf:function(e,t,n){"use strict";const r=n("4abu").buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function a(e){this.options=r(e,i,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.options.cdataTagName?this.isCDATA=v:this.isCDATA=function(){return!1},this.replaceCDATAstr=s,this.replaceCDATAarr=u,this.options.format?(this.indentate=d,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=h,this.buildObjNode=l):(this.buildTextNode=f,this.buildObjNode=c),this.buildTextValNode=f,this.buildObjectNode=c}function s(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function u(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function c(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function l(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function f(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function h(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function d(e){return this.options.indentBy.repeat(e)}function p(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function v(e){return e===this.options.cdataTagName}a.prototype.parse=function(e){return this.j2x(e,0).val},a.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let a=0;a<o;a++){const o=i[a];if("undefined"===typeof e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!==typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if("undefined"===typeof n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"===typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}},e.exports=a},qI7z:function(e,t,n){"use strict";n.r(t),n.d(t,"COORDINATE_SYSTEM",(function(){return r.a})),n.d(t,"LightingEffect",(function(){return i.a})),n.d(t,"AmbientLight",(function(){return o.a})),n.d(t,"DirectionalLight",(function(){return a.a})),n.d(t,"PointLight",(function(){return p})),n.d(t,"_CameraLight",(function(){return b})),n.d(t,"_SunLight",(function(){return R})),n.d(t,"PostProcessEffect",(function(){return F})),n.d(t,"_LayersPass",(function(){return z.a})),n.d(t,"Deck",(function(){return V.a})),n.d(t,"LayerManager",(function(){return G.a})),n.d(t,"AttributeManager",(function(){return H.a})),n.d(t,"Layer",(function(){return W.a})),n.d(t,"CompositeLayer",(function(){return q.a})),n.d(t,"DeckRenderer",(function(){return X.a})),n.d(t,"Viewport",(function(){return Z.a})),n.d(t,"WebMercatorViewport",(function(){return K.a})),n.d(t,"_GlobeViewport",(function(){return re})),n.d(t,"picking",(function(){return oe.a})),n.d(t,"project",(function(){return ae.a})),n.d(t,"project32",(function(){return se.a})),n.d(t,"gouraudLighting",(function(){return ue.a})),n.d(t,"phongLighting",(function(){return ue.b})),n.d(t,"shadow",(function(){return ce.a})),n.d(t,"View",(function(){return le.a})),n.d(t,"MapView",(function(){return fe.a})),n.d(t,"FirstPersonView",(function(){return _e})),n.d(t,"OrbitView",(function(){return we})),n.d(t,"OrthographicView",(function(){return Se.a})),n.d(t,"_GlobeView",(function(){return ke})),n.d(t,"Controller",(function(){return de.a})),n.d(t,"MapController",(function(){return Pe.b})),n.d(t,"_GlobeController",(function(){return Me})),n.d(t,"FirstPersonController",(function(){return me})),n.d(t,"OrbitController",(function(){return be.b})),n.d(t,"OrthographicController",(function(){return Ne.a})),n.d(t,"Effect",(function(){return L.a})),n.d(t,"LayerExtension",(function(){return Fe.a})),n.d(t,"TRANSITION_EVENTS",(function(){return Re.a})),n.d(t,"TransitionInterpolator",(function(){return De.a})),n.d(t,"LinearInterpolator",(function(){return Ce.a})),n.d(t,"FlyToInterpolator",(function(){return ze})),n.d(t,"log",(function(){return Ve.a})),n.d(t,"createIterable",(function(){return Ge.a})),n.d(t,"fp64LowPart",(function(){return ve.c})),n.d(t,"Tesselator",(function(){return He.a})),n.d(t,"_fillArray",(function(){return We.a})),n.d(t,"_flatten",(function(){return We.b})),n.d(t,"_count",(function(){return qe.a})),n.d(t,"_memoize",(function(){return Xe.a})),n.d(t,"_mergeShaders",(function(){return Ze.a})),n.d(t,"_compareProps",(function(){return Ke.a}));var r=n("V3d6"),i=n("8rZH"),o=n("7gZ0"),a=n("VBTR"),s=n("1OyB"),u=n("vuIU"),c=n("5cL1"),l=[255,255,255],f=[0,0,1],h=[0,0,1],d=0,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e);var n=t.color,r=void 0===n?l:n,i=t.intensity,o=void 0===i?1:i,a=t.position,u=void 0===a?h:a;this.id=t.id||"point-".concat(d++),this.color=r,this.intensity=o,this.type="point",this.position=u,this.attenuation=v(t),this.projectedLight=Object.assign({},this)}return Object(u.a)(e,[{key:"getProjectedLight",value:function(e){var t=e.layer,n=this.projectedLight,i=t.context.viewport,o=t.props,a=o.coordinateSystem,s=o.coordinateOrigin,u=Object(c.b)(this.position,{viewport:i,coordinateSystem:a,coordinateOrigin:s,fromCoordinateSystem:i.isGeospatial?r.a.LNGLAT:r.a.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return n.color=this.color,n.intensity=this.intensity,n.position=u,n}}]),e}();function v(e){return"attenuation"in e?e.attenuation:"intensity"in e?[0,0,e.intensity]:f}var g=n("md7G"),y=n("foSv"),m=n("Ji7U"),_=n("V8ep"),b=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getProjectedLight",value:function(e){var t=e.layer,n=this.projectedLight,r=t.context.viewport,i=t.props,o=i.coordinateSystem,a=i.coordinateOrigin,s=i.modelMatrix,u=Object(_.b)({viewport:r,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a}).project_uCameraPosition;return n.color=this.color,n.intensity=this.intensity,n.position=u,n}}]),t}(p),O=n("Ff2n"),E=Math.PI/180,x=23.4397*E,w=.98560028;function S(e,t,n){var r=E*-n,i=E*t,o=function(e){return function(e){return e/864e5-.5+2440588}(e)-2451545}(e),a=function(e){var t=function(e){var t=e,n=E*(1.9148*Math.sin(t)+.02*Math.sin(2*t)+3e-4*Math.sin(3*t));return t+n+102.9372*E+Math.PI}((n=e,E*(357.5291+w*n)));var n;return{declination:A(t,0),rightAscension:T(t,0)}}(o),s=function(e,t){return E*(280.147+360.9856235*e)-t}(o,r)-a.rightAscension;return{azimuth:P(s,i,a.declination),altitude:C(s,i,a.declination)}}function T(e,t){var n=e;return Math.atan2(Math.sin(n)*Math.cos(x)-Math.tan(t)*Math.sin(x),Math.cos(n))}function A(e,t){var n=e;return Math.asin(Math.sin(t)*Math.cos(x)+Math.cos(t)*Math.sin(x)*Math.sin(n))}function P(e,t,n){var r=e,i=t,o=n;return Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(i)-Math.tan(o)*Math.cos(i))}function C(e,t,n){var r=e,i=t,o=n;return Math.asin(Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(r))}var R=function(e){function t(e){var n,r=e.timestamp,i=Object(O.a)(e,["timestamp"]);return Object(s.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,i))).timestamp=r,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getProjectedLight",value:function(e){var t=e.layer.context.viewport,n=t.latitude,r=t.longitude;return this.direction=function(e,t,n){var r=S(e,t,n),i=r.azimuth,o=r.altitude,a=i+Math.PI;return[-Math.sin(a),-Math.cos(a),-Math.sin(o)]}(this.timestamp,n,r),this}}]),t}(a.a),L=n("uCGa"),I=n("uvYE"),M=n("iein"),j=n("pRFE"),k=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),n=Object(g.a)(this,Object(y.a)(t).call(this,e,r));var i=r.module,o=r.fs,a=r.id;return n.model=new I.a(e,{id:a,fs:o,modules:[i]}),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(e){var t=this,n=this.gl;Object(M.l)(n,{framebuffer:e.outputBuffer,clearColor:[0,0,0,0]},(function(){return t._renderPass(n,e)}))}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_renderPass",value:function(e,t){var n=t.inputBuffer;t.outputBuffer;Object(j.a)(e,{color:!0}),this.model.draw({moduleSettings:this.props.moduleSettings,uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}(n("mC81").a),N=n("bHAT"),F=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,r))).id="".concat(e.name,"-pass"),Object(N.b)(e),n.module=e,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"postRender",value:function(e,t){this.passes||(this.passes=function(e,t,n,r){if(t.filter||t.sampler){var i=U(t);return[new k(e,{id:n,module:t,fs:i,moduleSettings:r})]}return(t.passes||[]).map((function(i,o){var a=U(t,i),s="".concat(n,"-").concat(o);return new k(e,{id:s,module:t,fs:a,moduleSettings:r})}))}(e,this.module,this.id,this.props));for(var n=t.target,r=t.inputBuffer,i=t.swapBuffer,o=0;o<this.passes.length;o++){n&&o===this.passes.length-1&&(i=n),this.passes[o].render({inputBuffer:r,outputBuffer:i});var a=i;i=r,r=a}return r}},{key:"cleanup",value:function(){if(this.passes){var e=!0,t=!1,n=void 0;try{for(var r,i=this.passes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.passes=null}}}]),t}(L.a);var D=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},B=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.filter){var n="string"===typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return D(n)}if(t.sampler){var r="string"===typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return B(r)}return null}var z=n("EFXr"),V=n("mybv"),G=n("rMPx"),H=n("mOXL"),W=n("K7jV"),q=n("5lV4"),X=n("h9Q3"),Z=n("e/LK"),K=n("zGfa"),Y=n("ODXe"),J=n("c9N0"),Q=n("n+fv"),$=n("bl9R"),ee=Math.PI/180,te=180/Math.PI;function ne(){var e=256/6370972,t=Math.PI/180*256;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}var re=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t);var r=n.latitude,i=void 0===r?0:r,o=n.longitude,a=void 0===o?0:o,u=n.zoom,c=void 0===u?11:u,l=n.nearZMultiplier,f=void 0===l?.1:l,h=n.farZMultiplier,d=void 0===h?1:h,p=n.resolution,v=void 0===p?10:p,m=n.width,_=n.height,b=n.altitude,O=void 0===b?1.5:b;m=m||1,_=_||1,O=Math.max(.75,O);var E=(new J.a).lookAt({eye:[0,-O,0],up:[0,0,1]}),x=Math.pow(2,c);E.rotateX(i*ee),E.rotateZ(-a*ee),E.scale(x/_);var w=Math.atan(.5/O),S=512*x/_,T=Object.assign({},n,{width:m,height:_,viewMatrix:E,longitude:a,latitude:i,zoom:c,fovyRadians:2*w,aspect:m/_,focalDistance:O,near:f,far:Math.min(2,1/S+1)*O*d});return(e=Object(g.a)(this,Object(y.a)(t).call(this,T))).resolution=v,e.distanceScales=ne(),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getDistanceScales",value:function(){return this.distanceScales}},{key:"unproject",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.topLeft,i=void 0===r||r,o=n.targetZ,a=Object(Y.a)(e,3),s=a[0],u=a[1],c=a[2],l=i?u:this.height-u,f=this.pixelUnprojectionMatrix;if(Number.isFinite(c))t=ie(f,[s,l,c,1]);else{var h=ie(f,[s,l,-1,1]),d=ie(f,[s,l,1,1]),p=256*((o||0)/6370972+1),v=Q.n(Q.o([],h,d)),g=Q.n(h),y=Q.n(d),m=(4*g*y-Math.pow(v-g-y,2))/16,_=4*m/v,b=Math.sqrt(g-_),O=Math.sqrt(Math.max(0,p*p-_)),E=(b-O)/Math.sqrt(v);t=Q.h([],h,d,E)}var x=this.unprojectPosition(t),w=Object(Y.a)(x,3),S=w[0],T=w[1],A=w[2];return Number.isFinite(c)?[S,T,A]:Number.isFinite(o)?[S,T,o]:[S,T]}},{key:"projectPosition",value:function(e){var t=Object(Y.a)(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i,a=n*ee,s=r*ee,u=Math.cos(s),c=256*(o/6370972+1);return[Math.sin(a)*u*c,-Math.cos(a)*u*c,Math.sin(s)*c]}},{key:"unprojectPosition",value:function(e){var t=Object(Y.a)(e,3),n=t[0],r=t[1],i=t[2],o=Q.f(e),a=Math.asin(i/o);return[Math.atan2(n,-r)*te,a*te,6370972*(o/256-1)]}},{key:"projectFlat",value:function(e){return e}},{key:"unprojectFlat",value:function(e){return e}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=e.pos,r=this.unproject(n);return[t[0]-r[0]+this.longitude,t[1]-r[1]+this.latitude]}},{key:"projectionMode",get:function(){return r.c.GLOBE}}]),t}(Z.a);function ie(e,t){var n=$.n([],t,e);return $.k(n,n,1/n[3]),n}var oe=n("BQ9P"),ae=n("hJkN"),se=n("K4gp"),ue=n("91Zk"),ce=n("A/wI"),le=n("nICr"),fe=n("08OO"),he=n("v88f"),de=n("sxJW"),pe=n("rSc4"),ve=n("F8bt"),ge={position:[0,0,0],pitch:0,bearing:0,maxPitch:90,minPitch:-90},ye=function(e){function t(e){var n,r=e.width,i=e.height,o=e.position,a=void 0===o?ge.position:o,u=e.bearing,c=void 0===u?ge.bearing:u,l=e.pitch,f=void 0===l?ge.pitch:l,h=e.longitude,d=e.latitude,p=e.maxPitch,v=void 0===p?ge.maxPitch:p,m=e.minPitch,_=void 0===m?ge.minPitch:m,b=e.startBearing,O=e.startPitch,E=e.startZoomPosition,x=e.startZoom;return Object(s.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,{width:r,height:i,position:a,bearing:c,pitch:f,longitude:h,latitude:d,maxPitch:v,minPitch:_})))._interactiveState={startBearing:b,startPitch:O,startZoomPosition:E,startZoom:x},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"getDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new J.e({bearing:this._viewportProps.bearing,pitch:e?90:90+this._viewportProps.pitch}),n=t.toVector3().normalize();return n}},{key:"panStart",value:function(){return this}},{key:"pan",value:function(){return this}},{key:"panEnd",value:function(){return this}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=this._interactiveState,i=r.startBearing,o=r.startPitch;return Number.isFinite(i)&&Number.isFinite(o)?this._getUpdatedState({bearing:i-180*t,pitch:o-90*n}):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(){return this._getUpdatedState({startZoomPosition:this._viewportProps.position,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.scale,n=this._interactiveState.startZoomPosition;n||(n=this._viewportProps.position);var r=this.getDirection();return this._move(r,Math.log2(t),n)}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"moveLeft",value:function(){var e=this.getDirection(!0);return this._move(e.rotateZ({radians:Math.PI/2}))}},{key:"moveRight",value:function(){var e=this.getDirection(!0);return this._move(e.rotateZ({radians:-Math.PI/2}))}},{key:"moveUp",value:function(){var e=this.getDirection(!0);return this._move(e)}},{key:"moveDown",value:function(){var e=this.getDirection(!0);return this._move(e.negate())}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"zoomIn",value:function(){return this.zoom({scale:2})}},{key:"zoomOut",value:function(){return this.zoom({scale:.5})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._viewportProps.position,r=e.scale(20*t);return this._getUpdatedState({position:new J.d(n).add(r)})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.pitch,n=e.maxPitch,r=e.minPitch,i=e.longitude,o=e.bearing;return e.pitch=Object(J.f)(t,r,n),(i<-180||i>180)&&(e.longitude=Object(ve.e)(i+180,360)-180),(o<-180||o>180)&&(e.bearing=Object(ve.e)(o+180,360)-180),e}}]),t}(pe.a),me=function(e){function t(e){return Object(s.a)(this,t),Object(g.a)(this,Object(y.a)(t).call(this,ye,e))}return Object(m.a)(t,e),t}(de.a);var _e=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"_getViewport",value:function(e){var t=e.modelMatrix,n=void 0===t?null:t,r=e.bearing,i=void 0===r?0:r,o=e.pitch,a=void 0===o?0:o,s=e.up,u=void 0===s?[0,0,1]:s,c=function(e){var t=e.bearing,n=e.pitch;return new J.e({bearing:t,pitch:n}).toVector3().normalize()}({bearing:i,pitch:90+a}),l=n?n.transformDirection(c):c,f=Object(he.g)(e),h=Math.pow(2,f),d=(new J.a).lookAt({eye:[0,0,0],center:l,up:u}).scale(h);return new Z.a(Object.assign({},e,{zoom:f,viewMatrix:d}))}},{key:"controller",get:function(){return this._getControllerProps({type:me})}}]),t}(le.a);_e.displayName="FirstPersonView";var be=n("R8Mb"),Oe=Math.PI/180;function Ee(e){var t=e.height,n=e.fovy,r=e.orbitAxis,i=e.rotationX,o=e.rotationOrbit,a=e.zoom,s=.5/Math.tan(n*Oe/2),u="Z"===r?[0,0,1]:[0,1,0],c="Z"===r?[0,-s,0]:[0,0,s],l=(new J.a).lookAt({eye:c,up:u});l.rotateX(i*Oe),"Z"===r?l.rotateZ(o*Oe):l.rotateY(o*Oe);var f=Math.pow(2,a)/(t||1);return l.scale(f),l}var xe=function(e){function t(e){Object(s.a)(this,t);var n=e.id,r=e.x,i=e.y,o=e.width,a=e.height,u=e.fovy,c=void 0===u?50:u,l=e.near,f=e.far,h=e.orbitAxis,d=void 0===h?"Z":h,p=e.target,v=void 0===p?[0,0,0]:p,m=e.rotationX,_=void 0===m?0:m,b=e.rotationOrbit,O=void 0===b?0:b,E=e.zoom,x=void 0===E?0:E;return Object(g.a)(this,Object(y.a)(t).call(this,{id:n,viewMatrix:Ee({height:a,fovy:c,orbitAxis:d,rotationX:_,rotationOrbit:O,zoom:x}),fovy:c,near:l,far:f,x:r,y:i,position:v,width:o,height:a,zoom:x}))}return Object(m.a)(t,e),t}(Z.a),we=function(e){function t(e){return Object(s.a)(this,t),Object(g.a)(this,Object(y.a)(t).call(this,Object.assign({},e,{type:xe})))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:be.b})}}]),t}(le.a);we.displayName="OrbitView";var Se=n("YINf"),Te=n("rePB"),Ae=n("ReuC"),Pe=n("BENj"),Ce=n("RPaY"),Re=n("zheZ"),Le={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new Ce.a(["longitude","latitude","zoom"]),transitionInterruption:Re.a.BREAK},Ie=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=Object(J.f)(r,n,t);var i=e.longitude,o=e.latitude;return(i<-180||i>180)&&(e.longitude=Object(ve.e)(i+180,360)-180),e.latitude=Object(J.f)(o,-89,89),e}}]),t}(Pe.a),Me=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,Ie,e))).invertPan=!0,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"setProps",value:function(e){Object(Ae.a)(Object(y.a)(t.prototype),"setProps",this).call(this,e),this.dragRotate=!1,this.touchRotate=!1}},{key:"_getTransitionProps",value:function(){return Le}}]),t}(de.a);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ke=function(e){function t(e){return Object(s.a)(this,t),Object(g.a)(this,Object(y.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Object(Te.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{type:re})))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:Me})}}]),t}(le.a);ke.displayName="GlobeView";var Ne=n("zThp"),Fe=n("ReQy"),De=n("wldP"),Be=["bearing","pitch"],Ue={speed:1.2,curve:1.414},ze=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)(this,t),(e=Object(g.a)(this,Object(y.a)(t).call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}))).props=Object.assign({},Ue,n),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"interpolateProps",value:function(e,t,n){var r=Object(he.c)(e,t,n,this.props),i=!0,o=!1,a=void 0;try{for(var s,u=Be[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r[c]=Object(J.h)(e[c]||0,t[c]||0,n)}}catch(l){o=!0,a=l}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}},{key:"getDuration",value:function(e,t){var n=t.transitionDuration;return"auto"===n&&(n=Object(he.f)(e,t,this.props)),n}}]),t}(De.a),Ve=n("Jh/b"),Ge=n("rpwb"),He=n("xl5t"),We=n("Zk56"),qe=n("GYIa"),Xe=n("OIVS"),Ze=n("nW3J"),Ke=n("oViP")},qjAD:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={};function i(e){var t=e&&e.lastIndexOf("/");return t>=0?e.substr(0,t):""}n.r(r),n.d(r,"dirname",(function(){return i}))},qyNU:function(e,t,n){"use strict";var r=n("Lhll");class i extends r.a{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){for(const e of this._observers)e.complete()}}t.a=i},rXFu:function(e,t,n){"use strict";(function(t,r){var i;e.exports=S,S.ReadableState=w;n("+qE3").EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n("QpuX"),s=n("HDXh").Buffer,u=t.Uint8Array||function(){};var c,l=n(5);c=l&&l.debuglog?l.debuglog("stream"):function(){};var f,h,d,p=n("xq54"),v=n("RoFp"),g=n("DbZ5").getHighWaterMark,y=n("ybjB").codes,m=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,O=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n("P7XM")(S,a);var E=v.errorOrDestroy,x=["error","close","destroy","pause","resume"];function w(e,t,r){i=i||n("sZro"),e=e||{},"boolean"!==typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n("fXKp").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function S(e){if(i=i||n("sZro"),!(this instanceof S))return new S(e);var t=this instanceof i;this._readableState=new w(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,n,r,i){c("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,a);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof u||"string"===typeof t||void 0===t||e.objectMode||(n=new m("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(a,t)),o)E(e,o);else if(a.objectMode||t&&t.length>0)if("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)a.endEmitted?E(e,new O):A(e,a,t,!0);else if(a.ended)E(e,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?A(e,a,t,!1):L(e,a)):A(e,a,t,!1)}else r||(a.reading=!1,L(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function A(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),L(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=v.destroy,S.prototype._undestroy=v.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},S.prototype.unshift=function(e){return T(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){f||(f=n("fXKp").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function L(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){c("readable nexttick read 0"),e.read(0)}function k(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function D(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(B,t,e))}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):C(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){E(this,new b("_read()"))},S.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function s(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",l);var f=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==U(i.pipes,e))&&!f&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){c("onerror",t),g(),e.removeListener("error",d),0===o(e,"error")&&E(e,t)}function p(){e.removeListener("finish",v),g()}function v(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",v),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?C(this):i.reading||r.nextTick(j,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(M,this),n},S.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(M,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(k,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<x.length;o++)e.on(x[o],this.emit.bind(this,x[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"===typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n("nA4H")),h(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=F,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(S.from=function(e,t){return void 0===d&&(d=n("B8Yt")),d(S,e,t)})}).call(this,n("yLpj"),n("8oxB"))},"rv+A":function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return i(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var n=0;return i(e,n,t)}return""}function i(e,t,n){if(e.byteLength<=t+n)return"";for(var r=new DataView(e),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}n.d(t,"a",(function(){return r}))},rxlC:function(e,t,n){"use strict";e.exports=i,e.exports.default=i;var r=1e20;function i(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(e,t,n,r,i,o,s){for(var u=0;u<t;u++){for(var c=0;c<n;c++)r[c]=e[c*t+u];for(a(r,i,o,s,n),c=0;c<n;c++)e[c*t+u]=i[c]}for(c=0;c<n;c++){for(u=0;u<t;u++)r[u]=e[c*t+u];for(a(r,i,o,s,t),u=0;u<t;u++)e[c*t+u]=Math.sqrt(i[u])}}function a(e,t,n,i,o){n[0]=0,i[0]=-r,i[1]=+r;for(var a=1,s=0;a<o;a++){for(var u=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);u<=i[s];)s--,u=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);n[++s]=a,i[s]=u,i[s+1]=+r}for(a=0,s=0;a<o;a++){for(;i[s+1]<a;)s++;t[a]=(a-n[s])*(a-n[s])+e[n[s]]}}i.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var a=t.data[4*i+3]/255;this.gridOuter[i]=1===a?0:0===a?r:Math.pow(Math.max(0,.5-a),2),this.gridInner[i]=1===a?r:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var s=this.gridOuter[i]-this.gridInner[i];n[i]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},s4NR:function(e,t,n){"use strict";t.decode=t.parse=n("kd2E"),t.encode=t.stringify=n("4JlD")},sZro:function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n("rXFu"),o=n("3BRs");n("P7XM")(c,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n("8oxB"))},t6xR:function(e,t,n){"use strict";const r=n("4abu"),i=n("4abu").buildOptions,o=n("E1E9"),a=function(e,t,n){let i="{";const o=Object.keys(e.child);for(let r=0;r<o.length;r++){var s=o[r];if(e.child[s]&&e.child[s].length>1){for(var u in i+='"'+s+'" : [ ',e.child[s])i+=a(e.child[s][u],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+s+'" : '+a(e.child[s][0],t)+" ,"}return r.merge(i,e.attrsMap),r.isEmptyObject(i)?r.isExist(e.val)?e.val:"":(r.isExist(e.val)&&("string"!==typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(i+='"'+t.textNodeName+'" : '+(!0!==(c=e.val)&&!1!==c&&isNaN(c)?'"'+c+'"':c)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var c};t.convertToJsonString=function(e,t){return(t=i(t,o.defaultOptions,o.props)).indentBy=t.indentBy||"",a(e,t,0)}},t9FE:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n("yLpj"))},uTBh:function(e,t,n){"use strict";n.r(t),n.d(t,"createGLContext",(function(){return r.a})),n.d(t,"instrumentGLContext",(function(){return r.e})),n.d(t,"isWebGL",(function(){return r.f})),n.d(t,"isWebGL2",(function(){return r.g})),n.d(t,"getParameters",(function(){return r.d})),n.d(t,"setParameters",(function(){return r.k})),n.d(t,"withParameters",(function(){return r.l})),n.d(t,"resetParameters",(function(){return r.i})),n.d(t,"cssToDeviceRatio",(function(){return r.c})),n.d(t,"cssToDevicePixels",(function(){return r.b})),n.d(t,"lumaStats",(function(){return i.a})),n.d(t,"FEATURES",(function(){return o.a})),n.d(t,"hasFeature",(function(){return a.b})),n.d(t,"hasFeatures",(function(){return a.c})),n.d(t,"Buffer",(function(){return s.a})),n.d(t,"Program",(function(){return u.a})),n.d(t,"Framebuffer",(function(){return c.a})),n.d(t,"Renderbuffer",(function(){return l.a})),n.d(t,"Texture2D",(function(){return f.a})),n.d(t,"TextureCube",(function(){return h.a})),n.d(t,"clear",(function(){return d.a})),n.d(t,"readPixelsToArray",(function(){return p.c})),n.d(t,"readPixelsToBuffer",(function(){return p.d})),n.d(t,"cloneTextureFrom",(function(){return v.a})),n.d(t,"copyToTexture",(function(){return p.b})),n.d(t,"Texture3D",(function(){return g.a})),n.d(t,"TransformFeedback",(function(){return y.a})),n.d(t,"AnimationLoop",(function(){return m.a})),n.d(t,"Model",(function(){return _.a})),n.d(t,"Transform",(function(){return b.a})),n.d(t,"ProgramManager",(function(){return O.a})),n.d(t,"Timeline",(function(){return E.a})),n.d(t,"Geometry",(function(){return x.a})),n.d(t,"ClipSpace",(function(){return w.a})),n.d(t,"ConeGeometry",(function(){return j})),n.d(t,"CubeGeometry",(function(){return k.a})),n.d(t,"CylinderGeometry",(function(){return N})),n.d(t,"IcoSphereGeometry",(function(){return U})),n.d(t,"PlaneGeometry",(function(){return V})),n.d(t,"SphereGeometry",(function(){return H})),n.d(t,"TruncatedConeGeometry",(function(){return I})),n.d(t,"normalizeShaderModule",(function(){return q.b})),n.d(t,"fp32",(function(){return X.a})),n.d(t,"fp64",(function(){return J})),n.d(t,"project",(function(){return te})),n.d(t,"dirlight",(function(){return re})),n.d(t,"picking",(function(){return ie.a})),n.d(t,"gouraudLighting",(function(){return oe.a})),n.d(t,"phongLighting",(function(){return oe.b})),n.d(t,"pbr",(function(){return ae.a})),n.d(t,"log",(function(){return r.h})),n.d(t,"assert",(function(){return se.a})),n.d(t,"uid",(function(){return R.c}));var r=n("iein"),i=n("rta6"),o=n("tMmZ"),a=n("d3kR"),s=n("sc/6"),u=n("OklE"),c=n("11Ib"),l=n("n4Ve"),f=n("f5Sf"),h=n("H50b"),d=n("pRFE"),p=n("p7wt"),v=n("MdWm"),g=n("aadc"),y=n("bphH"),m=n("hQ05"),_=n("ykdB"),b=n("g1ju"),O=n("haqy"),E=n("HSzj"),x=n("0i8A"),w=n("uvYE"),S=n("vpQ4"),T=n("1OyB"),A=n("md7G"),P=n("foSv"),C=n("Ji7U"),R=n("VdrS"),L={x:[2,0,1],y:[0,1,2],z:[1,2,0]},I=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,t);var n=e.id,r=void 0===n?Object(R.c)("truncated-code-geometry"):n,i=M(e),o=i.indices,a=i.attributes;return Object(A.a)(this,Object(P.a)(t).call(this,Object(S.a)({},e,{id:r,indices:o,attributes:Object(S.a)({},a,e.attributes)})))}return Object(C.a)(t,e),t}(x.a);function M(e){for(var t=e.bottomRadius,n=void 0===t?0:t,r=e.topRadius,i=void 0===r?0:r,o=e.height,a=void 0===o?1:o,s=e.nradial,u=void 0===s?10:s,c=e.nvertical,l=void 0===c?10:c,f=e.verticalAxis,h=void 0===f?"y":f,d=e.topCap,p=void 0!==d&&d,v=e.bottomCap,g=void 0!==v&&v,y=(p?2:0)+(g?2:0),m=(u+1)*(l+1+y),_=Math.atan2(n-i,a),b=Math.sin,O=Math.cos,E=Math.PI,x=O(_),w=b(_),S=p?-2:0,T=l+(g?2:0),A=u+1,P=new Uint16Array(u*(l+y)*6),C=L[h],R=new Float32Array(3*m),I=new Float32Array(3*m),M=new Float32Array(2*m),j=0,k=0,N=S;N<=T;N++){var F=N/l,D=a*F,B=void 0;N<0?(D=0,F=1,B=n):N>l?(D=a,F=1,B=i):B=n+N/l*(i-n),-2!==N&&N!==l+2||(B=0,F=0),D-=a/2;for(var U=0;U<A;U++){var z=b(U*E*2/u),V=O(U*E*2/u);R[j+C[0]]=z*B,R[j+C[1]]=D,R[j+C[2]]=V*B,I[j+C[0]]=N<0||N>l?0:z*x,I[j+C[1]]=N<0?-1:N>l?1:w,I[j+C[2]]=N<0||N>l?0:V*x,M[k+0]=U/u,M[k+1]=F,k+=2,j+=3}}for(var G=0;G<l+y;G++)for(var H=0;H<u;H++){var W=6*(G*u+H);P[W+0]=A*(G+0)+0+H,P[W+1]=A*(G+0)+1+H,P[W+2]=A*(G+1)+1+H,P[W+3]=A*(G+0)+0+H,P[W+4]=A*(G+1)+1+H,P[W+5]=A*(G+1)+0+H}return{indices:P,attributes:{POSITION:{size:3,value:R},NORMAL:{size:3,value:I},TEXCOORD_0:{size:2,value:M}}}}var j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,t);var n=e.id,r=void 0===n?Object(R.c)("cone-geometry"):n,i=e.radius,o=void 0===i?1:i,a=e.cap,s=void 0===a||a;return Object(A.a)(this,Object(P.a)(t).call(this,Object(S.a)({},e,{id:r,topRadius:0,topCap:Boolean(s),bottomCap:Boolean(s),bottomRadius:o})))}return Object(C.a)(t,e),t}(I),k=n("9peF"),N=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,t);var n=e.id,r=void 0===n?Object(R.c)("cylinder-geometry"):n,i=e.radius,o=void 0===i?1:i;return Object(A.a)(this,Object(P.a)(t).call(this,Object(S.a)({},e,{id:r,bottomRadius:o,topRadius:o})))}return Object(C.a)(t,e),t}(I),F=n("c9N0"),D=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],B=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],U=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,t);var n=e.id,r=void 0===n?Object(R.c)("ico-sphere-geometry"):n,i=z(e),o=i.indices,a=i.attributes;return Object(A.a)(this,Object(P.a)(t).call(this,Object(S.a)({},e,{id:r,indices:o,attributes:Object(S.a)({},a,e.attributes)})))}return Object(C.a)(t,e),t}(x.a);function z(e){var t=e.iterations,n=void 0===t?0:t,r=Math.PI,i=2*r,o=[].concat(D),a=[].concat(B);o.push(),a.push();for(var s=function(){var e={};return function(t,n){var r=(t*=3)>(n*=3)?t:n,i="".concat(t<n?t:n,"|").concat(r);if(i in e)return e[i];var a=o[t],s=o[t+1],u=o[t+2],c=(a+o[n])/2,l=(s+o[n+1])/2,f=(u+o[n+2])/2,h=Math.sqrt(c*c+l*l+f*f);return c/=h,l/=h,f/=h,o.push(c,l,f),e[i]=o.length/3-1}}(),u=0;u<n;u++){for(var c=[],l=0;l<a.length;l+=3){var f=s(a[l+0],a[l+1]),h=s(a[l+1],a[l+2]),d=s(a[l+2],a[l+0]);c.push(d,a[l+0],f,f,a[l+1],h,h,a[l+2],d,f,h,d)}a=c}for(var p=new Array(o.length),v=new Array(o.length/3*2),g=a.length-3;g>=0;g-=3){var y=a[g+0],m=a[g+1],_=a[g+2],b=3*y,O=3*m,E=3*_,x=2*y,w=2*m,S=2*_,T=o[b+0],A=o[b+1],P=o[b+2],C=Math.acos(P/Math.sqrt(T*T+A*A+P*P))/r,R=1-(Math.atan2(A,T)+r)/i,L=o[O+0],I=o[O+1],M=o[O+2],j=Math.acos(M/Math.sqrt(L*L+I*I+M*M))/r,k=1-(Math.atan2(I,L)+r)/i,N=o[E+0],U=o[E+1],z=o[E+2],V=Math.acos(z/Math.sqrt(N*N+U*U+z*z))/r,G=1-(Math.atan2(U,N)+r)/i,H=[N-L,U-I,z-M],W=[T-L,A-I,P-M],q=new F.d(H).cross(W).normalize(),X=void 0;(0===R||0===k||0===G)&&(0===R||R>.5)&&(0===k||k>.5)&&(0===G||G>.5)&&(o.push(o[b+0],o[b+1],o[b+2]),X=o.length/3-1,a.push(X),v[2*X+0]=1,v[2*X+1]=C,p[3*X+0]=q.x,p[3*X+1]=q.y,p[3*X+2]=q.z,o.push(o[O+0],o[O+1],o[O+2]),X=o.length/3-1,a.push(X),v[2*X+0]=1,v[2*X+1]=j,p[3*X+0]=q.x,p[3*X+1]=q.y,p[3*X+2]=q.z,o.push(o[E+0],o[E+1],o[E+2]),X=o.length/3-1,a.push(X),v[2*X+0]=1,v[2*X+1]=V,p[3*X+0]=q.x,p[3*X+1]=q.y,p[3*X+2]=q.z),p[b+0]=p[O+0]=p[E+0]=q.x,p[b+1]=p[O+1]=p[E+1]=q.y,p[b+2]=p[O+2]=p[E+2]=q.z,v[x+0]=R,v[x+1]=C,v[w+0]=k,v[w+1]=j,v[S+0]=G,v[S+1]=V}return{indices:{size:1,value:new Uint16Array(a)},attributes:{POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(p)},TEXCOORD_0:{size:2,value:new Float32Array(v)}}}}var V=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,t);var n=e.id,r=void 0===n?Object(R.c)("plane-geometry"):n,i=G(e),o=i.indices,a=i.attributes;return Object(A.a)(this,Object(P.a)(t).call(this,Object(S.a)({},e,{id:r,indices:o,attributes:Object(S.a)({},a,e.attributes)})))}return Object(C.a)(t,e),t}(x.a);function G(e){var t=e.type,n=void 0===t?"x,y":t,r=e.offset,i=void 0===r?0:r,o=e.flipCull,a=void 0!==o&&o,s=e.unpack,u=void 0!==s&&s,c=n.split(","),l=e["".concat(c[0],"len")]||1,f=e["".concat(c[1],"len")]||1,h=e["n".concat(c[0])]||1,d=e["n".concat(c[1])]||1,p=(h+1)*(d+1),v=new Float32Array(3*p),g=new Float32Array(3*p),y=new Float32Array(2*p);a&&(l=-l);for(var m=0,_=0,b=0;b<=d;b++)for(var O=0;O<=h;O++){var E=O/h,x=b/d;switch(y[m+0]=a?1-E:E,y[m+1]=x,n){case"x,y":v[_+0]=l*E-.5*l,v[_+1]=f*x-.5*f,v[_+2]=i,g[_+0]=0,g[_+1]=0,g[_+2]=a?1:-1;break;case"x,z":v[_+0]=l*E-.5*l,v[_+1]=i,v[_+2]=f*x-.5*f,g[_+0]=0,g[_+1]=a?1:-1,g[_+2]=0;break;case"y,z":v[_+0]=i,v[_+1]=l*E-.5*l,v[_+2]=f*x-.5*f,g[_+0]=a?1:-1,g[_+1]=0,g[_+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}m+=2,_+=3}for(var w=h+1,S=new Uint16Array(h*d*6),T=0;T<d;T++)for(var A=0;A<h;A++){var P=6*(T*h+A);S[P+0]=(T+0)*w+A,S[P+1]=(T+1)*w+A,S[P+2]=(T+0)*w+A+1,S[P+3]=(T+1)*w+A,S[P+4]=(T+1)*w+A+1,S[P+5]=(T+0)*w+A+1}var C={indices:{size:1,value:S},attributes:{POSITION:{size:3,value:v},NORMAL:{size:3,value:g},TEXCOORD_0:{size:2,value:y}}};return u?function(e){var t=e.indices,n=e.attributes;if(!t)return e;var r=t.value.length,i={};for(var o in n){var a=n[o],s=a.constant,u=a.value,c=a.size;if(!s&&c){for(var l=new u.constructor(r*c),f=0;f<r;++f)for(var h=t.value[f],d=0;d<c;d++)l[f*c+d]=u[h*c+d];i[o]={size:c,value:l}}}return{attributes:Object.assign({},n,i)}}(C):C}var H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,t);var n=e.id,r=void 0===n?Object(R.c)("sphere-geometry"):n,i=W(e),o=i.indices,a=i.attributes;return Object(A.a)(this,Object(P.a)(t).call(this,Object(S.a)({},e,{id:r,indices:o,attributes:Object(S.a)({},a,e.attributes)})))}return Object(C.a)(t,e),t}(x.a);function W(e){var t=e.nlat,n=void 0===t?10:t,r=e.nlong,i=void 0===r?10:r,o=e.radius,a=void 0===o?1:o,s=Math.PI-0,u=2*Math.PI-0,c=(n+1)*(i+1);if("number"===typeof a){var l=a;a=function(e,t,n,r,i){return l}}for(var f=new Float32Array(3*c),h=new Float32Array(3*c),d=new Float32Array(2*c),p=new(c>65535?Uint32Array:Uint16Array)(n*i*6),v=0;v<=n;v++)for(var g=0;g<=i;g++){var y=g/i,m=v/n,_=g+v*(i+1),b=2*_,O=3*_,E=u*y,x=s*m,w=Math.sin(E),S=Math.cos(E),T=Math.sin(x),A=S*T,P=Math.cos(x),C=w*T,R=a(A,P,C,y,m);f[O+0]=R*A,f[O+1]=R*P,f[O+2]=R*C,h[O+0]=A,h[O+1]=P,h[O+2]=C,d[b+0]=y,d[b+1]=1-m}for(var L=i+1,I=0;I<i;I++)for(var M=0;M<n;M++){var j=6*(I*n+M);p[j+0]=M*L+I,p[j+1]=M*L+I+1,p[j+2]=(M+1)*L+I,p[j+3]=(M+1)*L+I,p[j+4]=M*L+I+1,p[j+5]=(M+1)*L+I+1}return{indices:{size:1,value:p},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:h},TEXCOORD_0:{size:2,value:d}}}}var q=n("bHAT"),X=n("pE0Q");function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(e),i=e-r;return t[n]=r,t[n+1]=i,t}function K(e){return e-Math.fround(e)}var Y={ONE:1};var J={name:"fp64",vs:"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n",fs:null,dependencies:[{name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return Y},fp64ify:Z,fp64LowPart:K}],fp64ify:Z,fp64LowPart:K,fp64ifyMatrix4:function(e){for(var t=new Float32Array(32),n=0;n<4;++n)for(var r=0;r<4;++r){var i=4*n+r;Z(e[4*r+n],t,2*i)}return t}},Q=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$={modelMatrix:Q,viewMatrix:Q,projectionMatrix:Q,cameraPositionWorld:[0,0,0]};var ee="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",te={name:"project",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t={};return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new F.a(e.projectionMatrix).multiplyRight(e.viewMatrix)),t},vs:"".concat(ee,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(ee)},ne={lightDirection:new Float32Array([1,1,2])};var re={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t},dependencies:[te]},ie=n("AIJu"),oe=n("91Zk"),ae=n("+Jdq"),se=n("CxzY")},uvYE:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1OyB"),i=n("md7G"),o=n("foSv"),a=n("Ji7U"),s=n("ykdB"),u=n("0i8A"),c=[-1,-1,1,-1,-1,1,1,1],l=function(e){function t(e,n){var a;Object(r.a)(this,t);var s=c.map((function(e){return-1===e?0:e}));return(a=Object(i.a)(this,Object(o.a)(t).call(this,e,Object.assign({},n,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new u.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(c)},aTexCoord:{size:2,value:new Float32Array(s)},aCoordinate:{size:2,value:new Float32Array(s)}}})})))).setVertexCount(4),a}return Object(a.a)(t,e),t}(s.a)},"vn/o":function(e,t,n){"use strict";var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},a={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},vtNb:function(e,t,n){"use strict";const r=function(e){return String.fromCharCode(e)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],a=function(e,t,n){if("string"===typeof t)return e&&e[0]&&void 0!==e[0].val?s(e[0].val,t):s(e,t);{const o=void 0===(r=e)?i.missingChar:null===r?i.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||i.emptyChar;if(!0===o){let r="";if(Array.isArray(t)){r+=i.arrStart;const o=t[0],c=e.length;if("string"===typeof o)for(let t=0;t<c;t++){const n=s(e[t].val,o);r=u(r,n)}else for(let t=0;t<c;t++){const i=a(e[t],o,n);r=u(r,i)}r+=i.arrayEnd}else{r+=i.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let i in o){const s=o[i];let c;c=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[s]?a(e.attrsMap[s],t[s],n):s===n.textNodeName?a(e.val,t[s],n):a(e.child[s],t[s],n),r=u(r,c)}}return r}return o}var r},s=function(e){switch(e){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return e}},u=function(e,t){return c(t[0])||c(e[e.length-1])||(e+=i.boundryChar),e+t},c=function(e){return-1!==o.indexOf(e)};const l=n("E1E9"),f=n("4abu").buildOptions;t.convert2nimn=function(e,t,n){return n=f(n,l.defaultOptions,l.props),a(e,t,n)}},xl5t:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("1OyB"),i=n("vuIU"),o=n("rpwb"),a=n("b0ih"),s=n("VMBB"),u=n("sc/6"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e);var n=t.attributes,i=void 0===n?{}:n;this.typedArrayManager=a.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=i,this.opts=t,this.updateGeometry(t),Object.seal(this)}return Object(i.a)(e,[{key:"updateGeometry",value:function(e){Object.assign(this.opts,e);var t=this.opts,n=t.data,r=t.buffers,i=void 0===r?{}:r,o=t.getGeometry,a=t.geometryBuffer,u=t.positionFormat,c=t.dataChanged,l=t.normalize,f=void 0===l||l;if(this.data=n,this.getGeometry=o,this.positionSize=a&&a.size||("XY"===u?2:3),this.buffers=i,this.normalize=f,a&&(Object(s.a)(n.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(a),f||(i.positions=a)),this.geometryBuffer=i.positions,Array.isArray(c)){var h=!0,d=!1,p=void 0;try{for(var v,g=c[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;this._rebuildGeometry(y)}}catch(m){d=!0,p=m}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,n=e.endRow;this._rebuildGeometry({startRow:t,endRow:n})}},{key:"normalizeGeometry",value:function(e){return e}},{key:"updateGeometryAttributes",value:function(e,t,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(e){var t=e.value||e;return Object(s.a)(ArrayBuffer.isView(t),"cannot read geometries"),Object(o.b)(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(e,t){var n=this.attributes,r=this.buffers,i=this._attributeDefs,o=this.typedArrayManager;for(var a in i)if(a in r)o.release(n[a]),n[a]=null;else{var s=i[a];s.copy=t,n[a]=o.allocate(n[a],e,s)}}},{key:"_forEachGeometry",value:function(e,t,n){var r=this.data,i=this.getGeometry,a=Object(o.a)(r,t,n),s=a.iterable,u=a.objectInfo,c=!0,l=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;u.index++,e(i(p,u),u.index)}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var n=this.indexStarts,r=this.vertexStarts,i=this.instanceCount,o=this.data,a=this.geometryBuffer,s=e||{},c=s.startRow,l=void 0===c?0:c,f=s.endRow,h=void 0===f?1/0:f,d={};if(e||(n=[0],r=[0]),this.normalize||!a)this._forEachGeometry((function(e,n){e=t.normalizeGeometry(e),d[n]=e,r[n+1]=r[n]+t.getGeometrySize(e)}),l,h),i=r[r.length-1];else if(a.buffer instanceof u.a){var p=a.stride||4*this.positionSize;r=o.startIndices,i=r[o.length]||a.buffer.byteLength/p}else{var v=a.value||a,g=a.stride/v.BYTES_PER_ELEMENT||this.positionSize;r=o.startIndices,i=r[o.length]||v.length/g}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;var y={};this._forEachGeometry((function(e,o){e=d[o]||e,y.vertexStart=r[o],y.indexStart=n[o];var a=o<r.length-1?r[o+1]:i;y.geometrySize=a-r[o],y.geometryIndex=o,t.updateGeometryAttributes(e,y)}),l,h),this.vertexCount=n[n.length-1]}}}]),e}()},xnQO:function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},xq54:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n("HDXh").Buffer,s=n(6).inspect,u=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,a.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),c&&o(t,c),e}()},yDR0:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},yXba:function(e,t,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},r={};function i(e,t){var i,o,s;return t?(s=0<=(e>>>=0)&&e<256)&&(o=r[e])?o:(i=a(e,(0|e)<0?-1:0,!0),s&&(r[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(o=n[e])?o:(i=a(e,e<0?-1:0,!1),s&&(n[e]=i),i)}function o(e,t){if(isNaN(e)||!isFinite(e))return t?g:v;if(t){if(e<0)return g;if(e>=h)return O}else{if(e<=-d)return E;if(e+1>=d)return b}return e<0?o(-e,t).neg():a(e%f|0,e/f|0,t)}function a(t,n,r){return new e(t,n,r)}e.fromInt=i,e.fromNumber=o,e.fromBits=a;var s=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var i=o(s(n,8)),a=v,c=0;c<e.length;c+=8){var l=Math.min(8,e.length-c),f=parseInt(e.substring(c,c+l),n);if(l<8){var h=o(s(n,l));a=a.mul(h).add(o(f))}else a=(a=a.mul(i)).add(o(f))}return a.unsigned=t,a}function c(t){return t instanceof e?t:"number"===typeof t?o(t):"string"===typeof t?u(t):a(t.low,t.high,t.unsigned)}e.fromString=u,e.fromValue=c;var l=65536,f=l*l,h=f*f,d=h/2,p=i(1<<24),v=i(0);e.ZERO=v;var g=i(0,!0);e.UZERO=g;var y=i(1);e.ONE=y;var m=i(1,!0);e.UONE=m;var _=i(-1);e.NEG_ONE=_;var b=a(-1,2147483647,!1);e.MAX_VALUE=b;var O=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=O;var E=a(0,-2147483648,!1);e.MIN_VALUE=E;var x=e.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},x.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=o(s(e,6),this.unsigned),a=this,u="";;){var c=a.div(i),l=(a.sub(c.mul(i)).toInt()>>>0).toString(e);if((a=c).isZero())return l+u;for(;l.length<6;)l="0"+l;u=""+l+u}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},x.isZero=function(){return 0===this.high&&0===this.low},x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1===(1&this.low)},x.isEven=function(){return 0===(1&this.low)},x.equals=function(e){return t(e)||(e=c(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&this.high===e.high&&this.low===e.low},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.lessThan=function(e){return this.comp(e)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return this.comp(e)<=0},x.lte=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.compare=function(e){if(t(e)||(e=c(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(y)},x.neg=x.negate,x.add=function(e){t(e)||(e=c(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,u=65535&e.high,l=e.low>>>16,f=0,h=0,d=0,p=0;return d+=(p+=o+(65535&e.low))>>>16,h+=(d+=i+l)>>>16,f+=(h+=r+u)>>>16,f+=n+s,a((d&=65535)<<16|(p&=65535),(f&=65535)<<16|(h&=65535),this.unsigned)},x.subtract=function(e){return t(e)||(e=c(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(e){if(this.isZero())return v;if(t(e)||(e=c(e)),e.isZero())return v;if(this.eq(E))return e.isOdd()?E:v;if(e.eq(E))return this.isOdd()?E:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p)&&e.lt(p))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,u=e.high>>>16,l=65535&e.high,f=e.low>>>16,h=65535&e.low,d=0,g=0,y=0,m=0;return y+=(m+=s*h)>>>16,g+=(y+=i*h)>>>16,y&=65535,g+=(y+=s*f)>>>16,d+=(g+=r*h)>>>16,g&=65535,d+=(g+=i*f)>>>16,g&=65535,d+=(g+=s*l)>>>16,d+=n*h+r*f+i*l+s*u,a((y&=65535)<<16|(m&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},x.mul=x.multiply,x.divide=function(e){if(t(e)||(e=c(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:v;var n,r,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return m;i=g}else{if(this.eq(E))return e.eq(y)||e.eq(_)?E:e.eq(E)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:_:(r=this.sub(e.mul(n)),i=n.add(r.div(e)));if(e.eq(E))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:s(2,a-48),l=o(n),f=l.mul(e);f.isNegative()||f.gt(r);)f=(l=o(n-=u,this.unsigned)).mul(e);l.isZero()&&(l=y),i=i.add(l),r=r.sub(f)}return i},x.div=x.divide,x.modulo=function(e){return t(e)||(e=c(e)),this.sub(this.div(e).mul(e))},x.mod=x.modulo,x.not=function(){return a(~this.low,~this.high,this.unsigned)},x.and=function(e){return t(e)||(e=c(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return t(e)||(e=c(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return t(e)||(e=c(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var n=this.high;return e<32?a(this.low>>>e|n<<32-e,n>>>e,this.unsigned):a(32===e?n:n>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?r.apply(t,i):r)||(e.exports=o)},ybjB:function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"===typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,s,u;if("string"===typeof t&&function(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be",a=e,s=" argument",(void 0===u||u>a.length)&&(u=a.length),a.substring(u-s.length,u)===s)i="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var c=function(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(o(t,"type"))}return i+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},zJdk:function(e,t,n){"use strict";function r(e){if(!e||!e.POSITION)return null;var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=e.POSITION.value,u=s&&s.length;if(!u)return null;for(var c=0;c<u;c+=3){var l=s[c],f=s[c+1],h=s[c+2];t=l<t?l:t,n=f<n?f:n,r=h<r?h:r,i=l>i?l:i,o=f>o?f:o,a=h>a?h:a}return[[t,n,r],[i,o,a]]}n.d(t,"a",(function(){return r}))},zY86:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n("ewpT");function i(e){return e&&"object"===typeof e&&e[r.d]}function o(e,t){if(!t){if(!(n=e)||"object"!==typeof n)throw Error();t=[e]}var n;return{[r.d]:!0,send:e,transferables:t}}},zqkD:function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.cancel="cancel",e.run="run"}(r||(r={})),function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(i||(i={}))}}]);