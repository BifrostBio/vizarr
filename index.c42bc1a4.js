const mb=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};mb();function Fx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qx(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var w={exports:{}},Te={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var AE=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,vb=Object.prototype.propertyIsEnumerable;function yb(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function _b(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var kx=_b()?Object.assign:function(t,e){for(var n,r=yb(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)Eb.call(n,o)&&(r[o]=n[o]);if(AE){i=AE(n);for(var a=0;a<i.length;a++)vb.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp=kx,zo=60103,Ux=60106;Te.Fragment=60107;Te.StrictMode=60108;Te.Profiler=60114;var Gx=60109,Vx=60110,zx=60112;Te.Suspense=60113;var jx=60115,Hx=60116;if(typeof Symbol=="function"&&Symbol.for){var kn=Symbol.for;zo=kn("react.element"),Ux=kn("react.portal"),Te.Fragment=kn("react.fragment"),Te.StrictMode=kn("react.strict_mode"),Te.Profiler=kn("react.profiler"),Gx=kn("react.provider"),Vx=kn("react.context"),zx=kn("react.forward_ref"),Te.Suspense=kn("react.suspense"),jx=kn("react.memo"),Hx=kn("react.lazy")}var gE=typeof Symbol=="function"&&Symbol.iterator;function xb(t){return t===null||typeof t!="object"?null:(t=gE&&t[gE]||t["@@iterator"],typeof t=="function"?t:null)}function Wl(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yx={};function jo(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Wx}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Wl(85));this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $x(){}$x.prototype=jo.prototype;function Mp(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Wx}var Op=Mp.prototype=new $x;Op.constructor=Mp;Lp(Op,jo.prototype);Op.isPureReactComponent=!0;var Dp={current:null},Xx=Object.prototype.hasOwnProperty,Kx={key:!0,ref:!0,__self:!0,__source:!0};function qx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xx.call(e,r)&&!Kx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zo,type:t,key:s,ref:o,props:i,_owner:Dp.current}}function Ib(t,e){return{$$typeof:zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fp(t){return typeof t=="object"&&t!==null&&t.$$typeof===zo}function Cb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pE=/\/+/g;function ud(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cb(""+t.key):e.toString(36)}function Ru(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zo:case Ux:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ud(o,0):r,Array.isArray(i)?(n="",t!=null&&(n=t.replace(pE,"$&/")+"/"),Ru(i,e,n,"",function(c){return c})):i!=null&&(Fp(i)&&(i=Ib(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(pE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ud(s,a);o+=Ru(s,e,n,l,i)}else if(l=xb(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ud(s,a++),o+=Ru(s,e,n,l,i);else if(s==="object")throw e=""+t,Error(Wl(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function Dc(t,e,n){if(t==null)return t;var r=[],i=0;return Ru(t,r,"","",function(s){return e.call(n,s,i++)}),r}function wb(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var Jx={current:null};function Vr(){var t=Jx.current;if(t===null)throw Error(Wl(321));return t}var Tb={ReactCurrentDispatcher:Jx,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Dp,IsSomeRendererActing:{current:!1},assign:Lp};Te.Children={map:Dc,forEach:function(t,e,n){Dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!Fp(t))throw Error(Wl(143));return t}};Te.Component=jo;Te.PureComponent=Mp;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb;Te.cloneElement=function(t,e,n){if(t==null)throw Error(Wl(267,t));var r=Lp({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Dp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xx.call(e,l)&&!Kx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zo,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:Vx,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:Gx,_context:t},t.Consumer=t};Te.createElement=qx;Te.createFactory=function(t){var e=qx.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:zx,render:t}};Te.isValidElement=Fp;Te.lazy=function(t){return{$$typeof:Hx,_payload:{_status:-1,_result:t},_init:wb}};Te.memo=function(t,e){return{$$typeof:jx,type:t,compare:e===void 0?null:e}};Te.useCallback=function(t,e){return Vr().useCallback(t,e)};Te.useContext=function(t,e){return Vr().useContext(t,e)};Te.useDebugValue=function(){};Te.useEffect=function(t,e){return Vr().useEffect(t,e)};Te.useImperativeHandle=function(t,e,n){return Vr().useImperativeHandle(t,e,n)};Te.useLayoutEffect=function(t,e){return Vr().useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Vr().useMemo(t,e)};Te.useReducer=function(t,e,n){return Vr().useReducer(t,e,n)};Te.useRef=function(t){return Vr().useRef(t)};Te.useState=function(t){return Vr().useState(t)};Te.version="17.0.2";(function(t){t.exports=Te})(w);const Me=Fx(w.exports);var zr={exports:{}},Bn={},Zx={exports:{}},eI={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,c=null,u=function(){if(l!==null)try{var S=t.unstable_now();l(!0,S),l=null}catch(L){throw setTimeout(u,0),L}};e=function(S){l!==null?setTimeout(e,0,S):(l=S,setTimeout(u,0))},n=function(S,L){c=setTimeout(S,L)},r=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if(typeof console<"u"){var d=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof d!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var A=!1,p=null,g=-1,m=5,E=0;t.unstable_shouldYield=function(){return t.unstable_now()>=E},i=function(){},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<S?Math.floor(1e3/S):5};var v=new MessageChannel,y=v.port2;v.port1.onmessage=function(){if(p!==null){var S=t.unstable_now();E=S+m;try{p(!0,S)?y.postMessage(null):(A=!1,p=null)}catch(L){throw y.postMessage(null),L}}else A=!1},e=function(S){p=S,A||(A=!0,y.postMessage(null))},n=function(S,L){g=f(function(){S(t.unstable_now())},L)},r=function(){h(g),g=-1}}function C(S,L){var O=S.length;S.push(L);e:for(;;){var k=O-1>>>1,F=S[k];if(F!==void 0&&0<R(F,L))S[k]=L,S[O]=F,O=k;else break e}}function x(S){return S=S[0],S===void 0?null:S}function B(S){var L=S[0];if(L!==void 0){var O=S.pop();if(O!==L){S[0]=O;e:for(var k=0,F=S.length;k<F;){var U=2*(k+1)-1,$=S[U],ie=U+1,ee=S[ie];if($!==void 0&&0>R($,O))ee!==void 0&&0>R(ee,$)?(S[k]=ee,S[ie]=O,k=ie):(S[k]=$,S[U]=O,k=U);else if(ee!==void 0&&0>R(ee,O))S[k]=ee,S[ie]=O,k=ie;else break e}}return L}return null}function R(S,L){var O=S.sortIndex-L.sortIndex;return O!==0?O:S.id-L.id}var b=[],N=[],H=1,D=null,G=3,W=!1,X=!1,oe=!1;function ge(S){for(var L=x(N);L!==null;){if(L.callback===null)B(N);else if(L.startTime<=S)B(N),L.sortIndex=L.expirationTime,C(b,L);else break;L=x(N)}}function ne(S){if(oe=!1,ge(S),!X)if(x(b)!==null)X=!0,e(fe);else{var L=x(N);L!==null&&n(ne,L.startTime-S)}}function fe(S,L){X=!1,oe&&(oe=!1,r()),W=!0;var O=G;try{for(ge(L),D=x(b);D!==null&&(!(D.expirationTime>L)||S&&!t.unstable_shouldYield());){var k=D.callback;if(typeof k=="function"){D.callback=null,G=D.priorityLevel;var F=k(D.expirationTime<=L);L=t.unstable_now(),typeof F=="function"?D.callback=F:D===x(b)&&B(b),ge(L)}else B(b);D=x(b)}if(D!==null)var U=!0;else{var $=x(N);$!==null&&n(ne,$.startTime-L),U=!1}return U}finally{D=null,G=O,W=!1}}var P=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_continueExecution=function(){X||W||(X=!0,e(fe))},t.unstable_getCurrentPriorityLevel=function(){return G},t.unstable_getFirstCallbackNode=function(){return x(b)},t.unstable_next=function(S){switch(G){case 1:case 2:case 3:var L=3;break;default:L=G}var O=G;G=L;try{return S()}finally{G=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=P,t.unstable_runWithPriority=function(S,L){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var O=G;G=S;try{return L()}finally{G=O}},t.unstable_scheduleCallback=function(S,L,O){var k=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?k+O:k):O=k,S){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=O+F,S={id:H++,callback:L,priorityLevel:S,startTime:O,expirationTime:F,sortIndex:-1},O>k?(S.sortIndex=O,C(N,S),x(b)===null&&S===x(N)&&(oe?r():oe=!0,n(ne,O-k))):(S.sortIndex=F,C(b,S),X||W||(X=!0,e(fe))),S},t.unstable_wrapCallback=function(S){var L=G;return function(){var O=G;G=L;try{return S.apply(this,arguments)}finally{G=O}}}})(eI);(function(t){t.exports=eI})(Zx);/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th=w.exports,Je=kx,vt=Zx.exports;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!th)throw Error(Y(227));var tI=new Set,El={};function Ss(t,e){Ro(t,e),Ro(t+"Capture",e)}function Ro(t,e){for(El[t]=e,t=0;t<e.length;t++)tI.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mE=Object.prototype.hasOwnProperty,EE={},vE={};function bb(t){return mE.call(vE,t)?!0:mE.call(EE,t)?!1:Sb.test(t)?vE[t]=!0:(EE[t]=!0,!1)}function Rb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bb(t,e,n,r){if(e===null||typeof e>"u"||Rb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qp=/[\-:]([a-z])/g;function kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qp,kp);Rt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qp,kp);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qp,kp);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Up(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(Bb(e,n,i,r)&&(n=null),r||i===null?bb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bs=th.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=60103,is=60106,oi=60107,Gp=60108,$a=60114,Vp=60109,zp=60110,nh=60112,Xa=60113,rf=60120,rh=60115,jp=60116,Hp=60121,Wp=60128,nI=60129,Yp=60130,GA=60131;if(typeof Symbol=="function"&&Symbol.for){var pt=Symbol.for;Da=pt("react.element"),is=pt("react.portal"),oi=pt("react.fragment"),Gp=pt("react.strict_mode"),$a=pt("react.profiler"),Vp=pt("react.provider"),zp=pt("react.context"),nh=pt("react.forward_ref"),Xa=pt("react.suspense"),rf=pt("react.suspense_list"),rh=pt("react.memo"),jp=pt("react.lazy"),Hp=pt("react.block"),pt("react.scope"),Wp=pt("react.opaque.id"),nI=pt("react.debug_trace_mode"),Yp=pt("react.offscreen"),GA=pt("react.legacy_hidden")}var yE=typeof Symbol=="function"&&Symbol.iterator;function ga(t){return t===null||typeof t!="object"?null:(t=yE&&t[yE]||t["@@iterator"],typeof t=="function"?t:null)}var fd;function Fa(t){if(fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fd=e&&e[1]||""}return`
`+fd+t}var hd=!1;function Fc(t,e){if(!t||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fa(t):""}function Pb(t){switch(t.tag){case 5:return Fa(t.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 2:case 15:return t=Fc(t.type,!1),t;case 11:return t=Fc(t.type.render,!1),t;case 22:return t=Fc(t.type._render,!1),t;case 1:return t=Fc(t.type,!0),t;default:return""}}function go(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case is:return"Portal";case $a:return"Profiler";case Gp:return"StrictMode";case Xa:return"Suspense";case rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zp:return(t.displayName||"Context")+".Consumer";case Vp:return(t._context.displayName||"Context")+".Provider";case nh:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case rh:return go(t.type);case Hp:return go(t._render);case jp:e=t._payload,t=t._init;try{return go(t(e))}catch{}}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function rI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nb(t){var e=rI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qc(t){t._valueTracker||(t._valueTracker=Nb(t))}function iI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function VA(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function _E(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sI(t,e){e=e.checked,e!=null&&Up(t,"checked",e,!1)}function zA(t,e){sI(t,e);var n=wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jA(t,e.type,n):e.hasOwnProperty("defaultValue")&&jA(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jA(t,e,n){(e!=="number"||sf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Lb(t){var e="";return th.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function HA(t,e){return t=Je({children:void 0},e),(e=Lb(e.children))&&(t.children=e),t}function po(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function WA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function oI(t,e){var n=wi(e.value),r=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function CE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var YA={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function aI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $A(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kc,lI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==YA.svg||"innerHTML"in t)t.innerHTML=e;else{for(kc=kc||document.createElement("div"),kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ka={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mb=["Webkit","ms","Moz","O"];Object.keys(Ka).forEach(function(t){Mb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ka[e]=Ka[t]})});function cI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ka.hasOwnProperty(t)&&Ka[t]?(""+e).trim():e+"px"}function uI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ob=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XA(t,e){if(e){if(Ob[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function KA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function $p(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qA=null,mo=null,Eo=null;function wE(t){if(t=$l(t)){if(typeof qA!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=ch(e),qA(t.stateNode,t.type,e))}}function fI(t){mo?Eo?Eo.push(t):Eo=[t]:mo=t}function hI(){if(mo){var t=mo,e=Eo;if(Eo=mo=null,wE(t),e)for(t=0;t<e.length;t++)wE(e[t])}}function Xp(t,e){return t(e)}function dI(t,e,n,r,i){return t(e,n,r,i)}function Kp(){}var AI=Xp,ss=!1,dd=!1;function qp(){(mo!==null||Eo!==null)&&(Kp(),hI())}function Db(t,e,n){if(dd)return t(e,n);dd=!0;try{return AI(t,e,n)}finally{dd=!1,qp()}}function yl(t,e){var n=t.stateNode;if(n===null)return null;var r=ch(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var JA=!1;if(Dr)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){JA=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{JA=!1}function Fb(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var qa=!1,of=null,af=!1,ZA=null,Qb={onError:function(t){qa=!0,of=t}};function kb(t,e,n,r,i,s,o,a,l){qa=!1,of=null,Fb.apply(Qb,arguments)}function Ub(t,e,n,r,i,s,o,a,l){if(kb.apply(this,arguments),qa){if(qa){var c=of;qa=!1,of=null}else throw Error(Y(198));af||(af=!0,ZA=c)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TE(t){if(Rs(t)!==t)throw Error(Y(188))}function Gb(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return TE(i),t;if(s===r)return TE(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function pI(t){if(t=Gb(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function SE(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var mI,Jp,EI,vI,eg=!1,or=[],hi=null,di=null,Ai=null,_l=new Map,xl=new Map,ma=[],bE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tg(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function RE(t,e){switch(t){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(e.pointerId)}}function Ea(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t=tg(e,n,r,i,s),e!==null&&(e=$l(e),e!==null&&Jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Vb(t,e,n,r,i){switch(e){case"focusin":return hi=Ea(hi,t,e,n,r,i),!0;case"dragenter":return di=Ea(di,t,e,n,r,i),!0;case"mouseover":return Ai=Ea(Ai,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _l.set(s,Ea(_l.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xl.set(s,Ea(xl.get(s)||null,t,e,n,r,i)),!0}return!1}function zb(t){var e=os(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=gI(n),e!==null){t.blockedOn=e,vI(t.lanePriority,function(){vt.unstable_runWithPriority(t.priority,function(){EI(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=n0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=$l(n),e!==null&&Jp(e),t.blockedOn=n,!1;e.shift()}return!0}function BE(t,e,n){Bu(t)&&n.delete(e)}function jb(){for(eg=!1;0<or.length;){var t=or[0];if(t.blockedOn!==null){t=$l(t.blockedOn),t!==null&&mI(t);break}for(var e=t.targetContainers;0<e.length;){var n=n0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&or.shift()}hi!==null&&Bu(hi)&&(hi=null),di!==null&&Bu(di)&&(di=null),Ai!==null&&Bu(Ai)&&(Ai=null),_l.forEach(BE),xl.forEach(BE)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,eg||(eg=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,jb)))}function yI(t){function e(i){return va(i,t)}if(0<or.length){va(or[0],t);for(var n=1;n<or.length;n++){var r=or[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hi!==null&&va(hi,t),di!==null&&va(di,t),Ai!==null&&va(Ai,t),_l.forEach(e),xl.forEach(e),n=0;n<ma.length;n++)r=ma[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ma.length&&(n=ma[0],n.blockedOn===null);)zb(n),n.blockedOn===null&&ma.shift()}function Uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var to={animationend:Uc("Animation","AnimationEnd"),animationiteration:Uc("Animation","AnimationIteration"),animationstart:Uc("Animation","AnimationStart"),transitionend:Uc("Transition","TransitionEnd")},Ad={},_I={};Dr&&(_I=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function ih(t){if(Ad[t])return Ad[t];if(!to[t])return t;var e=to[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _I)return Ad[t]=e[n];return t}var xI=ih("animationend"),II=ih("animationiteration"),CI=ih("animationstart"),wI=ih("transitionend"),TI=new Map,Zp=new Map,Hb=["abort","abort",xI,"animationEnd",II,"animationIteration",CI,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",wI,"transitionEnd","waiting","waiting"];function e0(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Zp.set(r,e),TI.set(r,i),Ss(i,[r])}}var Wb=vt.unstable_now;Wb();var Ge=8;function Xs(t){if((1&t)!==0)return Ge=15,1;if((2&t)!==0)return Ge=14,2;if((4&t)!==0)return Ge=13,4;var e=24&t;return e!==0?(Ge=12,e):(t&32)!==0?(Ge=11,32):(e=192&t,e!==0?(Ge=10,e):(t&256)!==0?(Ge=9,256):(e=3584&t,e!==0?(Ge=8,e):(t&4096)!==0?(Ge=7,4096):(e=4186112&t,e!==0?(Ge=6,e):(e=62914560&t,e!==0?(Ge=5,e):t&67108864?(Ge=4,67108864):(t&134217728)!==0?(Ge=3,134217728):(e=805306368&t,e!==0?(Ge=2,e):(1073741824&t)!==0?(Ge=1,1073741824):(Ge=8,t))))))}function Yb(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function $b(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Y(358,t))}}function Il(t,e){var n=t.pendingLanes;if(n===0)return Ge=0;var r=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(s!==0)r=s,i=Ge=15;else if(s=n&134217727,s!==0){var l=s&~o;l!==0?(r=Xs(l),i=Ge):(a&=s,a!==0&&(r=Xs(a),i=Ge))}else s=n&~o,s!==0?(r=Xs(s),i=Ge):a!==0&&(r=Xs(a),i=Ge);if(r===0)return 0;if(r=31-Ti(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)===0){if(Xs(e),i<=Ge)return e;Ge=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ti(e),i=1<<n,r|=t[n],e&=~i;return r}function SI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lf(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Ks(24&~e),t===0?lf(10,e):t;case 10:return t=Ks(192&~e),t===0?lf(8,e):t;case 8:return t=Ks(3584&~e),t===0&&(t=Ks(4186112&~e),t===0&&(t=512)),t;case 2:return e=Ks(805306368&~e),e===0&&(e=268435456),e}throw Error(Y(358,t))}function Ks(t){return t&-t}function gd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sh(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-Ti(e),t[e]=n}var Ti=Math.clz32?Math.clz32:qb,Xb=Math.log,Kb=Math.LN2;function qb(t){return t===0?32:31-(Xb(t)/Kb|0)|0}var Jb=vt.unstable_UserBlockingPriority,Zb=vt.unstable_runWithPriority,Pu=!0;function eR(t,e,n,r){ss||Kp();var i=t0,s=ss;ss=!0;try{dI(i,t,e,n,r)}finally{(ss=s)||qp()}}function tR(t,e,n,r){Zb(Jb,t0.bind(null,t,e,n,r))}function t0(t,e,n,r){if(Pu){var i;if((i=(e&4)===0)&&0<or.length&&-1<bE.indexOf(t))t=tg(null,t,e,n,r),or.push(t);else{var s=n0(t,e,n,r);if(s===null)i&&RE(t,r);else{if(i){if(-1<bE.indexOf(t)){t=tg(s,t,e,n,r),or.push(t);return}if(Vb(s,t,e,n,r))return;RE(t,r)}UI(t,e,r,null,n)}}}}function n0(t,e,n,r){var i=$p(r);if(i=os(i),i!==null){var s=Rs(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=gI(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return UI(t,e,r,i,n),null}var ai=null,r0=null,Nu=null;function bI(){if(Nu)return Nu;var t,e=r0,n=e.length,r,i="value"in ai?ai.value:ai.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Nu=i.slice(t,1<r?1-r:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gc(){return!0}function PE(){return!1}function pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gc:PE,this.isPropagationStopped=PE,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gc)},persist:function(){},isPersistent:Gc}),e}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i0=pn(Ho),Yl=Je({},Ho,{view:0,detail:0}),nR=pn(Yl),pd,md,ya,oh=Je({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(pd=t.screenX-ya.screenX,md=t.screenY-ya.screenY):md=pd=0,ya=t),pd)},movementY:function(t){return"movementY"in t?t.movementY:md}}),NE=pn(oh),rR=Je({},oh,{dataTransfer:0}),iR=pn(rR),sR=Je({},Yl,{relatedTarget:0}),Ed=pn(sR),oR=Je({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),aR=pn(oR),lR=Je({},Ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cR=pn(lR),uR=Je({},Ho,{data:0}),LE=pn(uR),fR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dR[t])?!!e[t]:!1}function s0(){return AR}var gR=Je({},Yl,{key:function(t){if(t.key){var e=fR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s0,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pR=pn(gR),mR=Je({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ME=pn(mR),ER=Je({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s0}),vR=pn(ER),yR=Je({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),_R=pn(yR),xR=Je({},oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IR=pn(xR),CR=[9,13,27,32],o0=Dr&&"CompositionEvent"in window,Ja=null;Dr&&"documentMode"in document&&(Ja=document.documentMode);var wR=Dr&&"TextEvent"in window&&!Ja,RI=Dr&&(!o0||Ja&&8<Ja&&11>=Ja),OE=String.fromCharCode(32),DE=!1;function BI(t,e){switch(t){case"keyup":return CR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var no=!1;function TR(t,e){switch(t){case"compositionend":return PI(e);case"keypress":return e.which!==32?null:(DE=!0,OE);case"textInput":return t=e.data,t===OE&&DE?null:t;default:return null}}function SR(t,e){if(no)return t==="compositionend"||!o0&&BI(t,e)?(t=bI(),Nu=r0=ai=null,no=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RI&&e.locale!=="ko"?null:e.data;default:return null}}var bR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bR[t.type]:e==="textarea"}function NI(t,e,n,r){fI(r),e=cf(e,"onChange"),0<e.length&&(n=new i0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Za=null,Cl=null;function RR(t){FI(t,0)}function ah(t){var e=io(t);if(iI(e))return t}function BR(t,e){if(t==="change")return e}var LI=!1;if(Dr){var vd;if(Dr){var yd="oninput"in document;if(!yd){var QE=document.createElement("div");QE.setAttribute("oninput","return;"),yd=typeof QE.oninput=="function"}vd=yd}else vd=!1;LI=vd&&(!document.documentMode||9<document.documentMode)}function kE(){Za&&(Za.detachEvent("onpropertychange",MI),Cl=Za=null)}function MI(t){if(t.propertyName==="value"&&ah(Cl)){var e=[];if(NI(e,Cl,t,$p(t)),t=RR,ss)t(e);else{ss=!0;try{Xp(t,e)}finally{ss=!1,qp()}}}}function PR(t,e,n){t==="focusin"?(kE(),Za=e,Cl=n,Za.attachEvent("onpropertychange",MI)):t==="focusout"&&kE()}function NR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ah(Cl)}function LR(t,e){if(t==="click")return ah(e)}function MR(t,e){if(t==="input"||t==="change")return ah(e)}function OR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:OR,DR=Object.prototype.hasOwnProperty;function wl(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!DR.call(e,n[r])||!xn(t[n[r]],e[n[r]]))return!1;return!0}function UE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function GE(t,e){var n=UE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=UE(n)}}function OI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VE(){for(var t=window,e=sf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sf(t.document)}return e}function ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var FR=Dr&&"documentMode"in document&&11>=document.documentMode,ro=null,rg=null,el=null,ig=!1;function zE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ig||ro==null||ro!==sf(r)||(r=ro,"selectionStart"in r&&ng(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),el&&wl(el,r)||(el=r,r=cf(rg,"onSelect"),0<r.length&&(e=new i0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ro)))}e0("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);e0("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);e0(Hb,2);for(var jE="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_d=0;_d<jE.length;_d++)Zp.set(jE[_d],0);Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function HE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ub(r,e,void 0,t),t.currentTarget=null}function FI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;HE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;HE(i,a,c),s=l}}}if(af)throw t=ZA,af=!1,ZA=null,t}function He(t,e){var n=VI(e),r=t+"__bubble";n.has(r)||(kI(e,t,2,!1),n.add(r))}var WE="_reactListening"+Math.random().toString(36).slice(2);function QI(t){t[WE]||(t[WE]=!0,tI.forEach(function(e){DI.has(e)||YE(e,!1,t,null),YE(e,!0,t,null)}))}function YE(t,e,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(t==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),r!==null&&!e&&DI.has(t)){if(t!=="scroll")return;i|=2,s=r}var o=VI(s),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),kI(s,t,i,e),o.add(a))}function kI(t,e,n,r){var i=Zp.get(e);switch(i===void 0?2:i){case 0:i=eR;break;case 1:i=tR;break;default:i=t0}n=i.bind(null,e,n,t),i=void 0,!JA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function UI(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=os(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Db(function(){var c=s,u=$p(n),f=[];e:{var h=TI.get(t);if(h!==void 0){var d=i0,A=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":d=pR;break;case"focusin":A="focus",d=Ed;break;case"focusout":A="blur",d=Ed;break;case"beforeblur":case"afterblur":d=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=NE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=iR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=vR;break;case xI:case II:case CI:d=aR;break;case wI:d=_R;break;case"scroll":d=nR;break;case"wheel":d=IR;break;case"copy":case"cut":case"paste":d=cR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ME}var p=(e&4)!==0,g=!p&&t==="scroll",m=p?h!==null?h+"Capture":null:h;p=[];for(var E=c,v;E!==null;){v=E;var y=v.stateNode;if(v.tag===5&&y!==null&&(v=y,m!==null&&(y=yl(E,m),y!=null&&p.push(Tl(E,y,v)))),g)break;E=E.return}0<p.length&&(h=new d(h,A,null,n,u),f.push({event:h,listeners:p}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&(e&16)===0&&(A=n.relatedTarget||n.fromElement)&&(os(A)||A[Wo]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(A=n.relatedTarget||n.toElement,d=c,A=A?os(A):null,A!==null&&(g=Rs(A),A!==g||A.tag!==5&&A.tag!==6)&&(A=null)):(d=null,A=c),d!==A)){if(p=NE,y="onMouseLeave",m="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(p=ME,y="onPointerLeave",m="onPointerEnter",E="pointer"),g=d==null?h:io(d),v=A==null?h:io(A),h=new p(y,E+"leave",d,n,u),h.target=g,h.relatedTarget=v,y=null,os(u)===c&&(p=new p(m,E+"enter",A,n,u),p.target=v,p.relatedTarget=g,y=p),g=y,d&&A)t:{for(p=d,m=A,E=0,v=p;v;v=Fs(v))E++;for(v=0,y=m;y;y=Fs(y))v++;for(;0<E-v;)p=Fs(p),E--;for(;0<v-E;)m=Fs(m),v--;for(;E--;){if(p===m||m!==null&&p===m.alternate)break t;p=Fs(p),m=Fs(m)}p=null}else p=null;d!==null&&$E(f,h,d,p,!1),A!==null&&g!==null&&$E(f,g,A,p,!0)}}e:{if(h=c?io(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var C=BR;else if(FE(h))if(LI)C=MR;else{C=NR;var x=PR}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=LR);if(C&&(C=C(t,c))){NI(f,C,n,u);break e}x&&x(t,h,c),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&jA(h,"number",h.value)}switch(x=c?io(c):window,t){case"focusin":(FE(x)||x.contentEditable==="true")&&(ro=x,rg=c,el=null);break;case"focusout":el=rg=ro=null;break;case"mousedown":ig=!0;break;case"contextmenu":case"mouseup":case"dragend":ig=!1,zE(f,n,u);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":zE(f,n,u)}var B;if(o0)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else no?BI(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(RI&&n.locale!=="ko"&&(no||R!=="onCompositionStart"?R==="onCompositionEnd"&&no&&(B=bI()):(ai=u,r0="value"in ai?ai.value:ai.textContent,no=!0)),x=cf(c,R),0<x.length&&(R=new LE(R,t,null,n,u),f.push({event:R,listeners:x}),B?R.data=B:(B=PI(n),B!==null&&(R.data=B)))),(B=wR?TR(t,n):SR(t,n))&&(c=cf(c,"onBeforeInput"),0<c.length&&(u=new LE("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=B))}FI(f,e)})}function Tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yl(t,n),s!=null&&r.unshift(Tl(t,s,i)),s=yl(t,e),s!=null&&r.push(Tl(t,s,i))),t=t.return}return r}function Fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $E(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=yl(n,s),l!=null&&o.unshift(Tl(n,l,a))):i||(l=yl(n,s),l!=null&&o.push(Tl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}function uf(){}var xd=null,Id=null;function GI(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function sg(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XE=typeof setTimeout=="function"?setTimeout:void 0,QR=typeof clearTimeout=="function"?clearTimeout:void 0;function a0(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function vo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function KE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cd=0;function kR(t){return{$$typeof:Wp,toString:t,valueOf:t}}var lh=Math.random().toString(36).slice(2),li="__reactFiber$"+lh,ff="__reactProps$"+lh,Wo="__reactContainer$"+lh,qE="__reactEvents$"+lh;function os(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wo]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KE(t);t!==null;){if(n=t[li])return n;t=KE(t)}return e}t=n,n=t.parentNode}return null}function $l(t){return t=t[li]||t[Wo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function ch(t){return t[ff]||null}function VI(t){var e=t[qE];return e===void 0&&(e=t[qE]=new Set),e}var og=[],so=-1;function Qi(t){return{current:t}}function We(t){0>so||(t.current=og[so],og[so]=null,so--)}function st(t,e){so++,og[so]=t.current,t.current=e}var Si={},Ut=Qi(Si),en=Qi(!1),Es=Si;function Bo(t,e){var n=t.type.contextTypes;if(!n)return Si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tn(t){return t=t.childContextTypes,t!=null}function hf(){We(en),We(Ut)}function JE(t,e,n){if(Ut.current!==Si)throw Error(Y(168));st(Ut,e),st(en,n)}function zI(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Y(108,go(e)||"Unknown",i));return Je({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Si,Es=Ut.current,st(Ut,t),st(en,en.current),!0}function ZE(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=zI(t,e,Es),r.__reactInternalMemoizedMergedChildContext=t,We(en),We(Ut),st(Ut,t)):We(en),st(en,n)}var l0=null,As=null,UR=vt.unstable_runWithPriority,c0=vt.unstable_scheduleCallback,ag=vt.unstable_cancelCallback,GR=vt.unstable_shouldYield,ev=vt.unstable_requestPaint,lg=vt.unstable_now,VR=vt.unstable_getCurrentPriorityLevel,uh=vt.unstable_ImmediatePriority,jI=vt.unstable_UserBlockingPriority,HI=vt.unstable_NormalPriority,WI=vt.unstable_LowPriority,YI=vt.unstable_IdlePriority,wd={},zR=ev!==void 0?ev:function(){},Tr=null,Ou=null,Td=!1,tv=lg(),Qt=1e4>tv?lg:function(){return lg()-tv};function Po(){switch(VR()){case uh:return 99;case jI:return 98;case HI:return 97;case WI:return 96;case YI:return 95;default:throw Error(Y(332))}}function $I(t){switch(t){case 99:return uh;case 98:return jI;case 97:return HI;case 96:return WI;case 95:return YI;default:throw Error(Y(332))}}function vs(t,e){return t=$I(t),UR(t,e)}function Sl(t,e,n){return t=$I(t),c0(t,e,n)}function mr(){if(Ou!==null){var t=Ou;Ou=null,ag(t)}XI()}function XI(){if(!Td&&Tr!==null){Td=!0;var t=0;try{var e=Tr;vs(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),Tr=null}catch(n){throw Tr!==null&&(Tr=Tr.slice(t+1)),c0(uh,mr),n}finally{Td=!1}}}var jR=bs.ReactCurrentBatchConfig;function Un(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var df=Qi(null),Af=null,oo=null,gf=null;function u0(){gf=oo=Af=null}function f0(t){var e=df.current;We(df),t.type._context._currentValue=e}function KI(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function yo(t,e){Af=t,gf=oo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(zn=!0),t.firstContext=null)}function Sn(t,e){if(gf!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(gf=t,e=1073741823),e={context:t,observedBits:e,next:null},oo===null){if(Af===null)throw Error(Y(308));oo=e,Af.dependencies={lanes:0,firstContext:e,responders:null}}else oo=oo.next=e;return t._currentValue}var si=!1;function h0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function qI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pi(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function nv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bl(t,e,n,r){var i=t.updateQueue;si=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;if(u!==null){u=u.updateQueue;var f=u.lastBaseUpdate;f!==o&&(f===null?u.firstBaseUpdate=c:f.next=c,u.lastBaseUpdate=l)}}if(s!==null){f=i.baseState,o=0,u=c=l=null;do{a=s.lane;var h=s.eventTime;if((r&a)===a){u!==null&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var d=t,A=s;switch(a=e,h=n,A.tag){case 1:if(d=A.payload,typeof d=="function"){f=d.call(h,f,a);break e}f=d;break e;case 3:d.flags=d.flags&-4097|64;case 0:if(d=A.payload,a=typeof d=="function"?d.call(h,f,a):d,a==null)break e;f=Je({},f,a);break e;case 2:si=!0}}s.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else h={eventTime:h,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,Kl|=o,t.lanes=o,t.memoizedState=f}}function rv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var JI=new th.Component().refs;function pf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fh={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fn(),i=mi(t),s=gi(r,i);s.payload=e,n!=null&&(s.callback=n),pi(t,s),Ei(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fn(),i=mi(t),s=gi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),pi(t,s),Ei(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),r=mi(t),i=gi(n,r);i.tag=2,e!=null&&(i.callback=e),pi(t,i),Ei(t,r,n)}};function iv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wl(n,r)||!wl(i,s):!0}function ZI(t,e,n){var r=!1,i=Si,s=e.contextType;return typeof s=="object"&&s!==null?s=Sn(s):(i=tn(e)?Es:Ut.current,r=e.contextTypes,s=(r=r!=null)?Bo(t,i):Si),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fh.enqueueReplaceState(e,e.state,null)}function cg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=JI,h0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Sn(s):(s=tn(e)?Es:Ut.current,i.context=Bo(t,s)),bl(t,n,i,r),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fh.enqueueReplaceState(i,i.state,null),bl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var Vc=Array.isArray;function _a(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===JI&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function zc(t,e){if(t.type!=="textarea")throw Error(Y(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function eC(t){function e(g,m){if(t){var E=g.lastEffect;E!==null?(E.nextEffect=m,g.lastEffect=m):g.firstEffect=g.lastEffect=m,m.nextEffect=null,m.flags=8}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=Ri(g,m),g.index=0,g.sibling=null,g}function s(g,m,E){return g.index=E,t?(E=g.alternate,E!==null?(E=E.index,E<m?(g.flags=2,m):E):(g.flags=2,m)):m}function o(g){return t&&g.alternate===null&&(g.flags=2),g}function a(g,m,E,v){return m===null||m.tag!==6?(m=Pd(E,g.mode,v),m.return=g,m):(m=i(m,E),m.return=g,m)}function l(g,m,E,v){return m!==null&&m.elementType===E.type?(v=i(m,E.props),v.ref=_a(g,m,E),v.return=g,v):(v=ku(E.type,E.key,E.props,null,g.mode,v),v.ref=_a(g,m,E),v.return=g,v)}function c(g,m,E,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==E.containerInfo||m.stateNode.implementation!==E.implementation?(m=Nd(E,g.mode,v),m.return=g,m):(m=i(m,E.children||[]),m.return=g,m)}function u(g,m,E,v,y){return m===null||m.tag!==7?(m=Co(E,g.mode,v,y),m.return=g,m):(m=i(m,E),m.return=g,m)}function f(g,m,E){if(typeof m=="string"||typeof m=="number")return m=Pd(""+m,g.mode,E),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Da:return E=ku(m.type,m.key,m.props,null,g.mode,E),E.ref=_a(g,null,m),E.return=g,E;case is:return m=Nd(m,g.mode,E),m.return=g,m}if(Vc(m)||ga(m))return m=Co(m,g.mode,E,null),m.return=g,m;zc(g,m)}return null}function h(g,m,E,v){var y=m!==null?m.key:null;if(typeof E=="string"||typeof E=="number")return y!==null?null:a(g,m,""+E,v);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Da:return E.key===y?E.type===oi?u(g,m,E.props.children,v,y):l(g,m,E,v):null;case is:return E.key===y?c(g,m,E,v):null}if(Vc(E)||ga(E))return y!==null?null:u(g,m,E,v,null);zc(g,E)}return null}function d(g,m,E,v,y){if(typeof v=="string"||typeof v=="number")return g=g.get(E)||null,a(m,g,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Da:return g=g.get(v.key===null?E:v.key)||null,v.type===oi?u(m,g,v.props.children,y,v.key):l(m,g,v,y);case is:return g=g.get(v.key===null?E:v.key)||null,c(m,g,v,y)}if(Vc(v)||ga(v))return g=g.get(E)||null,u(m,g,v,y,null);zc(m,v)}return null}function A(g,m,E,v){for(var y=null,C=null,x=m,B=m=0,R=null;x!==null&&B<E.length;B++){x.index>B?(R=x,x=null):R=x.sibling;var b=h(g,x,E[B],v);if(b===null){x===null&&(x=R);break}t&&x&&b.alternate===null&&e(g,x),m=s(b,m,B),C===null?y=b:C.sibling=b,C=b,x=R}if(B===E.length)return n(g,x),y;if(x===null){for(;B<E.length;B++)x=f(g,E[B],v),x!==null&&(m=s(x,m,B),C===null?y=x:C.sibling=x,C=x);return y}for(x=r(g,x);B<E.length;B++)R=d(x,g,B,E[B],v),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?B:R.key),m=s(R,m,B),C===null?y=R:C.sibling=R,C=R);return t&&x.forEach(function(N){return e(g,N)}),y}function p(g,m,E,v){var y=ga(E);if(typeof y!="function")throw Error(Y(150));if(E=y.call(E),E==null)throw Error(Y(151));for(var C=y=null,x=m,B=m=0,R=null,b=E.next();x!==null&&!b.done;B++,b=E.next()){x.index>B?(R=x,x=null):R=x.sibling;var N=h(g,x,b.value,v);if(N===null){x===null&&(x=R);break}t&&x&&N.alternate===null&&e(g,x),m=s(N,m,B),C===null?y=N:C.sibling=N,C=N,x=R}if(b.done)return n(g,x),y;if(x===null){for(;!b.done;B++,b=E.next())b=f(g,b.value,v),b!==null&&(m=s(b,m,B),C===null?y=b:C.sibling=b,C=b);return y}for(x=r(g,x);!b.done;B++,b=E.next())b=d(x,g,B,b.value,v),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?B:b.key),m=s(b,m,B),C===null?y=b:C.sibling=b,C=b);return t&&x.forEach(function(H){return e(g,H)}),y}return function(g,m,E,v){var y=typeof E=="object"&&E!==null&&E.type===oi&&E.key===null;y&&(E=E.props.children);var C=typeof E=="object"&&E!==null;if(C)switch(E.$$typeof){case Da:e:{for(C=E.key,y=m;y!==null;){if(y.key===C){switch(y.tag){case 7:if(E.type===oi){n(g,y.sibling),m=i(y,E.props.children),m.return=g,g=m;break e}break;default:if(y.elementType===E.type){n(g,y.sibling),m=i(y,E.props),m.ref=_a(g,y,E),m.return=g,g=m;break e}}n(g,y);break}else e(g,y);y=y.sibling}E.type===oi?(m=Co(E.props.children,g.mode,v,E.key),m.return=g,g=m):(v=ku(E.type,E.key,E.props,null,g.mode,v),v.ref=_a(g,m,E),v.return=g,g=v)}return o(g);case is:e:{for(y=E.key;m!==null;){if(m.key===y)if(m.tag===4&&m.stateNode.containerInfo===E.containerInfo&&m.stateNode.implementation===E.implementation){n(g,m.sibling),m=i(m,E.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Nd(E,g.mode,v),m.return=g,g=m}return o(g)}if(typeof E=="string"||typeof E=="number")return E=""+E,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,E),m.return=g,g=m):(n(g,m),m=Pd(E,g.mode,v),m.return=g,g=m),o(g);if(Vc(E))return A(g,m,E,v);if(ga(E))return p(g,m,E,v);if(C&&zc(g,E),typeof E>"u"&&!y)switch(g.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Y(152,go(g.type)||"Component"))}return n(g,m)}}var mf=eC(!0),tC=eC(!1),Xl={},fr=Qi(Xl),Rl=Qi(Xl),Bl=Qi(Xl);function as(t){if(t===Xl)throw Error(Y(174));return t}function ug(t,e){switch(st(Bl,e),st(Rl,t),st(fr,Xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$A(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$A(e,t)}We(fr),st(fr,e)}function No(){We(fr),We(Rl),We(Bl)}function ov(t){as(Bl.current);var e=as(fr.current),n=$A(e,t.type);e!==n&&(st(Rl,t),st(fr,n))}function d0(t){Rl.current===t&&(We(fr),We(Rl))}var it=Qi(0);function Ef(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Br=null,ci=null,hr=!1;function nC(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function av(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function fg(t){if(hr){var e=ci;if(e){var n=e;if(!av(t,e)){if(e=vo(n.nextSibling),!e||!av(t,e)){t.flags=t.flags&-1025|2,hr=!1,Br=t;return}nC(Br,n)}Br=t,ci=vo(e.firstChild)}else t.flags=t.flags&-1025|2,hr=!1,Br=t}}function lv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Br=t}function jc(t){if(t!==Br)return!1;if(!hr)return lv(t),hr=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!sg(e,t.memoizedProps))for(e=ci;e;)nC(t,e),e=vo(e.nextSibling);if(lv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=vo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=Br?vo(t.stateNode.nextSibling):null;return!0}function Sd(){ci=Br=null,hr=!1}var _o=[];function A0(){for(var t=0;t<_o.length;t++)_o[t]._workInProgressVersionPrimary=null;_o.length=0}var tl=bs.ReactCurrentDispatcher,Cn=bs.ReactCurrentBatchConfig,Pl=0,lt=null,Mt=null,wt=null,vf=!1,nl=!1;function Jt(){throw Error(Y(321))}function g0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function p0(t,e,n,r,i,s){if(Pl=s,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tl.current=t===null||t.memoizedState===null?WR:YR,t=n(r,i),nl){s=0;do{if(nl=!1,!(25>s))throw Error(Y(301));s+=1,wt=Mt=null,e.updateQueue=null,tl.current=$R,t=n(r,i)}while(nl)}if(tl.current=If,e=Mt!==null&&Mt.next!==null,Pl=0,wt=Mt=lt=null,vf=!1,e)throw Error(Y(300));return t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?lt.memoizedState=wt=t:wt=wt.next=t,wt}function Bs(){if(Mt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=wt===null?lt.memoizedState:wt.next;if(e!==null)wt=e,Mt=t;else{if(t===null)throw Error(Y(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},wt===null?lt.memoizedState=wt=t:wt=wt.next=t}return wt}function ar(t,e){return typeof e=="function"?e(t):e}function xa(t){var e=Bs(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Mt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var a=o=s=null,l=i;do{var c=l.lane;if((Pl&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var u={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=u,s=r):a=a.next=u,lt.lanes|=c,Kl|=c}l=l.next}while(l!==null&&l!==i);a===null?s=r:a.next=o,xn(r,e.memoizedState)||(zn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Ia(t){var e=Bs(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xn(s,e.memoizedState)||(zn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cv(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===r:(t=t.mutableReadLanes,(t=(Pl&t)===t)&&(e._workInProgressVersionPrimary=r,_o.push(e))),t)return n(e._source);throw _o.push(e),Error(Y(350))}function rC(t,e,n,r){var i=Yt;if(i===null)throw Error(Y(349));var s=e._getVersion,o=s(e._source),a=tl.current,l=a.useState(function(){return cv(i,e,n)}),c=l[1],u=l[0];l=wt;var f=t.memoizedState,h=f.refs,d=h.getSnapshot,A=f.source;f=f.subscribe;var p=lt;return t.memoizedState={refs:h,source:e,subscribe:r},a.useEffect(function(){h.getSnapshot=n,h.setSnapshot=c;var g=s(e._source);if(!xn(o,g)){g=n(e._source),xn(u,g)||(c(g),g=mi(p),i.mutableReadLanes|=g&i.pendingLanes),g=i.mutableReadLanes,i.entangledLanes|=g;for(var m=i.entanglements,E=g;0<E;){var v=31-Ti(E),y=1<<v;m[v]|=g,E&=~y}}},[n,e,r]),a.useEffect(function(){return r(e._source,function(){var g=h.getSnapshot,m=h.setSnapshot;try{m(g(e._source));var E=mi(p);i.mutableReadLanes|=E&i.pendingLanes}catch(v){m(function(){throw v})}})},[e,r]),xn(d,n)&&xn(A,e)&&xn(f,r)||(t={pending:null,dispatch:null,lastRenderedReducer:ar,lastRenderedState:u},t.dispatch=c=v0.bind(null,lt,t),l.queue=t,l.baseQueue=null,u=cv(i,e,n),l.memoizedState=l.baseState=u),u}function iC(t,e,n){var r=Bs();return rC(r,t,e,n)}function Ca(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},t=t.dispatch=v0.bind(null,lt,t),[e.memoizedState,t]}function yf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uv(t){var e=ls();return t={current:t},e.memoizedState=t}function _f(){return Bs().memoizedState}function hg(t,e,n,r){var i=ls();lt.flags|=t,i.memoizedState=yf(1|e,n,void 0,r===void 0?null:r)}function m0(t,e,n,r){var i=Bs();r=r===void 0?null:r;var s=void 0;if(Mt!==null){var o=Mt.memoizedState;if(s=o.destroy,r!==null&&g0(r,o.deps)){yf(e,n,s,r);return}}lt.flags|=t,i.memoizedState=yf(1|e,n,s,r)}function fv(t,e){return hg(516,4,t,e)}function xf(t,e){return m0(516,4,t,e)}function sC(t,e){return m0(4,2,t,e)}function oC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aC(t,e,n){return n=n!=null?n.concat([t]):null,m0(4,2,oC.bind(null,e,t),n)}function E0(){}function lC(t,e){var n=Bs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&g0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cC(t,e){var n=Bs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&g0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HR(t,e){var n=Po();vs(98>n?98:n,function(){t(!0)}),vs(97<n?97:n,function(){var r=Cn.transition;Cn.transition=1;try{t(!1),e()}finally{Cn.transition=r}})}function v0(t,e,n){var r=fn(),i=mi(t),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===lt||o!==null&&o===lt)nl=vf=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,xn(l,a))return}catch{}finally{}Ei(t,i,r)}}var If={readContext:Sn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useOpaqueIdentifier:Jt,unstable_isNewReconciler:!1},WR={readContext:Sn,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:fv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hg(4,2,oC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hg(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ls();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=v0.bind(null,lt,t),[r.memoizedState,t]},useRef:uv,useState:Ca,useDebugValue:E0,useDeferredValue:function(t){var e=Ca(t),n=e[0],r=e[1];return fv(function(){var i=Cn.transition;Cn.transition=1;try{r(t)}finally{Cn.transition=i}},[t]),n},useTransition:function(){var t=Ca(!1),e=t[0];return t=HR.bind(null,t[1]),uv(t),[t,e]},useMutableSource:function(t,e,n){var r=ls();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},rC(r,t,e,n)},useOpaqueIdentifier:function(){if(hr){var t=!1,e=kR(function(){throw t||(t=!0,n("r:"+(Cd++).toString(36))),Error(Y(355))}),n=Ca(e)[1];return(lt.mode&2)===0&&(lt.flags|=516,yf(5,function(){n("r:"+(Cd++).toString(36))},void 0,null)),e}return e="r:"+(Cd++).toString(36),Ca(e),e},unstable_isNewReconciler:!1},YR={readContext:Sn,useCallback:lC,useContext:Sn,useEffect:xf,useImperativeHandle:aC,useLayoutEffect:sC,useMemo:cC,useReducer:xa,useRef:_f,useState:function(){return xa(ar)},useDebugValue:E0,useDeferredValue:function(t){var e=xa(ar),n=e[0],r=e[1];return xf(function(){var i=Cn.transition;Cn.transition=1;try{r(t)}finally{Cn.transition=i}},[t]),n},useTransition:function(){var t=xa(ar)[0];return[_f().current,t]},useMutableSource:iC,useOpaqueIdentifier:function(){return xa(ar)[0]},unstable_isNewReconciler:!1},$R={readContext:Sn,useCallback:lC,useContext:Sn,useEffect:xf,useImperativeHandle:aC,useLayoutEffect:sC,useMemo:cC,useReducer:Ia,useRef:_f,useState:function(){return Ia(ar)},useDebugValue:E0,useDeferredValue:function(t){var e=Ia(ar),n=e[0],r=e[1];return xf(function(){var i=Cn.transition;Cn.transition=1;try{r(t)}finally{Cn.transition=i}},[t]),n},useTransition:function(){var t=Ia(ar)[0];return[_f().current,t]},useMutableSource:iC,useOpaqueIdentifier:function(){return Ia(ar)[0]},unstable_isNewReconciler:!1},XR=bs.ReactCurrentOwner,zn=!1;function Zt(t,e,n,r){e.child=t===null?tC(e,null,n,r):mf(e,t.child,n,r)}function hv(t,e,n,r,i){n=n.render;var s=e.ref;return yo(e,i),r=p0(t,e,n,r,s,i),t!==null&&!zn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Pr(t,e,i)):(e.flags|=1,Zt(t,e,r,i),e.child)}function dv(t,e,n,r,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!w0(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,uC(t,e,o,r,i,s)):(t=ku(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,(i&s)===0&&(i=o.memoizedProps,n=n.compare,n=n!==null?n:wl,n(i,r)&&t.ref===e.ref)?Pr(t,e,s):(e.flags|=1,t=Ri(o,r),t.ref=e.ref,t.return=e,e.child=t)}function uC(t,e,n,r,i,s){if(t!==null&&wl(t.memoizedProps,r)&&t.ref===e.ref)if(zn=!1,(s&i)!==0)(t.flags&16384)!==0&&(zn=!0);else return e.lanes=t.lanes,Pr(t,e,s);return dg(t,e,n,r,s)}function bd(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},Wc(e,n);else if((n&1073741824)!==0)e.memoizedState={baseLanes:0},Wc(e,s!==null?s.baseLanes:n);else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Wc(e,t),null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Wc(e,r);return Zt(t,e,i,n),e.child}function fC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function dg(t,e,n,r,i){var s=tn(n)?Es:Ut.current;return s=Bo(e,s),yo(e,i),n=p0(t,e,n,r,s,i),t!==null&&!zn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Pr(t,e,i)):(e.flags|=1,Zt(t,e,n,i),e.child)}function Av(t,e,n,r,i){if(tn(n)){var s=!0;Mu(e)}else s=!1;if(yo(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),ZI(e,n,r),cg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Sn(c):(c=tn(n)?Es:Ut.current,c=Bo(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&sv(e,o,r,c),si=!1;var h=e.memoizedState;o.state=h,bl(e,r,o,i),l=e.memoizedState,a!==r||h!==l||en.current||si?(typeof u=="function"&&(pf(e,n,u,r),l=e.memoizedState),(a=si||iv(e,n,a,r,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,qI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Un(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=tn(n)?Es:Ut.current,l=Bo(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&sv(e,o,r,l),si=!1,h=e.memoizedState,o.state=h,bl(e,r,o,i);var A=e.memoizedState;a!==f||h!==A||en.current||si?(typeof d=="function"&&(pf(e,n,d,r),A=e.memoizedState),(c=si||iv(e,n,c,r,h,A,l))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),r=!1)}return Ag(t,e,n,r,s,i)}function Ag(t,e,n,r,i,s){fC(t,e);var o=(e.flags&64)!==0;if(!r&&!o)return i&&ZE(e,n,!1),Pr(t,e,s);r=e.stateNode,XR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mf(e,t.child,null,s),e.child=mf(e,null,a,s)):Zt(t,e,a,s),e.memoizedState=r.state,i&&ZE(e,n,!0),e.child}function gv(t){var e=t.stateNode;e.pendingContext?JE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JE(t,e.context,!1),ug(t,e.containerInfo)}var Hc={dehydrated:null,retryLane:0};function pv(t,e,n){var r=e.pendingProps,i=it.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),st(it,i&1),t===null?(r.fallback!==void 0&&fg(e),t=r.children,i=r.fallback,s?(t=mv(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Hc,t):typeof r.unstable_expectedLoadTime=="number"?(t=mv(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Hc,e.lanes=33554432,t):(n=T0({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?s?(r=vv(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Hc,r):(n=Ev(t,e,r.children,n),e.memoizedState=null,n):s?(r=vv(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Hc,r):(n=Ev(t,e,r.children,n),e.memoizedState=null,n)}function mv(t,e,n,r){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=T0(e,i,0,null),n=Co(n,i,r,null),s.return=t,n.return=t,s.sibling=n,t.child=s,n}function Ev(t,e,n,r){var i=t.child;return t=i.sibling,n=Ri(i,{mode:"visible",children:n}),(e.mode&2)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function vv(t,e,n,r,i){var s=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:n};return(s&2)===0&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=a,o=n.lastEffect,o!==null?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Ri(o,a),t!==null?r=Ri(t,r):(r=Co(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function yv(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),KI(t.return,e)}function Rd(t,e,n,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function _v(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Zt(t,e,r.children,n),r=it.current,(r&2)!==0)r=r&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yv(t,n);else if(t.tag===19)yv(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(st(it,r),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ef(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rd(e,!1,i,n,s,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ef(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rd(e,!0,n,null,s,e.lastEffect);break;case"together":Rd(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kl|=e.lanes,(n&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var hC,gg,dC,AC;hC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gg=function(){};dC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,as(fr.current);var s=null;switch(n){case"input":i=VA(t,i),r=VA(t,r),s=[];break;case"option":i=HA(t,i),r=HA(t,r),s=[];break;case"select":i=Je({},i,{value:void 0}),r=Je({},r,{value:void 0}),s=[];break;case"textarea":i=WA(t,i),r=WA(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uf)}XA(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(El.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(El.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&He("scroll",t),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===Wp?l.toString():(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};AC=function(t,e,n,r){n!==r&&(e.flags|=4)};function wa(t,e){if(!hr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function KR(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return tn(e.type)&&hf(),null;case 3:return No(),We(en),We(Ut),A0(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jc(e)?e.flags|=4:r.hydrate||(e.flags|=256)),gg(e),null;case 5:d0(e);var i=as(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)dC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return null}if(t=as(fr.current),jc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[li]=e,r[ff]=s,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(t=0;t<Qa.length;t++)He(Qa[t],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":_E(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":IE(r,s),He("invalid",r)}XA(n,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(t=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(t=["children",""+i]):El.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&He("scroll",r));switch(n){case"input":Qc(r),xE(r,s,!0);break;case"textarea":Qc(r),CE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=uf)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===YA.html&&(t=aI(n)),t===YA.html?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[li]=e,t[ff]=r,hC(t,e,!1,!1),e.stateNode=t,o=KA(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qa.length;i++)He(Qa[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":_E(t,r),i=VA(t,r),He("invalid",t);break;case"option":i=HA(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Je({},r,{value:void 0}),He("invalid",t);break;case"textarea":IE(t,r),i=WA(t,r),He("invalid",t);break;default:i=r}XA(n,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vl(t,l):typeof l=="number"&&vl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(El.hasOwnProperty(s)?l!=null&&s==="onScroll"&&He("scroll",t):l!=null&&Up(t,s,l,o))}switch(n){case"input":Qc(t),xE(t,r,!1);break;case"textarea":Qc(t),CE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?po(t,!!r.multiple,s,!1):r.defaultValue!=null&&po(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=uf)}GI(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)AC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));n=as(Bl.current),as(fr.current),jc(e)?(r=e.stateNode,n=e.memoizedProps,r[li]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r)}return null;case 13:return We(it),r=e.memoizedState,(e.flags&64)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&jc(e):n=t.memoizedState!==null,r&&!n&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(it.current&1)!==0?St===0&&(St=3):((St===0||St===3)&&(St=4),Yt===null||(Kl&134217727)===0&&($o&134217727)===0||xo(Yt,kt))),(r||n)&&(e.flags|=4),null);case 4:return No(),gg(e),t===null&&QI(e.stateNode.containerInfo),null;case 10:return f0(e),null;case 17:return tn(e.type)&&hf(),null;case 19:if(We(it),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,o=r.rendering,o===null)if(s)wa(r,!1);else{if(St!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(o=Ef(t),o!==null){for(e.flags|=64,wa(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(it,it.current&1|2),e.child}t=t.sibling}r.tail!==null&&Qt()>_g&&(e.flags|=64,s=!0,wa(r,!1),e.lanes=33554432)}else{if(!s)if(t=Ef(o),t!==null){if(e.flags|=64,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!hr)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Qt()-r.renderingStartTime>_g&&n!==1073741824&&(e.flags|=64,s=!0,wa(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Qt(),n.sibling=null,e=it.current,st(it,s?e&1|2:e&1),n):null;case 23:case 24:return C0(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Y(156,e.tag))}function qR(t){switch(t.tag){case 1:tn(t.type)&&hf();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(No(),We(en),We(Ut),A0(),e=t.flags,(e&64)!==0)throw Error(Y(285));return t.flags=e&-4097|64,t;case 5:return d0(t),null;case 13:return We(it),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return We(it),null;case 4:return No(),null;case 10:return f0(t),null;case 23:case 24:return C0(),null;default:return null}}function y0(t,e){try{var n="",r=e;do n+=Pb(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function pg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JR=typeof WeakMap=="function"?WeakMap:Map;function gC(t,e,n){n=gi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wf||(wf=!0,xg=r),pg(t,e)},n}function pC(t,e,n){n=gi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return pg(t,e),r(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(lr===null?lr=new Set([this]):lr.add(this),pg(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}var ZR=typeof WeakSet=="function"?WeakSet:Set;function xv(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){vi(t,n)}else e.current=null}function eB(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:Un(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&a0(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Y(163))}function tB(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;r=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(wC(n,t),cB(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Un(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&rv(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}rv(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&GI(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&yI(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Y(163))}function Iv(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=cI("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Cv(t,e){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(l0,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!==0)wC(e,n);else{r=e;try{i()}catch(s){vi(r,s)}}n=n.next}while(n!==t)}break;case 1:if(xv(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){vi(e,s)}break;case 5:xv(e);break;case 4:mC(t,e)}}function wv(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Tv(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:{for(var e=t.return;e!==null;){if(Tv(e))break e;e=e.return}throw Error(Y(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(Y(161))}n.flags&16&&(vl(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||Tv(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?mg(t,n,e):Eg(t,n,e)}function mg(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uf));else if(r!==4&&(t=t.child,t!==null))for(mg(t,e,n),t=t.sibling;t!==null;)mg(t,e,n),t=t.sibling}function Eg(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function mC(t,e){for(var n=e,r=!1,i,s;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(Y(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=t,a=n,l=a;;)if(Cv(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(o=i,a=n.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(Cv(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Bd(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var i=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n[ff]=r,t==="input"&&r.type==="radio"&&r.name!=null&&sI(n,r),KA(t,i),e=KA(t,r),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?uI(n,a):o==="dangerouslySetInnerHTML"?lI(n,a):o==="children"?vl(n,a):Up(n,o,a,e)}switch(t){case"input":zA(n,r);break;case"textarea":oI(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?po(n,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?po(n,!!r.multiple,r.defaultValue,!0):po(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Y(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,yI(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(I0=Qt(),Iv(e.child,!0)),bv(e);return;case 19:bv(e);return;case 17:return;case 23:case 24:Iv(e,e.memoizedState!==null);return}throw Error(Y(163))}function bv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZR),e.forEach(function(r){var i=hB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nB(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var rB=Math.ceil,Cf=bs.ReactCurrentDispatcher,_0=bs.ReactCurrentOwner,de=0,Yt=null,ht=null,kt=0,ys=0,vg=Qi(0),St=0,hh=null,Yo=0,Kl=0,$o=0,x0=0,yg=null,I0=0,_g=1/0;function Xo(){_g=Qt()+500}var te=null,wf=!1,xg=null,lr=null,bi=!1,rl=null,ka=90,Ig=[],Cg=[],Lr=null,il=0,wg=null,Du=-1,Sr=0,Fu=0,sl=null,Qu=!1;function fn(){return(de&48)!==0?Qt():Du!==-1?Du:Du=Qt()}function mi(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return Po()===99?1:2;if(Sr===0&&(Sr=Yo),jR.transition!==0){Fu!==0&&(Fu=yg!==null?yg.pendingLanes:0),t=Sr;var e=4186112&~Fu;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Po(),(de&4)!==0&&t===98?t=lf(12,Sr):(t=Yb(t),t=lf(t,Sr)),t}function Ei(t,e,n){if(50<il)throw il=0,wg=null,Error(Y(185));if(t=dh(t,e),t===null)return null;sh(t,e,n),t===Yt&&($o|=e,St===4&&xo(t,kt));var r=Po();e===1?(de&8)!==0&&(de&48)===0?Tg(t):(bn(t,n),de===0&&(Xo(),mr())):((de&4)===0||r!==98&&r!==99||(Lr===null?Lr=new Set([t]):Lr.add(t)),bn(t,n)),yg=t}function dh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function bn(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ti(o),l=1<<a,c=s[a];if(c===-1){if((l&r)===0||(l&i)!==0){c=e,Xs(l);var u=Ge;s[a]=10<=u?c+250:6<=u?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);o&=~l}if(r=Il(t,t===Yt?kt:0),e=Ge,r===0)n!==null&&(n!==wd&&ag(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==wd&&ag(n)}e===15?(n=Tg.bind(null,t),Tr===null?(Tr=[n],Ou=c0(uh,XI)):Tr.push(n),n=wd):e===14?n=Sl(99,Tg.bind(null,t)):(n=$b(e),n=Sl(n,EC.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function EC(t){if(Du=-1,Fu=Sr=0,(de&48)!==0)throw Error(Y(327));var e=t.callbackNode;if(ki()&&t.callbackNode!==e)return null;var n=Il(t,t===Yt?kt:0);if(n===0)return null;var r=n,i=de;de|=16;var s=xC();(Yt!==t||kt!==r)&&(Xo(),Io(t,r));do try{oB();break}catch(a){_C(t,a)}while(1);if(u0(),Cf.current=s,de=i,ht!==null?r=0:(Yt=null,kt=0,r=St),(Yo&$o)!==0)Io(t,0);else if(r!==0){if(r===2&&(de|=64,t.hydrate&&(t.hydrate=!1,a0(t.containerInfo)),n=SI(t),n!==0&&(r=Ua(t,n))),r===1)throw e=hh,Io(t,0),xo(t,n),bn(t,Qt()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(Y(345));case 2:Ji(t);break;case 3:if(xo(t,n),(n&62914560)===n&&(r=I0+500-Qt(),10<r)){if(Il(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=XE(Ji.bind(null,t),r);break}Ji(t);break;case 4:if(xo(t,n),(n&4186112)===n)break;for(r=t.eventTimes,i=-1;0<n;){var o=31-Ti(n);s=1<<o,o=r[o],o>i&&(i=o),n&=~s}if(n=i,n=Qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rB(n/1960))-n,10<n){t.timeoutHandle=XE(Ji.bind(null,t),n);break}Ji(t);break;case 5:Ji(t);break;default:throw Error(Y(329))}}return bn(t,Qt()),t.callbackNode===e?EC.bind(null,t):null}function xo(t,e){for(e&=~x0,e&=~$o,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ti(e),r=1<<n;t[n]=-1,e&=~r}}function Tg(t){if((de&48)!==0)throw Error(Y(327));if(ki(),t===Yt&&(t.expiredLanes&kt)!==0){var e=kt,n=Ua(t,e);(Yo&$o)!==0&&(e=Il(t,e),n=Ua(t,e))}else e=Il(t,0),n=Ua(t,e);if(t.tag!==0&&n===2&&(de|=64,t.hydrate&&(t.hydrate=!1,a0(t.containerInfo)),e=SI(t),e!==0&&(n=Ua(t,e))),n===1)throw n=hh,Io(t,0),xo(t,e),bn(t,Qt()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ji(t),bn(t,Qt()),null}function iB(){if(Lr!==null){var t=Lr;Lr=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,bn(e,Qt())})}mr()}function vC(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Xo(),mr())}}function yC(t,e){var n=de;de&=-2,de|=8;try{return t(e)}finally{de=n,de===0&&(Xo(),mr())}}function Wc(t,e){st(vg,ys),ys|=e,Yo|=e}function C0(){ys=vg.current,We(vg)}function Io(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QR(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&hf();break;case 3:No(),We(en),We(Ut),A0();break;case 5:d0(r);break;case 4:No();break;case 13:We(it);break;case 19:We(it);break;case 10:f0(r);break;case 23:case 24:C0()}n=n.return}Yt=t,ht=Ri(t.current,null),kt=ys=Yo=e,St=0,hh=null,x0=$o=Kl=0}function _C(t,e){do{var n=ht;try{if(u0(),tl.current=If,vf){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vf=!1}if(Pl=0,wt=Mt=lt=null,nl=!1,_0.current=null,n===null||n.return===null){St=1,hh=e,ht=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=kt,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l;if((a.mode&2)===0){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=(it.current&1)!==0,h=o;do{var d;if(d=h.tag===13){var A=h.memoizedState;if(A!==null)d=A.dehydrated!==null;else{var p=h.memoizedProps;d=p.fallback===void 0?!1:p.unstable_avoidThisFallback!==!0?!0:!f}}if(d){var g=h.updateQueue;if(g===null){var m=new Set;m.add(c),h.updateQueue=m}else g.add(c);if((h.mode&2)===0){if(h.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var E=gi(-1,1);E.tag=2,pi(a,E)}a.lanes|=1;break e}l=void 0,a=e;var v=s.pingCache;if(v===null?(v=s.pingCache=new JR,l=new Set,v.set(c,l)):(l=v.get(c),l===void 0&&(l=new Set,v.set(c,l))),!l.has(a)){l.add(a);var y=fB.bind(null,s,c,a);c.then(y,y)}h.flags|=4096,h.lanes=e;break e}h=h.return}while(h!==null);l=Error((go(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}St!==5&&(St=2),l=y0(l,a),h=o;do{switch(h.tag){case 3:s=l,h.flags|=4096,e&=-e,h.lanes|=e;var C=gC(h,s,e);nv(h,C);break e;case 1:s=l;var x=h.type,B=h.stateNode;if((h.flags&64)===0&&(typeof x.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(lr===null||!lr.has(B)))){h.flags|=4096,e&=-e,h.lanes|=e;var R=pC(h,s,e);nv(h,R);break e}}h=h.return}while(h!==null)}CC(n)}catch(b){e=b,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(1)}function xC(){var t=Cf.current;return Cf.current=If,t===null?If:t}function Ua(t,e){var n=de;de|=16;var r=xC();Yt===t&&kt===e||Io(t,e);do try{sB();break}catch(i){_C(t,i)}while(1);if(u0(),de=n,Cf.current=r,ht!==null)throw Error(Y(261));return Yt=null,kt=0,St}function sB(){for(;ht!==null;)IC(ht)}function oB(){for(;ht!==null&&!GR();)IC(ht)}function IC(t){var e=TC(t.alternate,t,ys);t.memoizedProps=t.pendingProps,e===null?CC(t):ht=e,_0.current=null}function CC(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&2048)===0){if(n=KR(n,e,ys),n!==null){ht=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||(ys&1073741824)!==0||(n.mode&4)===0){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(n=qR(e),n!==null){n.flags&=2047,ht=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);St===0&&(St=5)}function Ji(t){var e=Po();return vs(99,aB.bind(null,t,e)),null}function aB(t,e){do ki();while(rl!==null);if((de&48)!==0)throw Error(Y(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,a=t.expirationTimes;0<s;){var l=31-Ti(s),c=1<<l;i[l]=0,o[l]=-1,a[l]=-1,s&=~c}if(Lr!==null&&(r&24)===0&&Lr.has(t)&&Lr.delete(t),t===Yt&&(ht=Yt=null,kt=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=de,de|=32,_0.current=null,xd=Pu,o=VE(),ng(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&c.rangeCount!==0){a=c.anchorNode,s=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var u=0,f=-1,h=-1,d=0,A=0,p=o,g=null;t:for(;;){for(var m;p!==a||s!==0&&p.nodeType!==3||(f=u+s),p!==l||c!==0&&p.nodeType!==3||(h=u+c),p.nodeType===3&&(u+=p.nodeValue.length),(m=p.firstChild)!==null;)g=p,p=m;for(;;){if(p===o)break t;if(g===a&&++d===s&&(f=u),g===l&&++A===c&&(h=u),(m=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=m}a=f===-1||h===-1?null:{start:f,end:h}}else a=null;a=a||{start:0,end:0}}else a=null;Id={focusedElem:o,selectionRange:a},Pu=!1,sl=null,Qu=!1,te=r;do try{lB()}catch(b){if(te===null)throw Error(Y(330));vi(te,b),te=te.nextEffect}while(te!==null);sl=null,te=r;do try{for(o=t;te!==null;){var E=te.flags;if(E&16&&vl(te.stateNode,""),E&128){var v=te.alternate;if(v!==null){var y=v.ref;y!==null&&(typeof y=="function"?y(null):y.current=null)}}switch(E&1038){case 2:Sv(te),te.flags&=-3;break;case 6:Sv(te),te.flags&=-3,Bd(te.alternate,te);break;case 1024:te.flags&=-1025;break;case 1028:te.flags&=-1025,Bd(te.alternate,te);break;case 4:Bd(te.alternate,te);break;case 8:a=te,mC(o,a);var C=a.alternate;wv(a),C!==null&&wv(C)}te=te.nextEffect}}catch(b){if(te===null)throw Error(Y(330));vi(te,b),te=te.nextEffect}while(te!==null);if(y=Id,v=VE(),E=y.focusedElem,o=y.selectionRange,v!==E&&E&&E.ownerDocument&&OI(E.ownerDocument.documentElement,E)){for(o!==null&&ng(E)&&(v=o.start,y=o.end,y===void 0&&(y=v),"selectionStart"in E?(E.selectionStart=v,E.selectionEnd=Math.min(y,E.value.length)):(y=(v=E.ownerDocument||document)&&v.defaultView||window,y.getSelection&&(y=y.getSelection(),a=E.textContent.length,C=Math.min(o.start,a),o=o.end===void 0?C:Math.min(o.end,a),!y.extend&&C>o&&(a=o,o=C,C=a),a=GE(E,C),s=GE(E,o),a&&s&&(y.rangeCount!==1||y.anchorNode!==a.node||y.anchorOffset!==a.offset||y.focusNode!==s.node||y.focusOffset!==s.offset)&&(v=v.createRange(),v.setStart(a.node,a.offset),y.removeAllRanges(),C>o?(y.addRange(v),y.extend(s.node,s.offset)):(v.setEnd(s.node,s.offset),y.addRange(v)))))),v=[],y=E;y=y.parentNode;)y.nodeType===1&&v.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<v.length;E++)y=v[E],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}Pu=!!xd,Id=xd=null,t.current=n,te=r;do try{for(E=t;te!==null;){var x=te.flags;if(x&36&&tB(E,te.alternate,te),x&128){v=void 0;var B=te.ref;if(B!==null){var R=te.stateNode;switch(te.tag){case 5:v=R;break;default:v=R}typeof B=="function"?B(v):B.current=v}}te=te.nextEffect}}catch(b){if(te===null)throw Error(Y(330));vi(te,b),te=te.nextEffect}while(te!==null);te=null,zR(),de=i}else t.current=n;if(bi)bi=!1,rl=t,ka=e;else for(te=r;te!==null;)e=te.nextEffect,te.nextEffect=null,te.flags&8&&(x=te,x.sibling=null,x.stateNode=null),te=e;if(r=t.pendingLanes,r===0&&(lr=null),r===1?t===wg?il++:(il=0,wg=t):il=0,n=n.stateNode,As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(l0,n,void 0,(n.current.flags&64)===64)}catch{}if(bn(t,Qt()),wf)throw wf=!1,t=xg,xg=null,t;return(de&8)!==0||mr(),null}function lB(){for(;te!==null;){var t=te.alternate;Qu||sl===null||((te.flags&8)!==0?SE(te,sl)&&(Qu=!0):te.tag===13&&nB(t,te)&&SE(te,sl)&&(Qu=!0));var e=te.flags;(e&256)!==0&&eB(t,te),(e&512)===0||bi||(bi=!0,Sl(97,function(){return ki(),null})),te=te.nextEffect}}function ki(){if(ka!==90){var t=97<ka?97:ka;return ka=90,vs(t,uB)}return!1}function cB(t,e){Ig.push(e,t),bi||(bi=!0,Sl(97,function(){return ki(),null}))}function wC(t,e){Cg.push(e,t),bi||(bi=!0,Sl(97,function(){return ki(),null}))}function uB(){if(rl===null)return!1;var t=rl;if(rl=null,(de&48)!==0)throw Error(Y(331));var e=de;de|=32;var n=Cg;Cg=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(l){if(s===null)throw Error(Y(330));vi(s,l)}}for(n=Ig,Ig=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var a=i.create;i.destroy=a()}catch(l){if(s===null)throw Error(Y(330));vi(s,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return de=e,mr(),!0}function Rv(t,e,n){e=y0(n,e),e=gC(t,e,1),pi(t,e),e=fn(),t=dh(t,1),t!==null&&(sh(t,1,e),bn(t,e))}function vi(t,e){if(t.tag===3)Rv(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){Rv(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lr===null||!lr.has(r))){t=y0(e,t);var i=pC(n,t,1);if(pi(n,i),i=fn(),n=dh(n,1),n!==null)sh(n,1,i),bn(n,i);else if(typeof r.componentDidCatch=="function"&&(lr===null||!lr.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}n=n.return}}function fB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(kt&n)===n&&(St===4||St===3&&(kt&62914560)===kt&&500>Qt()-I0?Io(t,0):x0|=n),bn(t,e)}function hB(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=Po()===99?1:2:(Sr===0&&(Sr=Yo),e=Ks(62914560&~Sr),e===0&&(e=4194304))),n=fn(),t=dh(t,e),t!==null&&(sh(t,e,n),bn(t,n))}var TC;TC=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)zn=!0;else if((n&r)!==0)zn=(t.flags&16384)!==0;else{switch(zn=!1,e.tag){case 3:gv(e),Sd();break;case 5:ov(e);break;case 1:tn(e.type)&&Mu(e);break;case 4:ug(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;st(df,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(n&e.child.childLanes)!==0?pv(t,e,n):(st(it,it.current&1),e=Pr(t,e,n),e!==null?e.sibling:null);st(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&64)!==0){if(r)return _v(t,e,n);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),st(it,it.current),r)break;return null;case 23:case 24:return e.lanes=0,bd(t,e,n)}return Pr(t,e,n)}else zn=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=Bo(e,Ut.current),yo(e,n),i=p0(null,e,r,t,i,n),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)){var s=!0;Mu(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,h0(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&pf(e,r,o,t),i.updater=fh,e.stateNode=i,i._reactInternals=e,cg(e,r,t,n),e=Ag(null,e,r,!0,s,n)}else e.tag=0,Zt(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=AB(i),t=Un(i,t),s){case 0:e=dg(null,e,i,t,n);break e;case 1:e=Av(null,e,i,t,n);break e;case 11:e=hv(null,e,i,t,n);break e;case 14:e=dv(null,e,i,Un(i.type,t),r,n);break e}throw Error(Y(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),dg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Av(t,e,r,i,n);case 3:if(gv(e),r=e.updateQueue,t===null||r===null)throw Error(Y(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,qI(t,e),bl(e,r,null,n),r=e.memoizedState.element,r===i)Sd(),e=Pr(t,e,n);else{if(i=e.stateNode,(s=i.hydrate)&&(ci=vo(e.stateNode.containerInfo.firstChild),Br=e,s=hr=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],_o.push(s);for(n=tC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else Zt(t,e,r,n),Sd();e=e.child}return e;case 5:return ov(e),t===null&&fg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sg(r,i)?o=null:s!==null&&sg(r,s)&&(e.flags|=16),fC(t,e),Zt(t,e,o,n),e.child;case 6:return t===null&&fg(e),null;case 13:return pv(t,e,n);case 4:return ug(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mf(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),hv(t,e,r,i,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(st(df,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=xn(a,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!en.current){e=Pr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r&&(c.observedBits&s)!==0){a.tag===1&&(c=gi(-1,n&-n),c.tag=2,pi(a,c)),a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),KI(a.return,n),l.lanes|=n;break}c=c.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,yo(e,n),i=Sn(i,s.unstable_observedBits),r=r(i),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return i=e.type,s=Un(i,e.pendingProps),s=Un(i.type,s),dv(t,e,i,s,r,n);case 15:return uC(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,tn(r)?(t=!0,Mu(e)):t=!1,yo(e,n),ZI(e,r,i),cg(e,r,i,n),Ag(null,e,r,!0,t,n);case 19:return _v(t,e,n);case 23:return bd(t,e,n);case 24:return bd(t,e,n)}throw Error(Y(156,e.tag))};function dB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new dB(t,e,n,r)}function w0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AB(t){if(typeof t=="function")return w0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nh)return 11;if(t===rh)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ku(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")w0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oi:return Co(n.children,i,s,e);case nI:o=8,i|=16;break;case Gp:o=8,i|=1;break;case $a:return t=In(12,n,e,i|8),t.elementType=$a,t.type=$a,t.lanes=s,t;case Xa:return t=In(13,n,e,i),t.type=Xa,t.elementType=Xa,t.lanes=s,t;case rf:return t=In(19,n,e,i),t.elementType=rf,t.lanes=s,t;case Yp:return T0(n,i,s,e);case GA:return t=In(24,n,e,i),t.elementType=GA,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vp:o=10;break e;case zp:o=9;break e;case nh:o=11;break e;case rh:o=14;break e;case jp:o=16,r=null;break e;case Hp:o=22;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Co(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function T0(t,e,n,r){return t=In(23,t,r,e),t.elementType=Yp,t.lanes=n,t}function Pd(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function Nd(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gB(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=gd(0),this.expirationTimes=gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gd(0),this.mutableSourceEagerHydrationData=null}function pB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tf(t,e,n,r){var i=e.current,s=fn(),o=mi(i);e:if(n){n=n._reactInternals;t:{if(Rs(n)!==n||n.tag!==1)throw Error(Y(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(tn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(Y(171))}if(n.tag===1){var l=n.type;if(tn(l)){n=zI(n,l,a);break e}}n=a}else n=Si;return e.context===null?e.context=n:e.pendingContext=n,e=gi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),pi(i,e),Ei(i,o,s),o}function Ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S0(t,e){Bv(t,e),(t=t.alternate)&&Bv(t,e)}function mB(){return null}function b0(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new gB(t,e,n!=null&&n.hydrate===!0),e=In(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,h0(e),t[Wo]=n.current,QI(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var i=e._getVersion;i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}b0.prototype.render=function(t){Tf(t,this._internalRoot,null,null)};b0.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Tf(null,t,null,function(){e[Wo]=null})};function ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function EB(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new b0(t,0,e?{hydrate:!0}:void 0)}function Ah(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var c=Ld(o);a.call(c)}}Tf(e,o,t,i)}else{if(s=n._reactRootContainer=EB(n,r),o=s._internalRoot,typeof i=="function"){var l=i;i=function(){var c=Ld(o);l.call(c)}}yC(function(){Tf(e,o,t,i)})}return Ld(o)}mI=function(t){if(t.tag===13){var e=fn();Ei(t,4,e),S0(t,4)}};Jp=function(t){if(t.tag===13){var e=fn();Ei(t,67108864,e),S0(t,67108864)}};EI=function(t){if(t.tag===13){var e=fn(),n=mi(t);Ei(t,n,e),S0(t,n)}};vI=function(t,e){return e()};qA=function(t,e,n){switch(e){case"input":if(zA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ch(r);if(!i)throw Error(Y(90));iI(r),zA(r,i)}}}break;case"textarea":oI(t,n);break;case"select":e=n.value,e!=null&&po(t,!!n.multiple,e,!1)}};Xp=vC;dI=function(t,e,n,r,i){var s=de;de|=4;try{return vs(98,t.bind(null,e,n,r,i))}finally{de=s,de===0&&(Xo(),mr())}};Kp=function(){(de&49)===0&&(iB(),ki())};AI=function(t,e){var n=de;de|=2;try{return t(e)}finally{de=n,de===0&&(Xo(),mr())}};function SC(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ql(e))throw Error(Y(200));return pB(t,e,null,n)}var vB={Events:[$l,io,ch,fI,hI,ki,{current:!1}]},Ta={findFiberByHostInstance:os,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},yB={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pI(t),t===null?null:t.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||mB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{l0=Yc.inject(yB),As=Yc}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vB;Bn.createPortal=SC;Bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):Error(Y(268,Object.keys(t)));return t=pI(e),t=t===null?null:t.stateNode,t};Bn.flushSync=function(t,e){var n=de;if((n&48)!==0)return t(e);de|=1;try{if(t)return vs(99,t.bind(null,e))}finally{de=n,mr()}};Bn.hydrate=function(t,e,n){if(!ql(e))throw Error(Y(200));return Ah(null,t,e,!0,n)};Bn.render=function(t,e,n){if(!ql(e))throw Error(Y(200));return Ah(null,t,e,!1,n)};Bn.unmountComponentAtNode=function(t){if(!ql(t))throw Error(Y(40));return t._reactRootContainer?(yC(function(){Ah(null,null,t,!1,function(){t._reactRootContainer=null,t[Wo]=null})}),!0):!1};Bn.unstable_batchedUpdates=vC;Bn.unstable_createPortal=function(t,e){return SC(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ql(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Ah(t,e,n,!1,r)};Bn.version="17.0.2";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Bn})(zr);const Uu=Fx(zr.exports),Lo=Symbol(),bC=t=>!!t[Lo],_B=t=>!t[Lo].c,$c=t=>{var e,n;(n=(e=t[Lo]).c)==null||n.call(e)},Gu=(t,e)=>{const n=t[Lo].o,r=e[Lo].o;return n===r||t===r||bC(n)&&Gu(n,e)},Pv=t=>{const e={o:t,c:null},n=new Promise(r=>{e.c=()=>{e.c=null,r()},t.then(e.c,e.c)});return n[Lo]=e,n};var xB=Object.defineProperty,IB=Object.defineProperties,CB=Object.getOwnPropertyDescriptors,Nv=Object.getOwnPropertySymbols,wB=Object.prototype.hasOwnProperty,TB=Object.prototype.propertyIsEnumerable,Lv=(t,e,n)=>e in t?xB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SB=(t,e)=>{for(var n in e||(e={}))wB.call(e,n)&&Lv(t,n,e[n]);if(Nv)for(var n of Nv(e))TB.call(e,n)&&Lv(t,n,e[n]);return t},bB=(t,e)=>IB(t,CB(e));const Md=t=>"init"in t,RC="r",BC="w",R0="c",PC="s",RB="h";const BB=t=>{const e=new WeakMap,n=new WeakMap,r=new Map;let i,s;if(t)for(const[P,S]of t){const L={v:S,r:0,d:new Map};e.set(P,L)}const o=new WeakMap,a=(P,S,L)=>{let O=o.get(S);O||(O=new Map,o.set(S,O)),L.then(()=>{O.get(P)===L&&(O.delete(P),O.size||o.delete(S))}),O.set(P,L)},l=P=>{const S=new Set,L=o.get(P);return L&&(o.delete(P),L.forEach((O,k)=>{$c(O),S.add(k)})),S},c=new WeakMap,u=P=>{let S=c.get(P);return S||(S=new Map,c.set(P,S)),S},f=(P,S)=>{if(P){const L=u(P);let O=L.get(S);return O||(O=f(P.p,S),O&&("p"in O&&O.p.then(()=>L.delete(S)),L.set(S,O))),O}return e.get(S)},h=(P,S,L)=>{if(P)u(P).set(S,L);else{const O=e.get(S);e.set(S,L),r.has(S)||r.set(S,O)}},d=(P,S=new Map,L)=>{if(!L)return S;const O=new Map;let k=!1;return L.forEach(F=>{var U;const $=((U=f(P,F))==null?void 0:U.r)||0;O.set(F,$),S.get(F)!==$&&(k=!0)}),S.size===O.size&&!k?S:O},A=(P,S,L,O,k)=>{const F=f(P,S);if(F){if(k&&(!("p"in F)||!Gu(F.p,k)))return F;"p"in F&&$c(F.p)}const U={v:L,r:(F==null?void 0:F.r)||0,d:d(P,F==null?void 0:F.d,O)};return!F||!("v"in F)||!Object.is(F.v,L)?(++U.r,U.d.has(S)&&(U.d=new Map(U.d).set(S,U.r))):U.d!==F.d&&(U.d.size!==F.d.size||!Array.from(U.d.keys()).every($=>F.d.has($)))&&Promise.resolve().then(()=>{X(P)}),h(P,S,U),U},p=(P,S,L,O,k)=>{const F=f(P,S);if(F){if(k&&(!("p"in F)||!Gu(F.p,k)))return F;"p"in F&&$c(F.p)}const U={e:L,r:(F==null?void 0:F.r)||0,d:d(P,F==null?void 0:F.d,O)};return h(P,S,U),U},g=(P,S,L,O)=>{const k=f(P,S);if(k&&"p"in k){if(Gu(k.p,L))return k;$c(k.p)}a(P,S,L);const F={p:L,r:(k==null?void 0:k.r)||0,d:d(P,k==null?void 0:k.d,O)};return h(P,S,F),F},m=(P,S,L,O)=>{if(L instanceof Promise){const k=Pv(L.then(F=>{A(P,S,F,O,k),X(P)}).catch(F=>{if(F instanceof Promise)return bC(F)?F.then(()=>{v(P,S,!0)}):F;p(P,S,F,O,k),X(P)}));return g(P,S,k,O)}return A(P,S,L,O)},E=(P,S)=>{const L=f(P,S);if(L){const O=bB(SB({},L),{i:L.r});h(P,S,O)}},v=(P,S,L)=>{if(!L){const k=f(P,S);if(k&&(k.r!==k.i&&"p"in k&&!_B(k.p)||(k.d.forEach((F,U)=>{if(U!==S)if(!n.has(U))v(P,U);else{const $=f(P,U);$&&$.r===$.i&&v(P,U)}}),Array.from(k.d).every(([F,U])=>{const $=f(P,F);return $&&"v"in $&&$.r===U}))))return k}const O=new Set;try{const k=S.read(F=>{O.add(F);const U=F===S?f(P,F):v(P,F);if(U){if("e"in U)throw U.e;if("p"in U)throw U.p;return U.v}if(Md(F))return F.init;throw new Error("no atom init")});return m(P,S,k,O)}catch(k){if(k instanceof Promise){const F=Pv(k);return g(P,S,F,O)}return p(P,S,k,O)}},y=(P,S)=>v(S,P),C=P=>{let S=n.get(P);return S||(S=D(P)),S},x=(P,S)=>!S.l.size&&(!S.t.size||S.t.size===1&&S.t.has(P)),B=P=>{const S=n.get(P);S&&x(P,S)&&G(P)},R=(P,S)=>{const L=n.get(S);L==null||L.t.forEach(O=>{O!==S&&(E(P,O),R(P,O))})},b=(P,S,L)=>{let O=!0;const k=($,ie)=>{typeof ie=="boolean"&&(console.warn("[DEPRECATED] Please use { unstable_promise: true }"),ie={unstable_promise:ie});const ee=v(P,$);if("e"in ee)throw ee.e;if("p"in ee){if(ie!=null&&ie.unstable_promise)return ee.p.then(()=>k($,ie));throw ee.p}if("v"in ee)return ee.v;throw new Error("no value found")},F=($,ie)=>{let ee;if($===S){if(!Md($))throw new Error("atom not writable");l($).forEach(ae=>{ae!==P&&m(ae,$,ie)}),m(P,$,ie),R(P,$)}else ee=b(P,$,ie);return O||X(P),ee},U=S.write(k,F,L);return O=!1,P=void 0,U},N=(P,S,L)=>{const O=b(L,P,S);return X(L),O},H=P=>!!P.write,D=(P,S)=>{const L={t:new Set(S&&[S]),l:new Set};if(n.set(P,L),v(void 0,P).d.forEach((k,F)=>{const U=n.get(F);U?U.t.add(P):F!==P&&D(F,P)}),H(P)&&P.onMount){const k=U=>N(P,U),F=P.onMount(k);F&&(L.u=F)}return L},G=P=>{var S;const L=(S=n.get(P))==null?void 0:S.u;L&&L(),n.delete(P);const O=f(void 0,P);O&&O.d.forEach((k,F)=>{if(F!==P){const U=n.get(F);U&&(U.t.delete(P),x(F,U)&&G(F))}})},W=(P,S,L)=>{const O=new Set(S.d.keys());L==null||L.forEach((k,F)=>{if(O.has(F)){O.delete(F);return}const U=n.get(F);U&&(U.t.delete(P),x(F,U)&&G(F))}),O.forEach(k=>{const F=n.get(k);F?F.t.add(P):n.has(P)&&D(k,P)})},X=P=>{if(P){u(P).forEach((L,O)=>{if(L!==e.get(O)){const k=n.get(O);k==null||k.l.forEach(F=>F(P))}});return}for(;r.size;){const S=Array.from(r);r.clear(),S.forEach(([L,O])=>{const k=f(void 0,L);k&&k.d!==(O==null?void 0:O.d)&&W(L,k,O==null?void 0:O.d);const F=n.get(L);F==null||F.l.forEach(U=>U())})}},oe=P=>{u(P).forEach((L,O)=>{const k=e.get(O);(L.r>((k==null?void 0:k.r)||0)||"v"in L&&L.r===(k==null?void 0:k.r)&&L.d!==(k==null?void 0:k.d))&&(e.set(O,L),L.d!==(k==null?void 0:k.d)&&W(O,L,k==null?void 0:k.d))})},ge=(P,S)=>{S&&oe(S),X(void 0)},ne=(P,S)=>{const O=C(P).l;return O.add(S),()=>{O.delete(S),B(P)}},fe=(P,S)=>{for(const[L,O]of P)Md(L)&&(m(S,L,O),R(S,L));X(S)};return{[RC]:y,[BC]:N,[R0]:ge,[PC]:ne,[RB]:fe}},NC=t=>({s:BB(t)}),Od=new Map,B0=t=>(Od.has(t)||Od.set(t,w.exports.createContext(NC())),Od.get(t));const PB=({children:t,initialValues:e,scope:n,unstable_enableVersionedWrite:r})=>{const[i,s]=w.exports.useState();w.exports.useEffect(()=>{i&&(o.current.s[R0](null,i),delete i.p)},[i]);const o=w.exports.useRef();o.current||(o.current=NC(e),r&&(o.current.w=l=>{s(c=>{const u=c?{p:c}:{};return l(u),u})}));const a=B0(n);return w.exports.createElement(a.Provider,{value:o.current},t)};let NB=0;function Gn(t,e){const n=`atom${++NB}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=i=>i(r),r.write=(i,s,o)=>s(r,typeof o=="function"?o(i(r)):o)),e&&(r.write=e),r}const LB=t=>!!t.write;function gr(t,e){"scope"in t&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),e=t.scope);const n=B0(e),{s:r,w:i}=w.exports.useContext(n),s=w.exports.useCallback(f=>{const h=r[RC](t,f);if("e"in h)throw h.e;if("p"in h)throw h.p;if("v"in h)return h.v;throw new Error("no atom value")},[r,t]),[[o,a,l],c]=w.exports.useReducer(w.exports.useCallback((f,h)=>{const d=s(h);return Object.is(f[1],d)&&f[2]===t?f:[h,d,t]},[s,t]),void 0,()=>{const h=s(void 0);return[void 0,h,t]});l!==t&&c(void 0),w.exports.useEffect(()=>{const f=r[PC](t,c);return c(void 0),f},[r,t]),w.exports.useEffect(()=>{r[R0](t,o)});const u=w.exports.useCallback(f=>{if(LB(t)){const h=d=>r[BC](t,f,d);return i?i(h):h()}else throw new Error("not writable atom")},[r,i,t]);return w.exports.useDebugValue(a),[a,u]}function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j.apply(this,arguments)}function Sg(t){return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function Dd(t){return t&&Sg(t)==="object"&&t.constructor===Object}function Mo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{clone:!0},r=n.clone?j({},t):t;return Dd(t)&&Dd(e)&&Object.keys(e).forEach(function(i){i!=="__proto__"&&(Dd(e[i])&&i in t?r[i]=Mo(t[i],e[i],n):r[i]=e[i])}),r}var LC={exports:{}},MB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",OB=MB,DB=OB;function MC(){}function OC(){}OC.resetWarningCache=MC;var FB=function(){function t(r,i,s,o,a,l){if(l!==DB){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:OC,resetWarningCache:MC};return n.PropTypes=n,n};LC.exports=FB();function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nl(t){for(var e="https://material-ui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+t+"; visit "+e+" for the full message."}var QB={exports:{}},Fe={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=60103,ph=60106,Jl=60107,Zl=60108,ec=60114,tc=60109,nc=60110,rc=60112,ic=60113,P0=60120,sc=60115,oc=60116,DC=60121,FC=60122,QC=60117,kC=60129,UC=60131;if(typeof Symbol=="function"&&Symbol.for){var It=Symbol.for;gh=It("react.element"),ph=It("react.portal"),Jl=It("react.fragment"),Zl=It("react.strict_mode"),ec=It("react.profiler"),tc=It("react.provider"),nc=It("react.context"),rc=It("react.forward_ref"),ic=It("react.suspense"),P0=It("react.suspense_list"),sc=It("react.memo"),oc=It("react.lazy"),DC=It("react.block"),FC=It("react.server.block"),QC=It("react.fundamental"),kC=It("react.debug_trace_mode"),UC=It("react.legacy_hidden")}function Jn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gh:switch(t=t.type,t){case Jl:case ec:case Zl:case ic:case P0:return t;default:switch(t=t&&t.$$typeof,t){case nc:case rc:case oc:case sc:case tc:return t;default:return e}}case ph:return e}}}var kB=tc,UB=gh,GB=rc,VB=Jl,zB=oc,jB=sc,HB=ph,WB=ec,YB=Zl,$B=ic;Fe.ContextConsumer=nc;Fe.ContextProvider=kB;Fe.Element=UB;Fe.ForwardRef=GB;Fe.Fragment=VB;Fe.Lazy=zB;Fe.Memo=jB;Fe.Portal=HB;Fe.Profiler=WB;Fe.StrictMode=YB;Fe.Suspense=$B;Fe.isAsyncMode=function(){return!1};Fe.isConcurrentMode=function(){return!1};Fe.isContextConsumer=function(t){return Jn(t)===nc};Fe.isContextProvider=function(t){return Jn(t)===tc};Fe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gh};Fe.isForwardRef=function(t){return Jn(t)===rc};Fe.isFragment=function(t){return Jn(t)===Jl};Fe.isLazy=function(t){return Jn(t)===oc};Fe.isMemo=function(t){return Jn(t)===sc};Fe.isPortal=function(t){return Jn(t)===ph};Fe.isProfiler=function(t){return Jn(t)===ec};Fe.isStrictMode=function(t){return Jn(t)===Zl};Fe.isSuspense=function(t){return Jn(t)===ic};Fe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Jl||t===ec||t===kC||t===Zl||t===ic||t===P0||t===UC||typeof t=="object"&&t!==null&&(t.$$typeof===oc||t.$$typeof===sc||t.$$typeof===tc||t.$$typeof===nc||t.$$typeof===rc||t.$$typeof===QC||t.$$typeof===DC||t[0]===FC)};Fe.typeOf=Jn;(function(t){t.exports=Fe})(QB);var XB=typeof Symbol=="function"&&Symbol.for;const GC=XB?Symbol.for("mui.nested"):"__THEME_NESTED__";var KB=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function qB(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.disableGlobal,n=e===void 0?!1:e,r=t.productionPrefix,i=r===void 0?"jss":r,s=t.seed,o=s===void 0?"":s,a=o===""?"":"".concat(o,"-"),l=0,c=function(){return l+=1,l};return function(u,f){var h=f.options.name;if(h&&h.indexOf("Mui")===0&&!f.options.link&&!n){if(KB.indexOf(u.key)!==-1)return"Mui-".concat(u.key);var d="".concat(a).concat(h,"-").concat(u.key);return!f.options.theme[GC]||o!==""?d:"".concat(d,"-").concat(c())}return"".concat(a).concat(i).concat(c())}}function VC(t){var e=t.theme,n=t.name,r=t.props;if(!e||!e.props||!e.props[n])return r;var i=e.props[n],s;for(s in i)r[s]===void 0&&(r[s]=i[s]);return r}var Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac=(typeof window>"u"?"undefined":Mv(window))==="object"&&(typeof document>"u"?"undefined":Mv(document))==="object"&&document.nodeType===9;function Ov(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N0(t,e,n){return e&&Ov(t.prototype,e),n&&Ov(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bg(t,e){return bg=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},bg(t,e)}function mh(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,bg(t,e)}function Rg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eh(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var JB={}.constructor;function Bg(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Bg);if(t.constructor!==JB)return t;var e={};for(var n in t)e[n]=Bg(t[n]);return e}function L0(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,i=Bg(e),s=r.plugins.onCreateRule(t,i,n);return s||(t[0],null)}var Dv=function(e,n){for(var r="",i=0;i<e.length&&e[i]!=="!important";i++)r&&(r+=n),r+=e[i];return r},gs=function(e,n){if(n===void 0&&(n=!1),!Array.isArray(e))return e;var r="";if(Array.isArray(e[0]))for(var i=0;i<e.length&&e[i]!=="!important";i++)r&&(r+=", "),r+=Dv(e[i]," ");else r=Dv(e,", ");return!n&&e[e.length-1]==="!important"&&(r+=" !important"),r};function Ko(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Sa(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Ll(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var i=n,s=i.indent,o=s===void 0?0:s,a=e.fallbacks;n.format===!1&&(o=-1/0);var l=Ko(n),c=l.linebreak,u=l.space;if(t&&o++,a)if(Array.isArray(a))for(var f=0;f<a.length;f++){var h=a[f];for(var d in h){var A=h[d];A!=null&&(r&&(r+=c),r+=Sa(d+":"+u+gs(A)+";",o))}}else for(var p in a){var g=a[p];g!=null&&(r&&(r+=c),r+=Sa(p+":"+u+gs(g)+";",o))}for(var m in e){var E=e[m];E!=null&&m!=="fallbacks"&&(r&&(r+=c),r+=Sa(m+":"+u+gs(E)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+c+r+c),Sa(""+t+u+"{"+r,o)+Sa("}",o))}var ZB=/([[\].#*$><+~=|^:(),"'`\s])/g,Fv=typeof CSS<"u"&&CSS.escape,M0=function(t){return Fv?Fv(t):t.replace(ZB,"\\$1")},zC=function(){function t(n,r,i){this.type="style",this.isProcessed=!1;var s=i.sheet,o=i.Renderer;this.key=n,this.options=i,this.style=r,s?this.renderer=s.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,i,s){if(i===void 0)return this.style[r];var o=s?s.force:!1;if(!o&&this.style[r]===i)return this;var a=i;(!s||s.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(i,r,this));var l=a==null||a===!1,c=r in this.style;if(l&&!c&&!o)return this;var u=l&&c;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var f=this.options.sheet;return f&&f.attached,this},t}(),Pg=function(t){mh(e,t);function e(r,i,s){var o;o=t.call(this,r,i,s)||this;var a=s.selector,l=s.scoped,c=s.sheet,u=s.generateId;return a?o.selectorText=a:l!==!1&&(o.id=u(Rg(Rg(o)),c),o.selectorText="."+M0(o.id)),o}var n=e.prototype;return n.applyTo=function(i){var s=this.renderer;if(s){var o=this.toJSON();for(var a in o)s.setProperty(i,a,o[a])}return this},n.toJSON=function(){var i={};for(var s in this.style){var o=this.style[s];typeof o!="object"?i[s]=o:Array.isArray(o)&&(i[s]=gs(o))}return i},n.toString=function(i){var s=this.options.sheet,o=s?s.options.link:!1,a=o?j({},i,{allowEmpty:!0}):i;return Ll(this.selectorText,this.style,a)},N0(e,[{key:"selector",set:function(i){if(i!==this.selectorText){this.selectorText=i;var s=this.renderer,o=this.renderable;if(!(!o||!s)){var a=s.setSelector(o,i);a||s.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(zC),e3={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Pg(e,n,r)}},Fd={indent:1,children:!0},t3=/@([\w-]+)/,n3=function(){function t(n,r,i){this.type="conditional",this.isProcessed=!1,this.key=n;var s=n.match(t3);this.at=s?s[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new vh(j({},i,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,i,s){var o=this.rules.add(r,i,s);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,i,s){var o=this.rules.replace(r,i,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=Fd);var i=Ko(r),s=i.linebreak;if(r.indent==null&&(r.indent=Fd.indent),r.children==null&&(r.children=Fd.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+s+o+s+"}":""},t}(),r3=/@media|@supports\s+/,i3={onCreateRule:function(e,n,r){return r3.test(e)?new n3(e,n,r):null}},Qd={indent:1,children:!0},s3=/@keyframes\s+([\w-]+)/,Ng=function(){function t(n,r,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var s=n.match(s3);s&&s[1]?this.name=s[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var o=i.scoped,a=i.sheet,l=i.generateId;this.id=o===!1?this.name:M0(l(this,a)),this.rules=new vh(j({},i,{parent:this}));for(var c in r)this.rules.add(c,r[c],j({},i,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=Qd);var i=Ko(r),s=i.linebreak;if(r.indent==null&&(r.indent=Qd.indent),r.children==null&&(r.children=Qd.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+s+o+s),this.at+" "+this.id+" {"+o+"}"},t}(),o3=/@keyframes\s+/,a3=/\$([\w-]+)/g,Lg=function(e,n){return typeof e=="string"?e.replace(a3,function(r,i){return i in n?n[i]:r}):e},Qv=function(e,n,r){var i=e[n],s=Lg(i,r);s!==i&&(e[n]=s)},l3={onCreateRule:function(e,n,r){return typeof e=="string"&&o3.test(e)?new Ng(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&Qv(e,"animation-name",r.keyframes),"animation"in e&&Qv(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var i=r.options.sheet;if(!i)return e;switch(n){case"animation":return Lg(e,i.keyframes);case"animation-name":return Lg(e,i.keyframes);default:return e}}},c3=function(t){mh(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(i){var s=this.options.sheet,o=s?s.options.link:!1,a=o?j({},i,{allowEmpty:!0}):i;return Ll(this.key,this.style,a)},e}(zC),u3={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new c3(e,n,r):null}},f3=function(){function t(n,r,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){var i=Ko(r),s=i.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Ll(this.at,this.style[a]),this.style[a+1]&&(o+=s);return o}return Ll(this.at,this.style,r)},t}(),h3=/@font-face/,d3={onCreateRule:function(e,n,r){return h3.test(e)?new f3(e,n,r):null}},A3=function(){function t(n,r,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){return Ll(this.key,this.style,r)},t}(),g3={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new A3(e,n,r):null}},p3=function(){function t(n,r,i){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=i}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var i="",s=0;s<this.value.length;s++)i+=this.key+" "+this.value[s]+";",this.value[s+1]&&(i+=`
`);return i}return this.key+" "+this.value+";"},t}(),m3={"@charset":!0,"@import":!0,"@namespace":!0},E3={onCreateRule:function(e,n,r){return e in m3?new p3(e,n,r):null}},kv=[e3,i3,l3,u3,d3,g3,E3],v3={process:!0},Uv={force:!0,process:!0},vh=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,i,s){var o=this.options,a=o.parent,l=o.sheet,c=o.jss,u=o.Renderer,f=o.generateId,h=o.scoped,d=j({classes:this.classes,parent:a,sheet:l,jss:c,Renderer:u,generateId:f,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},s),A=r;r in this.raw&&(A=r+"-d"+this.counter++),this.raw[A]=i,A in this.classes&&(d.selector="."+M0(this.classes[A]));var p=L0(A,i,d);if(!p)return null;this.register(p);var g=d.index===void 0?this.index.length:d.index;return this.index.splice(g,0,p),p},e.replace=function(r,i,s){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var l=s;return a!==-1&&(l=j({},s,{index:a})),this.add(r,i,l)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Pg?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Ng&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Pg?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Ng&&delete this.keyframes[r.name]},e.update=function(){var r,i,s;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],s=arguments.length<=2?void 0:arguments[2]):(i=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),i,s);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],i,s)},e.updateOne=function(r,i,s){s===void 0&&(s=v3);var o=this.options,a=o.jss.plugins,l=o.sheet;if(r.rules instanceof t){r.rules.update(i,s);return}var c=r.style;if(a.onUpdate(i,r,l,s),s.process&&c&&c!==r.style){a.onProcessStyle(r.style,r,l);for(var u in r.style){var f=r.style[u],h=c[u];f!==h&&r.prop(u,f,Uv)}for(var d in c){var A=r.style[d],p=c[d];A==null&&A!==p&&r.prop(d,null,Uv)}}},e.toString=function(r){for(var i="",s=this.options.sheet,o=s?s.options.link:!1,a=Ko(r),l=a.linebreak,c=0;c<this.index.length;c++){var u=this.index[c],f=u.toString(r);!f&&!o||(i&&(i+=l),i+=f)}return i},t}(),jC=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=j({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new vh(this.options);for(var i in n)this.rules.add(i,n[i]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,i,s){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,i,s);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,i,s){var o=this.rules.get(r);if(!o)return this.addRule(r,i,s);var a=this.rules.replace(r,i,s);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,i){var s=[];for(var o in r){var a=this.addRule(o,r[o],i);a&&s.push(a)}return s},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var i=typeof r=="object"?r:this.rules.get(r);return!i||this.attached&&!i.renderable?!1:(this.rules.remove(i),this.attached&&i.renderable&&this.renderer?this.renderer.deleteRule(i.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,i,s){return this.rules.updateOne(r,i,s),this},e.toString=function(r){return this.rules.toString(r)},t}(),y3=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,i,s){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,i,s);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var i=r.options.sheet,s=0;s<this.registry.onProcessRule.length;s++)this.registry.onProcessRule[s](r,i);r.style&&this.onProcessStyle(r.style,r,i),r.isProcessed=!0}},e.onProcessStyle=function(r,i,s){for(var o=0;o<this.registry.onProcessStyle.length;o++)i.style=this.registry.onProcessStyle[o](i.style,i,s)},e.onProcessSheet=function(r){for(var i=0;i<this.registry.onProcessSheet.length;i++)this.registry.onProcessSheet[i](r)},e.onUpdate=function(r,i,s,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,i,s,o)},e.onChangeValue=function(r,i,s){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,i,s);return o},e.use=function(r,i){i===void 0&&(i={queue:"external"});var s=this.plugins[i.queue];s.indexOf(r)===-1&&(s.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var l in a)l in o&&o[l].push(a[l]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),_3=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var i=this.registry,s=r.options.index;if(i.indexOf(r)===-1){if(i.length===0||s>=this.index){i.push(r);return}for(var o=0;o<i.length;o++)if(i[o].options.index>s){i.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var i=this.registry.indexOf(r);this.registry.splice(i,1)},e.toString=function(r){for(var i=r===void 0?{}:r,s=i.attached,o=Eh(i,["attached"]),a=Ko(o),l=a.linebreak,c="",u=0;u<this.registry.length;u++){var f=this.registry[u];s!=null&&f.attached!==s||(c&&(c+=l),c+=f.toString(o))}return c},N0(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),ol=new _3,Mg=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Og="2f1acc6c3a606b082e5eef5e54414ffb";Mg[Og]==null&&(Mg[Og]=0);var Gv=Mg[Og]++,Vv=function(e){e===void 0&&(e={});var n=0,r=function(s,o){n+=1;var a="",l="";return o&&(o.options.classNamePrefix&&(l=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(l||"c")+Gv+a+n:l+s.key+"-"+Gv+(a?"-"+a:"")+"-"+n};return r},HC=function(e){var n;return function(){return n||(n=e()),n}},x3=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},I3=function(e,n,r){try{var i=r;if(Array.isArray(r)&&(i=gs(r,!0),r[r.length-1]==="!important"))return e.style.setProperty(n,i,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(n,i):e.style.setProperty(n,i)}catch{return!1}return!0},C3=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},w3=function(e,n){return e.selectorText=n,e.selectorText===n},WC=HC(function(){return document.querySelector("head")});function T3(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function S3(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function b3(t){for(var e=WC(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function R3(t){var e=ol.registry;if(e.length>0){var n=T3(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=S3(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var i=b3(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}function B3(t,e){var n=e.insertionPoint,r=R3(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var i=n,s=i.parentNode;s&&s.insertBefore(t,i.nextSibling);return}WC().appendChild(t)}var P3=HC(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),zv=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},jv=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},N3=function(){var e=document.createElement("style");return e.textContent=`
`,e},L3=function(){function t(n){this.getPropertyValue=x3,this.setProperty=I3,this.removeProperty=C3,this.setSelector=w3,this.hasInsertedRules=!1,this.cssRules=[],n&&ol.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},i=r.media,s=r.meta,o=r.element;this.element=o||N3(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),s&&this.element.setAttribute("data-meta",s);var a=P3();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){B3(this.element,this.sheet.options);var r=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(!!this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(!!r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,i){for(var s=0;s<r.index.length;s++)this.insertRule(r.index[s],s,i)},e.insertRule=function(r,i,s){if(s===void 0&&(s=this.element.sheet),r.rules){var o=r,a=s;if(r.type==="conditional"||r.type==="keyframes"){var l=jv(s,i);if(a=zv(s,o.toString({children:!1}),l),a===!1)return!1;this.refCssRule(r,l,a)}return this.insertRules(o.rules,a),a}var c=r.toString();if(!c)return!1;var u=jv(s,i),f=zv(s,c,u);return f===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,f),f)},e.refCssRule=function(r,i,s){r.renderable=s,r.options.parent instanceof jC&&this.cssRules.splice(i,0,s)},e.deleteRule=function(r){var i=this.element.sheet,s=this.indexOf(r);return s===-1?!1:(i.deleteRule(s),this.cssRules.splice(s,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,i){var s=this.indexOf(r);return s===-1?!1:(this.element.sheet.deleteRule(s),this.cssRules.splice(s,1),this.insertRule(i,s))},e.getRules=function(){return this.element.sheet.cssRules},t}(),M3=0,O3=function(){function t(n){this.id=M3++,this.version="10.9.0",this.plugins=new y3,this.options={id:{minify:!1},createGenerateId:Vv,Renderer:ac?L3:null,plugins:[]},this.generateId=Vv({minify:!1});for(var r=0;r<kv.length;r++)this.plugins.use(kv[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=j({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,i){i===void 0&&(i={});var s=i,o=s.index;typeof o!="number"&&(o=ol.index===0?0:ol.index+1);var a=new jC(r,j({},i,{jss:this,generateId:i.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),ol.remove(r),this},e.createRule=function(r,i,s){if(i===void 0&&(i={}),s===void 0&&(s={}),typeof r=="object")return this.createRule(void 0,r,i);var o=j({},s,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=L0(r,i,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.forEach(function(a){r.plugins.use(a)}),this},t}(),YC=function(e){return new O3(e)},O0=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function $C(t){var e=null;for(var n in t){var r=t[n],i=typeof r;if(i==="function")e||(e={}),e[n]=r;else if(i==="object"&&r!==null&&!Array.isArray(r)){var s=$C(r);s&&(e||(e={}),e[n]=s)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */YC();var XC=Date.now(),kd="fnValues"+XC,Ud="fnStyle"+ ++XC,D3=function(){return{onCreateRule:function(n,r,i){if(typeof r!="function")return null;var s=L0(n,{},i);return s[Ud]=r,s},onProcessStyle:function(n,r){if(kd in r||Ud in r)return n;var i={};for(var s in n){var o=n[s];typeof o=="function"&&(delete n[s],i[s]=o)}return r[kd]=i,n},onUpdate:function(n,r,i,s){var o=r,a=o[Ud];a&&(o.style=a(n)||{});var l=o[kd];if(l)for(var c in l)o.prop(c,l[c](n),s)}}};const F3=D3;var yi="@global",Dg="@global ",Q3=function(){function t(n,r,i){this.type="global",this.at=yi,this.isProcessed=!1,this.key=n,this.options=i,this.rules=new vh(j({},i,{parent:this}));for(var s in r)this.rules.add(s,r[s]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,i,s){var o=this.rules.add(r,i,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,i,s){var o=this.rules.replace(r,i,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),k3=function(){function t(n,r,i){this.type="global",this.at=yi,this.isProcessed=!1,this.key=n,this.options=i;var s=n.substr(Dg.length);this.rule=i.jss.createRule(s,r,j({},i,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),U3=/\s*,\s*/g;function KC(t,e){for(var n=t.split(U3),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function G3(t,e){var n=t.options,r=t.style,i=r?r[yi]:null;if(!!i){for(var s in i)e.addRule(s,i[s],j({},n,{selector:KC(s,t.selector)}));delete r[yi]}}function V3(t,e){var n=t.options,r=t.style;for(var i in r)if(!(i[0]!=="@"||i.substr(0,yi.length)!==yi)){var s=KC(i.substr(yi.length),t.selector);e.addRule(s,r[i],j({},n,{selector:s})),delete r[i]}}function z3(){function t(n,r,i){if(!n)return null;if(n===yi)return new Q3(n,r,i);if(n[0]==="@"&&n.substr(0,Dg.length)===Dg)return new k3(n,r,i);var s=i.parent;return s&&(s.type==="global"||s.options.parent&&s.options.parent.type==="global")&&(i.scoped=!1),!i.selector&&i.scoped===!1&&(i.selector=n),null}function e(n,r){n.type!=="style"||!r||(G3(n,r),V3(n,r))}return{onCreateRule:t,onProcessRule:e}}var Hv=/\s*,\s*/g,j3=/&/g,H3=/\$([\w-]+)/g;function W3(){function t(i,s){return function(o,a){var l=i.getRule(a)||s&&s.getRule(a);return l?l.selector:a}}function e(i,s){for(var o=s.split(Hv),a=i.split(Hv),l="",c=0;c<o.length;c++)for(var u=o[c],f=0;f<a.length;f++){var h=a[f];l&&(l+=", "),l+=h.indexOf("&")!==-1?h.replace(j3,u):u+" "+h}return l}function n(i,s,o){if(o)return j({},o,{index:o.index+1});var a=i.options.nestingLevel;a=a===void 0?1:a+1;var l=j({},i.options,{nestingLevel:a,index:s.indexOf(i)+1});return delete l.name,l}function r(i,s,o){if(s.type!=="style")return i;var a=s,l=a.options.parent,c,u;for(var f in i){var h=f.indexOf("&")!==-1,d=f[0]==="@";if(!(!h&&!d)){if(c=n(a,l,c),h){var A=e(f,a.selector);u||(u=t(l,o)),A=A.replace(H3,u);var p=a.key+"-"+f;"replaceRule"in l?l.replaceRule(p,i[f],j({},c,{selector:A})):l.addRule(p,i[f],j({},c,{selector:A}))}else d&&l.addRule(f,{},c).addRule(a.key,i[f],{selector:a.selector});delete i[f]}}return i}return{onProcessStyle:r}}var Y3=/[A-Z]/g,$3=/^ms-/,Gd={};function X3(t){return"-"+t.toLowerCase()}function qC(t){if(Gd.hasOwnProperty(t))return Gd[t];var e=t.replace(Y3,X3);return Gd[t]=$3.test(e)?"-"+e:e}function Sf(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:qC(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Sf):e.fallbacks=Sf(t.fallbacks)),e}function K3(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Sf(n[r]);return n}return Sf(n)}function e(n,r,i){if(r.indexOf("--")===0)return n;var s=qC(r);return r===s?n:(i.prop(s,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Q=O0&&CSS?CSS.px:"px",Xc=O0&&CSS?CSS.ms:"ms",Qs=O0&&CSS?CSS.percent:"%",q3={"animation-delay":Xc,"animation-duration":Xc,"background-position":Q,"background-position-x":Q,"background-position-y":Q,"background-size":Q,border:Q,"border-bottom":Q,"border-bottom-left-radius":Q,"border-bottom-right-radius":Q,"border-bottom-width":Q,"border-left":Q,"border-left-width":Q,"border-radius":Q,"border-right":Q,"border-right-width":Q,"border-top":Q,"border-top-left-radius":Q,"border-top-right-radius":Q,"border-top-width":Q,"border-width":Q,"border-block":Q,"border-block-end":Q,"border-block-end-width":Q,"border-block-start":Q,"border-block-start-width":Q,"border-block-width":Q,"border-inline":Q,"border-inline-end":Q,"border-inline-end-width":Q,"border-inline-start":Q,"border-inline-start-width":Q,"border-inline-width":Q,"border-start-start-radius":Q,"border-start-end-radius":Q,"border-end-start-radius":Q,"border-end-end-radius":Q,margin:Q,"margin-bottom":Q,"margin-left":Q,"margin-right":Q,"margin-top":Q,"margin-block":Q,"margin-block-end":Q,"margin-block-start":Q,"margin-inline":Q,"margin-inline-end":Q,"margin-inline-start":Q,padding:Q,"padding-bottom":Q,"padding-left":Q,"padding-right":Q,"padding-top":Q,"padding-block":Q,"padding-block-end":Q,"padding-block-start":Q,"padding-inline":Q,"padding-inline-end":Q,"padding-inline-start":Q,"mask-position-x":Q,"mask-position-y":Q,"mask-size":Q,height:Q,width:Q,"min-height":Q,"max-height":Q,"min-width":Q,"max-width":Q,bottom:Q,left:Q,top:Q,right:Q,inset:Q,"inset-block":Q,"inset-block-end":Q,"inset-block-start":Q,"inset-inline":Q,"inset-inline-end":Q,"inset-inline-start":Q,"box-shadow":Q,"text-shadow":Q,"column-gap":Q,"column-rule":Q,"column-rule-width":Q,"column-width":Q,"font-size":Q,"font-size-delta":Q,"letter-spacing":Q,"text-decoration-thickness":Q,"text-indent":Q,"text-stroke":Q,"text-stroke-width":Q,"word-spacing":Q,motion:Q,"motion-offset":Q,outline:Q,"outline-offset":Q,"outline-width":Q,perspective:Q,"perspective-origin-x":Qs,"perspective-origin-y":Qs,"transform-origin":Qs,"transform-origin-x":Qs,"transform-origin-y":Qs,"transform-origin-z":Qs,"transition-delay":Xc,"transition-duration":Xc,"vertical-align":Q,"flex-basis":Q,"shape-margin":Q,size:Q,gap:Q,grid:Q,"grid-gap":Q,"row-gap":Q,"grid-row-gap":Q,"grid-column-gap":Q,"grid-template-rows":Q,"grid-template-columns":Q,"grid-auto-rows":Q,"grid-auto-columns":Q,"box-shadow-x":Q,"box-shadow-y":Q,"box-shadow-blur":Q,"box-shadow-spread":Q,"font-line-height":Q,"text-shadow-x":Q,"text-shadow-y":Q,"text-shadow-blur":Q};function JC(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var J3=JC(q3);function al(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=al(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var i in e)e[i]=al(i,e[i],n);else for(var s in e)e[s]=al(t+"-"+s,e[s],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||J3[t];return o&&!(e===0&&o===Q)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Z3(t){t===void 0&&(t={});var e=JC(t);function n(i,s){if(s.type!=="style")return i;for(var o in i)i[o]=al(o,i[o],e);return i}function r(i,s){return al(s,i,e)}return{onProcessStyle:n,onChangeValue:r}}function Fg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eP(t){if(Array.isArray(t))return Fg(t)}function ZC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function D0(t,e){if(!!t){if(typeof t=="string")return Fg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fg(t,e)}}function tP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yh(t){return eP(t)||ZC(t)||D0(t)||tP()}var Ga="",Qg="",ew="",tw="",nP=ac&&"ontouchstart"in document.documentElement;if(ac){var Vd={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},rP=document.createElement("p"),zd=rP.style,iP="Transform";for(var jd in Vd)if(jd+iP in zd){Ga=jd,Qg=Vd[jd];break}Ga==="Webkit"&&"msHyphens"in zd&&(Ga="ms",Qg=Vd.ms,tw="edge"),Ga==="Webkit"&&"-apple-trailing-word"in zd&&(ew="apple")}var Ee={js:Ga,css:Qg,vendor:ew,browser:tw,isTouch:nP};function sP(t){return t[1]==="-"||Ee.js==="ms"?t:"@"+Ee.css+"keyframes"+t.substr(10)}var oP={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ee.js==="ms"?"-webkit-"+e:Ee.css+e}},aP={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ee.js==="Webkit"?Ee.css+"print-"+e:e}},lP=/[-\s]+(.)?/g;function cP(t,e){return e?e.toUpperCase():""}function F0(t){return t.replace(lP,cP)}function Bi(t){return F0("-"+t)}var uP={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ee.js==="Webkit"){var r="mask-image";if(F0(r)in n)return e;if(Ee.js+Bi(r)in n)return Ee.css+e}return e}},fP={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ee.vendor==="apple"&&!Ee.isTouch?Ee.css+e:e}},hP={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ee.css+e}},dP={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ee.css+e}},AP={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ee.js==="Webkit"||Ee.js==="ms"&&Ee.browser!=="edge"?Ee.css+e:e}},gP={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ee.js==="Moz"||Ee.js==="ms"||Ee.vendor==="apple"?Ee.css+e:e}},pP={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ee.js==="Webkit"){var r="WebkitColumn"+Bi(e);return r in n?Ee.css+"column-"+e:!1}if(Ee.js==="Moz"){var i="page"+Bi(e);return i in n?"page-"+e:!1}return!1}},mP={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ee.js==="Moz")return e;var r=e.replace("-inline","");return Ee.js+Bi(r)in n?Ee.css+r:!1}},EP={supportedProperty:function(e,n){return F0(e)in n?e:!1}},vP={supportedProperty:function(e,n){var r=Bi(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ee.js+r in n?Ee.css+e:Ee.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},yP={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ee.js==="ms"?""+Ee.css+e:e}},_P={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ee.js==="ms"?Ee.css+"scroll-chaining":e}},xP={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},IP={supportedProperty:function(e,n){var r=xP[e];return r&&Ee.js+Bi(r)in n?Ee.css+r:!1}},nw={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},CP=Object.keys(nw),wP=function(e){return Ee.css+e},TP={supportedProperty:function(e,n,r){var i=r.multiple;if(CP.indexOf(e)>-1){var s=nw[e];if(!Array.isArray(s))return Ee.js+Bi(s)in n?Ee.css+s:!1;if(!i)return!1;for(var o=0;o<s.length;o++)if(!(Ee.js+Bi(s[0])in n))return!1;return s.map(wP)}return!1}},rw=[oP,aP,uP,fP,hP,dP,AP,gP,pP,mP,EP,vP,yP,_P,IP,TP],Wv=rw.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),SP=rw.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,yh(e.noPrefill)),t},[]),Va,ns={};if(ac){Va=document.createElement("p");var Hd=window.getComputedStyle(document.documentElement,"");for(var Wd in Hd)isNaN(Wd)||(ns[Hd[Wd]]=Hd[Wd]);SP.forEach(function(t){return delete ns[t]})}function kg(t,e){if(e===void 0&&(e={}),!Va)return t;if(ns[t]!=null)return ns[t];(t==="transition"||t==="transform")&&(e[t]=t in Va.style);for(var n=0;n<Wv.length&&(ns[t]=Wv[n](t,Va.style,e),!ns[t]);n++);try{Va.style[t]=""}catch{return!1}return ns[t]}var ks={},bP={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},RP=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,ii;function BP(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?kg(e):", "+kg(n);return r||e||n}ac&&(ii=document.createElement("p"));function Yv(t,e){var n=e;if(!ii||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(ks[r]!=null)return ks[r];try{ii.style[t]=n}catch{return ks[r]=!1,!1}if(bP[t])n=n.replace(RP,BP);else if(ii.style[t]===""&&(n=Ee.css+n,n==="-ms-flex"&&(ii.style[t]="-ms-flexbox"),ii.style[t]=n,ii.style[t]===""))return ks[r]=!1,!1;return ii.style[t]="",ks[r]=n,ks[r]}function PP(){function t(i){if(i.type==="keyframes"){var s=i;s.at=sP(s.at)}}function e(i){for(var s in i){var o=i[s];if(s==="fallbacks"&&Array.isArray(o)){i[s]=o.map(e);continue}var a=!1,l=kg(s);l&&l!==s&&(a=!0);var c=!1,u=Yv(l,gs(o));u&&u!==o&&(c=!0),(a||c)&&(a&&delete i[s],i[l||s]=u||o)}return i}function n(i,s){return s.type!=="style"?i:e(i)}function r(i,s){return Yv(s,gs(i))||i}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function NP(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var i={},s=Object.keys(n).sort(t),o=0;o<s.length;o++)i[s[o]]=n[s[o]];return i}}}function LP(){return{plugins:[F3(),z3(),W3(),K3(),Z3(),typeof window>"u"?null:PP(),NP()]}}function Re(t,e){if(t==null)return{};var n=Eh(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function iw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.baseClasses,n=t.newClasses;if(t.Component,!n)return e;var r=j({},e);return Object.keys(n).forEach(function(i){n[i]&&(r[i]="".concat(e[i]," ").concat(n[i]))}),r}var MP={set:function(e,n,r,i){var s=e.get(n);s||(s=new Map,e.set(n,s)),s.set(r,i)},get:function(e,n,r){var i=e.get(n);return i?i.get(r):void 0},delete:function(e,n,r){var i=e.get(n);i.delete(r)}};const ao=MP;var OP=Me.createContext(null);const sw=OP;function lc(){var t=Me.useContext(sw);return t}var DP=YC(LP()),FP=qB(),QP=new Map,kP={disableGeneration:!1,generateClassName:FP,jss:DP,sheetsCache:null,sheetsManager:QP,sheetsRegistry:null},UP=Me.createContext(kP),$v=-1e9;function GP(){return $v+=1,$v}var VP={};const zP=VP;function jP(t){var e=typeof t=="function";return{create:function(r,i){var s;try{s=e?t(r):t}catch(l){throw l}if(!i||!r.overrides||!r.overrides[i])return s;var o=r.overrides[i],a=j({},s);return Object.keys(o).forEach(function(l){a[l]=Mo(a[l],o[l])}),a},options:{}}}function HP(t,e,n){var r=t.state,i=t.stylesOptions;if(i.disableGeneration)return e||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var s=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,s=!0),e!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=e,s=!0),s&&(r.cacheClasses.value=iw({baseClasses:r.cacheClasses.lastJSS,newClasses:e,Component:n})),r.cacheClasses.value}function WP(t,e){var n=t.state,r=t.theme,i=t.stylesOptions,s=t.stylesCreator,o=t.name;if(!i.disableGeneration){var a=ao.get(i.sheetsManager,s,r);a||(a={refs:0,staticSheet:null,dynamicStyles:null},ao.set(i.sheetsManager,s,r,a));var l=j({},s.options,i,{theme:r,flip:typeof i.flip=="boolean"?i.flip:r.direction==="rtl"});l.generateId=l.serverGenerateClassName||l.generateClassName;var c=i.sheetsRegistry;if(a.refs===0){var u;i.sheetsCache&&(u=ao.get(i.sheetsCache,s,r));var f=s.create(r,o);u||(u=i.jss.createStyleSheet(f,j({link:!1},l)),u.attach(),i.sheetsCache&&ao.set(i.sheetsCache,s,r,u)),c&&c.add(u),a.staticSheet=u,a.dynamicStyles=$C(f)}if(a.dynamicStyles){var h=i.jss.createStyleSheet(a.dynamicStyles,j({link:!0},l));h.update(e),h.attach(),n.dynamicSheet=h,n.classes=iw({baseClasses:a.staticSheet.classes,newClasses:h.classes}),c&&c.add(h)}else n.classes=a.staticSheet.classes;a.refs+=1}}function YP(t,e){var n=t.state;n.dynamicSheet&&n.dynamicSheet.update(e)}function $P(t){var e=t.state,n=t.theme,r=t.stylesOptions,i=t.stylesCreator;if(!r.disableGeneration){var s=ao.get(r.sheetsManager,i,n);s.refs-=1;var o=r.sheetsRegistry;s.refs===0&&(ao.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(s.staticSheet),o&&o.remove(s.staticSheet)),e.dynamicSheet&&(r.jss.removeStyleSheet(e.dynamicSheet),o&&o.remove(e.dynamicSheet))}}function XP(t,e){var n=Me.useRef([]),r,i=Me.useMemo(function(){return{}},e);n.current!==i&&(n.current=i,r=t()),Me.useEffect(function(){return function(){r&&r()}},[i])}function Q0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.name,r=e.classNamePrefix,i=e.Component,s=e.defaultTheme,o=s===void 0?zP:s,a=Re(e,["name","classNamePrefix","Component","defaultTheme"]),l=jP(t),c=n||r||"makeStyles";l.options={index:GP(),name:n,meta:c,classNamePrefix:c};var u=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=lc()||o,A=j({},Me.useContext(UP),a),p=Me.useRef(),g=Me.useRef();XP(function(){var E={name:n,state:{},stylesCreator:l,stylesOptions:A,theme:d};return WP(E,h),g.current=!1,p.current=E,function(){$P(E)}},[d,l]),Me.useEffect(function(){g.current&&YP(p.current,h),g.current=!0});var m=HP(p.current,h.classes,i);return m};return u}function KP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ow(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=ow(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function be(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=ow(e))&&(r&&(r+=" "),r+=n);return r}var aw={exports:{}},Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=typeof Symbol=="function"&&Symbol.for,k0=yt?Symbol.for("react.element"):60103,U0=yt?Symbol.for("react.portal"):60106,_h=yt?Symbol.for("react.fragment"):60107,xh=yt?Symbol.for("react.strict_mode"):60108,Ih=yt?Symbol.for("react.profiler"):60114,Ch=yt?Symbol.for("react.provider"):60109,wh=yt?Symbol.for("react.context"):60110,G0=yt?Symbol.for("react.async_mode"):60111,Th=yt?Symbol.for("react.concurrent_mode"):60111,Sh=yt?Symbol.for("react.forward_ref"):60112,bh=yt?Symbol.for("react.suspense"):60113,qP=yt?Symbol.for("react.suspense_list"):60120,Rh=yt?Symbol.for("react.memo"):60115,Bh=yt?Symbol.for("react.lazy"):60116,JP=yt?Symbol.for("react.block"):60121,ZP=yt?Symbol.for("react.fundamental"):60117,e4=yt?Symbol.for("react.responder"):60118,t4=yt?Symbol.for("react.scope"):60119;function mn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case k0:switch(t=t.type,t){case G0:case Th:case _h:case Ih:case xh:case bh:return t;default:switch(t=t&&t.$$typeof,t){case wh:case Sh:case Bh:case Rh:case Ch:return t;default:return e}}case U0:return e}}}function lw(t){return mn(t)===Th}Pe.AsyncMode=G0;Pe.ConcurrentMode=Th;Pe.ContextConsumer=wh;Pe.ContextProvider=Ch;Pe.Element=k0;Pe.ForwardRef=Sh;Pe.Fragment=_h;Pe.Lazy=Bh;Pe.Memo=Rh;Pe.Portal=U0;Pe.Profiler=Ih;Pe.StrictMode=xh;Pe.Suspense=bh;Pe.isAsyncMode=function(t){return lw(t)||mn(t)===G0};Pe.isConcurrentMode=lw;Pe.isContextConsumer=function(t){return mn(t)===wh};Pe.isContextProvider=function(t){return mn(t)===Ch};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===k0};Pe.isForwardRef=function(t){return mn(t)===Sh};Pe.isFragment=function(t){return mn(t)===_h};Pe.isLazy=function(t){return mn(t)===Bh};Pe.isMemo=function(t){return mn(t)===Rh};Pe.isPortal=function(t){return mn(t)===U0};Pe.isProfiler=function(t){return mn(t)===Ih};Pe.isStrictMode=function(t){return mn(t)===xh};Pe.isSuspense=function(t){return mn(t)===bh};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_h||t===Th||t===Ih||t===xh||t===bh||t===qP||typeof t=="object"&&t!==null&&(t.$$typeof===Bh||t.$$typeof===Rh||t.$$typeof===Ch||t.$$typeof===wh||t.$$typeof===Sh||t.$$typeof===ZP||t.$$typeof===e4||t.$$typeof===t4||t.$$typeof===JP)};Pe.typeOf=mn;(function(t){t.exports=Pe})(aw);var V0=aw.exports,n4={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r4={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},z0={};z0[V0.ForwardRef]=i4;z0[V0.Memo]=cw;function Xv(t){return V0.isMemo(t)?cw:z0[t.$$typeof]||n4}var s4=Object.defineProperty,o4=Object.getOwnPropertyNames,Kv=Object.getOwnPropertySymbols,a4=Object.getOwnPropertyDescriptor,l4=Object.getPrototypeOf,qv=Object.prototype;function uw(t,e,n){if(typeof e!="string"){if(qv){var r=l4(e);r&&r!==qv&&uw(t,r,n)}var i=o4(e);Kv&&(i=i.concat(Kv(e)));for(var s=Xv(t),o=Xv(e),a=0;a<i.length;++a){var l=i[a];if(!r4[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var c=a4(e,l);try{s4(t,l,c)}catch{}}}}return t}var c4=uw;function u4(t,e){if(typeof e=="function"){var n=e(t);return n}return j({},t,e)}function f4(t){var e=t.children,n=t.theme,r=lc(),i=Me.useMemo(function(){var s=r===null?n:u4(r,n);return s!=null&&(s[GC]=r!==null),s},[n,r]);return Me.createElement(sw.Provider,{value:i},e)}var h4=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r){var i=n.defaultTheme,s=n.withTheme,o=s===void 0?!1:s,a=n.name,l=Re(n,["defaultTheme","withTheme","name"]),c=a,u=Q0(e,j({defaultTheme:i,Component:r,name:a||r.displayName,classNamePrefix:c},l)),f=Me.forwardRef(function(d,A){d.classes;var p=d.innerRef,g=Re(d,["classes","innerRef"]),m=u(j({},r.defaultProps,d)),E,v=g;return(typeof a=="string"||o)&&(E=lc()||i,a&&(v=VC({theme:E,name:a,props:g})),o&&!v.theme&&(v.theme=E)),Me.createElement(r,j({ref:p||A,classes:m},v))});return c4(f,r),f}};const Ui=h4,d4="modulepreload",A4=function(t,e){return new URL(t,e).href},Jv={},Gt=function(e,n,r){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=A4(i,r),i in Jv)return;Jv[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":d4,s||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((l,c)=>{a.addEventListener("load",l),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},g4="w";function Zv(t,e){const n=B0(e),{s:r,w:i}=w.exports.useContext(n);return w.exports.useCallback(o=>{const a=l=>r[g4](t,o,l);return i?i(a):a()},[r,i,t])}function Pn(t,e){return gr(t,e)[0]}function p4(t,e){let n=null;const r=new Map,i=s=>{let o;if(e===void 0)o=r.get(s);else for(const[l,c]of r)if(e(l,s)){o=c;break}if(o!==void 0)if(n!=null&&n(o[1],s))r.delete(s);else return o[0];const a=t(s);return r.set(s,[a,Date.now()]),a};return i.remove=s=>{if(e===void 0)r.delete(s);else for(const[o]of r)if(e(o,s)){r.delete(o);break}},i.setShouldRemove=s=>{if(n=s,!!n)for(const[o,a]of r)n(a[1],o)&&r.delete(o)},i}const m4=(t,e)=>{do{const[n,...r]=e,i=t.get(n);if(!i)return;if(!r.length)return i[1];t=i[0],e=r}while(e.length)},E4=(t,e,n)=>{do{const[r,...i]=e;let s=t.get(r);if(s||(s=[new WeakMap],t.set(r,s)),!i.length){s[1]=n;return}t=s[0],e=i}while(e.length)},fw=()=>{const t=new WeakMap;return(n,r)=>{const i=m4(t,r);if(i)return i;const s=n();return E4(t,r,s),s}},v4=fw(),ey=t=>!!t.write,y4=t=>typeof t=="function";function _4(t,e){return v4(()=>{const n=new WeakMap,r=(l,c)=>{let u=n.get(l);if(u)return u;const f=c&&n.get(c),h=[],d=[];return l.forEach((A,p)=>{const g=e?e(A):p;d[p]=g;const m=f&&f.atomList[f.keyList.indexOf(g)];if(m){h[p]=m;return}const E=Gn(()=>({})),v=C=>{const x=C(E),B=C(i),R=C(t),N=r(R,B.prev).keyList.indexOf(g);if(N<0||N>=R.length){if("prev"in x)return x.prev;throw new Error("splitAtom: index out of bounds for read")}return x.prev=R[N],R[N]},y=(C,x,B)=>{const R=C(i),b=C(t),H=r(b,R.prev).keyList.indexOf(g);if(H<0||H>=b.length)throw new Error("splitAtom: index out of bounds for write");const D=y4(B)?B(b[H]):B;x(t,[...b.slice(0,H),D,...b.slice(H+1)])};h[p]=ey(t)?Gn(v,y):Gn(v)}),f&&f.keyList.length===d.length&&f.keyList.every((A,p)=>A===d[p])?u=f:u={atomList:h,keyList:d},n.set(l,u),u},i=Gn(()=>({})),s=l=>{const c=l(i),u=l(t),f=r(u,c.prev);return c.prev=u,f.atomList},o=(l,c,u)=>{const f=l(a).indexOf(u);if(f>=0){const h=l(t);c(t,[...h.slice(0,f),...h.slice(f+1)])}},a=ey(t)?Gn(s,o):Gn(s);return a},e?[t,e]:[t])}var x4=Object.defineProperty,I4=Object.defineProperties,C4=Object.getOwnPropertyDescriptors,ty=Object.getOwnPropertySymbols,w4=Object.prototype.hasOwnProperty,T4=Object.prototype.propertyIsEnumerable,ny=(t,e,n)=>e in t?x4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S4=(t,e)=>{for(var n in e||(e={}))w4.call(e,n)&&ny(t,n,e[n]);if(ty)for(var n of ty(e))T4.call(e,n)&&ny(t,n,e[n]);return t},b4=(t,e)=>I4(t,C4(e));const R4=fw();function B4(t){const e=()=>{const n=P4(t);return Gn(i=>{const s=[],o=n.map((a,l)=>{try{return i(a)}catch(c){if(c instanceof Promise)s[l]=c;else throw c}});if(s.length)throw Promise.all(s);return N4(t,o)})};return Array.isArray(t)?R4(e,t):e()}const P4=t=>Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e]),N4=(t,e)=>Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>b4(S4({},n),{[r]:e[i]}),{});function L4(t){try{t().removeItem||console.warn("Missing removeItem. In the next version, it will be required.")}catch{}return{getItem:e=>{const n=t().getItem(e);return n instanceof Promise?n.then(r=>JSON.parse(r||"")):JSON.parse(n||"")},setItem:(e,n)=>t().setItem(e,JSON.stringify(n)),removeItem:e=>{var n,r;return(r=(n=t()).removeItem)==null?void 0:r.call(n,e)}}}L4(()=>localStorage);function bf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const hw=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),ry=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);ry&&parseFloat(ry[1]);const M4="3.1.7";function Fr(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}typeof process!="object"||String(process)!=="[object process]"||process.browser;const O4=typeof window<"u"&&typeof window.orientation<"u",iy=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);iy&&parseFloat(iy[1]);class D4{constructor(e,n){Z(this,"name",void 0),Z(this,"workerThread",void 0),Z(this,"isRunning",void 0),Z(this,"result",void 0),Z(this,"_resolve",void 0),Z(this,"_reject",void 0),this.name=e,this.workerThread=n,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Fr(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Fr(this.isRunning),this.isRunning=!1,this._reject(e)}}const Yd=new Map;function F4(t){Fr(t.source&&!t.url||!t.source&&t.url);let e=Yd.get(t.source||t.url);return e||(t.url&&(e=Q4(t.url),Yd.set(t.url,e)),t.source&&(e=dw(t.source),Yd.set(t.source,e))),Fr(e),e}function Q4(t){if(!t.startsWith("http"))return t;const e=k4(t);return dw(e)}function dw(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function k4(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Aw(t,e=!0,n){const r=n||new Set;if(t){if(sy(t))r.add(t);else if(sy(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)Aw(t[i],e,r)}}return n===void 0?Array.from(r):[]}function sy(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const $d=()=>{};class gw{static isSupported(){return typeof Worker<"u"}constructor(e){Z(this,"name",void 0),Z(this,"source",void 0),Z(this,"url",void 0),Z(this,"terminated",!1),Z(this,"worker",void 0),Z(this,"onMessage",void 0),Z(this,"onError",void 0),Z(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Fr(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=$d,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=$d,this.onError=$d,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,n){n=n||Aw(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=F4({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}}class U4{constructor(e){Z(this,"name","unnamed"),Z(this,"source",void 0),Z(this,"url",void 0),Z(this,"maxConcurrency",1),Z(this,"maxMobileConcurrency",1),Z(this,"onDebug",()=>{}),Z(this,"reuseWorkers",!0),Z(this,"props",{}),Z(this,"jobQueue",[]),Z(this,"idleQueue",[]),Z(this,"count",0),Z(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,s,o)=>i.done(o),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new D4(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new gw({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return O4?this.maxMobileConcurrency:this.maxConcurrency}}const G4={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class br{static isSupported(){return gw.isSupported()}static getWorkerFarm(e={}){return br._workerFarm=br._workerFarm||new br({}),br._workerFarm.setProps(e),br._workerFarm}constructor(e){Z(this,"props",void 0),Z(this,"workerPools",new Map),this.props={...G4},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new U4({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Z(br,"_workerFarm",void 0);const V4="latest";function z4(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=V4);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Fr(i),i}function j4(t,e=M4){Fr(t,"no worker provided");const n=t.version;return!(!e||!n)}function H4(t,e){return br.isSupported()?t.worker&&(e==null?void 0:e.worker):!1}async function W4(t,e,n,r,i){const s=t.id,o=z4(t,n),l=br.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n));const c=await l.startJob("process-on-worker",Y4.bind(null,i));return c.postMessage("process",{input:e,options:n}),await(await c.result).result}async function Y4(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function pw(t){return t&&typeof t=="object"&&t.isBuffer}function $4(t){return pw(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function mw(t){if(pw(t))return $4(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function X4(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function K4(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}async function q4(t){const e=[];for await(const n of t)e.push(n);return K4(...e)}function oy(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class ay{constructor(e,n){Z(this,"name",void 0),Z(this,"type",void 0),Z(this,"sampleSize",1),Z(this,"time",void 0),Z(this,"count",void 0),Z(this,"samples",void 0),Z(this,"lastTiming",void 0),Z(this,"lastSampleTime",void 0),Z(this,"lastSampleCount",void 0),Z(this,"_count",0),Z(this,"_time",0),Z(this,"_samples",0),Z(this,"_startTime",0),Z(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=oy(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(oy()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Ph{constructor(e){Z(this,"id",void 0),Z(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof ay?this.stats[n]=e:this.stats[n]=new ay(n,r)),this.stats[n]}}const J4="Queued Requests",Z4="Active Requests",eN="Cancelled Requests",tN="Queued Requests Ever",nN="Active Requests Ever",rN={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class iN{constructor(e={}){Z(this,"props",void 0),Z(this,"stats",void 0),Z(this,"activeRequestCount",0),Z(this,"requestQueue",[]),Z(this,"requestMap",new Map),Z(this,"deferredUpdate",null),this.props={...rN,...e},this.stats=new Ph({id:this.props.id}),this.stats.get(J4),this.stats.get(Z4),this.stats.get(eN),this.stats.get(tN),this.stats.get(nN)}scheduleRequest(e,n=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const r={handle:e,priority:0,getPriority:n},i=new Promise(s=>(r.resolve=s,r));return this.requestQueue.push(r),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){const{handle:n,resolve:r}=e;let i=!1;const s=()=>{i||(i=!0,this.requestMap.delete(n),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,r?r({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let n=0;n<e;++n){const r=this.requestQueue.shift();r&&this._issueRequest(r)}}}_updateAllRequests(){const e=this.requestQueue;for(let n=0;n<e.length;++n){const r=e[n];this._updateRequest(r)||(e.splice(n,1),this.requestMap.delete(r.handle),n--)}e.sort((n,r)=>n.priority-r.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}let sN="";const ly={};function oN(t){for(const e in ly)if(t.startsWith(e)){const n=ly[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(sN).concat(t)),t}function aN(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}const lN=t=>typeof t=="boolean",ll=t=>typeof t=="function",cc=t=>t!==null&&typeof t=="object",cy=t=>cc(t)&&t.constructor==={}.constructor,cN=t=>t&&typeof t[Symbol.iterator]=="function",uN=t=>t&&typeof t[Symbol.asyncIterator]=="function",uc=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,qo=t=>typeof Blob<"u"&&t instanceof Blob,fN=t=>t&&typeof t=="object"&&t.isBuffer,hN=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||cc(t)&&ll(t.tee)&&ll(t.cancel)&&ll(t.getReader),dN=t=>cc(t)&&ll(t.read)&&ll(t.pipe)&&lN(t.readable),Ew=t=>hN(t)||dN(t),AN=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,gN=/^([-\w.]+\/[-\w.+]+)/;function pN(t){const e=gN.exec(t);return e?e[1]:t}function uy(t){const e=AN.exec(t);return e?e[1]:""}const mN=/\?.*/;function Nh(t){if(uc(t)){const e=Xd(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:pN(n)||uy(e)}}return qo(t)?{url:Xd(t.name||""),type:t.type||""}:typeof t=="string"?{url:Xd(t),type:uy(t)}:{url:"",type:""}}function EN(t){return uc(t)?t.headers["content-length"]||-1:qo(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Xd(t){return t.replace(mN,"")}async function vw(t){if(uc(t))return t;const e={},n=EN(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=Nh(t);i&&(e["content-type"]=i);const s=await _N(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function vN(t){if(!t.ok){const e=await yN(t);throw new Error(e)}}async function yN(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(60),"..."):e}catch{}return e}async function _N(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=xN(n);return"data:base64,".concat(r)}return null}function xN(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function fy(t,e){if(typeof t=="string"){t=oN(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await vw(t)}function j0(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Gi(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||j0()}function IN(){return Gi()&&typeof document<"u"}const _i={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},CN=globalThis,wN=_i.self||_i.window||_i.global,za=_i.window||_i.self||_i.global,TN=_i.document||{},qs=_i.process||{},SN=console,H0=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Gi();const Vu=globalThis;function bN(){return typeof Vu.orientation<"u"}function yw(t){if(!t&&!Gi())return"Node";if(j0(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":Vu.chrome?"Chrome":Vu.safari?"Safari":Vu.mozInnerScreenX?"Firefox":"Unknown"}function RN(t,e){if(!t)throw new Error(e||"Assertion failed")}const BN=Object.freeze(Object.defineProperty({__proto__:null,VERSION:H0,self:wN,window:za,global:CN,document:TN,process:qs,console:SN,isBrowser:Gi,isBrowserMainThread:IN,getBrowser:yw,isMobile:bN,isElectron:j0,assert:RN},Symbol.toStringTag,{value:"Module"}));function PN(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class NN{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";Z(this,"storage",void 0),Z(this,"id",void 0),Z(this,"config",{}),this.storage=PN(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function LN(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function MN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Kd(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Rf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Rf||(Rf={}));function hy(t){return typeof t=="string"?Rf[t.toUpperCase()]||Rf.WHITE:t}function ON(t,e,n){return!Gi&&typeof t=="string"&&(e&&(e=hy(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=hy(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function DN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Bf(t,e){if(!t)throw new Error(e||"Assertion failed")}function Us(){let t;if(Gi&&"performance"in za){var e,n;t=za==null||(e=za.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in qs){var r;const i=qs==null||(r=qs.hrtime)===null||r===void 0?void 0:r.call(qs);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Gs={debug:Gi&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},FN={enabled:!0,level:0};function _n(){}const dy={},Ay={once:!0};class fc{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};Z(this,"id",void 0),Z(this,"VERSION",H0),Z(this,"_startTs",Us()),Z(this,"_deltaTs",Us()),Z(this,"_storage",void 0),Z(this,"userData",{}),Z(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new NN("__probe-".concat(this.id,"__"),FN),this.userData={},this.timeStamp("".concat(this.id," started")),DN(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Us()-this._startTs).toPrecision(10))}getDelta(){return Number((Us()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.updateConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Bf(e,n)}warn(e){return this._getLogFunction(0,e,Gs.warn,arguments,Ay)}error(e){return this._getLogFunction(0,e,Gs.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Gs.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Gs.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Gs.debug||Gs.info,arguments,Ay)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||_n,r&&[r],{tag:GN(n)}):_n}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Gi?UN({image:i,message:s,scale:o}):kN({image:i,message:s,scale:o}):_n}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||_n)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=gy({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||_n)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=_w(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=gy({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Bf(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Us();const o=s.tag||s.message;if(s.once)if(!dy[o])dy[o]=Us();else return _n;return n=QN(this.id,s.message,s),r.bind(console,n,...s.args)}return _n}}Z(fc,"VERSION",H0);function _w(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Bf(Number.isFinite(e)&&e>=0),e}function gy(t){const{logLevel:e,message:n}=t;t.logLevel=_w(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Bf(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function QN(t,e,n){if(typeof e=="string"){const r=n.time?MN(LN(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=ON(e,n.color,n.background)}return e}function kN(t){let{image:e,message:n="",scale:r=1}=t,i=null;try{i=module.require("asciify-image")}catch{}return i?()=>i(e,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then(s=>console.log(s)):_n}function UN(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=Kd(s,n,r);console.log(...o)},s.src=e,_n}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Kd(e,n,r)),_n;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...Kd(s,n,r)),s.src=e.toDataURL(),_n}return _n}function GN(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const py=new fc({id:"loaders.gl"});class VN{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class zN{constructor(){Z(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const xw={fetch:null,mimeType:void 0,nothrow:!1,log:new zN,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},jN={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Iw(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const Cw=()=>{const t=Iw();return t.globalOptions=t.globalOptions||{...xw},t.globalOptions};function HN(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],WN(t,n),$N(e,t,r)}function ww(t,e){const n=Cw(),r=t||n;return typeof r.fetch=="function"?r.fetch:cc(r.fetch)?i=>fy(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:fy}function WN(t,e){my(t,null,xw,jN,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};my(r,n.id,i,s,e)}}function my(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&cc(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)py.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const f=YN(a,i);py.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(f))()}}}}function YN(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function $N(t,e,n){const i={...t.options||{}};return XN(i,n),i.log===null&&(i.log=new VN),Ey(i,Cw()),Ey(i,e),i}function Ey(t,e){for(const n in e)if(n in e){const r=e[n];cy(r)&&cy(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function XN(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function W0(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Y0(t){var e,n;bf(t,"null loader"),bf(W0(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const Tw=()=>{const t=Iw();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function KN(t){const e=Tw();t=Array.isArray(t)?t:[t];for(const n of t){const r=Y0(n);e.find(i=>r===i)||e.unshift(r)}}function qN(){return Tw()}const JN=new fc({id:"loaders.gl"}),ZN=/\.([^.]+)$/;async function eL(t,e=[],n,r){if(!Sw(t))return null;let i=vy(t,e,{...n,nothrow:!0},r);if(i)return i;if(qo(t)&&(t=await t.slice(0,10).arrayBuffer(),i=vy(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(bw(t));return i}function vy(t,e=[],n,r){if(!Sw(t))return null;if(e&&!Array.isArray(e))return Y0(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...qN()),nL(i);const s=tL(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(bw(t));return s}function tL(t,e,n,r){const{url:i,type:s}=Nh(t),o=i||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=qd(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||rL(e,o),l=l||(a?"matched url ".concat(o):""),a=a||qd(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||sL(e,t),l=l||(a?"matched initial data ".concat(Rw(t)):""),a=a||qd(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;JN.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function Sw(t){return!(t instanceof Response&&t.status===204)}function bw(t){const{url:e,type:n}=Nh(t);let r="No valid loader found (";r+=e?"".concat(aN(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?Rw(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function nL(t){for(const e of t)Y0(e)}function rL(t,e){const n=e&&ZN.exec(e),r=n&&n[1];return r?iL(t,r):null}function iL(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function qd(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function sL(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(oL(e,n))return n}else if(ArrayBuffer.isView(e)){if(yy(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&yy(e,0,n))return n;return null}function oL(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function yy(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>aL(t,e,n,i))}function aL(t,e,n,r){if(r instanceof ArrayBuffer)return X4(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=Ug(t,e,r.length);return r===i;default:return!1}}function Rw(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Ug(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Ug(t,0,e):""}function Ug(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const lL=256*1024;function*cL(t,e){const n=(e==null?void 0:e.chunkSize)||lL;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const uL=256*1024;function*fL(t,e={}){const{chunkSize:n=uL}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}const hL=1024*1024;async function*dL(t,e){const n=(e==null?void 0:e.chunkSize)||hL;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function _y(t,e){return hw?AL(t,e):gL(t)}async function*AL(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield mw(o)}}catch{n.releaseLock()}}async function*gL(t,e){for await(const n of t)yield mw(n)}function pL(t,e){if(typeof t=="string")return cL(t,e);if(t instanceof ArrayBuffer)return fL(t,e);if(qo(t))return dL(t,e);if(Ew(t))return _y(t,e);if(uc(t))return _y(t.body,e);throw new Error("makeIterator")}const Bw="Cannot convert supplied data type";function mL(t,e,n){if(e.text&&typeof t=="string")return t;if(fN(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(Bw)}async function EL(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return mL(t,e);if(qo(t)&&(t=await vw(t)),uc(t)){const i=t;return await vN(i),e.binary?await i.arrayBuffer():await i.text()}if(Ew(t)&&(t=pL(t,n)),cN(t)||uN(t))return q4(t);throw new Error(Bw)}function vL(t,e,n=null){if(n)return n;const r={fetch:ww(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}function yL(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function $0(t,e,n,r){Fr(!r||typeof r=="object"),e&&!Array.isArray(e)&&!W0(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=Nh(t),o=yL(e,r),a=await eL(t,o,n);return a?(n=HN(n,a,o,i),r=vL({url:i,parse:$0,loaders:o},n,r),await _L(a,t,n,r)):null}async function _L(t,e,n,r){if(j4(t),e=await EL(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(H4(t,n))return await W4(t,e,n,r,$0);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Fr(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Pf(t,e,n,r){!Array.isArray(e)&&!W0(e)&&(n=e,e=void 0);const i=ww(n);let s=t;return typeof t=="string"&&(s=await i(t)),qo(t)&&(s=await i(t)),await $0(s,e,n)}const xL="3.1.7",{_parseImageNode:IL}=globalThis,Gg=typeof Image<"u",Vg=typeof ImageBitmap<"u",CL=Boolean(IL),zg=hw?!0:CL;function wL(t){switch(t){case"auto":return Vg||Gg||zg;case"imagebitmap":return Vg;case"image":return Gg;case"data":return zg;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function TL(){if(Vg)return"imagebitmap";if(Gg)return"image";if(zg)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function SL(t){const e=RL(t);if(!e)throw new Error("Not an image");return e}function bL(t){switch(SL(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function RL(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const BL=/^data:image\/svg\+xml/,PL=/\.svg((\?|#).*)?$/;function X0(t){return t&&(BL.test(t)||PL.test(t))}function NL(t,e){if(X0(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return Pw(t,e)}function Pw(t,e){if(X0(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Nw(t,e,n){const r=NL(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await LL(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function LL(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const ML={};let xy=!0;async function OL(t,e,n){let r;X0(n)?r=await Nw(t,e,n):r=Pw(t,n);const i=e&&e.imagebitmap;return await DL(r,i)}async function DL(t,e=null){if((FL(e)||!xy)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),xy=!1}return await createImageBitmap(t)}function FL(t){for(const e in t||ML)return!1;return!0}const ir=!1,cl=!0;function Lw(t){const e=hc(t);return QL(e)||GL(e)||kL(e)||UL(e)}function QL(t){const e=hc(t);return e.byteLength>=24&&e.getUint32(0,ir)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ir),height:e.getUint32(20,ir)}:null}function kL(t){const e=hc(t);return e.byteLength>=10&&e.getUint32(0,ir)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,cl),height:e.getUint16(8,cl)}:null}function UL(t){const e=hc(t);return e.byteLength>=14&&e.getUint16(0,ir)===16973&&e.getUint32(2,cl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,cl),height:e.getUint32(22,cl)}:null}function GL(t){const e=hc(t);if(!(e.byteLength>=3&&e.getUint16(0,ir)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=VL();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,ir);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ir),width:e.getUint16(s+7,ir)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,ir)}return null}function VL(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function hc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function zL(t,e){const{mimeType:n}=Lw(t)||{},r=globalThis._parseImageNode;return bf(r),await r(t,n)}async function jL(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=HL(i);let a;switch(o){case"imagebitmap":a=await OL(t,e,s);break;case"image":a=await Nw(t,e,s);break;case"data":a=await zL(t);break;default:bf(!1)}return i==="data"&&(a=bL(a)),a}function HL(t){switch(t){case"auto":case"data":return TL();default:return wL(t),t}}const WL=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],YL=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],$L={image:{type:"auto",decode:!0}},Mw={id:"image",module:"images",name:"Images",version:xL,mimeTypes:YL,extensions:WL,parse:jL,tests:[t=>Boolean(Lw(new DataView(t)))],options:$L};var Ve={exports:{}};const XL=Qx(BN);(function(t){t.exports=XL})(Ve);const me=new fc({id:"deck"});let jg={};function KL(t){jg=t}function Ot(t){me.level>0&&jg[t]&&jg[t].call(...arguments)}function qL(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const JL={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:qL,parseTextSync:JSON.parse},ul="8.6.7",zu=Ve.exports.global.deck&&Ve.exports.global.deck.VERSION;if(zu&&zu!==ul)throw new Error("deck.gl - multiple versions detected: ".concat(zu," vs ").concat(ul));zu||(me.log(1,"deck.gl ".concat(ul))(),Ve.exports.global.deck=Object.assign(Ve.exports.global.deck||{},{VERSION:ul,version:ul,log:me,_registerLoggers:KL}),KN([JL,[Mw,{imagebitmap:{premultiplyAlpha:"none"}}]]));const ZL=Ve.exports.global.deck,re=new fc({id:"luma.gl"});function Ht(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const eM="Invalid WebGLRenderingContext",tM="Requires WebGL2";function Lh(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function _e(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function nM(t){return _e(t)?t:null}function Mh(t){return Ht(Lh(t),eM),t}function Ft(t){return Ht(_e(t),tM),t}const ja={};function rM(t){Ve.exports.global.console&&Ve.exports.global.console.error&&Ve.exports.global.console.error(t)}function iM(t){Ve.exports.global.console&&Ve.exports.global.console.log&&Ve.exports.global.console.log(t)}function sM(t,e){ja[t]=!0,e!==void 0&&rM(e)}function oM(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(ja[r]=!0);while(r!==0);for(r in ja)if(ja[r])return delete ja[r],parseInt(r,10);return 0}}const dc=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};dc.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};dc.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Ps=function(e){const n=this;this.gl=e,oM(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const h=f.attribs[s];return h.buffer=n.currentArrayBuffer,h.size=o,h.type=a,h.normalized=l,h.stride=c,h.offset=u,h.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{iM("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Ps.prototype.VERTEX_ARRAY_BINDING_OES=34229;Ps.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new dc(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Ps.prototype.createVertexArrayOES=function(){const e=new dc(this);return this.vertexArrayObjects.push(e),e};Ps.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Ps.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof dc&&e.hasBeenBound&&e.ext===this)};Ps.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){sM(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let f=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),f=!0),(f||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function aM(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Ps(this)),this.__OESVertexArrayObject))}}const Iy="OES_element_index",Cy="WEBGL_draw_buffers",lM="EXT_disjoint_timer_query",cM="EXT_disjoint_timer_query_webgl2",uM="EXT_texture_filter_anisotropic",wy="WEBGL_debug_renderer_info",fM=35723,hM=4352,dM=36795,AM=34047,gM=37445,pM=37446,Ue=t=>_e(t)?void 0:0,mM={[3074]:t=>_e(t)?void 0:36064,[fM]:t=>_e(t)?void 0:hM,[35977]:Ue,[32937]:Ue,[dM]:(t,e)=>{const n=_e(t)?t.getExtension(cM):t.getExtension(lM);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[gM]:(t,e)=>{const n=t.getExtension(wy);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[pM]:(t,e)=>{const n=t.getExtension(wy);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[AM]:(t,e)=>{const n=t.luma.extensions[uM];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Ue,[35071]:Ue,[37447]:Ue,[36063]:(t,e)=>{if(!_e(t)){const n=t.getExtension(Cy);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Ue,[35374]:Ue,[35377]:Ue,[34852]:t=>{if(!_e(t)){const e=t.getExtension(Cy);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(Iy)?2147483647:65535,[33001]:t=>t.getExtension(Iy)?16777216:65535,[33e3]:t=>16777216,[37157]:Ue,[35373]:Ue,[35657]:Ue,[36183]:Ue,[37137]:Ue,[34045]:Ue,[35978]:Ue,[35979]:Ue,[35968]:Ue,[35376]:Ue,[35375]:Ue,[35659]:Ue,[37154]:Ue,[35371]:Ue,[35658]:Ue,[35076]:Ue,[35077]:Ue,[35380]:Ue};function EM(t,e,n){const r=mM[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const vM="OES_vertex_array_object",Ow="ANGLE_instanced_arrays",yM="WEBGL_draw_buffers",_M="EXT_disjoint_timer_query",xM="EXT_texture_filter_anisotropic",IM="VertexArray requires WebGL2 or OES_vertex_array_object extension";function CM(t,e){return{webgl2:_e(t),ext:t.getExtension(e)}}const Dw={[vM]:{meta:{suffix:"OES"},createVertexArray:()=>{Ht(!1,IM)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Ow]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ht(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[yM]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ht(!1)}},[_M]:{meta:{suffix:"EXT"},createQuery:()=>{Ht(!1)},deleteQuery:()=>{Ht(!1)},beginQuery:()=>{Ht(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Jd={readBuffer:(t,e,n)=>{_e(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=CM(t,Ow);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!_e(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!_e(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[xM];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:EM,hint(t,e,n,r){return e(n,r)}};function wM(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(aM(t),SM(t),RM(t,Dw),bM(t,{target:e,target2:t}),e.polyfilled=!0),t}const TM=typeof global<"u"?global:window;TM.polyfillContext=wM;function SM(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function bM(t,{target:e,target2:n}){Object.keys(Jd).forEach(r=>{if(typeof Jd[r]=="function"){const i=t[r]?t[r].bind(t):()=>{},s=Jd[r].bind(null,t,i);e[r]=s,n[r]=s}})}function RM(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&BM(t,{extension:n,target:t.luma,target2:t})}function BM(t,{extension:e,target:n,target2:r}){const i=Dw[e];Ht(i);const{meta:s={}}=i,{suffix:o=""}=s,a=t.getExtension(e);for(const l of Object.keys(i)){const c=`${l}${o}`;let u=null;l==="meta"||typeof t[l]=="function"||(a&&typeof a[c]=="function"?u=(...f)=>a[c](...f):typeof i[l]=="function"&&(u=i[l].bind(n))),u&&(n[l]=u,r[l]=u)}}const K0={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Jr=(t,e,n)=>e?t.enable(n):t.disable(n),Ty=(t,e,n)=>t.hint(n,e),nn=(t,e,n)=>t.pixelStorei(n,e),PM=(t,e)=>{const n=_e(t)?36009:36160;return t.bindFramebuffer(n,e)},NM=(t,e)=>t.bindFramebuffer(36008,e);function ba(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const LM={[3042]:Jr,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:Jr,[2885]:(t,e)=>t.cullFace(e),[2929]:Jr,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:Jr,[35723]:Ty,[36006]:PM,[2886]:(t,e)=>t.frontFace(e),[33170]:Ty,[2849]:(t,e)=>t.lineWidth(e),[32823]:Jr,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Jr,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Jr,[3088]:(t,e)=>t.scissor(...e),[2960]:Jr,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:nn,[3317]:nn,[37440]:nn,[37441]:nn,[37443]:nn,[3330]:nn,[3332]:nn,[3331]:nn,[36010]:NM,[3314]:nn,[32878]:nn,[3316]:nn,[3315]:nn,[32877]:nn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=ba(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=ba(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=ba(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=ba(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=ba(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function rt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const MM={blendEquation:(t,e,n)=>t.blendEquationSeparate(rt(32777,e,n),rt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(rt(32969,e,n),rt(32968,e,n),rt(32971,e,n),rt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(rt(32824,e,n),rt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(rt(32938,e,n),rt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,rt(2962,e,n),rt(2967,e,n),rt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,rt(34816,e,n),rt(36003,e,n),rt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,rt(2964,e,n),rt(2965,e,n),rt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,rt(34817,e,n),rt(34818,e,n),rt(34819,e,n))},Sy={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,r,i)=>t({[32773]:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,r,i)=>t({[32969]:e,[32968]:n,[32971]:r,[32970]:i}),clearColor:(t,e,n,r,i)=>t({[3106]:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,r,i)=>t({[3107]:[e,n,r,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,r,i)=>t({[3088]:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({[2962]:e,[2967]:n,[2963]:r,[34816]:e,[36003]:n,[36004]:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({[2964]:e,[2965]:n,[2966]:r,[34817]:e,[34818]:n,[34819]:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({[2978]:[e,n,r,i]})},tr=(t,e)=>t.isEnabled(e),by={[3042]:tr,[2884]:tr,[2929]:tr,[3024]:tr,[32823]:tr,[32926]:tr,[32928]:tr,[3089]:tr,[2960]:tr,[35977]:tr};function Fw(t){for(const e in t)return!1;return!0}function OM(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function Ry(t,e){const n=t[e].bind(t);t[e]=function(...i){const s=i[0];return s in t.state.cache?t.state.enable?t.state.cache[s]:n(...i):n(...i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function DM(t,e,n){const r=t[e].bind(t);t[e]=function(...s){const{valueChanged:o,oldValue:a}=n(t.state._updateCache,...s);return o&&r(...s),a},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function FM(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class QM{constructor(e,{copyState:n=!1,log:r=()=>{}}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?UM(e):Object.assign({},K0),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){Ht(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Qr(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Ht(s!==void 0);const o=e[s],a=this.cache[s];OM(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function Qw(t,e={}){const{enable:n=!0,copyState:r}=e;if(Ht(r!==void 0),!t.state){const i=typeof global<"u"?global:window,{polyfillContext:s}=i;s&&s(t),t.state=new QM(t,{copyState:r}),FM(t);for(const o in Sy){const a=Sy[o];DM(t,o,a)}Ry(t,"getParameter"),Ry(t,"isEnabled")}return t.state.enable=n,t}function kM(t){t.state||Qw(t,{copyState:!1}),t.state.push()}function By(t){Ht(t.state),t.state.pop()}function Qr(t,e){if(Ht(Lh(t),"setParameters requires a WebGL context"),Fw(e))return;const n={};for(const i in e){const s=Number(i),o=LM[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=MM[i];s(t,e,r)}}function UM(t,e){if(e=e||K0,typeof e=="number"){const i=e,s=by[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=by[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function GM(t){Qr(t,K0)}function $n(t,e,n){if(Fw(e))return n(t);const{nocatch:r=!0}=e;kM(t),Qr(t,e);let i;if(r)i=n(t),By(t);else try{i=n(t)}finally{By(t)}return i}function Oo(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function Zd(t,e,n=!0){const r=Oo(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return zM(e,r,i,s,n)}function VM(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function zM(t,e,n,r,i){const s=Py(t[0],e,n);let o=Ny(t[1],e,r,i),a=Py(t[0]+1,e,n);const l=a===n-1?a:a-1;a=Ny(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function Py(t,e,n){return Math.min(Math.round(t*e),n-1)}function Ny(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const q0=Ve.exports.isBrowser(),jM=q0&&typeof document<"u",kw={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Uw(t={}){Ht(q0,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},kw,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=$M({canvas:s,width:e,height:n,onError:r});return i=YM(o,t),i?(i=J0(i,t),XM(i),i):null}function J0(t,e={}){if(!t||t._instrumented)return t;t._version=t._version||KM(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},kw,e);const{manageState:n,debug:r}=e;return n&&Qw(t,{copyState:!1,log:(...i)=>re.log(1,...i)()}),q0&&r&&(Ve.exports.global.makeDebugContext?(t=Ve.exports.global.makeDebugContext(t,e),re.level=Math.max(re.level,1)):re.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function HM(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function WM(t,e={}){if(t.canvas){const r=VM(e.useDevicePixels);qM(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function YM(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${r||"Unknown error"}`)}function $M({canvas:t,width:e=800,height:n=600,onError:r}){let i;return typeof t=="string"?(jM&&document.readyState==="complete"||r(`createGLContext called on canvas '${t}' before page was loaded`),i=document.getElementById(t)):t?i=t:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",document.body.insertBefore(i,document.body.firstChild)),i}function XM(t){const e=_e(t)?"WebGL2":"WebGL1",n=HM(t),r=n?`(${n.vendor},${n.renderer})`:"",i=t.debug?" debug":"";re.info(1,`${e}${i} context ${r}`)()}function KM(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function qM(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(re.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(re.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const fl="8.5.10",JM="set luma.log.level=1 (or higher) to trace rendering";class ZM{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new Ph({id:e})),this.stats.get(e)}}const cs=new ZM;if(Ve.exports.global.luma&&Ve.exports.global.luma.VERSION!==fl)throw new Error(`luma.gl - multiple VERSIONs detected: ${Ve.exports.global.luma.VERSION} vs ${fl}`);Ve.exports.global.luma||(Ve.exports.isBrowser()&&re.log(1,`luma.gl ${fl} - ${JM}`)(),Ve.exports.global.luma=Ve.exports.global.luma||{VERSION:fl,version:fl,log:re,stats:cs,globals:{modules:{},nodeIO:{}}});Ve.exports.global.luma;function e8(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function t8(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function K(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function eA(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return K(r!==void 0,`Accessing undefined constant GL.${e}`),r}function xi(t,e){e=Number(e);for(const n in t)if(t[n]===e)return`GL.${n}`;return String(e)}const tA={};function Pi(t="id"){tA[t]=tA[t]||1;const e=tA[t]++;return`${t}-${e}`}function Ly(t){return K(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Do(t){let e=!0;for(const n in t){e=!1;break}return e}function Gw(t,e,n,r){const i=`See luma.gl ${n} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw re.removed(`Calling removed method ${e}.${o}: `,i)(),new Error(o)})})}const Vs="Resource subclass must define virtual methods";class jr{constructor(e,n={}){Mh(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||Pi(this.constructor.name),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(e=this.handle){if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e,n={}){e=eA(this.gl,e),K(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=_e(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(e={}){const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=_e(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const f=r?xi(this.gl,l):l;o[f]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[f]=xi(this.gl,o[f]))}}return o}setParameter(e,n){e=eA(this.gl,e),K(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=_e(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=eA(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return Gw(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Vs)}_deleteHandle(){throw new Error(Vs)}_bindHandle(e){throw new Error(Vs)}_getOptsFromHandle(){throw new Error(Vs)}_getParameter(e,n){throw new Error(Vs)}_setParameter(e,n){throw new Error(Vs)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this.constructor.name,n=cs.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get(`${e}s Created`).incrementCount(),n.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this.constructor.name;cs.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,n=this.constructor.name){const r=cs.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get(`${n} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){const n=cs.get("Memory Usage");n.get("GPU Memory").subtractCount(this.byteLength),n.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}const n8="Failed to deduce GL constant from typed array";function Hg(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n8)}}function Ml(t,{clamped:e=!0}={}){switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function r8({data:t,width:e,height:n,bytesPerPixel:r=4,temp:i}){const s=e*r;i=i||new Uint8Array(s);for(let o=0;o<n/2;++o){const a=o*s,l=(n-o-1)*s;i.set(t.subarray(a,a+s)),t.copyWithin(a,l,l+s),t.set(i,l)}}function i8({data:t,width:e,height:n}){const r=Math.round(e/2),i=Math.round(n/2),s=new Uint8Array(r*i*4);for(let o=0;o<i;o++)for(let a=0;a<r;a++)for(let l=0;l<4;l++)s[(o*r+a)*4+l]=t[(o*2*e+a*2)*4+l];return{data:s,width:r,height:i}}function Wg(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?`${t}.${r[a]}`:"N/A";re.removed(`${t}.${a}`,c)()}for(const a in i)if(a in e){const l=i[a];re.deprecated(`${t}.${a}`,`${t}.${l}`)()}let o=null;for(const a in s)if(a in e){const l=s[a];re.deprecated(`${t}.${a}`,`${t}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const s8={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},o8={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ln{static getBytesPerElement(e){return Ml(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return K(e.size),Ml(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new ln(s8,...e)}constructor(...e){e.forEach(n=>this._assign(n)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ln.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ln.getBytesPerVertex(this)}_assign(e={}){return e=Wg("Accessor",e,o8),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const My=10,Vw={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},a8={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Vw},l8={removedProps:Vw};class Le extends jr{constructor(e,n={}){super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/ln.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/ln.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Wg("Buffer",e,a8),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=Wg("Buffer",e,l8),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new ln(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;K(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(Ft(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData({sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}){const{gl:s}=this;return Ft(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,r,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}={}){Ft(this.gl);const s=Ml(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,K(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}={}){return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(K(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:n=this.accessor&&this.accessor.index}={}){return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(My,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,n=0,r=e.byteLength+n){K(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,My),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=Hg(e);return K(s),this.setAccessor(new ln(this.accessor,{type:s})),this}_setByteLength(e,n=this.usage){K(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Ml(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new ln(this.accessor,{type:Hg(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return re.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return re.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return re.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return re.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ln(this.accessor,e),this}}const Z0={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},zw={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},jw={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function c8(t,e){const n=Z0[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=_e(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function u8(t,e){const n=Z0[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const f8=[9729,9728],Oy=Ve.exports.global.WebGLBuffer||function(){};class _s extends jr{static isSupported(e,n={}){const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&c8(e,r),s=s&&(!i||u8(e,r))),s}constructor(e,n){const{id:r=Pi("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let n=e.data;if(n instanceof Promise)return n.then(E=>this.initialize(Object.assign({},e,{pixels:E,data:E}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:f,height:h,dataFormat:d,type:A,compressed:p=!1,mipmaps:g=!0}=e;const{depth:m=0}=e;return{width:f,height:h,compressed:p,dataFormat:d,type:A}=this._deduceParameters({format:s,type:A,dataFormat:d,compressed:p,data:n,width:f,height:h}),this.width=f,this.height=h,this.depth=m,this.format=s,this.type=A,this.dataFormat=d,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(re.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:n,width:f,height:h,depth:m,format:s,type:A,dataFormat:d,border:o,mipmaps:g,parameters:c,compressed:p}),g&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:n,mipmaps:r=!1}){return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(e={}){return this._isNPOT()?(re.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),$n(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:A=!1}=e;c||(c=r),{type:u,dataFormat:d,compressed:A,width:f,height:h}=this._deduceParameters({format:s,type:u,dataFormat:d,compressed:A,data:c,width:f,height:h});const{gl:p}=this;p.bindTexture(this.target,this.handle);let g=null;({data:c,dataType:g}=this._getDataType({data:c,compressed:A}));let m;if($n(this.gl,l,()=>{switch(g){case"null":p.texImage2D(n,i,s,f,h,o,d,u,c);break;case"typed-array":p.texImage2D(n,i,s,f,h,o,d,u,c,a);break;case"buffer":m=Ft(p),m.bindBuffer(35052,c.handle||c),m.texImage2D(n,i,s,f,h,o,d,u,a),m.bindBuffer(35052,null);break;case"browser-object":_e(p)?p.texImage2D(n,i,s,f,h,o,d,u,c):p.texImage2D(n,i,s,d,u,c);break;case"compressed":for(const[E,v]of c.entries())p.compressedTexImage2D(n,E,v.format,v.width,v.height,o,v.data);break;default:K(!1,"Unknown image data type")}}),c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const E=zw[this.dataFormat]||4,v=jw[this.type]||1;this._trackAllocatedMemory(this.width*this.height*E*v,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:f=this.dataFormat,compressed:h=!1,offset:d=0,border:A=this.border,parameters:p={}}){if({type:u,dataFormat:f,compressed:h,width:o,height:a}=this._deduceParameters({format:c,type:u,dataFormat:f,compressed:h,data:r,width:o,height:a}),K(this.depth===0,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const g=r;r=g.data,o=g.shape[0],a=g.shape[1]}r instanceof Le&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),$n(this.gl,p,()=>{if(h)this.gl.compressedTexSubImage2D(e,l,i,s,o,a,c,r);else if(r===null)this.gl.texSubImage2D(e,l,i,s,o,a,f,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,s,o,a,f,u,r,d);else if(r instanceof Oy){const g=Ft(this.gl);g.bindBuffer(35052,r),g.texSubImage2D(e,l,i,s,o,a,f,u,d),g.bindBuffer(35052,null)}else _e(this.gl)?Ft(this.gl).texSubImage2D(e,l,i,s,o,a,f,u,r):this.gl.texSubImage2D(e,l,i,s,f,u,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return re.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType({data:e,compressed:n=!1}){return n?{data:e,dataType:"compressed"}:e===null?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Le?{data:e.handle,dataType:"buffer"}:e instanceof Oy?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=Z0[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},K(i,"Could not deduced texture size"),K(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),K(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:K(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return _e(this.gl)||!this.width||!this.height?!1:!Ly(this.width)||!Ly(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:f8.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let h8="";function d8(t,e){return K(typeof t=="string"),t=h8+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error(`Could not load image ${t}.`)),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class gn extends _s{static isSupported(e,n){return _s.isSupported(e,n)}constructor(e,n={}){Mh(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:d8(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Yg=[34069,34070,34071,34072,34073,34074];class Hw extends _s{constructor(e,n={}){Mh(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(e={}){const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage({face:e,data:n,x:r=0,y:i=0,mipmapLevel:s=0}){return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:s})}async setCubeMapImageData({width:e,height:n,pixels:r,data:i,border:s=0,format:o=6408,type:a=5121}){const{gl:l}=this,c=r||i,u=await Promise.all(Yg.map(f=>{const h=c[f];return Promise.all(Array.isArray(h)?h:[h])}));this.bind(),Yg.forEach((f,h)=>{u[h].length>1&&this.opts.mipmaps!==!1&&re.warn(`${this.id} has mipmap and multiple LODs.`)(),u[h].forEach((d,A)=>{e&&n?l.texImage2D(f,A,o,e,n,s,o,a,d):l.texImage2D(f,A,o,o,a,d)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,f=s||o;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},e,{face:n,data:h,pixels:h}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,f):u.texImage2D(n,0,l,l,c,f),this}}Hw.FACES=Yg;class Ww extends _s{static isSupported(e){return _e(e)}constructor(e,n={}){Ft(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData({level:e=0,dataFormat:n=6408,width:r,height:i,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:u,parameters:f={}}){if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),$n(this.gl,f,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,r,i,s,o,a,l,u),u instanceof Le&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,r,i,s,o,a,l,c))}),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const h=zw[this.dataFormat]||4,d=jw[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*h*d,"Texture")}return this.loaded=!0,this}}const $i="EXT_color_buffer_float",Dy={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:$i,bpp:2},[33327]:{gl2:$i,bpp:4},[34842]:{gl2:$i,bpp:8},[33326]:{gl2:$i,bpp:4},[33328]:{gl2:$i,bpp:8},[34836]:{gl2:$i,bpp:16},[35898]:{gl2:$i,bpp:4}};function A8(t,e,n){const r=n[e];if(!r)return!1;const i=_e(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class lo extends jr{static isSupported(e,{format:n}={format:null}){return!n||A8(e,n,Dy)}static getSamplesForFormat(e,{format:n}){return e.getInternalformatParameter(36161,n,32937)}constructor(e,n={}){super(e,n),this.initialize(n),Object.seal(this)}initialize({format:e,width:n=1,height:r=1,samples:i=0}){return K(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),i!==0&&_e(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Dy[this.format].bpp),this}resize({width:e,height:n}){return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const g8=256,p8=1024,m8=16384,Fy=6144,Qy=6145,ky=6146,Uy=34041,Yw="clear: bad arguments";function em(t,{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}={}){const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=m8,n!==!0&&(s.clearColor=n)),r&&(o|=g8,r!==!0&&(s.clearDepth=r)),i&&(o|=p8,r!==!0&&(s.clearStencil=r)),K(o!==0,Yw),$n(t,s,()=>{t.clear(o)})}function E8(t,{framebuffer:e=null,buffer:n=Fy,drawBuffer:r=0,value:i=[0,0,0,0]}={}){Ft(t),$n(t,{framebuffer:e},()=>{switch(n){case Fy:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case Qy:t.clearBufferfv(Qy,0,[i]);break;case ky:t.clearBufferiv(ky,0,[i]);break;case Uy:const[s,o]=i;t.clearBufferfi(Uy,0,s,o);break;default:K(!1,Yw)}})}function v8(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return K(!1),0}}function Oh(t,e={}){const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:f}=$w(t);K(u);const{gl:h,handle:d,attachments:A}=u;a=a||u.width,l=l||u.height,s===36064&&d===null&&(s=1028),K(A[s]),c=c||A[s].type,o=_8(o,c,i,a,l),c=c||Hg(o);const p=h.bindFramebuffer(36160,d);return h.readPixels(n,r,a,l,i,c,o),h.bindFramebuffer(36160,p||null),f&&u.delete(),o}function Gy(t,{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}={}){let r=Oh(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=i8({data:r,width:i,height:s}));r8({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function y8(t,e,n={}){const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:f}=n;const{framebuffer:h,deleteFramebuffer:d}=$w(t);K(h);const{gl:A,handle:p}=h,g=typeof a<"u"||typeof l<"u"||typeof c<"u";a=a||0,l=l||0,c=c||0;const m=A.bindFramebuffer(36160,p);K(e);let E=null;if(e instanceof _s&&(E=e,u=Number.isFinite(u)?u:E.width,f=Number.isFinite(f)?f:E.height,E.bind(0),e=E.target),!g)A.copyTexImage2D(e,s,o,r,i,u,f,0);else switch(e){case 3553:case 34067:A.copyTexSubImage2D(e,s,a,l,r,i,u,f);break;case 35866:case 32879:Ft(A).copyTexSubImage3D(e,s,a,l,c,r,i,u,f);break}return E&&E.unbind(),A.bindFramebuffer(36160,m||null),d&&h.delete(),E}function $w(t){return t instanceof At?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:R8(t),deleteFramebuffer:!0}}function _8(t,e,n,r,i){if(t)return t;e=e||5121;const s=Ml(e,{clamped:!1}),o=v8(n);return new s(r*i*o)}const Oe={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function x8(t){const e=new gn(t,{format:6408,type:5126,dataFormat:6408}),n=new At(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const Xw={[Oe.WEBGL2]:[!1,!0],[Oe.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Oe.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Oe.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Oe.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Oe.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Oe.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Oe.FLOAT_BLEND]:["EXT_float_blend"],[Oe.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Oe.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Oe.TEXTURE_FLOAT]:["OES_texture_float",!0],[Oe.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Oe.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Oe.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Oe.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Oe.COLOR_ATTACHMENT_RGBA32F]:[x8,"EXT_color_buffer_float"],[Oe.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Oe.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Oe.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Oe.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Oe.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Oe.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},I8=2;function $g(t,e){return tm(t,e)}function tm(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>Kw(t,n))}function C8(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Xw)t.luma.caps[e]===void 0&&(t.luma.caps[e]=Kw(t,e));return t.luma.caps}function Kw(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=w8(t,e)),t.luma.caps[e]||re.log(I8,`Feature: ${e} not supported`)(),t.luma.caps[e]}function w8(t,e){const n=Xw[e];K(n,e);let r;const i=_e(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&Boolean(t.getExtension(s))}else typeof i=="string"?r=Boolean(t.getExtension(i)):typeof i=="boolean"?r=i:K(!1);return r}const Vy="Multiple render targets not supported";class At extends jr{static isSupported(e,n={}){const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new At(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ft(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ft(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,n={}){super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l=void 0,drawBuffers:c=void 0}){if(K(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const u in r){const f=r[u];(Array.isArray(f)?f[0]:f).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,s,o,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:c}),r&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:n,height:r}=e;if(this.handle===null)return K(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&re.log(2,`Resizing framebuffer ${this.id} to ${n}x${r}`)();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e,{clearAttachments:n=!1,resizeAttachments:r=!0}={}){const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){K(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof lo)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,f=0,h=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:f,level:h})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(S8(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(e={}){const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&em(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{E8(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return re.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return re.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return re.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return re.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return re.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return re.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:n=0,y:r=0,width:i,height:s}){const o=Ft(this.gl),a=o.bindFramebuffer(36008,this.handle);return n===0&&r===0&&i===void 0&&s===void 0?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,n,r,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=xi(this.gl,i)),i}getAttachmentParameters(e=36064,n,r=this.constructor.ATTACHMENT_PARAMETERS||[]){const i={};for(const s of r){const o=n?xi(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(e=!0){const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?xi(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(Gy(this),"luma-debug-texture"),this}log(e=0,n=""){if(e>re.level||typeof window>"u")return this;n=n||`Framebuffer ${this.id}`;const r=Gy(this,{targetMaxHeight:100});return re.image({logLevel:e,message:n,image:r},n)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new gn(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new lo(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new lo(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&K(!1),o}_unattach(e){const n=this.attachments[e];!n||(n instanceof lo?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:n}){const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture({attachment:e=36064,texture:n,layer:r,level:i}){const{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Ft(s).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const a=T8(r);s.framebufferTexture2D(36160,e,a,n.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:K(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(e){const n=nM(this.gl);n?n.readBuffer(e):K(e===36064||e===1029,Vy),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Ft(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):K(e.length===1&&(e[0]===36064||e[0]===1029),Vy)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=C8(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function T8(t){return t<34069?t+34069:t}function S8(t){return(At.STATUS||{})[t]||`Framebuffer error ${t}`}const b8=[36049,36048,33296,33298,33299,33300,33301,33302,33303];At.ATTACHMENT_PARAMETERS=b8;function qw(t,e){K(t instanceof gn||t instanceof Hw||t instanceof Ww);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,f=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,f)}function R8(t,e){const{gl:n,width:r,height:i,id:s}=t;return new At(n,Object.assign({},e,{id:`framebuffer-for-${s}`,width:r,height:i,attachments:{[36064]:t}}))}function ju(t,e="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const B8=35632,P8=35633;function N8(t){switch(t){case B8:return"fragment";case P8:return"vertex";default:return"unknown type"}}function L8(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||ju(e)||"(unnamed)",l=`${N8(n)} shader ${a}`;for(let u=0;u<i.length;u++){const f=i[u];if(f.length<=1)continue;const h=f.split(":"),d=h[0],A=parseInt(h[2],10);if(isNaN(A))throw new Error(`GLSL compilation error in ${l}: ${t}`);d!=="WARNING"?s[A]=f:o[A]=f}const c=M8(e);return{shaderName:l,errors:zy(s,c),warnings:zy(o,c)}}function zy(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+=`${i}
`,t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=Jw(`^^^ ${a}: ${c}

`,l)}}return n}function M8(t,e=1,n=": "){const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return Jw(a,i-l)+n+s})}function Jw(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return`${n}${t}`}function Zw(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const O8="Shader: GLSL source code must be a JavaScript string";class Ol extends jr{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return K(!1),"unknown"}}constructor(e,n){Mh(e),K(typeof n.source=="string",O8);const r=ju(n.source,null)||n.id||Pi(`unnamed ${Ol.getTypeName(n.shaderType)}`);super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize({source:e}){const n=ju(e,null);n&&(this.id=Pi(n)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${Ol.getTypeName(this.shaderType)}:${this.id}`}getName(){return ju(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100
${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=L8(r,this.source,this.shaderType,this.id);throw re.error(`GLSL compilation errors in ${i}
${s}`)(),re.warn(`GLSL compilation warnings in ${i}
${o}`)(),new Error(`GLSL compilation errors in ${i}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class nA extends Ol{constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class rA extends Ol{constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const D8={[5126]:je.bind(null,"uniform1fv",rn,1,Nt),[35664]:je.bind(null,"uniform2fv",rn,2,Nt),[35665]:je.bind(null,"uniform3fv",rn,3,Nt),[35666]:je.bind(null,"uniform4fv",rn,4,Nt),[5124]:je.bind(null,"uniform1iv",Zr,1,Nt),[35667]:je.bind(null,"uniform2iv",Zr,2,Nt),[35668]:je.bind(null,"uniform3iv",Zr,3,Nt),[35669]:je.bind(null,"uniform4iv",Zr,4,Nt),[35670]:je.bind(null,"uniform1iv",Zr,1,Nt),[35671]:je.bind(null,"uniform2iv",Zr,2,Nt),[35672]:je.bind(null,"uniform3iv",Zr,3,Nt),[35673]:je.bind(null,"uniform4iv",Zr,4,Nt),[35674]:je.bind(null,"uniformMatrix2fv",rn,4,Cr),[35675]:je.bind(null,"uniformMatrix3fv",rn,9,Cr),[35676]:je.bind(null,"uniformMatrix4fv",rn,16,Cr),[35678]:Ct,[35680]:Ct,[5125]:je.bind(null,"uniform1uiv",Kc,1,Nt),[36294]:je.bind(null,"uniform2uiv",Kc,2,Nt),[36295]:je.bind(null,"uniform3uiv",Kc,3,Nt),[36296]:je.bind(null,"uniform4uiv",Kc,4,Nt),[35685]:je.bind(null,"uniformMatrix2x3fv",rn,6,Cr),[35686]:je.bind(null,"uniformMatrix2x4fv",rn,8,Cr),[35687]:je.bind(null,"uniformMatrix3x2fv",rn,6,Cr),[35688]:je.bind(null,"uniformMatrix3x4fv",rn,12,Cr),[35689]:je.bind(null,"uniformMatrix4x2fv",rn,8,Cr),[35690]:je.bind(null,"uniformMatrix4x3fv",rn,12,Cr),[35678]:Ct,[35680]:Ct,[35679]:Ct,[35682]:Ct,[36289]:Ct,[36292]:Ct,[36293]:Ct,[36298]:Ct,[36299]:Ct,[36300]:Ct,[36303]:Ct,[36306]:Ct,[36307]:Ct,[36308]:Ct,[36311]:Ct},F8={},Q8={},k8={},jy=[0];function nm(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(jy[0]=t,t=jy);const i=t.length;if(i%e&&re.warn(`Uniform size should be multiples of ${e}`,t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function rn(t,e){return nm(t,e,Float32Array,F8)}function Zr(t,e){return nm(t,e,Int32Array,Q8)}function Kc(t,e){return nm(t,e,Uint32Array,k8)}function Hy(t,e,n){const r=D8[n.type];if(!r)throw new Error(`Unknown GLSL uniform type ${n.type}`);return r().bind(null,t,e)}function U8(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function G8(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!V8(i))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${r}`,i),new Error(`${e} Bad uniform ${r}`)}return!0}function V8(t){return Array.isArray(t)||ArrayBuffer.isView(t)?j8(t):isFinite(t)||t===!0||t===!1||t instanceof _s||t instanceof lo?!0:t instanceof At?Boolean(t.texture):!1}function z8(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function j8(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Ct(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function je(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let f=!1;if(i===null)i=new Float32Array(u),s=u,f=!0;else{K(s===u,"Uniform length cannot change.");for(let h=0;h<u;++h)if(c[h]!==i[h]){f=!0;break}}return f&&(r(o,t,a,c),i.set(c)),f}}function Nt(t,e,n,r){t[e](n,r)}function Cr(t,e,n,r){t[e](n,!1,r)}const H8=5120,W8=5121,Y8=5122,$8=5123,Wy=0,qc=1,X8=2,K8=3,Jc=4,q8=5,J8=6,ft=5126,Z8=35664,eO=35665,tO=35666,Ra=5124,nO=35667,rO=35668,iO=35669,Ba=5125,sO=36294,oO=36295,aO=36296,lO=35670,cO=35671,uO=35672,fO=35673,hO=35674,dO=35675,AO=35676,gO=35685,pO=35686,mO=35687,EO=35688,vO=35689,yO=35690,Xg={[ft]:[ft,1,"float"],[Z8]:[ft,2,"vec2"],[eO]:[ft,3,"vec3"],[tO]:[ft,4,"vec4"],[Ra]:[Ra,1,"int"],[nO]:[Ra,2,"ivec2"],[rO]:[Ra,3,"ivec3"],[iO]:[Ra,4,"ivec4"],[Ba]:[Ba,1,"uint"],[sO]:[Ba,2,"uvec2"],[oO]:[Ba,3,"uvec3"],[aO]:[Ba,4,"uvec4"],[lO]:[ft,1,"bool"],[cO]:[ft,2,"bvec2"],[uO]:[ft,3,"bvec3"],[fO]:[ft,4,"bvec4"],[hO]:[ft,8,"mat2"],[gO]:[ft,8,"mat2x3"],[pO]:[ft,8,"mat2x4"],[dO]:[ft,12,"mat3"],[mO]:[ft,12,"mat3x2"],[EO]:[ft,12,"mat3x4"],[AO]:[ft,16,"mat4"],[vO]:[ft,16,"mat4x2"],[yO]:[ft,16,"mat4x3"]};function _O(t){switch(t){case Wy:return Wy;case qc:return qc;case K8:return qc;case X8:return qc;case Jc:return Jc;case q8:return Jc;case J8:return Jc;default:return K(!1),0}}function Yy(t){const e=Xg[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function eT(t,e){switch(t){case H8:case W8:case Y8:case $8:t=ft;break}for(const n in Xg){const[r,i,s]=Xg[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class xO{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!_e(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=Yy(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new ln(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=Yy(r),a=new ln({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const $y=4,IO=35981,CO=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class tT extends jr{constructor(e,n={}){super(e,n),this.stubRemovedMethods("Program","v6.0",CO),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(e={}){const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=IO}=e;return this.hash=n||"",this.vs=typeof r=="string"?new nA(this.gl,{id:`${e.id}-vs`,source:r}):r,this.fs=typeof i=="string"?new rA(this.gl,{id:`${e.id}-fs`,source:i}):i,K(this.vs instanceof nA),K(this.fs instanceof rA),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Ft(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new xO(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:f=null,transformFeedback:h,framebuffer:d,parameters:A={},uniforms:p,samplers:g}){if((p||g)&&(re.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(p||{})),re.priority>=e){const m=d?d.id:"default",E=`mode=${xi(this.gl,n)} verts=${r} instances=${c} indexType=${xi(this.gl,l)} isInstanced=${u} isIndexed=${a} Framebuffer=${m}`;re.log(e,E)()}return K(f),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||r===0||u&&c===0?!1:(f.bindForDraw(r,c,()=>{if(d!==void 0&&(A=Object.assign({},A,{framebuffer:d})),h){const m=_O(n);h.begin(m)}this._bindTextures(),$n(this.gl,A,()=>{a&&u?this.gl2.drawElementsInstanced(n,r,l,i,c):a&&_e(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(n,s,o,r,l,i):a?this.gl.drawElements(n,r,l,i):u?this.gl2.drawArraysInstanced(n,i,r,c):this.gl.drawArrays(n,i,r)}),h&&h.end()}),!0)}setUniforms(e={}){re.priority>=2&&G8(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof At&&(s=s.texture),s instanceof _s)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&z8(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new nA({handle:i});break;case 35632:r.fs=new rA({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Pi(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),re.time($y,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),re.timeEnd($y,`linkProgram for ${this._getName()}`)(),e.debug||re.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=U8(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Hy(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,`${i}[${o}]`),this._uniformSetters[`${i}[${o}]`]=Hy(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const wO=34918,TO=34919,SO=35007,bO=36795,RO=35976,BO=35887,PO=36202;class Nf extends jr{static isSupported(e,n=[]){const r=_e(e),i=tm(e,Oe.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:K(!1)}return s}constructor(e,n={}){super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(SO)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?PO:BO)}beginTransformFeedbackQuery(){return this.begin(RO)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,TO);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(bO)}getResult(){return this.gl2.getQueryParameter(this.handle,wO)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return Nf.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class nT extends jr{static isSupported(e){return _e(e)}constructor(e,n={}){Ft(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Do(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,re.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof Le?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n,r=0,i){const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Zc=null;function NO(t){return(!Zc||Zc.byteLength<t)&&(Zc=new ArrayBuffer(t)),Zc}function LO(t,e){const n=NO(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function MO({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const OO="elements must be GL.ELEMENT_ARRAY_BUFFER";class an extends jr{static isSupported(e,n={}){return n.constantAttributeZero?_e(e)||yw()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new an(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return an.MAX_ATTRIBUTES=an.MAX_ATTRIBUTES||e.getParameter(34921),an.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:an._setConstantFloatArray(e,n,r);break;case Int32Array:an._setConstantIntArray(e,n,r);break;case Uint32Array:an._setConstantUintArray(e,n,r);break;default:K(!1)}}constructor(e,n={}){const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return an.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,n={}){return K(!e||e.target===34963,OO),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:f,gl2:h}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),c?(K(_e(f)),h.vertexAttribIPointer(e,i,s,o,a)):f.vertexAttribPointer(e,i,s,l,o,a),f.enableVertexAttribArray(e),h.vertexAttribDivisor(e,u||0)}),this}enable(e,n=!0){return!n&&e===0&&!an.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Le(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=LO(n.constructor,s);MO({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:K(!1)}}static _setConstantIntArray(e,n,r){switch(K(_e(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:K(!1)}}static _setConstantUintArray(e,n,r){switch(K(_e(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:K(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:n}){return K(Number.isFinite(n)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(n,e);default:return this.gl.getVertexAttrib(n,e)}})}}const DO="VertexArray: attributes must be Buffers or constants (i.e. typed array)",FO=/^(.+)__LOCATION_([0-9]+)$/,QO=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class kO{constructor(e,n={}){const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new an(e),Gw(this,"VertexArray","v6.0",QO),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,n={}){return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n,r={}){if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n,r={}){const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Le(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Le&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Le&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,re.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=ln.resolve(l.accessor,c,r,i),{size:f,type:h}=u;return K(Number.isFinite(f)&&Number.isFinite(h)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=FO.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof Le)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Le){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof Le){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(DO)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(an.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){an.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof Le){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,n={}){return re.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function UO(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=`,${o%r===0?" ":""}`),i+=Dl(t[o],e);const s=t.length>n?"...":"]";return`${i}${s}`}function Dl(t,e={}){const{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return UO(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Xy({header:t="Uniforms",program:e,uniforms:n,undefinedOnly:r=!1}){K(e);const i=".*_.*",s=".*Matrix",o=e._uniformSetters,a={},l=Object.keys(o).sort();let c=0;for(const h of l)!h.match(i)&&!h.match(s)&&iA({table:a,header:t,uniforms:n,uniformName:h,undefinedOnly:r})&&c++;for(const h of l)h.match(s)&&iA({table:a,header:t,uniforms:n,uniformName:h,undefinedOnly:r})&&c++;for(const h of l)a[h]||iA({table:a,header:t,uniforms:n,uniformName:h,undefinedOnly:r})&&c++;let u=0;const f={};if(!r)for(const h in n){const d=n[h];a[h]||(u++,f[h]={Type:`NOT USED: ${d}`,[t]:Dl(d)})}return{table:a,count:c,unusedTable:f,unusedCount:u}}function iA({table:t,header:e,uniforms:n,uniformName:r,undefinedOnly:i}){const s=n[r],o=GO(s);return!i||!o?(t[r]={[e]:o?Dl(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},!0):!1}function GO(t){return t!=null}function VO({vertexArray:t,header:e="Attributes"}){if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=Ky(t,t.elements,null,e));const r=t.values;for(const i in r){const s=t._getAttributeInfo(i);if(s){let o=`${i}: ${s.name}`;const a=t.accessors[s.location];a&&(o=`${i}: ${zO(s.name,a)}`),n[o]=Ky(t,r[i],a,e)}}return n}function Ky(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,f;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof Le){const h=e,{data:d,changed:A}=h.getDebugData();u=A?"*":"",f=d,l=h.byteLength,a=l/d.BYTES_PER_ELEMENT/o;let p;return n?p=`${n.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${xi(i,s)})`:(c=!0,p=`${l} bytes`),{[r]:`${u}${Dl(f,{size:o,isInteger:c})}`,"Format ":p}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:`${Dl(f,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function zO(t,e){const{type:n,size:r}=e,i=eT(n,r);return i?`${t} (${i.name})`:t}function jO(t){const e={},n=`Accessors for ${t.id}`;for(const r of t.attributeInfos)if(r){const i=qy(r);e[`in ${i}`]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=qy(r);e[`out ${i}`]={[n]:JSON.stringify(r.accessor)}}return e}function qy(t){const{type:e,size:n}=t.accessor,r=eT(e,n);return r?`${r.name} ${t.name}`:t.name}const Jy=Ve.exports.isBrowser()&&typeof document<"u";let HO=0;class WO{constructor(e={}){const{onCreateContext:n=g=>Uw(g),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:A=cs.get(`animation-loop-${HO++}`)}=e;let{useDevicePixels:p=!0}=e;"useDevicePixelRatio"in e&&(re.deprecated("useDevicePixelRatio","useDevicePixels")(),p=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=A,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return K(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Nf.isSupported(this.gl,["timers"])?new Nf(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,n=1){const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return re.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Jy?new Promise((e,n)=>{if(Jy&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):t8(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):e8(e)}_renderFrame(...e){if(this.display){this.display._renderFrame(...e);return}this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?J0(this.props.gl,e):this.onCreateContext(e),!Lh(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");GM(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&WM(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new At(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Ac="vs",rm="fs";function hn(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const sA={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function YO(t){const e={};for(const n in t){const r=t[n],i=$O(r);e[n]=i}return e}function $O(t){let e=Zy(t);return e==="object"?t?"type"in t?Object.assign({},t,sA[t.type]):"value"in t?(e=Zy(t.value),Object.assign({type:e},t,sA[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},sA[e])}function Zy(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const XO="vs",KO="fs";class e_{constructor({name:e,vs:n,fs:r,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:f}){hn(typeof e=="string"),this.name=e,this.vs=n||u,this.fs=r||f,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=qO(c),s&&(this.uniforms=YO(s))}getModuleSource(e){let n;switch(e){case XO:n=this.vs||"";break;case KO:n=this.fs||"";break;default:hn(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}
${n}// END MODULE_${this.name}

`}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp(`\\b${n.old}\\(`);break;default:n.regex=new RegExp(`${n.type} ${n.old};`)}}),e}_defaultGetUniforms(e={}){const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&hn(s.validate(e[i],s),`${this.name}: invalid ${i}`),n[i]=e[i]):n[i]=s.value}return n}}function qO(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function JO(t){return ZO(iT(t))}function ZO(t){const e={},n={};return rT({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function rT({modules:t,level:e,moduleMap:n,moduleDepth:r}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const i of t)n[i.name]=i,(r[i.name]===void 0||r[i.name]<e)&&(r[i.name]=e);for(const i of t)i.dependencies&&rT({modules:i.dependencies,level:e+1,moduleMap:n,moduleDepth:r})}function iT(t,e){return t.map(n=>(n instanceof e_||(hn(typeof n!="string",`Shader module use by name is deprecated. Import shader module '${n}' and use it directly.`),hn(n.name,"shader module has no name"),n=new e_(n),n.dependencies=iT(n.dependencies)),n))}function e5(t={}){const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const t5=7936,n5=7937,r5=7938,i5=35724,im={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Zi={};Object.keys(im).forEach(t=>{Zi[t]=t});function s5(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function o5(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||t5),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||n5);return{gpuVendor:a5(n,r),vendor:n,renderer:r,version:t.getParameter(r5),shadingLanguageVersion:t.getParameter(i5)}}function a5(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const oA={};function t_(t,e,n={}){const r=im[e];if(hn(r,e),!e5(n))return!0;if(e in oA)return oA[e];const i=r[0],s=n.behavior||"enable",o=`#extension GL_${i} : ${s}
void main(void) {}`,a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),oA[e]=l,l}function l5(t,e){const n=im[e];hn(n,e);const r=s5(t)&&n[1]||n[0],i=typeof r=="string"?Boolean(t.getExtension(r)):r;return hn(i===!1||i===!0),i}function eu(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>l5(t,n))}function c5(t){switch(o5(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function u5(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return eu(t,Zi.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),eu(t,Zi.GLSL_DERIVATIVES)&&t_(t,Zi.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),eu(t,Zi.GLSL_FRAG_DATA)&&t_(t,Zi.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),eu(t,Zi.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const f5=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,h5=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,d5={[Ac]:f5,[rm]:h5},Hu="__LUMA_INJECT_DECLARATIONS__",n_=/void\s+main\s*\([^)]*\)\s*\{\n?/,r_=/}\n?[^{}]*$/,aA=[];function i_(t,e,n,r=!1){const i=e===Ac;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),aA.length=o.length;for(let l=0,c=o.length;l<c;++l)aA[l]=o[l].injection;const a=`${aA.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(Hu,a));break;case"vs:#main-start":i&&(t=t.replace(n_,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(r_,l=>a+l));break;case"fs:#decl":i||(t=t.replace(Hu,a));break;case"fs:#main-start":i||(t=t.replace(n_,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(r_,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(Hu,""),r&&(t=t.replace(/\}\s*$/,s=>s+d5[e])),t}function Kg(t){const e={};return hn(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?`${e[r]}
${n[r]}`:n[r]}),e}function Fo(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const sT=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],A5=[...sT,[Fo("attribute"),"in $1"],[Fo("varying"),"out $1"]],g5=[...sT,[Fo("varying"),"in $1"]],oT=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],p5=[...oT,[Fo("in"),"attribute $1"],[Fo("out"),"varying $1"]],m5=[...oT,[Fo("in"),"varying $1"]],qg="gl_FragColor",Jg=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,E5=/void\s+main\s*\([^)]*\)\s*\{\n?/;function v5(t,e,n){switch(e){case 300:return n?Lf(t,A5):y5(t);case 100:return n?Lf(t,p5):_5(t);default:throw new Error(`unknown GLSL version ${e}`)}}function Lf(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function y5(t){t=Lf(t,g5);const e=t.match(Jg);if(e){const n=e[1];t=t.replace(new RegExp(`\\b${qg}\\b`,"g"),n)}else{const n="fragmentColor";t=t.replace(E5,r=>`out vec4 ${n};
${r}`).replace(new RegExp(`\\b${qg}\\b`,"g"),n)}return t}function _5(t){t=Lf(t,m5);const e=t.match(Jg);if(e){const n=e[1];t=t.replace(Jg,"").replace(new RegExp(`\\b${n}\\b`,"g"),qg)}return t}const x5=`

${Hu}

`,aT={[Ac]:"vertex",[rm]:"fragment"},I5=`precision highp float;

`;function C5(t,e){const{vs:n,fs:r}=e,i=JO(e.modules||[]);return{gl:t,vs:s_(t,Object.assign({},e,{source:n,type:Ac,modules:i})),fs:s_(t,Object.assign({},e,{source:r,type:rm,modules:i})),getUniforms:w5(i)}}function s_(t,{id:e,source:n,type:r,modules:i,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:u}){hn(typeof n=="string","shader source must be a string");const f=r===Ac,h=n.split(`
`);let d=100,A="",p=n;h[0].indexOf("#version ")===0?(d=300,A=h[0],p=h.slice(1).join(`
`)):A=`#version ${d}`;const g={};i.forEach(x=>{Object.assign(g,x.getDefines())}),Object.assign(g,s);let m=c?`${A}
${S5({id:e,source:n,type:r})}
${T5({type:r})}
${c5(t)}
${u5(t)}
${b5(g)}
${f?"":I5}
`:`${A}
`;const E=B5(o),v={},y={},C={};for(const x in a){const B=typeof a[x]=="string"?{injection:a[x],order:0}:a[x],R=x.match(/^(v|f)s:(#)?([\w-]+)$/);if(R){const b=R[2],N=R[3];b?N==="decl"?y[x]=[B]:C[x]=[B]:v[x]=[B]}else C[x]=[B]}for(const x of i){u&&x.checkDeprecations(p,u),m+=x.getModuleSource(r,d);const R=x.injections[r];for(const b in R){const N=b.match(/^(v|f)s:#([\w-]+)$/);if(N){const D=N[2]==="decl"?y:C;D[b]=D[b]||[],D[b].push(R[b])}else v[b]=v[b]||[],v[b].push(R[b])}}return m+=x5,m=i_(m,r,y),m+=R5(E[r],v),m+=p,m=i_(m,r,C),m=v5(m,l?100:d,f),m}function w5(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function T5({type:t}){return`
#define SHADER_TYPE_${aT[t].toUpperCase()}
`}function S5({id:t,source:e,type:n}){return t&&typeof t=="string"&&e.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${t}_${aT[n]}

`:""}function b5(t={}){let e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+=`#define ${r.toUpperCase()} ${t[r]}
`)}return e===0&&(n+=`
`),n}function R5(t,e){let n="";for(const r in t){const i=t[r];if(n+=`void ${i.signature} {
`,i.header&&(n+=`  ${i.header}`),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+=`  ${o.injection}
`}i.footer&&(n+=`  ${i.footer}`),n+=`}
`}return n}function B5(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const P5="void main() {gl_FragColor = vec4(0);}",lT=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,N5=`#version 300 es
${lT}`;function cT(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function uT(t={}){const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?N5:e>300?`#version ${e}
${lT}`:P5;const s=O5(n,r);return e>=300?`#version ${e} ${e===300?"es":""}
in ${r} ${n};
out vec4 ${i};
void main() {
  ${i} = ${s};
}`:`varying ${r} ${n};
void main() {
  gl_FragColor = ${s};
}`}function L5(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return hn(!1),null}}function M5(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return hn(!1),null}}function O5(t,e){switch(e){case"float":return`vec4(${t}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${t}, 0.0, 1.0)`;case"vec3":return`vec4(${t}, 1.0)`;case"vec4":return t;default:return hn(!1),null}}const D5=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,F5={name:"fp32",vs:D5,fs:null};function Wt(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const dt={};dt.EPSILON=1e-12;dt.debug=!1;dt.precision=4;dt.printTypes=!1;dt.printDegrees=!1;dt.printRowMajor=!0;function Q5(t){return Math.round(t/dt.EPSILON)*dt.EPSILON}function k5(t,{precision:e=dt.precision||4}={}){return t=Q5(t),"".concat(parseFloat(t.toPrecision(e)))}function Qo(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function U5(t){return t.clone?t.clone():new Array(t.length)}function G5(t,e,n){if(Qo(t)){n=n||U5(t);for(let r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}function cn(t,e,n){return G5(t,r=>Math.max(e,Math.min(n,r)))}function ps(t,e,n){return Qo(t)?t.map((r,i)=>ps(r,e[i],n)):n*e+(1-n)*t}function Ii(t,e,n){const r=dt.EPSILON;n&&(dt.EPSILON=n);try{if(t===e)return!0;if(Qo(t)&&Qo(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Ii(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):Number.isFinite(t)&&Number.isFinite(e)?Math.abs(t-e)<=dt.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{dt.EPSILON=r}}function V5(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class sm extends V5(Array){get ELEMENTS(){return Wt(!1),0}clone(){return new this.constructor().copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}to(e){return e===this?this:Qo(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(dt)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+k5(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Ii(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){r===void 0&&(r=n,n=e,e=this);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(dt.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}}function z5(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Tt(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function hl(t,e,n=""){if(dt.debug&&!z5(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}const o_={};function wo(t,e){o_[t]||(o_[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class j5 extends sm{get ELEMENTS(){return Wt(!1),0}copy(e){return Wt(!1),this}get x(){return this[0]}set x(e){this[0]=Tt(e)}get y(){return this[1]}set y(e){this[1]=Tt(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Tt(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Tt(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Wt(e>=0&&e<this.ELEMENTS,"index is out of range"),Tt(this[e])}setComponent(e,n){return Wt(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var dl=1e-6,qn=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function H5(){var t=new qn(2);return qn!=Float32Array&&(t[0]=0,t[1]=0),t}function Mf(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function fT(t,e){return t[0]=-e[0],t[1]=-e[1],t}function hT(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function W5(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Y5(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=H5();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function $5(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function dT(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function X5(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function K5(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*s,t[1]=n[1]*r+n[4]*i+n[7]*s,t[2]=n[2]*r+n[5]*i+n[8]*s,t[3]=e[3],t}function AT(){var t=new qn(3);return qn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function q5(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function a_(t,e,n){var r=new qn(3);return r[0]=t,r[1]=e,r[2]=n,r}function J5(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Z5(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function eD(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function gT(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wu(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function pT(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function mT(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function tD(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,f=s*a-r*c,h=r*l-i*a,d=i*h-s*f,A=s*u-r*h,p=r*f-i*u,g=o*2;return u*=g,f*=g,h*=g,d*=2,A*=2,p*=2,t[0]=a+u+d,t[1]=l+f+A,t[2]=c+h+p,t}function nD(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function rD(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function iD(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function sD(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,f=u&&gT(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}var oD=J5,aD=q5;(function(){var t=AT();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const lA=[0,0,0],l_={};class q extends j5{static get ZERO(){return l_.ZERO=l_.ZERO||Object.freeze(new q(0,0,0,0))}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Qo(e)?this.copy(e):(dt.debug&&(Tt(e),Tt(n),Tt(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return dt.debug&&(Tt(e.x),Tt(e.y),Tt(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Tt(e)}angle(e){return sD(this,e)}cross(e){return Wu(this,this,e),this.check()}rotateX({radians:e,origin:n=lA}){return nD(this,this,n,e),this.check()}rotateY({radians:e,origin:n=lA}){return rD(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=lA}){return iD(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return pT(this,this,e),this.check()}transformAsVector(e){return dT(this,this,e),this.check()}transformByMatrix3(e){return mT(this,this,e),this.check()}transformByMatrix2(e){return X5(this,this,e),this.check()}transformByQuaternion(e){return tD(this,this,e),this.check()}}class ET extends sm{get ELEMENTS(){return Wt(!1),0}get RANK(){return Wt(!1),0}toString(){let e="[";if(dt.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Tt(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function lD(){var t=new qn(9);return qn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function cD(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function uD(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=-u*s+a*l,d=c*s-o*l,A=n*f+r*h+i*d;return A?(A=1/A,t[0]=f*A,t[1]=(-u*r+i*c)*A,t[2]=(a*r-i*o)*A,t[3]=h*A,t[4]=(u*n-i*l)*A,t[5]=(-a*n+i*s)*A,t[6]=d*A,t[7]=(-c*n+r*l)*A,t[8]=(o*n-r*s)*A,t):null}function fD(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function c_(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=n[0],d=n[1],A=n[2],p=n[3],g=n[4],m=n[5],E=n[6],v=n[7],y=n[8];return t[0]=h*r+d*o+A*c,t[1]=h*i+d*a+A*u,t[2]=h*s+d*l+A*f,t[3]=p*r+g*o+m*c,t[4]=p*i+g*a+m*u,t[5]=p*s+g*l+m*f,t[6]=E*r+v*o+y*c,t[7]=E*i+v*a+y*u,t[8]=E*s+v*l+y*f,t}function hD(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=h*r+d*o+c,t[7]=h*i+d*a+u,t[8]=h*s+d*l+f,t}function dD(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*o,t[1]=d*i+h*a,t[2]=d*s+h*l,t[3]=d*o-h*r,t[4]=d*a-h*i,t[5]=d*l-h*s,t[6]=c,t[7]=u,t[8]=f,t}function u_(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function AD(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,f=r*a,h=i*o,d=i*a,A=i*l,p=s*o,g=s*a,m=s*l;return t[0]=1-f-A,t[3]=u-m,t[6]=h+g,t[1]=u+m,t[4]=1-c-A,t[7]=d-p,t[2]=h-g,t[5]=d+p,t[8]=1-c-f,t}const f_=Object.freeze([1,0,0,0,1,0,0,0,1]),gD=Object.freeze([0,0,0,0,0,0,0,0,0]),pD=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),zs={};class Et extends ET{static get IDENTITY(){return zs.IDENTITY=zs.IDENTITY||Object.freeze(new Et(f_)),zs.IDENTITY}static get ZERO(){return zs.ZERO=zs.ZERO||Object.freeze(new Et(gD)),zs.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return pD}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,n,r,i,s,o,a,l,c){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c){return this[0]=e,this[1]=i,this[2]=a,this[3]=n,this[4]=s,this[5]=l,this[6]=r,this[7]=o,this[8]=c,this.check()}determinant(){return fD(this)}identity(){return this.copy(f_)}fromQuaternion(e){return AD(this,e),this.check()}transpose(){return cD(this,this),this.check()}invert(){return uD(this,this),this.check()}multiplyLeft(e){return c_(this,e,this),this.check()}multiplyRight(e){return c_(this,this,e),this.check()}rotate(e){return dD(this,this,e),this.check()}scale(e){return Array.isArray(e)?u_(this,this,e):u_(this,this,[e,e,e]),this.check()}translate(e){return hD(this,this,e),this.check()}transform(e,n){switch(e.length){case 2:n=W5(n||[-0,-0],e,this);break;case 3:n=mT(n||[-0,-0,-0],e,this);break;case 4:n=K5(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return hl(n,e.length),n}transformVector(e,n){return wo("Matrix3.transformVector"),this.transform(e,n)}transformVector2(e,n){return wo("Matrix3.transformVector"),this.transform(e,n)}transformVector3(e,n){return wo("Matrix3.transformVector"),this.transform(e,n)}}function mD(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ED(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Zg(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],A=e[12],p=e[13],g=e[14],m=e[15],E=n*a-r*o,v=n*l-i*o,y=n*c-s*o,C=r*l-i*a,x=r*c-s*a,B=i*c-s*l,R=u*p-f*A,b=u*g-h*A,N=u*m-d*A,H=f*g-h*p,D=f*m-d*p,G=h*m-d*g,W=E*G-v*D+y*H+C*N-x*b+B*R;return W?(W=1/W,t[0]=(a*G-l*D+c*H)*W,t[1]=(i*D-r*G-s*H)*W,t[2]=(p*B-g*x+m*C)*W,t[3]=(h*x-f*B-d*C)*W,t[4]=(l*N-o*G-c*b)*W,t[5]=(n*G-i*N+s*b)*W,t[6]=(g*y-A*B-m*v)*W,t[7]=(u*B-h*y+d*v)*W,t[8]=(o*D-a*N+c*R)*W,t[9]=(r*N-n*D-s*R)*W,t[10]=(A*x-p*y+m*E)*W,t[11]=(f*y-u*x-d*E)*W,t[12]=(a*b-o*H-l*R)*W,t[13]=(n*H-r*b+i*R)*W,t[14]=(p*v-A*C-g*E)*W,t[15]=(u*C-f*v+h*E)*W,t):null}function vD(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],d=t[12],A=t[13],p=t[14],g=t[15],m=e*o-n*s,E=e*a-r*s,v=e*l-i*s,y=n*a-r*o,C=n*l-i*o,x=r*l-i*a,B=c*A-u*d,R=c*p-f*d,b=c*g-h*d,N=u*p-f*A,H=u*g-h*A,D=f*g-h*p;return m*D-E*H+v*N+y*b-C*R+x*B}function ms(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=e[9],d=e[10],A=e[11],p=e[12],g=e[13],m=e[14],E=e[15],v=n[0],y=n[1],C=n[2],x=n[3];return t[0]=v*r+y*a+C*f+x*p,t[1]=v*i+y*l+C*h+x*g,t[2]=v*s+y*c+C*d+x*m,t[3]=v*o+y*u+C*A+x*E,v=n[4],y=n[5],C=n[6],x=n[7],t[4]=v*r+y*a+C*f+x*p,t[5]=v*i+y*l+C*h+x*g,t[6]=v*s+y*c+C*d+x*m,t[7]=v*o+y*u+C*A+x*E,v=n[8],y=n[9],C=n[10],x=n[11],t[8]=v*r+y*a+C*f+x*p,t[9]=v*i+y*l+C*h+x*g,t[10]=v*s+y*c+C*d+x*m,t[11]=v*o+y*u+C*A+x*E,v=n[12],y=n[13],C=n[14],x=n[15],t[12]=v*r+y*a+C*f+x*p,t[13]=v*i+y*l+C*h+x*g,t[14]=v*s+y*c+C*d+x*m,t[15]=v*o+y*u+C*A+x*E,t}function Of(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,f,h,d,A,p,g,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],f=e[5],h=e[6],d=e[7],A=e[8],p=e[9],g=e[10],m=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=h,t[7]=d,t[8]=A,t[9]=p,t[10]=g,t[11]=m,t[12]=o*r+u*i+A*s+e[12],t[13]=a*r+f*i+p*s+e[13],t[14]=l*r+h*i+g*s+e[14],t[15]=c*r+d*i+m*s+e[15]),t}function Df(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function yD(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,f,h,d,A,p,g,m,E,v,y,C,x,B,R,b,N,H,D,G,W,X;return a<dl?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,f=e[0],h=e[1],d=e[2],A=e[3],p=e[4],g=e[5],m=e[6],E=e[7],v=e[8],y=e[9],C=e[10],x=e[11],B=i*i*u+c,R=s*i*u+o*l,b=o*i*u-s*l,N=i*s*u-o*l,H=s*s*u+c,D=o*s*u+i*l,G=i*o*u+s*l,W=s*o*u-i*l,X=o*o*u+c,t[0]=f*B+p*R+v*b,t[1]=h*B+g*R+y*b,t[2]=d*B+m*R+C*b,t[3]=A*B+E*R+x*b,t[4]=f*N+p*H+v*D,t[5]=h*N+g*H+y*D,t[6]=d*N+m*H+C*D,t[7]=A*N+E*H+x*D,t[8]=f*G+p*W+v*X,t[9]=h*G+g*W+y*X,t[10]=d*G+m*W+C*X,t[11]=A*G+E*W+x*X,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function vT(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+f*r,t[7]=l*i+h*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=f*i-a*r,t[11]=h*i-l*r,t}function _D(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-f*r,t[3]=l*i-h*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+f*i,t[11]=l*r+h*i,t}function yT(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+f*r,t[3]=l*i+h*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=f*i-a*r,t[7]=h*i-l*r,t}function xD(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,u),t}function ID(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,f=r*a,h=i*o,d=i*a,A=i*l,p=s*o,g=s*a,m=s*l;return t[0]=1-f-A,t[1]=u+m,t[2]=h-g,t[3]=0,t[4]=u-m,t[5]=1-c-A,t[6]=d+p,t[7]=0,t[8]=h+g,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function CD(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function wD(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function TD(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}function SD(t,e,n,r){var i,s,o,a,l,c,u,f,h,d,A=e[0],p=e[1],g=e[2],m=r[0],E=r[1],v=r[2],y=n[0],C=n[1],x=n[2];return Math.abs(A-y)<dl&&Math.abs(p-C)<dl&&Math.abs(g-x)<dl?mD(t):(u=A-y,f=p-C,h=g-x,d=1/Math.hypot(u,f,h),u*=d,f*=d,h*=d,i=E*h-v*f,s=v*u-m*h,o=m*f-E*u,d=Math.hypot(i,s,o),d?(d=1/d,i*=d,s*=d,o*=d):(i=0,s=0,o=0),a=f*o-h*s,l=h*i-u*o,c=u*s-f*i,d=Math.hypot(a,l,c),d?(d=1/d,a*=d,l*=d,c*=d):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*A+s*p+o*g),t[13]=-(a*A+l*p+c*g),t[14]=-(u*A+f*p+h*g),t[15]=1,t)}function bD(){var t=new qn(4);return qn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function RD(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function _T(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function BD(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function PD(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ND(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=s*o,t}function LD(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function MD(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t[3]=a+r*(n[3]-a),t}function gc(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}function OD(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*s-l*i,f=c*i+l*r-o*s,h=c*s+o*i-a*r,d=-o*r-a*i-l*s;return t[0]=u*c+d*-o+f*-l-h*-a,t[1]=f*c+d*-a+h*-o-u*-l,t[2]=h*c+d*-l+u*-a-f*-o,t[3]=e[3],t}(function(){var t=bD();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();const h_=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),DD=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),FD=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),js={};class De extends ET{static get IDENTITY(){return js.IDENTITY=js.IDENTITY||Object.freeze(new De(h_)),js.IDENTITY}static get ZERO(){return js.ZERO=js.ZERO||Object.freeze(new De(DD)),js.ZERO}get INDICES(){return FD}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,f,h,d,A,p,g){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=f,this[11]=h,this[12]=d,this[13]=A,this[14]=p,this[15]=g,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,f,h,d,A,p,g){return this[0]=e,this[1]=s,this[2]=c,this[3]=d,this[4]=n,this[5]=o,this[6]=u,this[7]=A,this[8]=r,this[9]=a,this[10]=f,this[11]=p,this[12]=i,this[13]=l,this[14]=h,this[15]=g,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(h_)}fromQuaternion(e){return ID(this,e),this.check()}frustum({left:e,right:n,bottom:r,top:i,near:s,far:o}){return o===1/0?De._computeInfinitePerspectiveOffCenter(this,e,n,r,i,s):CD(this,e,n,r,i,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,n,r,i,s,o){const a=2*o/(r-n),l=2*o/(s-i),c=(r+n)/(r-n),u=(s+i)/(s-i),f=-1,h=-1,d=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=f,e[11]=h,e[12]=0,e[13]=0,e[14]=d,e[15]=0,e}lookAt(e,n,r){return arguments.length===1&&({eye:e,center:n,up:r}=e),n=n||[0,0,0],r=r||[0,1,0],SD(this,e,n,r),this.check()}ortho({left:e,right:n,bottom:r,top:i,near:s=.1,far:o=500}){return TD(this,e,n,r,i,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:n=1,focalDistance:r=1,near:i=.1,far:s=500}){if(e>Math.PI*2)throw Error("radians");const o=e/2,a=r*Math.tan(o),l=a*n;return new De().ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:s})}perspective({fovy:e=void 0,fov:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}={}){if(e=e||n,e>Math.PI*2)throw Error("radians");return wD(this,e,r,i,s),this.check()}determinant(){return vD(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=null){const r=this.getScale(n||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=null){const r=this.getScale(n||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return ED(this,this),this.check()}invert(){return Zg(this,this),this.check()}multiplyLeft(e){return ms(this,e,this),this.check()}multiplyRight(e){return ms(this,this,e),this.check()}rotateX(e){return vT(this,this,e),this.check()}rotateY(e){return _D(this,this,e),this.check()}rotateZ(e){return yT(this,this,e),this.check()}rotateXYZ([e,n,r]){return this.rotateX(e).rotateY(n).rotateZ(r)}rotateAxis(e,n){return yD(this,this,e,n),this.check()}scale(e){return Array.isArray(e)?Df(this,this,e):Df(this,this,[e,e,e]),this.check()}translate(e){return Of(this,this,e),this.check()}transform(e,n){return e.length===4?(n=gc(n||[-0,-0,-0,-0],e,this),hl(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;switch(r){case 2:n=Y5(n||[-0,-0],e,this);break;case 3:n=pT(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return hl(n,e.length),n}transformAsVector(e,n){switch(e.length){case 2:n=$5(n||[-0,-0],e,this);break;case 3:n=dT(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return hl(n,e.length),n}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}transformPoint(e,n){return wo("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,n)}transformVector(e,n){return wo("Matrix4.transformVector","3.0"),this.transformAsPoint(e,n)}transformDirection(e,n){return wo("Matrix4.transformDirection","3.0"),this.transformAsVector(e,n)}}function d_(){var t=new qn(4);return qn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function QD(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xT(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function A_(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+o*a+i*c-s*l,t[1]=i*u+o*l+s*a-r*c,t[2]=s*u+o*c+r*l-i*a,t[3]=o*u-r*a-i*l-s*c,t}function kD(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*a,t[1]=i*l+s*a,t[2]=s*l-i*a,t[3]=o*l-r*a,t}function UD(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l-s*a,t[1]=i*l+o*a,t[2]=s*l+r*a,t[3]=o*l-i*a,t}function GD(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*a,t[1]=i*l-r*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function VD(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Yu(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],f=n[3],h,d,A,p,g;return d=i*l+s*c+o*u+a*f,d<0&&(d=-d,l=-l,c=-c,u=-u,f=-f),1-d>dl?(h=Math.acos(d),A=Math.sin(h),p=Math.sin((1-r)*h)/A,g=Math.sin(r*h)/A):(p=1-r,g=r),t[0]=p*i+g*l,t[1]=p*s+g*c,t[2]=p*o+g*u,t[3]=p*a+g*f,t}function zD(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=s*a,t}function jD(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function IT(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+o]-e[o*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}var HD=RD,WD=_T,YD=LD,$D=MD,XD=BD,KD=PD,CT=ND,qD=function(){var t=AT(),e=a_(1,0,0),n=a_(0,1,0);return function(r,i,s){var o=gT(i,s);return o<-.999999?(Wu(t,e,i),aD(t)<1e-6&&Wu(t,n,i),eD(t,t),xT(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Wu(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,CT(r,r))}}();(function(){var t=d_(),e=d_();return function(n,r,i,s,o,a){return Yu(t,r,o,a),Yu(e,i,s,a),Yu(n,t,e,2*a*(1-a)),n}})();(function(){var t=lD();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],CT(e,IT(e,t))}})();const JD=[0,0,0,1];class g_ extends sm{constructor(e=0,n=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}fromMatrix3(e){return IT(this,e),this.check()}identity(){return QD(this),this.check()}fromAxisRotation(e,n){return xT(this,e,n),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Tt(e)}get y(){return this[1]}set y(e){this[1]=Tt(e)}get z(){return this[2]}set z(e){this[2]=Tt(e)}get w(){return this[3]}set w(e){this[3]=Tt(e)}len(){return XD(this)}lengthSquared(){return KD(this)}dot(e,n){if(n!==void 0)throw new Error("Quaternion.dot only takes one argument");return YD(this,e)}rotationTo(e,n){return qD(this,e,n),this.check()}add(e,n){if(n!==void 0)throw new Error("Quaternion.add only takes one argument");return HD(this,this,e),this.check()}calculateW(){return VD(this,this),this.check()}conjugate(){return jD(this,this),this.check()}invert(){return zD(this,this),this.check()}lerp(e,n,r){return $D(this,e,n,r),this.check()}multiplyRight(e,n){return Wt(!n),A_(this,this,e),this.check()}multiplyLeft(e,n){return Wt(!n),A_(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return kD(this,this,e),this.check()}rotateY(e){return UD(this,this,e),this.check()}rotateZ(e){return GD(this,this,e),this.check()}scale(e){return WD(this,this,e),this.check()}slerp(e,n,r){switch(arguments.length){case 1:({start:e=JD,target:n,ratio:r}=arguments[0]);break;case 2:[n,r]=arguments,e=this;break}return Yu(this,e,n,r),this.check()}transformVector4(e,n=e){return OD(n,e,this),hl(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e,n){return this.multiplyLeft(e,n)}multiply(e,n){return this.multiplyRight(e,n)}}const wT={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},p_=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,ZD={lightSources:{}};function cA({color:t=[0,0,0],intensity:e=1}={}){return t.map(n=>n*e/255)}function eF({ambientLight:t,pointLights:e=[],directionalLights:n=[]}){const r={};return t?r["lighting_uAmbientLight.color"]=cA(t):r["lighting_uAmbientLight.color"]=[0,0,0],e.forEach((i,s)=>{r[`lighting_uPointLight[${s}].color`]=cA(i),r[`lighting_uPointLight[${s}].position`]=i.position,r[`lighting_uPointLight[${s}].attenuation`]=i.attenuation||[1,0,0]}),r.lighting_uPointLightCount=e.length,n.forEach((i,s)=>{r[`lighting_uDirectionalLight[${s}].color`]=cA(i),r[`lighting_uDirectionalLight[${s}].direction`]=i.direction}),r.lighting_uDirectionalLightCount=n.length,r}function TT(t=ZD){if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},eF({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return TT({lightSources:e})}return{}}const tF={name:"lights",vs:p_,fs:p_,getUniforms:TT,defines:{MAX_LIGHTS:3}},nF=new Uint8Array([0,255,255,255]),rF={pickingSelectedColor:null,pickingHighlightColor:nF,pickingActive:!1,pickingAttribute:!1};function iF(t=rF){const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}const sF=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,oF=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,aF={name:"picking",vs:sF,fs:oF,getUniforms:iF},lF=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,cF={};function uF(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function fF(t=cF){if(!("material"in t))return{};const{material:e}=t;return e?uF(e):{lighting_uEnabled:!1}}const hF={name:"gouraud-lighting",dependencies:[tF],vs:lF,defines:{LIGHTING_VERTEX:1},getUniforms:fF},dF=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,AF={name:"transform",vs:dF,fs:null};class Ns{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Ns(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),f=this._getHash(r),h=c.map(v=>this._getHash(v.name)).sort(),d=o.map(v=>this._getHash(v)),A=Object.keys(i).sort(),p=Object.keys(s).sort(),g=[],m=[];for(const v of A)g.push(this._getHash(v)),g.push(this._getHash(i[v]));for(const v of p)m.push(this._getHash(v)),m.push(this._getHash(s[v]));const E=`${u}/${f}D${g.join("/")}M${h.join("/")}I${m.join("/")}V${d.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[E]){const v=C5(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[E]=new tT(this.gl,{hash:E,vs:v.vs,fs:v.fs,varyings:o,bufferMode:a}),this._getUniforms[E]=v.getUniforms||(y=>{}),this._useCounts[E]=0}return this._useCounts[E]++,this._programCache[E]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const gF={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function pF(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=mF(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new Le(t,l),c],EF(s,c)}}if(i){const s=i.value||i;K(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new Le(t,{data:s,target:34963}),o]}return r}function mF(t,e){const{attributeMap:n=gF}=e||{};return n&&n[t]||t}function EF(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}K(Number.isFinite(e.size),`attribute ${t} needs size`)}const Hs=2,vF=1e4,yF="Model needs drawMode and vertexCount",m_=()=>{},_F={};class Rn{constructor(e,n={}){const{id:r=Pi("model")}=n;K(Lh(e)),this.id=r,this.gl=e,this.id=n.id||Pi("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Ns.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},K(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),yF)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return K(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return K(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=pF(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(Do(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return em(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;re.priority>=Hs&&(c=this._logDrawCallStart(Hs));const u=this.vertexArray.getDrawParams(),{isIndexed:f=u.isIndexed,indexType:h=u.indexType,indexOffset:d=u.indexOffset,vertexArrayInstanced:A=u.isInstanced}=this.props;A&&!this.isInstanced&&re.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=m_,onAfterRender:E=m_}=this.props;m(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(_F,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:h,isInstanced:p,instanceCount:g,offset:f?d:0}));return E(),re.priority>=Hs&&this._logDrawCallEnd(c,l,r),v}transform(e={}){const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{[35977]:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return re.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}K(n instanceof tT,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new kO(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Le&&n.delete()}}_setAnimationProps(e){this.animated&&K(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(Do(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new nT(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:vF;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),re.group(Hs,`>>> DRAWING MODEL ${this.id}`,{collapsed:re.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=VO({vertexArray:n,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=Xy({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=Xy({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&re.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&re.log("UNUSED UNIFORMS",Object.keys(a))();const f=jO(this.vertexArray.configuration);re.table(e,s)(),re.table(e,o)(),re.table(e+1,f)(),i&&i.log({logLevel:Hs,message:`Rendered to ${i.id}`}),re.groupEnd(Hs,`>>> DRAWING MODEL ${this.id}`)()}}class xF{constructor(e,n={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(e={}){const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(e={}){const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof Le?r:r.buffer:null}getData(e={}){const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&K(_e(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(e={}){const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,{model:n}){const{program:r}=n;e.transformFeedback=new nT(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],K(r[s]instanceof Le)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new Le(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const IF="transform_uSampler_",Ff="transform_uSize_",E_="transform_position";function CF({vs:t,sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}){let s=Object.keys(e).length,o=null;const a={};let l=t,c={};if(s>0||n){const u=l.split(`
`),f=u.slice();if(u.forEach((h,d,A)=>{if(s>0){const p=RF(h,e);if(p){const{updatedLine:g,inject:m}=p;f[d]=g,c=Kg([c,m]),Object.assign(a,p.samplerTextureMap),s--}}n&&!o&&(o=bF(h,n))}),n){K(r);const h=`${Ff}${n}`,d=`uniform vec2 ${h};
`,A=`     vec2 ${E_} = transform_getPos(${h});
     gl_Position = vec4(${E_}, 0, 1.);
`;c=Kg([c,{"vs:#decl":d,"vs:#main-start":A}])}l=f.join(`
`)}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}function wF({sourceTextureMap:t,targetTextureVarying:e,targetTexture:n}){const r={};let i,s;e&&({width:i,height:s}=n,r[`${Ff}${e}`]=[i,s]);for(const o in t)({width:i,height:s}=t[o]),r[`${Ff}${o}`]=[i,s];return r}function TF(t){return cT(t,["attribute","in"])}function SF(t){const e=`${IF}${t}`,n=`${Ff}${t}`,r=`  uniform sampler2D ${e};
  uniform vec2 ${n};`;return{samplerName:e,sizeName:n,uniformDeclerations:r}}function bF(t,e){const n=cT(t,["varying","out"]);return n&&n.name===e?n.type:null}function RF(t,e){const n={},r=TF(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o=`// ${t} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=SF(s),u=L5(i),f=`  ${i} ${s} = transform_getInput(${a}, ${l}).${u};
`;return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":f},samplerTextureMap:n}}return null}const BF={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},PF="transform_output";class NF{constructor(e,n={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(e={}){const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(e={}){const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=r[h]}this._setSourceTextureParameters();const u=wF({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:n}=this.bindings[this.currentIndex],r=Oh(n);if(!e)return r;const i=r.constructor,s=M5(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof gn)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(e={}){const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Le(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{[36064]:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new At(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{[36064]:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(BF)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=qw(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=CF({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=Kg([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||uT({version:Zw(i),input:this.targetTextureVarying,inputType:o,output:PF}),f=this.hasSourceTextures||this.targetTextureVarying?[AF].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:f,uniforms:s,inject:c}}}class om{static isSupported(e){return _e(e)}constructor(e,n={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(e={}){const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();K(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(e={}){const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Rn(n,Object.assign({},e,{fs:e.fs||uT({version:Zw(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){LF(n)&&(this.bufferTransform=new xF(e,n)),MF(n)&&(this.textureTransform=new NF(e,n)),K(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function LF(t){return!!(!Do(t.feedbackBuffers)||!Do(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function MF(t){return!!(!Do(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const v_={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Er{static get DRAW_MODE(){return v_}constructor(e={}){const{id:n=Pi("geometry"),drawMode:r=v_.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,K(ArrayBuffer.isView(i.value),`${this._print(r)}: must be typed array or object with value as typed array`),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(K(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return K(Number.isFinite(r)),r}}let OF=1,DF=1;class ST{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=OF++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=DF++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const FF=`
struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,QF=`
#define SMOOTH_EDGE_RADIUS 0.5

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,kF={name:"geometry",vs:FF,fs:QF},ue={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ue,"IDENTITY",{get:()=>me.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const cr={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ni={common:0,meters:1,pixels:2},y_={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},UF=Object.keys(ue).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ue[t],";")).join(""),GF=Object.keys(cr).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(cr[t],";")).join(""),VF=Object.keys(Ni).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ni[t],";")).join(""),zF="".concat(UF,`
`).concat(GF,`
`).concat(VF,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
`);function jF(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Dh(t){let e={},n;return r=>{for(const i in r)if(!jF(r[i],e[i])){n=t(r),e=r;break}return n}}const __=[0,0,0,0],HF=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],WF=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],YF=[0,0,0],$F=[0,0,0],XF=Dh(JF);function bT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$F;n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===ue.LNGLAT_OFFSETS||e===ue.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case cr.WEB_MERCATOR:(e===ue.LNGLAT||e===ue.CARTESIAN)&&(i=[0,0,0],s=!1);break;case cr.WEB_MERCATOR_AUTO_OFFSET:e===ue.LNGLAT?r=i:e===ue.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case cr.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case cr.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function KF(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=__,l=__,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:f,offsetMode:h}=bT(t,e,n);return h&&(l=t.projectPosition(u||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=gc([],l,o),s=r||s,o=ms([],i,s),o=ms([],o,HF)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:u}}function qF(){let{viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=ue.DEFAULT,coordinateOrigin:i,autoWrapLongitude:s=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r===ue.DEFAULT&&(r=t.isGeospatial?ue.LNGLAT:ue.CARTESIAN);const o=XF({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||WF,o}function JF(t){let{viewport:e,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=t;const{projectionCenter:s,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=KF(e,r,i),f=e.getDistanceScales(),h=[e.width*n,e.height*n],d=gc([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,A={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:s,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:d,project_uCommonUnitsPerMeter:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:YF,project_uScale:e.scale,project_uViewProjectionMatrix:o,project_uCameraPosition:l};if(u){const p=e.getDistanceScales(u);switch(r){case ue.METER_OFFSETS:A.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,A.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case ue.LNGLAT:case ue.LNGLAT_OFFSETS:e._pseudoMeters||(A.project_uCommonUnitsPerMeter=p.unitsPerMeter),A.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,A.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case ue.CARTESIAN:A.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],A.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return A}const ZF={};function e6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZF;return t.viewport?qF(t):{}}const am={name:"project",dependencies:[F5,kF],vs:zF,getUniforms:e6},t6=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    mat3 rotation = project_get_orientation_matrix(projectedPosition);
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Vi={name:"project32",dependencies:[am],vs:t6};function n6(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function To(t,e){const n=gc([],e,t);return _T(n,n,1/n[3]),n}function x_(t,e){const n=t%e;return n<0?e+n:n}function I_(t,e,n){return t<e?e:t>n?n:t}function r6(t){return Math.log(t)*Math.LOG2E}const lm=Math.log2||r6;function Mr(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const jn=Math.PI,RT=jn/4,Xn=jn/180,ep=180/jn,Fl=512,tp=4003e4,tu=85.051129,i6=1.5;function s6(t){return lm(t)}function Li([t,e]){Mr(Number.isFinite(t)),Mr(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");const n=t*Xn,r=e*Xn,i=Fl*(n+jn)/(2*jn),s=Fl*(jn+Math.log(Math.tan(RT+r*.5)))/(2*jn);return[i,s]}function ko([t,e]){const n=t/Fl*(2*jn)-jn,r=2*(Math.atan(Math.exp(e/Fl*(2*jn)-jn))-RT);return[n*ep,r*ep]}function o6({latitude:t}){Mr(Number.isFinite(t));const e=Math.cos(t*Xn);return s6(tp*e)-9}function np({latitude:t,longitude:e,highPrecision:n=!1}){Mr(Number.isFinite(t)&&Number.isFinite(e));const r={},i=Fl,s=Math.cos(t*Xn),o=i/360,a=o/s,l=i/tp/s;if(r.unitsPerMeter=[l,l,l],r.metersPerUnit=[1/l,1/l,1/l],r.unitsPerDegree=[o,a,l],r.degreesPerUnit=[1/o,1/a,1/l],n){const c=Xn*Math.tan(t*Xn)/s,u=o*c/2,f=i/tp*c,h=f/a*l;r.unitsPerDegree2=[0,u,f],r.unitsPerMeter2=[h,0,h]}return r}function BT(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=np({longitude:n,latitude:r,highPrecision:!0}),u=Li(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const f=ko(u),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function a6({height:t,pitch:e,bearing:n,altitude:r,scale:i,center:s=null}){const o=n6();return Of(o,o,[0,0,-r]),vT(o,o,-e*Xn),yT(o,o,n*Xn),i/=t,Df(o,o,[i,i,i]),s&&Of(o,o,Z5([],s)),o}function l6({width:t,height:e,fovy:n=Qf(i6),altitude:r,pitch:i=0,nearZMultiplier:s=1,farZMultiplier:o=1}){r!==void 0&&(n=Qf(r));const a=.5*n*Xn,l=PT(n),c=i*Xn,u=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01)),f=Math.sin(c)*u+l;return{fov:2*a,aspect:t/e,focalDistance:l,near:s,far:f*o}}function Qf(t){return 2*Math.atan(.5/t)*ep}function PT(t){return .5/Math.tan(.5*t*Xn)}function NT(t,e){const[n,r,i=0]=t;return Mr(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),To(e,[n,r,i,1])}function Fh(t,e,n=0){const[r,i,s]=t;if(Mr(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return To(e,[r,i,s,1]);const o=To(e,[r,i,0,1]),a=To(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return hT([],o,a,u)}function c6({width:t,height:e,bounds:n,minExtent:r=0,maxZoom:i=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[c,u]]=n;if(Number.isFinite(s)){const x=s;s={top:x,bottom:x,left:x,right:x}}else Mr(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const f=Li([a,I_(u,-tu,tu)]),h=Li([c,I_(l,-tu,tu)]),d=[Math.max(Math.abs(h[0]-f[0]),r),Math.max(Math.abs(h[1]-f[1]),r)],A=[t-s.left-s.right-Math.abs(o[0])*2,e-s.top-s.bottom-Math.abs(o[1])*2];Mr(A[0]>0&&A[1]>0);const p=A[0]/d[0],g=A[1]/d[1],m=(s.right-s.left)/2/p,E=(s.bottom-s.top)/2/g,v=[(h[0]+f[0])/2+m,(h[1]+f[1])/2+E],y=ko(v),C=Math.min(i,lm(Math.abs(Math.min(p,g))));return Mr(Number.isFinite(C)),{longitude:y[0],latitude:y[1],zoom:C}}const C_=Math.PI/180;function u6(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*C_:Math.atan(.5/t.altitude),f=(90-t.pitch)*C_;return u>f-.01?(l=w_(t,0,e),c=w_(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function w_(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=To(r,[e,0,1,1]),s=To(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=hT([],i,s,a),c=ko(l);return c[2]=n,c}const T_=512;function f6({width:t,height:e,longitude:n,latitude:r,zoom:i,pitch:s=0,bearing:o=0}){(n<-180||n>180)&&(n=x_(n+180,360)-180),(o<-180||o>180)&&(o=x_(o+180,360)-180);const a=lm(e/T_);if(i<=a)i=a,r=0;else{const l=e/2/Math.pow(2,i),c=ko([0,l])[1];if(r<c)r=c;else{const u=ko([0,T_-l])[1];r>u&&(r=u)}}return{width:t,height:e,longitude:n,latitude:r,zoom:i,pitch:s,bearing:o}}const h6=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,d6=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,A6=Dh(v6),g6=Dh(y6),p6=[0,0,0,1],m6=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function E6(t,e){const[n,r,i]=t,s=Fh([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function v6(t){let{viewport:e,center:n}=t;return new De(e.viewProjectionMatrix).invert().transform(n)}function y6(t){let{viewport:e,shadowMatrices:n}=t;const r=[],i=e.pixelUnprojectionMatrix,s=e.isGeospatial?void 0:1,o=[[0,0,s],[e.width,0,s],[0,e.height,s],[e.width,e.height,s],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>E6(a,i));for(const a of n){const l=a.clone().translate(new q(e.center).negate()),c=o.map(f=>l.transform(f)),u=new De().ortho({left:Math.min(...c.map(f=>f[0])),right:Math.max(...c.map(f=>f[0])),bottom:Math.min(...c.map(f=>f[1])),top:Math.max(...c.map(f=>f[1])),near:Math.min(...c.map(f=>-f[2])),far:Math.max(...c.map(f=>-f[2]))});r.push(u.multiplyRight(a))}return r}function _6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||p6,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=A6({viewport:t.viewport,center:e.project_uCenter}),i=[],s=g6({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let o=0;o<t.shadowMatrices.length;o++){const a=s[o],l=a.clone().translate(new q(t.viewport.center).negate());e.project_uCoordinateSystem===ue.LNGLAT&&e.project_uProjectionMode===cr.WEB_MERCATOR?(s[o]=l,i[o]=r):(s[o]=a.clone().multiplyRight(m6),i[o]=l.transform(r))}for(let o=0;o<s.length;o++)n["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],n["shadow_uProjectCenters[".concat(o,"]")]=i[o],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(o)]=t.shadowMaps[o]:n["shadow_uShadowMap".concat(o)]=t.dummyShadowMap;return n}const uA={name:"shadow",dependencies:[am],vs:h6,fs:d6,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){const{shadowEnabled:n=!0}=t;return n&&t.shadowMatrices&&t.shadowMatrices.length>0?_6(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},zi={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...aF},x6=[am],I6=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function C6(t){const e=Ns.getDefaultProgramManager(t);for(const n of x6)e.addDefaultModule(n);for(const n of I6)e.addShaderHook(n);return e}const w6=[255,255,255],T6=1;let S6=0;class b6{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n=w6}=e,{intensity:r=T6}=e;this.id=e.id||"ambient-".concat(S6++),this.color=n,this.intensity=r,this.type="ambient"}}const R6=[255,255,255],B6=1,P6=[0,0,-1];let N6=0;class S_{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n=R6}=e,{intensity:r=B6}=e,{direction:i=P6}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(N6++),this.color=n,this.intensity=r,this.type="directional",this.direction=new q(i).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class LT{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n="effect"}=e;this.id=n,this.props={...e}}preRender(){}getModuleParameters(){}cleanup(){}}class L6{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r="pass"}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}class cm extends L6{render(e){const n=this.gl;return Qr(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:n,views:r,onViewportActive:i,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;s&&O6(o);const a=[];for(const l of n){const c=l.viewport||l,u=r&&r[c.id];i(c);const f=this._getDrawLayerParams(c,e);e.view=u;const h=c.subViewports||[c];for(const d of h){e.viewport=d;const A=this._drawLayersInViewport(o,e,f);a.push(A)}}return a}_getDrawLayerParams(e,n){let{layers:r,pass:i,layerFilter:s,effects:o,moduleParameters:a}=n;const l=[],c=MT(),u={viewport:e,isPicking:i.startsWith("picking"),renderPass:i},f={};for(let h=0;h<r.length;h++){const d=r[h],A=this._shouldDrawLayer(d,u,s,f),p=c(d,A),g={shouldDrawLayer:A,layerRenderIndex:p};A&&(g.moduleParameters=this._getModuleParameters(d,o,i,a),g.layerParameters=this.getLayerParameters(d,h,e)),l[h]=g}return l}_drawLayersInViewport(e,n,r){let{layers:i,pass:s,viewport:o,view:a}=n;const l=M6(e,{viewport:o});if(a&&a.props.clear){const u=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;$n(e,{scissorTest:!0,scissor:l},()=>em(e,u))}const c={totalCount:i.length,visibleCount:0,compositeCount:0,pickableCount:0};Qr(e,{viewport:l});for(let u=0;u<i.length;u++){const f=i[u],{shouldDrawLayer:h,layerRenderIndex:d,moduleParameters:A,layerParameters:p}=r[u];if(h&&f.props.pickable&&c.pickableCount++,f.isComposite)c.compositeCount++;else if(h){c.visibleCount++,A.viewport=o;try{f.drawLayer({moduleParameters:A,uniforms:{layerIndex:d},parameters:p})}catch(g){f.raiseError(g,"drawing ".concat(f," to ").concat(s))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(this.shouldDrawLayer(e)&&e.props.visible))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Oo(this.gl)});if(n)for(const o of n)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,n),i)}}function MT(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||MT(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function M6(t,e){let{viewport:n}=e;const r=t.canvas?t.canvas.clientHeight||t.canvas.height:100,i=n,s=Oo(t);return[i.x*s,(r-i.y-i.height)*s,i.width*s,i.height*s]}function O6(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;Qr(t,{viewport:[0,0,e,n]}),t.clear(16640)}class D6 extends cm{constructor(e,n){super(e,n),this.shadowMap=new gn(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new lo(e,{format:33189,width:1,height:1}),this.fbo=new At(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){const n=this.fbo;$n(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Oo(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const F6={color:[255,255,255],intensity:1},b_=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Q6=[0,0,0,200/255];class OT extends LT{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=Q6,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,n){let{layers:r,layerFilter:i,viewports:s,onViewportActive:o,views:a}=n;if(!!this.shadow){this.shadowMatrices=this._createLightMatrix(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Ns.getDefaultProgramManager(e),uA&&this.programManager.addDefaultModule(uA)),this.dummyShadowMap||(this.dummyShadowMap=new gn(e,{width:1,height:1}));for(let l=0;l<this.shadowPasses.length;l++)this.shadowPasses[l].render({layers:r,layerFilter:i,viewports:s,onViewportActive:o,views:a,moduleParameters:{shadowLightId:l,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(uA),this.programManager=null)}_createLightMatrix(){const e=[];for(const n of this.directionalLights){const r=new De().lookAt({eye:new q(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new D6(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new b6(F6),this.directionalLights.push(new S_(b_[0]),new S_(b_[1])))}}class k6{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,n,r){let{size:i=1,type:s,padding:o=0,copy:a=!1,initialize:l=!1,maxCount:c}=r;const u=s||e&&e.constructor||Float32Array,f=n*i+o;if(ArrayBuffer.isView(e)){if(f<=e.length)return e;if(f*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new u(e.buffer,0,f)}let h;c&&(h=c*i+o);const d=this._allocate(u,f,l,h);return e&&a?d.set(e):l||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.props.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.props.poolSize)&&n.splice(s,0,r),n.length>this.props.poolSize&&n.shift()}}const Uo=new k6;function Ha(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function U6(t,e){const n=t%e;return n<0?e+n:n}function G6(t){return[t[12],t[13],t[14]]}function V6(t){const e={};return e.left=Ws(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),e.right=Ws(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),e.bottom=Ws(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),e.top=Ws(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),e.near=Ws(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),e.far=Ws(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14]),e}const R_=new q;function Ws(t,e,n,r){R_.set(t,e,n);const i=R_.len();return{distance:r/i,normal:new q(-t/i,-e/i,-n/i)}}function z6(t){return t-Math.fround(t)}let Pa;function fA(t,e){let{size:n=1,startIndex:r=0,endIndex:i}=e;Number.isFinite(i)||(i=t.length);const s=(i-r)/n;Pa=Uo.allocate(Pa,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];Pa[a+l]=c,Pa[a+l+n]=z6(c)}a+=n*2}return Pa.subarray(0,s*n*2)}const j6=Math.PI/180,H6=Ha(),hA=[0,0,0],W6=0,Y6={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Mi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=null,x:r=0,y:i=0,width:s=1,height:o=1}=e;this.id=n||this.constructor.displayName||"viewport",this.x=r,this.y=i,this.width=s||1,this.height=o||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?cr.WEB_MERCATOR:cr.WEB_MERCATOR_AUTO_OFFSET:cr.IDENTITY}equals(e){return e instanceof Mi?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Ii(e.projectionMatrix,this.projectionMatrix)&&Ii(e.viewMatrix,this.viewMatrix):!1}project(e){let{topLeft:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.projectPosition(e),i=NT(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e){let{topLeft:n=!0,targetZ:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=Fh([i,a,o],this.pixelUnprojectionMatrix,l),[u,f,h]=this.unprojectPosition(c);return Number.isFinite(o)?[u,f,h]:Number.isFinite(r)?[u,f,r]:[u,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){return this.isGeospatial?Li(e):e}unprojectFlat(e){return this.isGeospatial?ko(e):e}getBounds(){const n={targetZ:(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?np({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel(e){let{x:n,y:r,width:i=1,height:s=1}=e;return n<this.x+this.width&&this.x<n+i&&r<this.y+this.height&&this.y<r+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,V6(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix(e){let{orthographic:n,fovyRadians:r,aspect:i,focalDistance:s,near:o,far:a}=e;return n?new De().orthographic({fovy:r,aspect:i,focalDistance:s,near:o,far:a}):new De().perspective({fovy:r,aspect:i,near:o,far:a})}_initViewMatrix(e){const{viewMatrix:n=H6,longitude:r=null,latitude:i=null,zoom:s=null,position:o=null,modelMatrix:a=null,focalDistance:l=1,distanceScales:c=null}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(r),this.zoom=s,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?o6({latitude:i})+Math.log2(l):W6);const u=Math.pow(2,this.zoom);this.scale=u,this.distanceScales=this.isGeospatial?np({latitude:i,longitude:r}):c||Y6,this.focalDistance=l,this.distanceScales.metersPerUnit=new q(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new q(this.distanceScales.unitsPerMeter),this.position=hA,this.meterOffset=hA,o&&(this.position=o,this.modelMatrix=a,this.meterOffset=a?a.transformVector(o):o),this.isGeospatial?(this.longitude=r,this.latitude=i,this.center=this._getCenterInWorld({longitude:r,latitude:i})):this.center=o?this.projectPosition(o):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=new De().multiplyRight(this.viewMatrixUncentered).translate(new q(this.center||hA).negate())}_getCenterInWorld(e){let{longitude:n,latitude:r}=e;const{meterOffset:i,distanceScales:s}=this,o=new q(this.projectPosition([n,r,0]));if(i){const a=new q(i).scale(s.unitsPerMeter);o.add(a)}return o}_initProjectionMatrix(e){const{projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:s=75,near:o=.1,far:a=1e3,focalDistance:l=1}=e;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:r,fovyRadians:i||s*j6,aspect:this.width/this.height,focalDistance:l,near:o,far:a})}_initPixelMatrices(){const e=Ha();ms(e,e,this.projectionMatrix),ms(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=Zg([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=G6(this.viewMatrixInverse);const n=Ha(),r=Ha();Df(n,n,[this.width/2,-this.height/2,1]),Of(n,n,[1,-1,0]),ms(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=Zg(Ha(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||me.warn("Pixel project matrix not invertible")()}}Mi.displayName="Viewport";const $6=512,X6=4003e4,K6=Math.PI/180;function B_(t){const e=Math.cos(t*K6);return $6/X6/e}class Go extends Mi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{latitude:n=0,longitude:r=0,zoom:i=11,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:c=!1,projectionMatrix:u,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=e;let{width:A,height:p,altitude:g=1.5}=e;const m=Math.pow(2,i);A=A||1,p=p||1;let E,v=null;u?(g=u[5]/2,E=Qf(g)):(e.fovy?(E=e.fovy,g=PT(E)):E=Qf(g),v=l6({width:A,height:p,pitch:s,fovy:E,nearZMultiplier:a,farZMultiplier:l}));let y=a6({height:p,pitch:s,bearing:o,scale:m,altitude:g});h&&(y=new De().translate([512*h,0,0]).multiplyLeft(y)),super({...e,width:A,height:p,viewMatrix:y,longitude:r,latitude:n,zoom:i,...v,fovy:E,focalDistance:g}),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=g,this.fovy=E,this.orthographic=c,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new Go({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*B_(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/B_(r);return[n,r,i]}addMetersToLngLat(e,n){return BT(e,n)}panByPosition(e,n){const r=Fh(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Mf([],i,fT([],r)),o=Mf([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=u6(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=c6({width:r,height:i,bounds:e,...n});return new Go({width:r,height:i,longitude:s,latitude:o,zoom:a})}}Go.displayName="WebMercatorViewport";function dA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=e.projectPosition(t);if(n&&e instanceof Go){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function q6(t){const e={...t};let{coordinateSystem:n}=t;const{viewport:r,coordinateOrigin:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return n===ue.DEFAULT&&(n=r.isGeospatial?ue.LNGLAT:ue.CARTESIAN),s===void 0&&(e.fromCoordinateSystem=n),o===void 0&&(e.fromCoordinateOrigin=i),e.coordinateSystem=n,e}function DT(t,e){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:s,offsetMode:o}=e,[a,l,c=0]=t;switch(r&&([a,l,c]=gc([],[a,l,c,1],r)),i){case ue.LNGLAT:return dA([a,l,c],n,o);case ue.LNGLAT_OFFSETS:return dA([a+s[0],l+s[1],c+(s[2]||0)],n,o);case ue.METER_OFFSETS:return dA(BT(s,[a,l,c]),n,o);case ue.CARTESIAN:default:return n.isGeospatial?[a+s[0],l+s[1],c+s[2]]:n.projectPosition([a,l,c])}}function J6(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=q6(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=bT(n,r,i),f=DT(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});if(u){const h=n.projectPosition(l||c);oD(f,f,h)}return f}const Js={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Qh={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")};function kh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;return Array.isArray(t)?FT(t,e,[]):e(t)?[t]:[]}function FT(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?FT(i,e,n):e(i)&&n.push(i)}return n}function Z6(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class eQ{constructor(e,n,r){this.id=e,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=Pf(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class tQ{constructor(e){let{gl:n,protocol:r}=e;this.protocol=r||"resource://",this._context={gl:n,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add(e){let{resourceId:n,data:r,forceUpdate:i=!1,persistent:s=!0}=e,o=this._resources[n];o?o.setData(r,i):(o=new eQ(n,r,this._context),this._resources[n]=o),o.persistent=s}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe(e){let{consumerId:n}=e;const r=this._consumers[n];if(r){for(const i in r){const s=r[i];s.resource&&s.resource.unsubscribe(s)}delete this._consumers[n],this.prune()}}subscribe(e){let{resourceId:n,onChange:r,consumerId:i,requestId:s="default"}=e;const{_resources:o,protocol:a}=this;n.startsWith(a)&&(n=n.replace(a,""),o[n]||this.add({resourceId:n,data:null,persistent:!1}));const l=o[n];if(this._track(i,s,l,r),l)return l.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),r&&(o[n]=a,a.onChange=i,a.resource=r,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const nQ="layerManager.setLayers",rQ="layerManager.activateViewport",iQ=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class sQ{constructor(e){let{deck:n,stats:r,viewport:i,timeline:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new tQ({gl:e,protocol:"deck://"}),this.context={...iQ,layerManager:this,gl:e,deck:n,programManager:e&&C6(e),stats:r||new Ph({id:"deck.gl"}),viewport:i||new Mi({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new ST,resourceManager:this.resourceManager},this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1},n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers(){let{layerIds:e=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Ot(nQ,this,n,e),this.lastRenderedLayers=e,e=kh(e,Boolean);for(const r of e)r.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return Ot(rQ,this,e),e&&(this.context.viewport=e),this}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?me.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&me.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite&&i.getSubLayers()}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Js.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Js.MATCHED,n!==e&&(e.lifecycle=Js.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Js.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Js.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Jo(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Jo(r,i)))return!1}return!0}class oQ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return typeof e=="string"?this.views.find(n=>n.id===e):e}getViewState(e){const n=this.getView(e),r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=kh(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Jo(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):me.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){n.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(n)}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height}),...n})}_updateController(e,n,r,i){let s=e.controller;return s?(s={...n,...e.props,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height},i?i.setProps(s):i=this._createController(e,s),i):null}_rebuildViewports(){const{width:e,height:n,views:r}=this,i=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=r.length;o--;){const a=r[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:n,viewState:l});let u=i[a.id];a.controller&&!u&&(s=!0),(s||!a.controller)&&u&&(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,l,c,u),this._viewports.unshift(c)}for(const o in i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const aQ=/([0-9]+\.?[0-9]*)(%|px)/;function nu(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=t.match(aQ);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function ru(t,e){return t.relative?Math.round(t.position*e):t.position}function dn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class xs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=null,x:r=0,y:i=0,width:s="100%",height:o="100%",viewportInstance:a,type:l=Mi}=e;dn(!a||a instanceof Mi),this.viewportInstance=a,this.id=n||this.constructor.displayName||"view",this.type=l,this.props={...e,id:this.id},this._parseDimensions({x:r,y:i,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Jo(this.props,e.props)}makeViewport(e){let{width:n,height:r,viewState:i}=e;if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const s=this.getDimensions({width:n,height:r});return this._getViewport(i,s)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions(e){let{width:n,height:r}=e;return{x:ru(this._x,n),y:ru(this._y,r),width:ru(this._width,n),height:ru(this._height,r)}}_getControllerProps(e){let n=this.props.controller;return n?n===!0?e:(typeof n=="function"&&(n={type:n}),{...e,...n}):null}_getViewport(e,n){const{type:r}=this;return new r({...e,...this.props,...n})}_parseDimensions(e){let{x:n,y:r,width:i,height:s}=e;this._x=nu(n),this._y=nu(r),this._width=nu(i),this._height=nu(s)}}function iu(){}const lQ={onStart:iu,onUpdate:iu,onInterrupt:iu,onEnd:iu};class pc{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings={...lQ,...e},this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(this._handle===null){const{timeline:e,settings:n}=this;this._handle=e.addChannel({delay:e.getTime(),duration:n.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Al=()=>{},kf={BREAK:1,SNAP_TO_END:2,IGNORE:3},P_={transitionEasing:t=>t,transitionInterruption:kf.BREAK,onTransitionStart:Al,onTransitionInterrupt:Al,onTransitionEnd:Al};class cQ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ControllerState=e,this.props={...P_,...n},this.propsInTransition=null,this.transition=new pc(n.timeline),this.onViewStateChange=n.onViewStateChange||Al,this.onStateChange=n.onStateChange||Al,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(e={...P_,...e},this.props=e,this._shouldIgnoreViewportChange(r,e))return n;if(this._isTransitionEnabled(e)){const{interruption:i,endProps:s}=this.transition.settings,o={...r,...i===kf.SNAP_TO_END?s:this.propsInTransition||r};this._triggerTransition(o,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===kf.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=new this.ControllerState(e),i=new this.ControllerState(n).shortestPathFrom(r),{transitionInterpolator:s}=n,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=n.transitionInterpolator.initializeProps(e,i);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:n.transitionEasing,interpolator:n.transitionInterpolator,interruption:n.transitionInterruption,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(n)}}_onTransitionUpdate(e){const{time:n,settings:{interpolator:r,startProps:i,endProps:s,duration:o,easing:a}}=e,l=a(n/o),c=r.interpolateProps(i,s,l);this.propsInTransition=new this.ControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}class uQ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare||Object.keys(n))if(!(r in e)||!(r in n)||!Ii(e[r],n[r]))return!1;return!0}initializeProps(e,n){let r;if(this._propsToExtract){const i={},s={};for(const o of this._propsToExtract)i[o]=e[o],s[o]=n[o];r={start:i,end:s}}else r={start:e,end:n};return this._checkRequiredProps(r.start),this._checkRequiredProps(r.end),r}interpolateProps(e,n,r){return n}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(n=>{const r=e[n];dn(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const N_=["longitude","latitude","zoom","bearing","pitch"],fQ=["longitude","latitude","zoom"];class L_ extends uQ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Array.isArray(e)?e:e.transitionProps;super(n||{compare:N_,extract:N_,required:fQ}),this.opts=e}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=ps(e[s]||0,n[s]||0,r);if(n.aroundPosition){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,ps(e.around,n.around,r)))}return i}}const ei={transitionDuration:0},hQ={transitionDuration:300,transitionEasing:t=>t,transitionInterruption:kf.BREAK},dQ=300,su=t=>1-(1-t)*(1-t),Ys={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]};class QT{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new cQ(e,{...n,onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)});const r=this.linearTransitionProps;this._transition=r&&{...hQ,transitionInterpolator:new L_({transitionProps:r})},this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:n}=this;this.controllerState=new n({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state});const r=this._eventStartBlocked;switch(e.type){case"panstart":return r?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return r?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return r?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:n,y:r}=this.controllerStateProps,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.controllerStateProps;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:n}=e;n===!0&&(n=dQ),this.inertia=n;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=Boolean(this.onViewStateChange);this.toggleEvents(Ys.WHEEL,u&&r),this.toggleEvents(Ys.PAN,u&&(i||s)),this.toggleEvents(Ys.PINCH,u&&(a||l)),this.toggleEvents(Ys.TRIPLE_PAN,u&&l),this.toggleEvents(Ys.DOUBLE_TAP,u&&o),this.toggleEvents(Ys.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,ei,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,ei,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:su},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ei,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:su},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,ei,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ei,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:su},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(r,ei,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:this._startPinchRotation-r})}return this.updateViewport(n,ei,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n,_lastPinchEvent:r}=this;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:su},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{_transition:n}=this;return n?e?{...n,transitionInterpolator:new L_({...e,transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport})}:n:ei}}class kT{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const M_=5,AQ=1.2,Xi={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60};class gQ extends kT{constructor(){let{makeViewport:e,width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=Xi.bearing,pitch:l=Xi.pitch,altitude:c=Xi.altitude,maxZoom:u=Xi.maxZoom,minZoom:f=Xi.minZoom,maxPitch:h=Xi.maxPitch,minPitch:d=Xi.minPitch,startPanLngLat:A,startZoomLngLat:p,startRotatePos:g,startBearing:m,startPitch:E,startZoom:v,normalize:y}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dn(Number.isFinite(s)),dn(Number.isFinite(i)),dn(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:u,minZoom:f,maxPitch:h,minPitch:d,normalize:y}),this._state={startPanLngLat:A,startZoomLngLat:p,startRotatePos:g,startBearing:m,startPitch:E,startZoom:v},this.makeViewport=e}panStart(e){let{pos:n}=e;return this._getUpdatedState({startPanLngLat:this._unproject(n)})}pan(e){let{pos:n,startPos:r}=e;const i=this._state.startPanLngLat||this._unproject(r);if(!i)return this;const o=this.makeViewport(this._viewportProps).panByPosition(i,n);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(e){let{pos:n}=e;return this._getUpdatedState({startRotatePos:n,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate(e){let{pos:n,deltaAngleX:r=0,deltaAngleY:i=0}=e;const{startRotatePos:s,startBearing:o,startPitch:a}=this._state;if(!s||!Number.isFinite(o)||!Number.isFinite(a))return this;let l;return n?l=this._calculateNewPitchAndBearing({...this._getRotationParams(n,s),startBearing:o,startPitch:a}):l={bearing:o+r,pitch:a+i},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(e){let{pos:n}=e;return this._getUpdatedState({startZoomLngLat:this._unproject(n),startZoom:this._viewportProps.zoom})}zoom(e){let{pos:n,startPos:r,scale:i}=e,{startZoom:s,startZoomLngLat:o}=this._state;Number.isFinite(s)||(s=this._viewportProps.zoom,o=this._unproject(r)||this._unproject(n));const a=this._calculateNewZoom({scale:i,startZoom:s}),l=this.makeViewport({...this._viewportProps,zoom:a});return this._getUpdatedState({zoom:a,...l.panByPosition(o,n)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._zoomFromCenter(e)}zoomOut(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._zoomFromCenter(1/e)}moveLeft(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([e,0])}moveRight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([-e,0])}moveUp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([0,e])}moveDown(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([0,-e])}rotateLeft(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this._viewportProps},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}_zoomFromCenter(e){const{width:n,height:r}=this._viewportProps;return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this._viewportProps;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this._viewportProps,...this._state,...e})}_applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=cn(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=cn(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,f6(e)),e}_unproject(e){const n=this.makeViewport(this._viewportProps);return e&&n.unproject(e)}_calculateNewZoom(e){let{scale:n,startZoom:r}=e;const{maxZoom:i,minZoom:s}=this._viewportProps,o=r+Math.log2(n);return cn(o,s,i)}_calculateNewPitchAndBearing(e){let{deltaScaleX:n,deltaScaleY:r,startBearing:i,startPitch:s}=e;r=cn(r,-1,1);const{minPitch:o,maxPitch:a}=this._viewportProps,l=i+180*n;let c=s;return r>0?c=s+r*(a-s):r<0&&(c=s-r*(o-s)),{pitch:c,bearing:l}}_getRotationParams(e,n){const r=e[0]-n[0],i=e[1]-n[1],s=e[1],o=n[1],{width:a,height:l}=this._viewportProps,c=r/a;let u=0;return i>0?Math.abs(l-o)>M_&&(u=i/(o-l)*AQ):i<0&&o>M_&&(u=1-s/o),u=Math.min(1,Math.max(-1,u)),{deltaScaleX:c,deltaScaleY:u}}}class pQ extends QT{constructor(e){e.dragMode=e.dragMode||"pan",super(gQ,e)}setProps(e){const n=this.controllerStateProps;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state}))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}class UT extends xs{constructor(e){super({...e,type:Go})}get controller(){return this._getControllerProps({type:pQ})}}UT.displayName="MapView";const mQ=new OT;class EQ{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Jo(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof OT)||this._internalEffects.push(mQ)}}class vQ extends cm{}const O_={blendFunc:[1,0,32771,0],blendEquation:32774};class GT extends cm{render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer(e){let{layers:n,layerFilter:r,views:i,viewports:s,onViewportActive:o,pickingFBO:a,deviceRect:{x:l,y:c,width:u,height:f},pass:h="picking",redrawReason:d,pickZ:A}=e;const p=this.gl;this.pickZ=A;const g=!A&&{byLayer:new Map,byAlpha:[]};this._colors=g;const m=$n(p,{scissorTest:!0,scissor:[l,c,u,f],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...O_,blend:!A},()=>super.render({target:a,layers:n,layerFilter:r,views:i,viewports:s,onViewportActive:o,pass:h,redrawReason:d}));return this._colors=null,{decodePickingColor:g&&_Q.bind(null,g),stats:m}}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters};return this.pickZ?i.blend=!1:(Object.assign(i,O_),i.blend=!0,i.blendColor=yQ(this._colors,e,r)),i}}function yQ(t,e,n){const{byLayer:r,byAlpha:i}=t;let s;if(r.has(e)){const o=r.get(e);o.viewports.push(n),s=o.a}else if(s=r.size+1,s<=255){const o={a:s,layer:e,viewports:[n]};r.set(e,o),i[s]=o}else me.warn("Too many pickable layers, only picking the first 255")(),s=0;return[0,0,0,s/255]}function _Q(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const xQ="deckRenderer.renderLayers";class IQ{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new vQ(e),this.pickLayersPass=new GT(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||At.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render({...e,target:r});this._postRender(e.effects,e),this.renderCount++,Ot(xQ,this,i,e)}needsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(const i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new At(this.gl),new At(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const CQ={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function wQ(t){let{pickedColors:e,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:s,deviceRect:o}=t;if(e){const{x:a,y:l,width:c,height:u}=o;let f=s*s,h=-1,d=0;for(let A=0;A<u;A++){const p=A+l-i,g=p*p;if(g>f)d+=4*c;else for(let m=0;m<c;m++){if(e[d+3]-1>=0){const v=m+a-r,y=v*v+g;y<=f&&(f=y,h=d)}d+=4}}if(h>=0){const A=e.slice(h,h+4),p=n(A);if(p){const g=Math.floor(h/4/c),m=h/4-g*c;return{...p,pickedColor:A,pickedX:a+m,pickedY:l+g}}me.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return CQ}function TQ(t){let{pickedColors:e,decodePickingColor:n}=t;const r=new Map;if(e){for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const o=e.slice(i,i+4),a=o.join(",");if(!r.has(a)){const l=n(o);l?r.set(a,{...l,pickedColor:o}):me.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function VT(t){let{pickInfo:e,viewports:n,pixelRatio:r,x:i,y:s,z:o}=t,a=n[0];n.length>1&&(a=bQ((e==null?void 0:e.pickedViewports)||n,{x:i,y:s}));const l=a&&a.unproject([i-a.x,s-a.y,o]);return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:i,y:s,pixel:[i,s],coordinate:l,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:null,pixelRatio:r}}function SQ(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const f=n.index,h=n.layerId,d=o&&o.props.id;if(d!==h||a!==f){if(d!==h){const A=i.find(p=>p.props.id===h);A&&l.unshift(A)}n.layerId=d,n.index=a,n.info=null}}const c=VT(t),u=new Map;return u.set(null,c),l.forEach(f=>{let h={...c};f===o&&(h.color=s,h.index=a,h.picked=!0),h=zT({layer:f,info:h,mode:r}),f===o&&r==="hover"&&(n.info=h),u.set(h.layer.id,h),r==="hover"&&h.layer.updateAutoHighlight(h)}),u}function zT(t){let{layer:e,info:n,mode:r}=t;for(;e&&n;){const i=n.layer||null;n.sourceLayer=i,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}function bQ(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class RQ{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new GT(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject(e){let{x:n,y:r,layers:i,viewports:s}=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.lastPickedInfo.info;const a=o&&o.layer&&o.layer.id,l=o&&o.viewport&&o.viewport.id,c=a?i.find(d=>d.id===a):null,u=l&&s.find(d=>d.id===l)||s[0],f=u&&u.unproject([n-u.x,r-u.y]);return{...o,...{x:n,y:r,viewport:u,coordinate:f,layer:c}}}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new At(e),At.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new At(e),this.depthFBO.attach({[36064]:new gn(e,{format:_e(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject(e){let{layers:n,views:r,viewports:i,x:s,y:o,radius:a=0,depth:l=1,mode:c="query",unproject3D:u,onViewportActive:f}=e;if(n=this._getPickable(n),!n)return{result:[],emptyInfo:VT({viewports:i,x:s,y:o})};this._resizeBuffer();const h=Oo(this.gl),d=Zd(this.gl,[s,o],!0),A=[d.x+Math.floor(d.width/2),d.y+Math.floor(d.height/2)],p=Math.round(a*h),{width:g,height:m}=this.pickingFBO,E=this._getPickingRect({deviceX:A[0],deviceY:A[1],deviceRadius:p,deviceWidth:g,deviceHeight:m});let v;const y=[],C=new Set;for(let x=0;x<l;x++){const B=E&&this._drawAndSample({layers:n,views:r,viewports:i,onViewportActive:f,deviceRect:E,pass:"picking:".concat(c),redrawReason:c}),R=wQ({...B,deviceX:A[0],deviceY:A[1],deviceRadius:p,deviceRect:E});let b;R.pickedLayer&&u&&this.depthFBO&&(b=this._drawAndSample({layers:[R.pickedLayer],views:r,viewports:i,onViewportActive:f,deviceRect:{x:R.pickedX,y:R.pickedY,width:1,height:1},pass:"picking:".concat(c),redrawReason:"pick-z",pickZ:!0}).pickedColors[0]),R.pickedLayer&&x+1<l&&(C.add(R.pickedLayer),R.pickedLayer.disablePickingIndex(R.pickedObjectIndex)),v=SQ({pickInfo:R,lastPickedInfo:this.lastPickedInfo,mode:c,layers:n,viewports:i,x:s,y:o,z:b,pixelRatio:h});for(const N of v.values())N.layer&&y.push(N);if(!R.pickedColor)break}for(const x of C)x.restorePickingColors();return{result:y,emptyInfo:v&&v.get(null)}}_pickVisibleObjects(e){let{layers:n,views:r,viewports:i,x:s,y:o,width:a=1,height:l=1,mode:c="query",maxObjects:u=null,onViewportActive:f}=e;if(n=this._getPickable(n),!n)return[];this._resizeBuffer();const h=Oo(this.gl),d=Zd(this.gl,[s,o],!0),A=d.x,p=d.y+d.height,g=Zd(this.gl,[s+a,o+l],!0),m=g.x+g.width,E=g.y,v={x:A,y:E,width:m-A,height:p-E},y=this._drawAndSample({layers:n,views:r,viewports:i,onViewportActive:f,deviceRect:v,pass:"picking:".concat(c),redrawReason:c}),C=TQ(y),x=new Map,B=Number.isFinite(u);for(let R=0;R<C.length&&!(B&&x.size>=u);R++){const b=C[R];let N={color:b.pickedColor,layer:null,index:b.pickedObjectIndex,picked:!0,x:s,y:o,width:a,height:l,pixelRatio:h};N=zT({layer:b.pickedLayer,info:N,mode:c}),x.has(N.object)||x.set(N.object,N)}return Array.from(x.values())}_drawAndSample(e){let{layers:n,views:r,viewports:i,onViewportActive:s,deviceRect:o,pass:a,redrawReason:l,pickZ:c}=e;const u=c?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:n,layerFilter:this.layerFilter,views:r,viewports:i,onViewportActive:s,pickingFBO:u,deviceRect:o,pass:a,redrawReason:l,pickZ:c}),{x:h,y:d,width:A,height:p}=o,g=new(c?Float32Array:Uint8Array)(A*p*4);return Oh(u,{sourceX:h,sourceY:d,sourceWidth:A,sourceHeight:p,target:g}),{pickedColors:g,decodePickingColor:f}}_getPickingRect(e){let{deviceX:n,deviceY:r,deviceRadius:i,deviceWidth:s,deviceHeight:o}=e;const a=Math.max(0,n-i),l=Math.max(0,r-i),c=Math.min(s,n+i+1)-a,u=Math.min(o,r+i+1)-l;return c<=0||u<=0?null:{x:a,y:l,width:c,height:u}}}const BQ={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class PQ{constructor(e){const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,BQ),n.appendChild(this.el)),this.isVisible=!1}setTooltip(e,n,r){const i=this.el;if(typeof e=="string")i.innerText=e;else if(e)"text"in e&&(i.innerText=e.text),"html"in e&&(i.innerHTML=e.html),"className"in e&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}remove(){this.el&&this.el.remove()}}var jT={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function f(_,I,T){return setTimeout(v(_,T),I)}function h(_,I,T){return Array.isArray(_)?(d(_,T[I],T),!0):!1}function d(_,I,T){var M;if(!!_)if(_.forEach)_.forEach(I,T);else if(_.length!==i)for(M=0;M<_.length;)I.call(T,_[M],M,_),M++;else for(M in _)_.hasOwnProperty(M)&&I.call(T,_[M],M,_)}function A(_,I,T){var M="DEPRECATED METHOD: "+I+`
`+T+` AT 
`;return function(){var z=new Error("get-stack-trace"),J=z&&z.stack?z.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",xe=e.console&&(e.console.warn||e.console.log);return xe&&xe.call(e.console,M,J),_.apply(this,arguments)}}var p;typeof Object.assign!="function"?p=function(I){if(I===i||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(I),M=1;M<arguments.length;M++){var z=arguments[M];if(z!==i&&z!==null)for(var J in z)z.hasOwnProperty(J)&&(T[J]=z[J])}return T}:p=Object.assign;var g=A(function(I,T,M){for(var z=Object.keys(T),J=0;J<z.length;)(!M||M&&I[z[J]]===i)&&(I[z[J]]=T[z[J]]),J++;return I},"extend","Use `assign`."),m=A(function(I,T){return g(I,T,!0)},"merge","Use `assign`.");function E(_,I,T){var M=I.prototype,z;z=_.prototype=Object.create(M),z.constructor=_,z._super=M,T&&p(z,T)}function v(_,I){return function(){return _.apply(I,arguments)}}function y(_,I){return typeof _==a?_.apply(I&&I[0]||i,I):_}function C(_,I){return _===i?I:_}function x(_,I,T){d(N(I),function(M){_.addEventListener(M,T,!1)})}function B(_,I,T){d(N(I),function(M){_.removeEventListener(M,T,!1)})}function R(_,I){for(;_;){if(_==I)return!0;_=_.parentNode}return!1}function b(_,I){return _.indexOf(I)>-1}function N(_){return _.trim().split(/\s+/g)}function H(_,I,T){if(_.indexOf&&!T)return _.indexOf(I);for(var M=0;M<_.length;){if(T&&_[M][T]==I||!T&&_[M]===I)return M;M++}return-1}function D(_){return Array.prototype.slice.call(_,0)}function G(_,I,T){for(var M=[],z=[],J=0;J<_.length;){var xe=I?_[J][I]:_[J];H(z,xe)<0&&M.push(_[J]),z[J]=xe,J++}return T&&(I?M=M.sort(function(xt,zt){return xt[I]>zt[I]}):M=M.sort()),M}function W(_,I){for(var T,M,z=I[0].toUpperCase()+I.slice(1),J=0;J<s.length;){if(T=s[J],M=T?T+z:I,M in _)return M;J++}return i}var X=1;function oe(){return X++}function ge(_){var I=_.ownerDocument||_;return I.defaultView||I.parentWindow||e}var ne=/mobile|tablet|ip(ad|hone|od)|android/i,fe="ontouchstart"in e,P=W(e,"PointerEvent")!==i,S=fe&&ne.test(navigator.userAgent),L="touch",O="pen",k="mouse",F="kinect",U=25,$=1,ie=2,ee=4,pe=8,ae=1,ye=2,Ce=4,ve=8,ct=16,le=ye|Ce,we=ve|ct,Bt=le|we,tt=["x","y"],nt=["clientX","clientY"];function Be(_,I){var T=this;this.manager=_,this.callback=I,this.element=_.element,this.target=_.options.inputTarget,this.domHandler=function(M){y(_.options.enable,[_])&&T.handler(M)},this.init()}Be.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(ge(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&B(this.element,this.evEl,this.domHandler),this.evTarget&&B(this.target,this.evTarget,this.domHandler),this.evWin&&B(ge(this.element),this.evWin,this.domHandler)}};function Ie(_){var I,T=_.options.inputClass;return T?I=T:P?I=Dn:S?I=ce:fe?I=qt:I=Kt,new I(_,Qe)}function Qe(_,I,T){var M=T.pointers.length,z=T.changedPointers.length,J=I&$&&M-z===0,xe=I&(ee|pe)&&M-z===0;T.isFirst=!!J,T.isFinal=!!xe,J&&(_.session={}),T.eventType=I,Ye(_,T),_.emit("hammer.input",T),_.recognize(T),_.session.prevInput=T}function Ye(_,I){var T=_.session,M=I.pointers,z=M.length;T.firstInput||(T.firstInput=$r(I)),z>1&&!T.firstMultiple?T.firstMultiple=$r(I):z===1&&(T.firstMultiple=!1);var J=T.firstInput,xe=T.firstMultiple,gt=xe?xe.center:J.center,xt=I.center=ut(M);I.timeStamp=u(),I.deltaTime=I.timeStamp-J.timeStamp,I.angle=Mn(gt,xt),I.distance=ot(gt,xt),Vt(T,I),I.offsetDirection=Ln(I.deltaX,I.deltaY);var zt=Se(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=zt.x,I.overallVelocityY=zt.y,I.overallVelocity=c(zt.x)>c(zt.y)?zt.x:zt.y,I.scale=xe?aa(xe.pointers,M):1,I.rotation=xe?On(xe.pointers,M):0,I.maxPointers=T.prevInput?I.pointers.length>T.prevInput.maxPointers?I.pointers.length:T.prevInput.maxPointers:I.pointers.length,Pt(T,I);var er=_.element;R(I.srcEvent.target,er)&&(er=I.srcEvent.target),I.target=er}function Vt(_,I){var T=I.center,M=_.offsetDelta||{},z=_.prevDelta||{},J=_.prevInput||{};(I.eventType===$||J.eventType===ee)&&(z=_.prevDelta={x:J.deltaX||0,y:J.deltaY||0},M=_.offsetDelta={x:T.x,y:T.y}),I.deltaX=z.x+(T.x-M.x),I.deltaY=z.y+(T.y-M.y)}function Pt(_,I){var T=_.lastInterval||I,M=I.timeStamp-T.timeStamp,z,J,xe,gt;if(I.eventType!=pe&&(M>U||T.velocity===i)){var xt=I.deltaX-T.deltaX,zt=I.deltaY-T.deltaY,er=Se(M,xt,zt);J=er.x,xe=er.y,z=c(er.x)>c(er.y)?er.x:er.y,gt=Ln(xt,zt),_.lastInterval=I}else z=T.velocity,J=T.velocityX,xe=T.velocityY,gt=T.direction;I.velocity=z,I.velocityX=J,I.velocityY=xe,I.direction=gt}function $r(_){for(var I=[],T=0;T<_.pointers.length;)I[T]={clientX:l(_.pointers[T].clientX),clientY:l(_.pointers[T].clientY)},T++;return{timeStamp:u(),pointers:I,center:ut(I),deltaX:_.deltaX,deltaY:_.deltaY}}function ut(_){var I=_.length;if(I===1)return{x:l(_[0].clientX),y:l(_[0].clientY)};for(var T=0,M=0,z=0;z<I;)T+=_[z].clientX,M+=_[z].clientY,z++;return{x:l(T/I),y:l(M/I)}}function Se(_,I,T){return{x:I/_||0,y:T/_||0}}function Ln(_,I){return _===I?ae:c(_)>=c(I)?_<0?ye:Ce:I<0?ve:ct}function ot(_,I,T){T||(T=tt);var M=I[T[0]]-_[T[0]],z=I[T[1]]-_[T[1]];return Math.sqrt(M*M+z*z)}function Mn(_,I,T){T||(T=tt);var M=I[T[0]]-_[T[0]],z=I[T[1]]-_[T[1]];return Math.atan2(z,M)*180/Math.PI}function On(_,I){return Mn(I[1],I[0],nt)+Mn(_[1],_[0],nt)}function aa(_,I){return ot(I[0],I[1],nt)/ot(_[0],_[1],nt)}var la={mousedown:$,mousemove:ie,mouseup:ee},ca="mousedown",Ae="mousemove mouseup";function Kt(){this.evEl=ca,this.evWin=Ae,this.pressed=!1,Be.apply(this,arguments)}E(Kt,Be,{handler:function(I){var T=la[I.type];T&$&&I.button===0&&(this.pressed=!0),T&ie&&I.which!==1&&(T=ee),this.pressed&&(T&ee&&(this.pressed=!1),this.callback(this.manager,T,{pointers:[I],changedPointers:[I],pointerType:k,srcEvent:I}))}});var ua={pointerdown:$,pointermove:ie,pointerup:ee,pointercancel:pe,pointerout:pe},Hi={2:L,3:O,4:k,5:F},vn="pointerdown",Wi="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(vn="MSPointerDown",Wi="MSPointerMove MSPointerUp MSPointerCancel");function Dn(){this.evEl=vn,this.evWin=Wi,Be.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}E(Dn,Be,{handler:function(I){var T=this.store,M=!1,z=I.type.toLowerCase().replace("ms",""),J=ua[z],xe=Hi[I.pointerType]||I.pointerType,gt=xe==L,xt=H(T,I.pointerId,"pointerId");J&$&&(I.button===0||gt)?xt<0&&(T.push(I),xt=T.length-1):J&(ee|pe)&&(M=!0),!(xt<0)&&(T[xt]=I,this.callback(this.manager,J,{pointers:T,changedPointers:[I],pointerType:xe,srcEvent:I}),M&&T.splice(xt,1))}});var vr={touchstart:$,touchmove:ie,touchend:ee,touchcancel:pe},fa="touchstart",td="touchstart touchmove touchend touchcancel";function ha(){this.evTarget=fa,this.evWin=td,this.started=!1,Be.apply(this,arguments)}E(ha,Be,{handler:function(I){var T=vr[I.type];if(T===$&&(this.started=!0),!!this.started){var M=nd.call(this,I,T);T&(ee|pe)&&M[0].length-M[1].length===0&&(this.started=!1),this.callback(this.manager,T,{pointers:M[0],changedPointers:M[1],pointerType:L,srcEvent:I})}}});function nd(_,I){var T=D(_.touches),M=D(_.changedTouches);return I&(ee|pe)&&(T=G(T.concat(M),"identifier",!0)),[T,M]}var rd={touchstart:$,touchmove:ie,touchend:ee,touchcancel:pe},se="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=se,this.targetIds={},Be.apply(this,arguments)}E(ce,Be,{handler:function(I){var T=rd[I.type],M=$e.call(this,I,T);!M||this.callback(this.manager,T,{pointers:M[0],changedPointers:M[1],pointerType:L,srcEvent:I})}});function $e(_,I){var T=D(_.touches),M=this.targetIds;if(I&($|ie)&&T.length===1)return M[T[0].identifier]=!0,[T,T];var z,J,xe=D(_.changedTouches),gt=[],xt=this.target;if(J=T.filter(function(zt){return R(zt.target,xt)}),I===$)for(z=0;z<J.length;)M[J[z].identifier]=!0,z++;for(z=0;z<xe.length;)M[xe[z].identifier]&&gt.push(xe[z]),I&(ee|pe)&&delete M[xe[z].identifier],z++;if(!!gt.length)return[G(J.concat(gt),"identifier",!0),gt]}var Ze=2500,Ne=25;function qt(){Be.apply(this,arguments);var _=v(this.handler,this);this.touch=new ce(this.manager,_),this.mouse=new Kt(this.manager,_),this.primaryTouch=null,this.lastTouches=[]}E(qt,Be,{handler:function(I,T,M){var z=M.pointerType==L,J=M.pointerType==k;if(!(J&&M.sourceCapabilities&&M.sourceCapabilities.firesTouchEvents)){if(z)ke.call(this,T,M);else if(J&&Xr.call(this,M))return;this.callback(I,T,M)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ke(_,I){_&$?(this.primaryTouch=I.changedPointers[0].identifier,Ls.call(this,I)):_&(ee|pe)&&Ls.call(this,I)}function Ls(_){var I=_.changedPointers[0];if(I.identifier===this.primaryTouch){var T={x:I.clientX,y:I.clientY};this.lastTouches.push(T);var M=this.lastTouches,z=function(){var J=M.indexOf(T);J>-1&&M.splice(J,1)};setTimeout(z,Ze)}}function Xr(_){for(var I=_.srcEvent.clientX,T=_.srcEvent.clientY,M=0;M<this.lastTouches.length;M++){var z=this.lastTouches[M],J=Math.abs(I-z.x),xe=Math.abs(T-z.y);if(J<=Ne&&xe<=Ne)return!0}return!1}var Ms=W(o.style,"touchAction"),Os=Ms!==i,Bc="compute",Pc="auto",yr="manipulation",at="none",Kr="pan-x",Yi="pan-y",Fn=db();function da(_,I){this.manager=_,this.set(I)}da.prototype={set:function(_){_==Bc&&(_=this.compute()),Os&&this.manager.element.style&&Fn[_]&&(this.manager.element.style[Ms]=_),this.actions=_.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var _=[];return d(this.manager.recognizers,function(I){y(I.options.enable,[I])&&(_=_.concat(I.getTouchAction()))}),id(_.join(" "))},preventDefaults:function(_){var I=_.srcEvent,T=_.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var M=this.actions,z=b(M,at)&&!Fn[at],J=b(M,Yi)&&!Fn[Yi],xe=b(M,Kr)&&!Fn[Kr];if(z){var gt=_.pointers.length===1,xt=_.distance<2,zt=_.deltaTime<250;if(gt&&xt&&zt)return}if(!(xe&&J)&&(z||J&&T&le||xe&&T&we))return this.preventSrc(I)},preventSrc:function(_){this.manager.session.prevented=!0,_.preventDefault()}};function id(_){if(b(_,at))return at;var I=b(_,Kr),T=b(_,Yi);return I&&T?at:I||T?I?Kr:Yi:b(_,yr)?yr:Pc}function db(){if(!Os)return!1;var _={},I=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(T){_[T]=I?e.CSS.supports("touch-action",T):!0}),_}var Nc=1,yn=2,Ds=4,qr=8,_r=qr,Aa=16,Zn=32;function xr(_){this.options=p({},this.defaults,_||{}),this.id=oe(),this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=Nc,this.simultaneous={},this.requireFail=[]}xr.prototype={defaults:{},set:function(_){return p(this.options,_),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(_){if(h(_,"recognizeWith",this))return this;var I=this.simultaneous;return _=Lc(_,this),I[_.id]||(I[_.id]=_,_.recognizeWith(this)),this},dropRecognizeWith:function(_){return h(_,"dropRecognizeWith",this)?this:(_=Lc(_,this),delete this.simultaneous[_.id],this)},requireFailure:function(_){if(h(_,"requireFailure",this))return this;var I=this.requireFail;return _=Lc(_,this),H(I,_)===-1&&(I.push(_),_.requireFailure(this)),this},dropRequireFailure:function(_){if(h(_,"dropRequireFailure",this))return this;_=Lc(_,this);var I=H(this.requireFail,_);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(_){return!!this.simultaneous[_.id]},emit:function(_){var I=this,T=this.state;function M(z){I.manager.emit(z,_)}T<qr&&M(I.options.event+uE(T)),M(I.options.event),_.additionalEvent&&M(_.additionalEvent),T>=qr&&M(I.options.event+uE(T))},tryEmit:function(_){if(this.canEmit())return this.emit(_);this.state=Zn},canEmit:function(){for(var _=0;_<this.requireFail.length;){if(!(this.requireFail[_].state&(Zn|Nc)))return!1;_++}return!0},recognize:function(_){var I=p({},_);if(!y(this.options.enable,[this,I])){this.reset(),this.state=Zn;return}this.state&(_r|Aa|Zn)&&(this.state=Nc),this.state=this.process(I),this.state&(yn|Ds|qr|Aa)&&this.tryEmit(I)},process:function(_){},getTouchAction:function(){},reset:function(){}};function uE(_){return _&Aa?"cancel":_&qr?"end":_&Ds?"move":_&yn?"start":""}function fE(_){return _==ct?"down":_==ve?"up":_==ye?"left":_==Ce?"right":""}function Lc(_,I){var T=I.manager;return T?T.get(_):_}function Qn(){xr.apply(this,arguments)}E(Qn,xr,{defaults:{pointers:1},attrTest:function(_){var I=this.options.pointers;return I===0||_.pointers.length===I},process:function(_){var I=this.state,T=_.eventType,M=I&(yn|Ds),z=this.attrTest(_);return M&&(T&pe||!z)?I|Aa:M||z?T&ee?I|qr:I&yn?I|Ds:yn:Zn}});function Mc(){Qn.apply(this,arguments),this.pX=null,this.pY=null}E(Mc,Qn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Bt},getTouchAction:function(){var _=this.options.direction,I=[];return _&le&&I.push(Yi),_&we&&I.push(Kr),I},directionTest:function(_){var I=this.options,T=!0,M=_.distance,z=_.direction,J=_.deltaX,xe=_.deltaY;return z&I.direction||(I.direction&le?(z=J===0?ae:J<0?ye:Ce,T=J!=this.pX,M=Math.abs(_.deltaX)):(z=xe===0?ae:xe<0?ve:ct,T=xe!=this.pY,M=Math.abs(_.deltaY))),_.direction=z,T&&M>I.threshold&&z&I.direction},attrTest:function(_){return Qn.prototype.attrTest.call(this,_)&&(this.state&yn||!(this.state&yn)&&this.directionTest(_))},emit:function(_){this.pX=_.deltaX,this.pY=_.deltaY;var I=fE(_.direction);I&&(_.additionalEvent=this.options.event+I),this._super.emit.call(this,_)}});function sd(){Qn.apply(this,arguments)}E(sd,Qn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(_){return this._super.attrTest.call(this,_)&&(Math.abs(_.scale-1)>this.options.threshold||this.state&yn)},emit:function(_){if(_.scale!==1){var I=_.scale<1?"in":"out";_.additionalEvent=this.options.event+I}this._super.emit.call(this,_)}});function od(){xr.apply(this,arguments),this._timer=null,this._input=null}E(od,xr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pc]},process:function(_){var I=this.options,T=_.pointers.length===I.pointers,M=_.distance<I.threshold,z=_.deltaTime>I.time;if(this._input=_,!M||!T||_.eventType&(ee|pe)&&!z)this.reset();else if(_.eventType&$)this.reset(),this._timer=f(function(){this.state=_r,this.tryEmit()},I.time,this);else if(_.eventType&ee)return _r;return Zn},reset:function(){clearTimeout(this._timer)},emit:function(_){this.state===_r&&(_&&_.eventType&ee?this.manager.emit(this.options.event+"up",_):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function ad(){Qn.apply(this,arguments)}E(ad,Qn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(_){return this._super.attrTest.call(this,_)&&(Math.abs(_.rotation)>this.options.threshold||this.state&yn)}});function ld(){Qn.apply(this,arguments)}E(ld,Qn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:le|we,pointers:1},getTouchAction:function(){return Mc.prototype.getTouchAction.call(this)},attrTest:function(_){var I=this.options.direction,T;return I&(le|we)?T=_.overallVelocity:I&le?T=_.overallVelocityX:I&we&&(T=_.overallVelocityY),this._super.attrTest.call(this,_)&&I&_.offsetDirection&&_.distance>this.options.threshold&&_.maxPointers==this.options.pointers&&c(T)>this.options.velocity&&_.eventType&ee},emit:function(_){var I=fE(_.offsetDirection);I&&this.manager.emit(this.options.event+I,_),this.manager.emit(this.options.event,_)}});function Oc(){xr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}E(Oc,xr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yr]},process:function(_){var I=this.options,T=_.pointers.length===I.pointers,M=_.distance<I.threshold,z=_.deltaTime<I.time;if(this.reset(),_.eventType&$&&this.count===0)return this.failTimeout();if(M&&z&&T){if(_.eventType!=ee)return this.failTimeout();var J=this.pTime?_.timeStamp-this.pTime<I.interval:!0,xe=!this.pCenter||ot(this.pCenter,_.center)<I.posThreshold;this.pTime=_.timeStamp,this.pCenter=_.center,!xe||!J?this.count=1:this.count+=1,this._input=_;var gt=this.count%I.taps;if(gt===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=_r,this.tryEmit()},I.interval,this),yn):_r}return Zn},failTimeout:function(){return this._timer=f(function(){this.state=Zn},this.options.interval,this),Zn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==_r&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ir(_,I){return I=I||{},I.recognizers=C(I.recognizers,Ir.defaults.preset),new cd(_,I)}Ir.VERSION="2.0.7",Ir.defaults={domEvents:!1,touchAction:Bc,enable:!0,inputTarget:null,inputClass:null,preset:[[ad,{enable:!1}],[sd,{enable:!1},["rotate"]],[ld,{direction:le}],[Mc,{direction:le},["swipe"]],[Oc],[Oc,{event:"doubletap",taps:2},["tap"]],[od]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ab=1,hE=2;function cd(_,I){this.options=p({},Ir.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||_,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=_,this.input=Ie(this),this.touchAction=new da(this,this.options.touchAction),dE(this,!0),d(this.options.recognizers,function(T){var M=this.add(new T[0](T[1]));T[2]&&M.recognizeWith(T[2]),T[3]&&M.requireFailure(T[3])},this)}cd.prototype={set:function(_){return p(this.options,_),_.touchAction&&this.touchAction.update(),_.inputTarget&&(this.input.destroy(),this.input.target=_.inputTarget,this.input.init()),this},stop:function(_){this.session.stopped=_?hE:Ab},recognize:function(_){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(_);var T,M=this.recognizers,z=I.curRecognizer;(!z||z&&z.state&_r)&&(z=I.curRecognizer=null);for(var J=0;J<M.length;)T=M[J],I.stopped!==hE&&(!z||T==z||T.canRecognizeWith(z))?T.recognize(_):T.reset(),!z&&T.state&(yn|Ds|qr)&&(z=I.curRecognizer=T),J++}},get:function(_){if(_ instanceof xr)return _;for(var I=this.recognizers,T=0;T<I.length;T++)if(I[T].options.event==_)return I[T];return null},add:function(_){if(h(_,"add",this))return this;var I=this.get(_.options.event);return I&&this.remove(I),this.recognizers.push(_),_.manager=this,this.touchAction.update(),_},remove:function(_){if(h(_,"remove",this))return this;if(_=this.get(_),_){var I=this.recognizers,T=H(I,_);T!==-1&&(I.splice(T,1),this.touchAction.update())}return this},on:function(_,I){if(_!==i&&I!==i){var T=this.handlers;return d(N(_),function(M){T[M]=T[M]||[],T[M].push(I)}),this}},off:function(_,I){if(_!==i){var T=this.handlers;return d(N(_),function(M){I?T[M]&&T[M].splice(H(T[M],I),1):delete T[M]}),this}},emit:function(_,I){this.options.domEvents&&gb(_,I);var T=this.handlers[_]&&this.handlers[_].slice();if(!(!T||!T.length)){I.type=_,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var M=0;M<T.length;)T[M](I),M++}},destroy:function(){this.element&&dE(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function dE(_,I){var T=_.element;if(!!T.style){var M;d(_.options.cssProps,function(z,J){M=W(T.style,J),I?(_.oldCssProps[M]=T.style[M],T.style[M]=z):T.style[M]=_.oldCssProps[M]||""}),I||(_.oldCssProps={})}}function gb(_,I){var T=n.createEvent("Event");T.initEvent(_,!0,!0),T.gesture=I,I.target.dispatchEvent(T)}p(Ir,{INPUT_START:$,INPUT_MOVE:ie,INPUT_END:ee,INPUT_CANCEL:pe,STATE_POSSIBLE:Nc,STATE_BEGAN:yn,STATE_CHANGED:Ds,STATE_ENDED:qr,STATE_RECOGNIZED:_r,STATE_CANCELLED:Aa,STATE_FAILED:Zn,DIRECTION_NONE:ae,DIRECTION_LEFT:ye,DIRECTION_RIGHT:Ce,DIRECTION_UP:ve,DIRECTION_DOWN:ct,DIRECTION_HORIZONTAL:le,DIRECTION_VERTICAL:we,DIRECTION_ALL:Bt,Manager:cd,Input:Be,TouchAction:da,TouchInput:ce,MouseInput:Kt,PointerEventInput:Dn,TouchMouseInput:qt,SingleTouchInput:ha,Recognizer:xr,AttrRecognizer:Qn,Tap:Oc,Pan:Mc,Swipe:ld,Pinch:sd,Rotate:ad,Press:od,on:x,off:B,each:d,merge:m,extend:g,assign:p,inherit:E,bindFn:v,prefixed:W});var pb=typeof e<"u"?e:typeof self<"u"?self:{};pb.Hammer=Ir,typeof i=="function"&&i.amd?i(function(){return Ir}):t.exports?t.exports=Ir:e[r]=Ir})(window,document,"Hammer")})(jT);const on=jT.exports,HT=1,WT=2,rp=4,NQ={mousedown:HT,mousemove:WT,mouseup:rp};function LQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function MQ(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(LQ(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function OQ(t){t.prototype.handler=function(n){let r=NQ[n.type];r&HT&&n.button>=0&&(this.pressed=!0),r&WT&&n.which===0&&(r=rp),this.pressed&&(r&rp&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}MQ(on.PointerEventInput);OQ(on.MouseInput);const DQ=on.Manager,FQ=on?[[on.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[on.Rotate,{enable:!1}],[on.Pinch,{enable:!1}],[on.Swipe,{enable:!1}],[on.Pan,{threshold:0,enable:!1}],[on.Press,{enable:!1}],[on.Tap,{event:"doubletap",taps:2,enable:!1}],[on.Tap,{event:"anytap",enable:!1}],[on.Tap,{enable:!1}]]:null,D_={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},QQ={doubletap:["tap"]},kQ={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},um={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},UQ={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},F_={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},GQ=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",co=typeof window<"u"?window:global;let YT=!1;try{const t={get passive(){return YT=!0,!0}};co.addEventListener("test",t,t),co.removeEventListener("test",t,t)}catch{}const VQ=GQ.indexOf("firefox")!==-1,{WHEEL_EVENTS:zQ}=um,Q_="wheel",k_=4.000244140625,jQ=40,HQ=.25;class WQ{constructor(e,n,r={}){this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.events=zQ.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,YT?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Q_&&(this.options.enable=n)}handleEvent(e){if(!this.options.enable)return;let n=e.deltaY;co.WheelEvent&&(VQ&&e.deltaMode===co.WheelEvent.DOM_DELTA_PIXEL&&(n/=co.devicePixelRatio),e.deltaMode===co.WheelEvent.DOM_DELTA_LINE&&(n*=jQ));const r={x:e.clientX,y:e.clientY};n!==0&&n%k_===0&&(n=Math.floor(n/k_)),e.shiftKey&&n&&(n=n*HQ),this._onWheel(e,-n,r)}_onWheel(e,n,r){this.callback({type:Q_,center:r,delta:n,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:YQ}=um,U_="pointermove",G_="pointerover",V_="pointerout",z_="pointerleave";class $Q{constructor(e,n,r={}){this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=YQ.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===U_&&(this.enableMoveEvent=n),e===G_&&(this.enableOverEvent=n),e===V_&&(this.enableOutEvent=n),e===z_&&(this.enableLeaveEvent=n)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this.callback({type:G_,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this.callback({type:V_,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this.callback({type:z_,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this.callback({type:U_,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1;break}}}const{KEY_EVENTS:XQ}=um,j_="keydown",H_="keyup";class KQ{constructor(e,n,r={}){this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=XQ.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=r.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===j_&&(this.enableDownEvent=n),e===H_&&(this.enableUpEvent=n)}handleEvent(e){const n=e.target||e.srcElement;n.tagName==="INPUT"&&n.type==="text"||n.tagName==="TEXTAREA"||(this.enableDownEvent&&e.type==="keydown"&&this.callback({type:j_,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&e.type==="keyup"&&this.callback({type:H_,srcEvent:e,key:e.key,target:e.target}))}}const W_="contextmenu";class qQ{constructor(e,n,r={}){this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===W_&&(this.options.enable=n)}handleEvent(e){!this.options.enable||this.callback({type:W_,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const ip=1,Uf=2,sp=4,JQ={pointerdown:ip,pointermove:Uf,pointerup:sp,mousedown:ip,mousemove:Uf,mouseup:sp},ZQ=1,ek=2,tk=3,nk=0,rk=1,ik=2,sk=1,ok=2,ak=4;function lk(t){const e=JQ[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===sp||e===Uf&&!Number.isFinite(n)?(s=i===ZQ,o=i===ek,a=i===tk):e===Uf?(s=Boolean(n&sk),o=Boolean(n&ak),a=Boolean(n&ok)):e===ip&&(s=r===nk,o=r===rk,a=r===ik),{leftButton:s,middleButton:o,rightButton:a}}function ck(t,e){const{srcEvent:n}=t;if(!t.center&&!Number.isFinite(n.clientX))return null;const r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),s=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1,a={x:(r.x-i.left-e.clientLeft)/s,y:(r.y-i.top-e.clientTop)/o};return{center:r,offsetCenter:a}}const Y_={srcElement:"root",priority:0};class uk{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;r&&(typeof r!="object"||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},Y_,r):Y_;let l=a.get(r.srcElement);l||(l=[],a.set(r.srcElement,l));const c={type:e,handler:n,srcElement:r.srcElement,priority:r.priority};i&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const n=this._normalizeEvent(e);let r=e.srcEvent.target;for(;r&&r!==n.rootElement;){if(this._emit(n,r),n.handled)return;r=r.parentNode}this._emit(n,"root")}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:f}=r[l];if(u(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),f&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.element;return Object.assign({},e,lk(e),ck(e,n),{handled:!1,rootElement:n})}}const fk={events:null,recognizers:null,recognizerOptions:{},Manager:DQ,touchAction:"none",tabIndex:0};class hk{constructor(e=null,n={}){this.options=Object.assign({},fk,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:r}=n;r&&this.on(r)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||FQ}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(D_).forEach(i=>{const s=this.manager.get(i);s&&D_[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new WQ(e,this._onOtherEvent,{enable:!1}),this.moveInput=new $Q(e,this._onOtherEvent,{enable:!1}),this.keyInput=new KQ(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new qQ(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=QQ[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=F_[e]||e;let c=a.get(l);c||(c=new uk(this),a.set(l,c),c.recognizerName=UQ[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=F_[e]||e,s=r.get(i);if(!!s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:n}=e,r=kQ[n.type];r&&this.manager.emit(r,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function Ki(){}const dk=t=>{let{isDragging:e}=t;return e?"grabbing":"grab"};function Ak(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(LT)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,eventRecognizerOptions:t.object,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onInteractionStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}}const $T={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Ki,onResize:Ki,onViewStateChange:Ki,onInteractionStateChange:Ki,onBeforeRender:Ki,onAfterRender:Ki,onLoad:Ki,onError:(t,e)=>me.error(t)(),_onMetrics:null,getCursor:dk,debug:!1,drawPickingColors:!1};class Zo{constructor(e){e={...$T,...e},this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&me.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Ve.exports.getBrowser()==="IE"&&me.warn("IE 11 support will be deprecated in v8.0")(),e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new Ph({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Uo.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&me.removed("onLayerHover","onHover")(),"onLayerClick"in e&&me.removed("onLayerClick","onClick")(),e.initialViewState&&!Jo(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;const n=e||this.needsRedraw({clearRedrawFlags:!0});!n||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),dn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;let{width:n,height:r}=e;(n||n===0)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.width=n),(r||r===0)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.position="absolute",this.canvas.style.height=r)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:n}=this;this.viewManager.setProps({width:e,height:n}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const n=e.clientWidth||e.width,r=e.clientHeight||e.height;return n!==this.width||r!==this.height?(this.width=n,this.height=r,!0):!1}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u,autoResizeDrawingBuffer:f}=e;return new WO({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:f,autoResizeViewport:!1,gl:i,onCreateContext:h=>Uw({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new UT({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:n}=this;if(e.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(e.leftButton||e.rightButton)return;{const r=e.offsetCenter;if(!r)return;n.x=r.x,n.y=r.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=e,n.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=n.length>0;let i=r,s=!1;for(const o of n)i=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip){const o=this.props.getTooltip(i);this.tooltip.setTooltip(o,i.x,i.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,J0(e,{enable:!0,copyState:!0})),this.tooltip=new PQ(this.canvas),Qr(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new ST;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new hk(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in y_)this.eventManager.on(i,this._onEvent);this.viewManager=new oQ({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new sQ(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new EQ,this.deckRenderer=new IQ(e),this.deckPicker=new RQ(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Qr(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),me.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const n=y_[e.type],r=e.offsetCenter;if(!n||!r)return;const i=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:i,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[n.handler]||o.props[n.handler]),l=this.props[n.handler];let c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){const n=e.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=cs.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}Zo.getPropTypes=Ak;Zo.defaultProps=$T;Zo.VERSION=ZL.VERSION;class AA{constructor(e,n){this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function gk(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function $u(t){return t.stride||t.size*t.bytesPerElement}function XT(t,e){e.offset&&me.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=$u(t),r="vertexOffset"in e?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function pk(t,e){const n=XT(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class mk{constructor(e,n){this.gl=e,this.id=n.id,this.size=n.size;const r=n.logicalType||n.type,i=r===5130;let{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),n.defaultValue=s;let o=r;i?o=5126:!o&&n.isIndexed?o=e&&$g(e,Oe.ELEMENT_INDEX_UINT32)?5125:5123:o||(o=5126),n.logicalType=r,n.type=o;let a=gk(r||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&n.fp64===!1&&(a=Float32Array),n.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,constant:!1},this._buffer=null,this.setData(n)}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Le(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*$u(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Uo.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=pk(this.getAccessor(),n||{});return r[e]=new AA(this,s.high),r["".concat(e,"64Low")]=i?new AA(this,s.low):new Float32Array(this.size),r}if(n){const r=XT(this.getAccessor(),n);return{[e]:new AA(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:n}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof Le&&(e={buffer:e});const r={...this.settings,...e};if(n.bufferAccessor=r,e.constant){let i=e.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this._normalizeConstant(i)),!(!n.constant||!this._areValuesEqual(i,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=i}else if(e.buffer){const i=e.buffer;n.externalBuffer=i,n.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;r.type=e.type||i.accessor.type,r.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=$u(r)}else if(e.value){this._checkExternalBuffer(e);let i=e.value;n.externalBuffer=null,n.constant=!1,this.value=i,r.bytesPerElement=i.BYTES_PER_ELEMENT,r.stride=$u(r);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&i instanceof Float64Array&&(i=fA(i,r));const a=i.byteLength+o+r.stride*2;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:i,offset:o}),r.type=e.type||s.accessor.type}return!0}updateSubBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{value:n}=this,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?fA(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e){let{numInstances:n,copy:r=!1}=e;const{state:i}=this,s=i.allocatedValue,o=Uo.allocate(s,n+1,{size:this.size,type:this.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:l}=this;return a.byteLength<o.byteLength+l&&(a.reallocate(o.byteLength+l),r&&s&&a.subData({data:s instanceof Float64Array?fA(s,this):s,offset:l})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!e.constant&&n){const r=this.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&me.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const $_=[],X_=[];function mc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,r=$_;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(X_.length=t.length,r=X_):r=$_,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function KT(t){return t&&t[Symbol.asyncIterator]}function qT(t,e){let{size:n,stride:r,offset:i,startIndices:s,nested:o}=e;const a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(f,h)=>{let{index:d,target:A}=h;if(!s){const E=d*l+c;for(let v=0;v<n;v++)A[v]=t[E+v];return A}const p=s[d],g=s[d+1]||u;let m;if(o){m=new Array(g-p);for(let E=p;E<g;E++){const v=E*l+c;A=new Array(n);for(let y=0;y<n;y++)A[y]=t[v+y];m[E-p]=A}}else if(l===n)m=t.subarray(p*n+c,g*n+c);else{m=new t.constructor((g-p)*n);let E=0;for(let v=p;v<g;v++){const y=v*l+c;for(let C=0;C<n;C++)m[E++]=t[y+C]}}return m}}const Ek=[],Xu=[[0,1/0]];function vk(t,e){if(t===Xu||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function gA(t){let{source:e,target:n,start:r=0,end:i,size:s,getData:o}=t;i=i||n.length;const a=e.length,l=i-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!o)return;let c=a;for(;c<l;){const u=o(c,e);for(let f=0;f<s;f++)n[r+c]=u[f]||0,c++}}function yk(t){let{source:e,target:n,size:r,getData:i,sourceStartIndices:s,targetStartIndices:o}=t;if(!Array.isArray(o))return gA({source:e,target:n,size:r,getData:i}),n;let a=0,l=0;const c=i&&((f,h)=>i(f+l,h)),u=Math.min(s.length,o.length);for(let f=1;f<u;f++){const h=s[f]*r,d=o[f]*r;gA({source:e.subarray(a,h),target:n,start:l,end:d,size:r,getData:c}),a=h,l=d}return l<n.length&&gA({source:[],target:n,start:l,size:r,getData:c}),n}const _k={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function JT(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",{..._k[t.type],...e,...t}):null}function ZT(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function e2(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function t2(t){t.push(t.shift())}function fm(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function n2(t){let{buffer:e,numInstances:n,attribute:r,fromLength:i,fromStartIndices:s,getData:o=E=>E}=t;const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*a,c=r.byteOffset,u=r.startIndices,f=s&&u,h=fm(r,n),d=r.state.constant;if(!f&&i>=h)return;const A=d?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!d){const E=o;o=(v,y)=>r._normalizeConstant(E(v,y))}const p=d?(E,v)=>o(A,v):(E,v)=>o(A.subarray(E,E+l),v),g=e.getData({length:i}),m=new Float32Array(h);yk({source:g,target:m,sourceStartIndices:s,targetStartIndices:u,size:l,getData:p}),e.byteLength<m.byteLength+c&&e.reallocate(m.byteLength+c),e.subData({data:m,offset:c})}class hm extends mk{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n);const{transition:r=!1,noAlloc:i=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=n;Object.assign(this.settings,{transition:r,noAlloc:i,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Xu,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return JT(i,r)}setNeedsUpdate(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.id,n=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=vk(this.state.updateRanges,[r,i])}else this.state.updateRanges=Xu}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Ek}setNeedsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate({numInstances:e,copy:n.updateRanges!==Xu}),!0):!1}updateBuffer(e){let{numInstances:n,data:r,props:i,context:s}=e;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:l}}=this;let c=!0;if(a){for(const[u,f]of o)a.call(s,this,{data:r,startRow:u,endRow:f,props:i,numInstances:n});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,f]of o){const h=Number.isFinite(u)?this.getVertexOffset(u):0,d=Number.isFinite(f)?this.getVertexOffset(f):l||!Number.isFinite(n)?this.value.length:n*this.size;super.updateSubBuffer({startOffset:h,endOffset:d})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),i.transform||n!==this.startIndices){dn(ArrayBuffer.isView(e.value),"invalid ".concat(i.accessor));const o=e.size&&e.size!==this.size;return r.binaryAccessor=qT(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:n,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,n){let{data:r,startRow:i,endRow:s,props:o,numInstances:a}=n;if(e.constant)return;const{settings:l,state:c,value:u,size:f,startIndices:h}=e,{accessor:d,transform:A}=l,p=c.binaryAccessor||(typeof d=="function"?d:o[d]);dn(typeof p=="function",'accessor "'.concat(d,'" is not a function'));let g=e.getVertexOffset(i);const{iterable:m,objectInfo:E}=mc(r,i,s);for(const v of m){E.index++;let y=p(v,E);if(A&&(y=A.call(this,y)),h){const C=(E.index<h.length-1?h[E.index+1]:a)-h[E.index];if(y&&Array.isArray(y[0])){let x=g;for(const B of y)e._normalizeValue(B,u,x),x+=f}else y&&y.length>f?u.set(y,g):(e._normalizeValue(y,E.target,0),Z6({target:u,source:E.target,start:g,count:C}));g+=C*f}else e._normalizeValue(y,u,g),g+=f}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class xk{constructor(e){let{gl:n,attribute:r,timeline:i}=e;this.gl=n,this.type="interpolation",this.transition=new pc(i),this.attribute=r,this.attributeInTransition=new hm(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=Ck(n,r);const s={byteLength:0,usage:35050};this.buffers=[new Le(n,s),new Le(n,s)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}const{gl:r,buffers:i,attribute:s}=this;t2(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)n2({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=fm(s,n),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:ZT(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{time:n,settings:{duration:r,easing:i}}=this.transition,s=i(n/r);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}}const Ik=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function Ck(t,e){const n=e2(e.size);return new om(t,{vs:Ik,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class wk{constructor(e){let{gl:n,attribute:r,timeline:i}=e;this.gl=n,this.type="spring",this.transition=new pc(i),this.attribute=r,this.attributeInTransition=new hm(n,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=Sk(n),this.framebuffer=bk(n,this.texture),this.transform=Tk(n,r,this.framebuffer);const s={byteLength:0,usage:35050};this.buffers=[new Le(n,s),new Le(n,s),new Le(n,s)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)n2({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=fm(s,n),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:ZT(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;return i.update()?(n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.settings.stiffness,damping:i.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),t2(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),Oh(r)[0]>0||i.end(),!0):!1}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}function Tk(t,e,n){const r=e2(e.size);return new om(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function Sk(t){return new gn(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function bk(t,e){return new At(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}const Rk={interpolation:xk,spring:wk};class Bk{constructor(e,n){let{id:r,timeline:i}=n;this.id=r,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=om.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update(e){let{attributes:n,transitions:r,numInstances:i}=e;this.numInstances=i||1;for(const s in n){const o=n[s],a=o.getTransitionSetting(r);!a||this._updateAttribute(s,o,a)}for(const s in this.transitions){const o=n[s];(!o||!o.getTransitionSetting(r))&&this._removeTransition(s)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){me.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=Rk[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(me.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const K_="attributeManager.invalidate",Pk="attributeManager.updateStart",Nk="attributeManager.updateEnd",Lk="attribute.updateStart",Mk="attribute.allocate",Ok="attribute.updateEnd";class Dk{constructor(e){let{id:n="attribute-manager",stats:r,timeline:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Bk(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){return this.needsRedraw=!0,this}add(e,n){this._add(e,n)}addInstanced(e,n){this._add(e,n,{instanced:1})}remove(e){for(let n=0;n<e.length;n++){const r=e[n];this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}}invalidate(e,n){const r=this._invalidateTrigger(e,n);Ot(K_,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Ot(K_,this,"all")}update(){let{data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=!1;Ot(Pk,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],f=u.settings.accessor;u.startIndices=r,s[c]&&me.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(o[f],e.startIndices)||!o[f]&&u.setConstantValue(s[f])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw|=u.needsRedraw()}l&&Ot(Nk,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearChangedFlags:!1};const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}getAccessors(){return this.updateTriggers}_add(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n&&me.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const i in e){const s=e[i];this.attributes[i]=this._createAttribute(i,s,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,isIndexed:n.isIndexed||n.elements||!1,constant:n.constant||!1,size:n.elements&&1||n.size||1,value:n.value||null,divisor:n.instanced||r.instanced?1:n.divisor||0};return new hm(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Ot(Lk,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Ot(Mk,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Ot(Ok,n,r))}}class Fk extends pc{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=ps(n,r,o)}}const q_=1e-5;function J_(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function Qk(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=J_(t[o],e[o],n[o],r,i);return s}return J_(t,e,n,r,i)}function Z_(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class kk extends pc{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=Qk(s,o,n,r,i);const l=Z_(a,n),c=Z_(a,o);l<q_&&c<q_&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const Uk={interpolation:Fk,spring:kk};class Gk{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=JT(i),!i)return;const o=Uk[i.type];if(!o){me.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const{COMPONENT:Vk}=Qh;function zk(t){const e=dm(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function jk(t,e){const n=r2({newProps:t,oldProps:e,propTypes:dm(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=Wk(t,e);let i=!1;return r||(i=Yk(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:$k(t,e),transitionsChanged:Hk(t,e)}}function Hk(t,e){if(!t.transitions)return null;const n={},r=dm(t);for(const i in t.transitions){const s=r[i],o=s&&s.type;(o==="number"||o==="color"||o==="array")&&op(t[i],e[i],s)&&(n[i]=!0)}return n}function r2(){let{newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e===t)return null;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=op(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=op(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return null}function op(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function Wk(t,e){if(e===null)return"oldProps is null, initial diff";let n=null;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function Yk(t,e){if(e===null)return"oldProps is null, initial diff";if("all"in t.updateTriggers&&e1(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&e1(t,e,i)&&(n[i]=!0,r=n);return r}function $k(t,e){if(e===null)return"oldProps is null, initial diff";const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function e1(t,e,n){let r=t.updateTriggers[n];r=r==null?{}:r;let i=e.updateTriggers[n];return i=i==null?{}:i,r2({oldProps:i,newProps:r,triggerName:n})}function dm(t){const e=t[Vk],n=e&&e.constructor;return n?n._propTypes:{}}const Xk="count(): argument not an object",Kk="count(): argument not a container";function qk(t){if(!Zk(t))throw new Error(Xk);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Jk(t))return Object.keys(t).length;throw new Error(Kk)}function Jk(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Zk(t){return t!==null&&typeof t=="object"}function eU(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const tU={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},ap={};function nU(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof gn)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={[10241]:e.data.length>1?9985:9729});const i=new gn(n,{...e,parameters:{...tU,...r,...t.props.textureParameters}});return ap[i.id]=!0,i}function rU(t){!t||!(t instanceof gn)||ap[t.id]&&(t.delete(),delete ap[t.id])}const iU={boolean:{validate(t,e){return!0},equal(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Ql(t)&&(t.length===3||t.length===4)},equal(t,e,n){return pA(t,e)}},accessor:{validate(t,e){const n=Gf(t);return n==="function"||n===Gf(e.value)},equal(t,e,n){return typeof e=="function"?!0:pA(t,e)}},array:{validate(t,e){return e.optional&&!t||Ql(t)},equal(t,e,n){return n.compare?pA(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n?n.props:{};return r&&t?r(t):t}},image:{transform:(t,e,n)=>nU(n,t),release:t=>{rU(t)}}};function pA(t,e){if(t===e)return!0;if(!Ql(t)||!Ql(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function sU(t){const e={},n={},r={};for(const[i,s]of Object.entries(t))if(s&&s.deprecatedFor)r[i]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{const o=oU(i,s);e[i]=o,n[i]=o.value}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function oU(t,e){switch(Gf(e)){case"object":return Na(t,e);case"array":return Na(t,{type:"array",value:e,compare:!1});case"boolean":return Na(t,{type:"boolean",value:e});case"number":return Na(t,{type:"number",value:e});case"function":return Na(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Na(t,e){return"type"in e?{name:t,...iU[e.type],...e}:"value"in e?{name:t,type:Gf(e.value),...e}:{name:t,type:"object",value:e}}function Ql(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Gf(t){return Ql(t)?"array":t===null?"null":typeof t}const{COMPONENT:lp,ASYNC_ORIGINAL:Vf,ASYNC_RESOLVED:Wa,ASYNC_DEFAULTS:Ku}=Qh;function aU(){const t=this,e=i2(t.constructor),n=Object.create(e);n[lp]=t,n[Vf]={},n[Wa]={};for(let r=0;r<arguments.length;++r){const i=arguments[r];for(const s in i)n[s]=i[s]}return Object.freeze(n),n}function i2(t){const e=zf(t,"_mergedDefaultProps");return e||(lU(t),t._mergedDefaultProps)}function lU(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),r=i2(n),i=zf(t,"defaultProps")||{},s=sU(i),o=cU(s.defaultProps,r,t),a={...n._propTypes,...s.propTypes};fU(o,a);const l={...n._deprecatedProps,...s.deprecatedProps};uU(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}function cU(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=dU(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function uU(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])s2(this,s)||(this[s]=r);me.deprecated(i,e[n].join("/"))()}})}function fU(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=hU(o))}t[Ku]=n,t[Vf]={},Object.defineProperties(t,r)}function hU(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||KT(e)?this[Vf][t]=e:this[Wa][t]=e},get(){if(this[Wa]){if(t in this[Wa])return this[Wa][t]||this[Ku][t];if(t in this[Vf]){const e=this[lp]&&this[lp].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Ku][t]}}return this[Ku][t]}}}function s2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zf(t,e){return s2(t,e)&&t[e]}function dU(t){const e=zf(t,"layerName")||zf(t,"componentName");return e||me.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}const{ASYNC_ORIGINAL:AU,ASYNC_RESOLVED:gU,ASYNC_DEFAULTS:pU}=Qh,mU=Object.freeze({});class o2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=mU,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[gU]||{},r=e[AU]||e,i=e[pU]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,n){if(!!this._didAsyncInputValueChange(e,n)){if(typeof n=="string"){var r;const i=(r=this.layer)===null||r===void 0?void 0:r.props.fetch;i&&(n=i(n,{propName:e,layer:this.layer}))}if(n instanceof Promise){this._watchPromise(e,n);return}if(KT(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this.freezeAsyncOldProps();const r=this.asyncProps[e];n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this.freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{var o;s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i);const a=(o=this.layer)===null||o===void 0?void 0:o.props.onDataLoad;e==="data"&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;(o=this.layer)===null||o===void 0||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}async _resolveAsyncIterable(e,n){var r;e!=="data"&&this._setPropValue(e,n);const i=this.asyncProps[e];i.pendingLoadCount++;const s=i.pendingLoadCount;let o=[],a=0;for await(const c of n){const{dataTransform:u}=this.component?this.component.props:{};u?o=u(c,o):o=o.concat(c),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(e,o,s)}const l=(r=this.layer)===null||r===void 0?void 0:r.props.onDataLoad;l&&l(o,{propName:e,layer:this.layer})}_postProcessValue(e,n){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:t1,ASYNC_RESOLVED:n1,ASYNC_DEFAULTS:EU}=Qh,vU={};let yU=0;class Am{constructor(){this.props=aU.apply(this,arguments),this.id=this.props.id,this.count=yU++,this.lifecycle=Js.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}clone(e){const{props:n}=this,r={};for(const i in n[EU])i in n[n1]?r[i]=n[n1][i]:i in n[t1]&&(r[i]=n[t1][i]);return new this.constructor({...n,...r,...e})}get stats(){return this.internalState.stats}_initState(){this.internalState=new o2({})}}Am.componentName="Component";Am.defaultProps=vU;class _U extends o2{constructor(e){let{attributeManager:n,layer:r}=e;super(r),this.attributeManager=n,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const xU="layer.changeFlag",IU="layer.initialize",CU="layer.update",wU="layer.finalize",TU="layer.matched",r1=2**24-1,SU=Object.freeze([]),bU=Dh(t=>{let{oldViewport:e,viewport:n}=t;return e.equals(n)});let nr=new Uint8ClampedArray(0);const RU={data:{type:"data",value:SU,async:!0},dataComparator:null,_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,e)=>{let{propName:n,layer:r,loaders:i,loadOptions:s,signal:o}=e;const{resourceManager:a}=r.context;if(s=s||r.getLoadOptions(),i=i||r.props.loaders,o){var l;s={...s,fetch:{...(l=s)===null||l===void 0?void 0:l.fetch,signal:o}}}let c=a.contains(t);return!c&&!s&&(a.add({resourceId:t,data:Pf(t,i),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:u=>r.internalState.reloadAsyncProp(n,u),consumerId:r.id,requestId:n}):Pf(t,i,s)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ue.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:t=>{let{layerIndex:e}=t;return[0,-e*100]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class En extends Am{toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.internalState&&(this.internalState.needsRedraw=e)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(e){const{viewport:n}=this.context,r=DT(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=NT(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){const{viewport:n}=this.context;return n.unproject(e)}projectPosition(e){return J6(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ue.DEFAULT||e===ue.LNGLAT||e===ue.CARTESIAN}onHover(e,n){return this.props.onHover?this.props.onHover(e,n):!1}onClick(e,n){return this.props.onClick?this.props.onClick(e,n):!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){dn(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(e){for(const n of this.props.extensions)e=eU(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){let{oldProps:n,props:r,context:i,changeFlags:s}=e;return s.propsOrDataChanged}updateState(e){let{oldProps:n,props:r,context:i,changeFlags:s}=e;const o=this.getAttributeManager();if(s.dataChanged&&o){const{dataChanged:c}=s;if(Array.isArray(c))for(const u of c)o.invalidateAll(u);else o.invalidateAll()}const a=n.highlightedObjectIndex>=0||n.pickable,l=r.highlightedObjectIndex>=0||r.pickable;if(a!==l&&o){const{pickingColors:c,instancePickingColors:u}=o.attributes,f=c||u;f&&(l&&f.constant&&(f.constant=!1,o.invalidate(f.id)),!f.value&&!l&&(f.constant=!0,f.value=[0,0,0]))}}finalizeState(){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo(e){let{info:n,mode:r}=e;const{index:i}=n;return i>=0&&Array.isArray(this.props.data)&&(n.object=this.props.data[i]),n}activateViewport(e){const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!bU({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all";const n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(e){const n=this.getAttributeManager();if(!n)return;const r=this.getNumInstances(e),i=this.getStartIndices(e);n.update({data:e.data,numInstances:r,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});const s=n.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,n){let{numInstances:r}=n;if(e.constant)return;const i=Math.floor(nr.length/3);if(this.internalState.usesPickingColorCache=!0,i<r){r>r1&&me.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),nr=Uo.allocate(nr,r,{size:3,copy:!0,maxCount:Math.max(r,r1)});const s=Math.floor(nr.length/3),o=[];for(let a=i;a<s;a++)this.encodePickingColor(a,o),nr[a*3+0]=o[0],nr[a*3+1]=o[1],nr[a*3+2]=o[2]}e.value=nr.subarray(0,r*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;this.internalState.usesPickingColorCache&&r.value.buffer!==nr.buffer&&(r.value=nr.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}getNumInstances(e){return e=e||this.props,e.numInstances!==void 0?e.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:qk(e.data)}getStartIndices(e){return e=e||this.props,e.startIndices!==void 0?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){Ot(IU,this),this._initState(),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const e=this.needsUpdate();Ot(CU,this,e),e&&this._updateState()}_updateState(){const e=this.props,n=this.context.viewport,r=this._updateUniformTransition();this.internalState.propsInTransition=r,this.context.viewport=this.internalState.viewport||n,this.props=r;try{const i=this._getUpdateParams(),s=this.getModels();if(this.context.gl)this.updateState(i);else try{this.updateState(i)}catch{}for(const a of this.props.extensions)a.updateState.call(this,i,a);const o=this.getModels()[0]!==s[0];this._updateModules(i,o),this.isComposite?this._renderLayers(i):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=n,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){Ot(wU,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}drawLayer(e){let{moduleParameters:n=null,uniforms:r={},parameters:i={}}=e;this._updateAttributeTransition();const s=this.props;this.props=this.internalState.propsInTransition||s;const{opacity:o}=this.props;r.opacity=Math.pow(o,1/2.2);try{n&&this.setModuleParameters(n);const{getPolygonOffset:a}=this.props,l=a&&a(r)||[0,0];Qr(this.context.gl,{polygonOffset:l}),$n(this.context.gl,i,()=>{const c={moduleParameters:n,uniforms:r,parameters:i,context:this.context};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=s}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(e){const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":Array.isArray(n[i])&&(n[i]=Array.isArray(e[i])?n[i].concat(e[i]):e[i],s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Ot(xU,this,i,e)}const r=n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged;n.propsOrDataChanged=r,n.somethingChanged=r||e.viewportChanged||e.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(e,n){const r=jk(e,n);if(r.updateTriggersChanged)for(const i in r.updateTriggersChanged)r.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(r.transitionsChanged)for(const i in r.transitionsChanged)this.internalState.uniformTransitions.add(i,n[i],e[i],e.transitions[i]);return this.setChangeFlags(r)}validateProps(){zk(this.props)}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}updateAutoHighlight(e){this.props.autoHighlight&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_updateModules(e,n){let{props:r,oldProps:i}=e;const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=r;if(n||i.autoHighlight!==s||i.highlightedObjectIndex!==o||i.highlightColor!==a){const l={};s||(l.pickingSelectedColor=null),Array.isArray(a)&&(l.pickingHighlightColor=a),Number.isInteger(o)&&(l.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const r=this.getAttributeManager(),i=r&&r.getNeedsRedraw(e);return n=n||i,n}_getAttributeManager(){return new Dk(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){dn(!this.internalState&&!this.state),dn(isFinite(this.props.coordinateSystem));const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new _U({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(me.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Gk(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(e){Ot(TU,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}En.layerName="Layer";En.defaultProps=RU;const BU="compositeLayer.renderLayers";class Nn extends En{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo(e){let{info:n}=e;const{object:r}=n;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(n.object=r.__source.object,n.index=r.__source.index),n}renderLayers(){return null}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{opacity:n,pickable:r,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:f,wrapLongitude:h,positionFormat:d,modelMatrix:A,extensions:p,fetch:g,_subLayerProps:m}=this.props,E={opacity:n,pickable:r,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:f,wrapLongitude:h,positionFormat:d,modelMatrix:A,extensions:p,fetch:g},v=m&&m[e.id],y=v&&v.updateTriggers,C=e.id||"sublayer";if(v){const x=this.constructor._propTypes,B=e.type?e.type._propTypes:{};for(const R in v){const b=B[R]||x[R];b&&b.type==="accessor"&&(v[R]=this.getSubLayerAccessor(v[R]))}}Object.assign(E,e,v),E.id="".concat(this.props.id,"-").concat(C),E.updateTriggers={all:this.props.updateTriggers.all,...e.updateTriggers,...y};for(const x of p){const B=x.getSubLayerProps.call(this,x);B&&Object.assign(E,B,{updateTriggers:Object.assign(E.updateTriggers,B.updateTriggers)})}return E}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:e}=this.internalState;const n=!e||this.needsUpdate();n&&(e=this.renderLayers(),e=kh(e,Boolean),this.internalState.subLayers=e),Ot(BU,this,n,e);for(const r of e)r.parent=this}}Nn.layerName="CompositeLayer";class Ec{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.opts=e}equals(e){return this===e?!0:this.constructor===e.constructor&&Jo(this.opts,e.opts)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n={}}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o,!0)))}return r}initializeState(e,n){}updateState(e,n){}draw(e,n){}finalizeState(e){}}const ti={rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0};class PU extends kT{constructor(e){let{makeViewport:n,width:r,height:i,rotationX:s=ti.rotationX,rotationOrbit:o=ti.rotationOrbit,target:a=ti.target,zoom:l=ti.zoom,minRotationX:c=ti.minRotationX,maxRotationX:u=ti.maxRotationX,minZoom:f=ti.minZoom,maxZoom:h=ti.maxZoom,startPanPosition:d,startRotatePos:A,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:E}=e;super({width:r,height:i,rotationX:s,rotationOrbit:o,target:a,zoom:l,minRotationX:c,maxRotationX:u,minZoom:f,maxZoom:h}),this._state={startPanPosition:d,startRotatePos:A,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:E},this.makeViewport=n}panStart(e){let{pos:n}=e;return this._getUpdatedState({startPanPosition:this._unproject(n)})}pan(e){let{pos:n,startPosition:r}=e;const i=this._state.startPanPosition||r;if(!i)return this;const o=this.makeViewport(this._viewportProps).panByPosition(i,n);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart(e){let{pos:n}=e;return this._getUpdatedState({startRotatePos:n,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate(e){let{pos:n,deltaAngleX:r=0,deltaAngleY:i=0}=e;const{startRotatePos:s,startRotationX:o,startRotationOrbit:a}=this._state,{width:l,height:c}=this._viewportProps;if(!s||!Number.isFinite(o)||!Number.isFinite(a))return this;let u;if(n){let f=(n[0]-s[0])/l;const h=(n[1]-s[1])/c;(o<-90||o>90)&&(f*=-1),u={rotationX:o+h*180,rotationOrbit:a+f*180}}else u={rotationX:o+i,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this._viewportProps},{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart(e){let{pos:n}=e;return this._getUpdatedState({startZoomPosition:this._unproject(n),startZoom:this._viewportProps.zoom})}zoom(e){let{pos:n,startPos:r,scale:i}=e;const{zoom:s}=this._viewportProps;let{startZoom:o,startZoomPosition:a}=this._state;Number.isFinite(o)||(o=s,a=this._unproject(r)||this._unproject(n));const l=this._calculateNewZoom({scale:i,startZoom:o}),c=this.makeViewport({...this._viewportProps,zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(a,n)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([-e,0])}moveRight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([e,0])}moveUp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([0,-e])}moveDown(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([0,e])}rotateLeft(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const n=this.makeViewport(this._viewportProps);return e&&n.unproject(e)}_calculateNewZoom(e){let{scale:n,startZoom:r}=e;const{maxZoom:i,minZoom:s}=this._viewportProps;Number.isFinite(r)||(r=this._viewportProps.zoom);const o=r+Math.log2(n);return cn(o,s,i)}_panFromCenter(e){const{width:n,height:r,target:i}=this._viewportProps;return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({...this._viewportProps,...this._state,...e})}_applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=cn(i,r,n),e.rotationX=cn(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=U6(a+180,360)-180),e}}class NU extends PU{constructor(e){super(e),this.zoomAxis=e.zoomAxis||"all"}_applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;return e.zoom=Array.isArray(i)?[cn(i[0],r,n),cn(i[1],r,n)]:cn(i,r,n),e}_calculateNewZoom(e){let{scale:n,startZoom:r}=e;const{maxZoom:i,minZoom:s}=this._viewportProps;!r&&r!==0&&(r=this._viewportProps.zoom);let o=Math.log2(n);if(Array.isArray(r)){let[a,l]=r;switch(this.zoomAxis){case"X":a=cn(a+o,s,i);break;case"Y":l=cn(l+o,s,i);break;default:let c=Math.min(a+o,l+o);c<s&&(o+=s-c),c=Math.max(a+o,l+o),c>i&&(o+=i-c),a+=o,l+=o}return[a,l]}return cn(r+o,s,i)}}class LU extends QT{constructor(e){e.dragMode=e.dragMode||"pan",super(NU,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const MU=new De().lookAt({eye:[0,0,1]});function OU(t){let{width:e,height:n,near:r,far:i}=t;return e=e||1,n=n||1,new De().ortho({left:-e/2,right:e/2,bottom:-n/2,top:n/2,near:r,far:i})}class DU extends Mi{constructor(e){const{width:n,height:r,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,c=Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:o,f=Math.min(c,u),h=Math.pow(2,f);if(super({...e,longitude:null,position:a,viewMatrix:MU.clone().scale([h,h*(l?-1:1),h]),projectionMatrix:OU({width:n,height:r,near:i,far:s}),zoom:f}),c!==u){const d=Math.pow(2,c),A=Math.pow(2,u);this.distanceScales={unitsPerMeter:[d/h,A/h,1],metersPerUnit:[h/d,h/A,1]}}}projectFlat(e){let[n,r]=e;const{unitsPerMeter:i}=this.distanceScales;return[n*i[0],r*i[1]]}unprojectFlat(e){let[n,r]=e;const{metersPerUnit:i}=this.distanceScales;return[n*i[0],r*i[1]]}panByPosition(e,n){const r=Fh(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Mf([],i,fT([],r));return{target:Mf([],this.center,s)}}}class gm extends xs{constructor(e){super({...e,type:DU})}get controller(){return this._getControllerProps({type:LU})}}gm.displayName="OrthographicView";class a2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{attributes:n={}}=e;this.typedArrayManager=Uo,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e),Object.seal(this)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(dn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry(e){let{startRow:n,endRow:r}=e;this._rebuildGeometry({startRow:n,endRow:r})}normalizeGeometry(e){return e}updateGeometryAttributes(e,n,r){throw new Error("Not implemented")}getGeometrySize(e){throw new Error("Not implemented")}getGeometryFromBuffer(e){const n=e.value||e;return dn(ArrayBuffer.isView(n)),qT(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=mc(i,n,r);for(const l of o){a.index++;const c=s(l,a);e(c,a.index)}}_rebuildGeometry(e){if(!this.data||!this.getGeometry)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((f,h)=>{f=this.normalizeGeometry(f),c[h]=f,r[h+1]=r[h]+this.getGeometrySize(f)},a,l),i=r[r.length-1];else if(o.buffer instanceof Le){const f=o.stride||this.positionSize*4;r=s.startIndices,i=r[s.length]||o.buffer.byteLength/f}else{const f=o.value||o,h=o.stride/f.BYTES_PER_ELEMENT||this.positionSize;r=s.startIndices,i=r[s.length]||f.length/h}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((f,h)=>{f=c[h]||f,u.vertexStart=r[h],u.indexStart=n[h];const d=h<r.length-1?r[h+1]:i;u.geometrySize=d-r[h],u.geometryIndex=h,this.updateGeometryAttributes(f,u)},a,l),this.vertexCount=n[n.length-1]}}const he={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795},FU=new Uint16Array([0,2,1,0,3,2]),QU=new Float32Array([0,1,0,0,1,0,1,1]);function kU(t,e){if(!e)return UU(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,s=Math.ceil(r/e)+1,o=(i-1)*(s-1)*6,a=new Uint32Array(o),l=new Float32Array(i*s*2),c=new Float64Array(i*s*3);let u=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let A=0;A<s;A++){const p=A/(s-1),g=GU(t,d,p);c[u*3+0]=g[0],c[u*3+1]=g[1],c[u*3+2]=g[2]||0,l[u*2+0]=d,l[u*2+1]=1-p,h>0&&A>0&&(a[f++]=u-s,a[f++]=u-s-1,a[f++]=u-1,a[f++]=u-s,a[f++]=u-1,a[f++]=u),u++}}return{vertexCount:o,positions:c,indices:a,texCoords:l}}function UU(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[n*3+0]=t[n][0],e[n*3+1]=t[n][1],e[n*3+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:FU,texCoords:QU}}function GU(t,e,n){return ps(ps(t[0],t[1],n),ps(t[3],t[2],n),e)}const VU=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,zU=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,jU=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(zU,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),HU={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ue.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class Uh extends En{getShaders(){return super.getShaders({vs:VU,fs:jU,modules:[Vi,zi]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const n=!0;e.add({indices:{size:1,isIndexed:!0,update:r=>r.value=this.state.mesh.indices,noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:r=>r.value=this.state.mesh.positions,noAlloc:n},texCoords:{size:2,update:r=>r.value=this.state.mesh.texCoords,noAlloc:n}})}updateState(e){let{props:n,oldProps:r,changeFlags:i}=e;if(i.extensionsChanged){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}const o=this.getAttributeManager();if(n.bounds!==r.bounds){const a=this.state.mesh,l=this._createMesh();this.state.model.setVertexCount(l.vertexCount);for(const c in l)a&&a[c]!==l[c]&&o.invalidate(c);this.setState({mesh:l,...this._getCoordinateUniforms()})}else n._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){let{info:n}=e;const{image:r}=this.props;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:s}=r;n.index=0;const o=WU(n.color),a=[Math.floor(o[0]*i),Math.floor(o[1]*s)];return n.bitmap={size:{width:i,height:s},uv:o,pixel:a},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let n=e;return Number.isFinite(e[0])&&(n=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),kU(n,this.context.viewport.resolution)}_getModel(e){return e?new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:n,moduleParameters:r}=e,{model:i,coordinateConversion:s,bounds:o,disablePicking:a}=this.state,{image:l,desaturate:c,transparentColor:u,tintColor:f}=this.props;r.pickingActive&&a||l&&i&&i.setUniforms(n).setUniforms({bitmapTexture:l,desaturate:c,transparentColor:u.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:s,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:n,DEFAULT:r}=ue;let{_imageCoordinateSystem:i}=this.props;if(i!==r){const{bounds:s}=this.props;if(!Number.isFinite(s[0]))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const o=this.context.viewport.resolution?e:n;if(i=i===e?e:n,i===e&&o===n)return{coordinateConversion:-1,bounds:s};if(i===n&&o===e){const a=Li([s[0],s[1]]),l=Li([s[2],s[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}Uh.layerName="BitmapLayer";Uh.defaultProps=HU;function WU(t){const[e,n,r]=t,i=(r&240)/256,s=(r&15)/16;return[(e+s)/256,(n+i)/256]}const YU=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,$U=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,XU=1024,KU=4,i1=()=>{},qU={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function JU(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function ZU(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function kl(t){return t&&(t.id||t.url)}function e7(t,e,n,r){const i=e.width,s=e.height,o=qw(e,{width:n,height:r});return y8(e,o,{targetY:0,width:i,height:s}),e.delete(),o}function s1(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=kl(i);t[o]={...i,x:s,y:n}}}function t7(t){let{icons:e,buffer:n,mapping:r={},xOffset:i=0,yOffset:s=0,rowHeight:o=0,canvasWidth:a}=t,l=[];for(let c=0;c<e.length;c++){const u=e[c],f=kl(u);if(!r[f]){const{height:h,width:d}=u;i+d+n>a&&(s1(r,l,s),i=0,s=o+s+n,o=0,l=[]),l.push({icon:u,xOffset:i}),i=i+d+n,o=Math.max(o,h)}}return l.length>0&&s1(r,l,s),{mapping:r,rowHeight:o,xOffset:i,yOffset:s,canvasWidth:a,canvasHeight:JU(o+s+n)}}function n7(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=mc(t);for(const o of i){s.index++;const a=e(o,s),l=kl(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[l]&&(!n[l]||a.url!==n[l].url)&&(r[l]={...a,source:o,sourceIndex:s.index})}return r}class r7{constructor(e,n){let{onUpdate:r=i1,onError:i=i1}=n;this.gl=e,this.onUpdate=r,this.onError=i,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=KU,this._canvasWidth=XU,this._canvasHeight=0,this._canvas=null}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?kl(e):e;return this._mapping[n]||{}}setProps(e){let{loadOptions:n,autoPacking:r,iconAtlas:i,iconMapping:s,data:o,getIcon:a}=e;n&&(this._loadOptions=n),r!==void 0&&(this._autoPacking=r),a&&(this._getIcon=a),s&&(this._mapping=s),i&&this._updateIconAtlas(i),this._autoPacking&&(o||a)&&typeof document<"u"&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(o))}get isLoaded(){return this._pendingCount===0}_updateIconAtlas(e){var n;(n=this._texture)===null||n===void 0||n.delete(),this._texture=null,this._externalTexture=e,this.onUpdate()}_updateAutoPacking(e){const n=Object.values(n7(e,this._getIcon,this._mapping)||{});if(n.length>0){const{mapping:r,xOffset:i,yOffset:s,rowHeight:o,canvasHeight:a}=t7({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=r,this._xOffset=i,this._yOffset=s,this._canvasHeight=a,this._texture||(this._texture=new gn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:qU})),this._texture.height!==this._canvasHeight&&(this._texture=e7(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(n)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const r of e)this._pendingCount++,Pf(r.url,Mw,this._loadOptions).then(i=>{const s=kl(r),{x:o,y:a,width:l,height:c}=this._mapping[s],u=ZU(n,i,l,c);this._texture.setSubImageData({data:u,x:o,y:a,width:l,height:c}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const l2=[0,0,0,255],i7={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:l2},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class Gh extends En{getShaders(){return super.getShaders({vs:YU,fs:$U,modules:[Vi,zi]})}initializeState(){this.state={iconManager:new r7(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:l2},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){let{oldProps:n,props:r,changeFlags:i}=e;super.updateState({props:r,oldProps:n,changeFlags:i});const s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c}=r,{iconManager:u}=this.state;u.setProps({loadOptions:r.loadOptions});let f=!1;if(o||this.internalState.isAsyncPropLoading("iconAtlas")?(n.iconAtlas!==r.iconAtlas&&u.setProps({iconAtlas:o,autoPacking:!1}),n.iconMapping!==r.iconMapping&&(u.setProps({iconMapping:a}),f=!0)):u.setProps({autoPacking:!0}),(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&u.setProps({data:l,getIcon:c}),f&&(s.invalidate("instanceOffsets"),s.invalidate("instanceIconFrames"),s.invalidate("instanceColorModes")),i.extensionsChanged){var d;const{gl:A}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(A),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(){super.finalizeState(),this.state.iconManager.finalize()}draw(e){let{uniforms:n}=e;const{sizeScale:r,sizeMinPixels:i,sizeMaxPixels:s,sizeUnits:o,billboard:a,alphaCutoff:l}=this.props,{iconManager:c}=this.state,u=c.getTexture();u&&this.state.model.setUniforms(n).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Ni[o],sizeScale:r,sizeMinPixels:i,sizeMaxPixels:s,billboard:a,alphaCutoff:l}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){const{onIconError:n}=this.getCurrentLayer().props;n?n(e):me.error(e.error)()}getInstanceOffset(e){const n=this.state.iconManager.getIconMapping(e);return[n.width/2-n.anchorX||0,n.height/2-n.anchorY||0]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const n=this.state.iconManager.getIconMapping(e);return[n.x||0,n.y||0,n.width||0,n.height||0]}}Gh.layerName="IconLayer";Gh.defaultProps=i7;const s7=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      gl_Position = vec4(0.);
      return;
    }
  }
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,o7=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,a7=[0,0,0,255],l7={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:a7},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class gl extends En{getShaders(){return super.getShaders({vs:s7,fs:o7,modules:[Vi,zi]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(e){let{props:n,oldProps:r,changeFlags:i}=e;if(super.updateState({props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var s;const{gl:o}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:n}=e;const{widthUnits:r,widthScale:i,widthMinPixels:s,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(n).setUniforms({widthUnits:Ni[r],widthScale:i,widthMinPixels:s,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){const n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}gl.layerName="LineLayer";gl.defaultProps=l7;const c7=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,u7=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,o1=[0,0,0,255],f7={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:o1},getLineColor:{type:"accessor",value:o1},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class pm extends En{getShaders(){return super.getShaders({vs:c7,fs:u7,modules:[Vi,zi]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){let{props:n,oldProps:r,changeFlags:i}=e;if(super.updateState({props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var s;const{gl:o}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:n}=e;const{radiusUnits:r,radiusScale:i,radiusMinPixels:s,radiusMaxPixels:o,stroked:a,filled:l,billboard:c,antialiasing:u,lineWidthUnits:f,lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:A}=this.props;this.state.model.setUniforms(n).setUniforms({stroked:a?1:0,filled:l,billboard:c,antialiasing:u,radiusUnits:Ni[r],radiusScale:i,radiusMinPixels:s,radiusMaxPixels:o,lineWidthUnits:Ni[f],lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:A}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}pm.layerName="ScatterplotLayer";pm.defaultProps=f7;const c2={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function u2(t,e,n={}){return h7(t,n)!==e?(A7(t,n),!0):!1}function h7(t,e={}){return Math.sign(d7(t,e))}function d7(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function A7(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const f=t[l+u];t[l+u]=t[c+u],t[c+u]=f}}}function Hn(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function cp(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Ul(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function up(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function qu(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function f2(t,e={}){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e,l=(a-o)/n;let c=[];const u=[c],f=Ul(t,0,n,o);let h,d;const A=d2(f,i,s,[]),p=[];Hn(c,f);for(let g=1;g<l;g++){for(h=Ul(t,g,n,o,h),d=qu(h,A);d;){up(f,h,d,A,p);const m=qu(p,A);m&&(up(f,p,m,A,p),d=m),Hn(c,p),cp(f,p),p7(A,i,d),r&&c.length>n&&(c=[],u.push(c),Hn(c,f)),d=qu(h,A)}Hn(c,h),cp(f,h)}return r?u:u[0]}const a1=0,g7=1;function ou(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function h2(t,e,n={}){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n,a=[],l=[{pos:t,types:o&&new Array(t.length/r).fill(g7),holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();m7(f,r,d[0]||f.length,c),u=d2(c[0],i,s,u);const A=qu(c[1],u);if(A){let p=l1(f,h,r,0,d[0]||f.length,u,A);const g={pos:p[0].pos,types:p[0].types,holes:[]},m={pos:p[1].pos,types:p[1].types,holes:[]};l.push(g,m);for(let E=0;E<d.length;E++)p=l1(f,h,r,d[E],d[E+1]||f.length,u,A),p[0]&&(g.holes.push(g.pos.length),g.pos=ou(g.pos,p[0].pos),o&&(g.types=ou(g.types,p[0].types))),p[1]&&(m.holes.push(m.pos.length),m.pos=ou(m.pos,p[1].pos),o&&(m.types=ou(m.types,p[1].types)))}else{const p={positions:f};o&&(p.edgeTypes=h),d.length&&(p.holeIndices=d),a.push(p)}}return a}function l1(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],f=[],h=[];let d,A,p;const g=Ul(t,a-1,n,r);let m=Math.sign(o&8?g[1]-s[3]:g[0]-s[2]),E=e&&e[a-1],v=0,y=0;for(let C=0;C<a;C++)d=Ul(t,C,n,r,d),A=Math.sign(o&8?d[1]-s[3]:d[0]-s[2]),p=e&&e[r/n+C],A&&m&&m!==A&&(up(g,d,o,s,h),Hn(l,h)&&u.push(E),Hn(c,h)&&f.push(E)),A<=0?(Hn(l,d)&&u.push(p),v-=A):u.length&&(u[u.length-1]=a1),A>=0?(Hn(c,d)&&f.push(p),y+=A):f.length&&(f[f.length-1]=a1),cp(g,d),m=A,E=p;return[v?{pos:l,types:e&&u}:null,y?{pos:c,types:e&&f}:null]}function d2(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function p7(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function m7(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const E7=85.051129;function v7(t,e={}){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e,o=t.slice(r,i);A2(o,n,0,i-r);const a=f2(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)g2(l,n);return a}function y7(t,e,n={}){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n;e=e||[];const o=[],a=[];let l=0,c=0;for(let f=0;f<=e.length;f++){const h=e[f]||t.length,d=c,A=_7(t,r,l,h);for(let p=A;p<h;p++)o[c++]=t[p];for(let p=l;p<A;p++)o[c++]=t[p];A2(o,r,d,c),x7(o,r,d,c,n.maxLatitude),l=h,a[f]=c}a.pop();const u=h2(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const f of u)g2(f.positions,r);return u}function _7(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function x7(t,e,n,r,i=E7){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=Ul(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,Hn(t,a),a[1]=Math.sign(a[1])*i,Hn(t,a),a[0]=s,Hn(t,a)}}function A2(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function g2(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function I7(t,e,n,r){let i=t;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}return n?f2(i,{size:e,gridResolution:n}):r?v7(i,{size:e}):i}const C7=1,w7=2,mA=4;class T7 extends a2{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):()=>null}normalizeGeometry(e){return this.normalize?I7(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}get(e){return this.attributes[e]}getGeometrySize(e){if(Array.isArray(e[0])){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&Array.isArray(e[0]))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const{segmentTypes:r}=this.attributes,i=this.isClosed(e),{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=mA,r[s+o-2]=mA):(r[s]+=C7,r[s+o-2]+=w7),r[s+o-1]=mA}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}const S7=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,b7=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,p2=[0,0,0,255],R7={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:p2},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},EA={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Vh extends En{getShaders(){return super.getShaders({vs:S7,fs:b7,modules:[Vi,zi]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:EA,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:EA,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:EA,defaultValue:p2},instancePickingColors:{size:3,type:5121,accessor:(r,i)=>{let{index:s,target:o}=i;return this.encodePickingColor(r&&r.__source?r.__source.index:s,o)}}}),this.setState({pathTesselator:new T7({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&me.removed("getDashArray","PathStyleExtension")()}updateState(e){let{oldProps:n,props:r,changeFlags:i}=e;super.updateState({props:r,oldProps:n,changeFlags:i});const s=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){const{pathTesselator:l}=this.state,c=r.data.attributes||{};l.updateGeometry({data:r.data,geometryBuffer:c.getPath,buffers:c,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:l.instanceCount,startIndices:l.vertexStarts}),i.dataChanged||s.invalidateAll()}if(i.extensionsChanged){var a;const{gl:l}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(l),s.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw(e){let{uniforms:n}=e;const{jointRounded:r,capRounded:i,billboard:s,miterLimit:o,widthUnits:a,widthScale:l,widthMinPixels:c,widthMaxPixels:u}=this.props;this.state.model.setUniforms(n).setUniforms({jointType:Number(r),capType:Number(i),billboard:s,widthUnits:Ni[a],widthScale:l,miterLimit:o,widthMinPixels:c,widthMaxPixels:u}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}Vh.layerName="PathLayer";Vh.defaultProps=R7;var mm={exports:{}};mm.exports=zh;mm.exports.default=zh;function zh(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=m2(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,f,h,d;if(r&&(s=M7(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var A=n;A<i;A+=n)f=t[A],h=t[A+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?1/d:0}return Gl(s,o,n,a,l,d),o}function m2(t,e,n,r,i){var s,o;if(i===dp(t,e,n,r)>0)for(s=e;s<n;s+=r)o=c1(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=c1(s,t[s],t[s+1],o);return o&&jh(o,o.next)&&(zl(o),o=o.next),o}function Oi(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(jh(n,n.next)||et(n.prev,n,n.next)===0)){if(zl(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Gl(t,e,n,r,i,s,o){if(!!t){!o&&s&&k7(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?P7(t,r,i,s):B7(t)){e.push(l.i/n),e.push(t.i/n),e.push(c.i/n),zl(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=N7(Oi(t),e,n),Gl(t,e,n,r,i,s,2)):o===2&&L7(t,e,n,r,i,s):Gl(Oi(t),e,n,r,i,s,1);break}}}}function B7(t){var e=t.prev,n=t,r=t.next;if(et(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(uo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&et(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function P7(t,e,n,r){var i=t.prev,s=t,o=t.next;if(et(i,s,o)>=0)return!1;for(var a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,c=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,u=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,f=fp(a,l,e,n,r),h=fp(c,u,e,n,r),d=t.prevZ,A=t.nextZ;d&&d.z>=f&&A&&A.z<=h;){if(d!==t.prev&&d!==t.next&&uo(i.x,i.y,s.x,s.y,o.x,o.y,d.x,d.y)&&et(d.prev,d,d.next)>=0||(d=d.prevZ,A!==t.prev&&A!==t.next&&uo(i.x,i.y,s.x,s.y,o.x,o.y,A.x,A.y)&&et(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&uo(i.x,i.y,s.x,s.y,o.x,o.y,d.x,d.y)&&et(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;A&&A.z<=h;){if(A!==t.prev&&A!==t.next&&uo(i.x,i.y,s.x,s.y,o.x,o.y,A.x,A.y)&&et(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function N7(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!jh(i,s)&&E2(i,r,r.next,s)&&Vl(i,s)&&Vl(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),zl(r),zl(r.next),r=t=s),r=r.next}while(r!==t);return Oi(r)}function L7(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&V7(o,a)){var l=v2(o,a);o=Oi(o,o.next),l=Oi(l,l.next),Gl(o,e,n,r,i,s),Gl(l,e,n,r,i,s);return}a=a.next}o=o.next}while(o!==t)}function M7(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=m2(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(G7(c));for(i.sort(O7),s=0;s<i.length;s++)n=D7(i[s],n),n=Oi(n,n.next);return n}function O7(t,e){return t.x-e.x}function D7(t,e){var n=F7(t,e);if(!n)return e;var r=v2(n,t),i=Oi(n,n.next);return Oi(r,r.next),e===n?i:e}function F7(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===s)return o;var l=o,c=o.x,u=o.y,f=1/0,h;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&uo(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),Vl(n,t)&&(h<f||h===f&&(n.x>o.x||n.x===o.x&&Q7(o,n)))&&(o=n,f=h)),n=n.next;while(n!==l);return o}function Q7(t,e){return et(t.prev,t,e.prev)<0&&et(e.next,t,t.next)<0}function k7(t,e,n,r){var i=t;do i.z===null&&(i.z=fp(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,U7(i)}function U7(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function fp(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function G7(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function uo(t,e,n,r,i,s,o,a){return(i-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function V7(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!z7(t,e)&&(Vl(t,e)&&Vl(e,t)&&j7(t,e)&&(et(t.prev,t,e.prev)||et(t,e.prev,e))||jh(t,e)&&et(t.prev,t,t.next)>0&&et(e.prev,e,e.next)>0)}function et(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function jh(t,e){return t.x===e.x&&t.y===e.y}function E2(t,e,n,r){var i=lu(et(t,e,n)),s=lu(et(t,e,r)),o=lu(et(n,r,t)),a=lu(et(n,r,e));return!!(i!==s&&o!==a||i===0&&au(t,n,e)||s===0&&au(t,r,e)||o===0&&au(n,t,r)||a===0&&au(n,e,r))}function au(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function lu(t){return t>0?1:t<0?-1:0}function z7(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E2(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Vl(t,e){return et(t.prev,t,t.next)<0?et(t,e,t.next)>=0&&et(t,t.prev,e)>=0:et(t,e,t.prev)<0||et(t,t.next,e)<0}function j7(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function v2(t,e){var n=new hp(t.i,t.x,t.y),r=new hp(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function c1(t,e,n,r){var i=new hp(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function zl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function hp(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}zh.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(dp(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(dp(t,c,u,n))}var f=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,d=r[a+1]*n,A=r[a+2]*n;f+=Math.abs((t[h]-t[A])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[A+1]-t[h+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function dp(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}zh.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};const cu=c2.CLOCKWISE,u1=c2.COUNTER_CLOCKWISE,ui={isClosed:!0};function H7(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function W7(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Y7(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function $7(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function f1(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!Y7(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return ui.start=e,ui.end=s,ui.size=r,u2(t,i,ui),s}function h1(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!$7(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return ui.start=e,ui.end=l,ui.size=r,u2(t,o,ui),l}function y2(t,e){H7(t);const n=[],r=[];if(t.positions){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=h1(n,o,i,e,s[a-1],s[a],a===0?cu:u1),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(Number.isFinite(t[0]))return h1(n,0,t,e,0,n.length,cu),n;if(!W7(t)){let i=0;for(const[s,o]of t.entries())i=f1(n,i,o,e,s===0?cu:u1),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return f1(n,0,t,e,cu),n}function X7(t,e,n){let r=null;t.holeIndices&&(r=t.holeIndices.map(s=>s/e));let i=t.positions||t;if(n){const s=i.length;i=i.slice();const o=[];for(let a=0;a<s;a+=e){o[0]=i[a],o[1]=i[a+1];const l=n(o);i[a]=l[0],i[a+1]=l[1]}}return mm.exports(i,r,e)}class K7 extends a2{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;n&&(this.vertexCount=(n.value||n).length)}normalizeGeometry(e){if(this.normalize){if(e=y2(e,this.positionSize),this.opts.resolution)return h2(e.positions||e,e.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return y7(e.positions||e,e.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return e}getGeometrySize(e){if(Array.isArray(e)&&!Number.isFinite(e[0])){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return(e.positions||e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):()=>null}updateGeometryAttributes(e,n){if(Array.isArray(e)&&!Number.isFinite(e[0]))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,n){let{geometryIndex:r,vertexStart:i,indexStart:s}=n;const{attributes:o,indexStarts:a,typedArrayManager:l}=this;let c=o.indices;if(!c)return;let u=s;const f=X7(e,this.positionSize,this.opts.preproject);c=l.allocate(c,s+f.length,{copy:!0});for(let h=0;h<f.length;h++)c[u++]=f[h]+i;a[r+1]=s+f.length,o.indices=c}_updatePositions(e,n){let{vertexStart:r,geometrySize:i}=n;const{attributes:{positions:s},positionSize:o}=this;if(!s)return;const a=e.positions||e;for(let l=r,c=0;c<i;l++,c++){const u=a[c*o],f=a[c*o+1],h=o>2?a[c*o+2]:0;s[l*3]=u,s[l*3+1]=f,s[l*3+2]=h}}_updateVertexValid(e,n){let{vertexStart:r,geometrySize:i}=n;const{attributes:{vertexValid:s},positionSize:o}=this,a=e&&e.holeIndices;if(e&&e.edgeTypes?s.set(e.edgeTypes,r):s.fill(1,r,r+i),a)for(let l=0;l<a.length;l++)s[r+a[l]/o-1]=0;s[r+i-1]=0}}const _2=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;

#ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
    geometry.normal = normal;
  }

  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,q7=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(_2,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),J7=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(_2,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Z7=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,jf=[0,0,0,255],e9={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:jf},getLineColor:{type:"accessor",value:jf},material:!0},uu={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class vc extends En{getShaders(e){return super.getShaders({vs:e==="top"?q7:J7,fs:Z7,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Vi,hF,zi]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;n.isGeospatial&&r===ue.DEFAULT&&(r=ue.LNGLAT),this.setState({numInstances:0,polygonTesselator:new K7({preproject:r===ue.LNGLAT&&n.projectFlat,fp64:this.use64bitPositions(),IndexType:!e||tm(e,Oe.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),s=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:uu,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:uu,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:uu,accessor:"getFillColor",defaultValue:jf,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:uu,accessor:"getLineColor",defaultValue:jf,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(o,a)=>{let{index:l,target:c}=a;return this.encodePickingColor(o&&o.__source?o.__source.index:l,c)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw(e){let{uniforms:n}=e;const{extruded:r,filled:i,wireframe:s,elevationScale:o}=this.props,{topModel:a,sideModel:l,polygonTesselator:c}=this.state,u={...n,extruded:Boolean(r),elevationScale:o};l&&(l.setInstanceCount(c.instanceCount-1),l.setUniforms(u),s&&(l.setDrawMode(3),l.setUniforms({isWireframe:!0}).draw()),i&&(l.setDrawMode(6),l.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(c.vertexCount),a.setUniforms(u).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry(e){let{props:n,oldProps:r,changeFlags:i}=e;if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=n.data.attributes||{};o.updateGeometry({data:n.data,normalize:n._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:n.getPolygon,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new Rn(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Rn(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Er({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}vc.layerName="SolidPolygonLayer";vc.defaultProps=e9;function x2(t){let{data:e,getIndex:n,dataRange:r,replace:i}=t;const{startRow:s=0,endRow:o=1/0}=r,a=e.length;let l=a,c=a;for(let d=0;d<a;d++){const A=n(e[d]);if(l>d&&A>=s&&(l=d),A>=o){c=d;break}}let u=l;const f=c-l!==i.length,h=f&&e.slice(c);for(let d=0;d<i.length;d++)e[u++]=i[d];if(f){for(let d=0;d<h.length;d++)e[u++]=h[d];e.length=u}return{startRow:l,endRow:l+i.length}}const I2=[0,0,0,255],t9=[0,0,0,255],n9={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:t9},getLineColor:{type:"accessor",value:I2},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class Hf extends Nn{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&me.removed("getLineDashArray","PathStyleExtension")()}updateState(e){let{oldProps:n,props:r,changeFlags:i}=e;const s=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon);if(s&&Array.isArray(i.dataChanged)){const o=this.state.paths.slice(),a=i.dataChanged.map(l=>x2({data:o,getIndex:c=>c.__source.index,dataRange:l,replace:this._getPaths(l)}));this.setState({paths:o,pathsDiff:a})}else s&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,o=[],a=i==="XY"?2:3,{startRow:l,endRow:c}=e,{iterable:u,objectInfo:f}=mc(n,l,c);for(const h of u){f.index++;let d=r(h,f);s&&(d=y2(d,a));const{holeIndices:A}=d,p=d.positions||d;if(A)for(let g=0;g<=A.length;g++){const m=p.slice(A[g-1]||0,A[g]||p.length);o.push(this.getSubLayerRow({path:m},h,f.index))}else o.push(this.getSubLayerRow({path:p},h,f.index))}return o}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:o,_normalize:a,_windingOrder:l,elevationScale:c,transitions:u,positionFormat:f}=this.props,{lineWidthUnits:h,lineWidthScale:d,lineWidthMinPixels:A,lineWidthMaxPixels:p,lineJointRounded:g,lineMiterLimit:m,lineDashJustified:E}=this.props,{getFillColor:v,getLineColor:y,getLineWidth:C,getLineDashArray:x,getElevation:B,getPolygon:R,updateTriggers:b,material:N}=this.props,{paths:H,pathsDiff:D}=this.state,G=this.getSubLayerClass("fill",vc),W=this.getSubLayerClass("stroke",Vh),X=this.shouldRenderSubLayer("fill",H)&&new G({_dataDiff:n,extruded:s,elevationScale:c,filled:i,wireframe:o,_normalize:a,_windingOrder:l,getElevation:B,getFillColor:v,getLineColor:s&&o?y:I2,material:N,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:b.getPolygon,getElevation:b.getElevation,getFillColor:b.getFillColor,lineColors:s&&o,getLineColor:b.getLineColor}}),{data:e,positionFormat:f,getPolygon:R}),oe=!s&&r&&this.shouldRenderSubLayer("stroke",H)&&new W({_dataDiff:D&&(()=>D),widthUnits:h,widthScale:d,widthMinPixels:A,widthMaxPixels:p,jointRounded:g,miterLimit:m,dashJustified:E,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(y),getWidth:this.getSubLayerAccessor(C),getDashArray:this.getSubLayerAccessor(x)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:b.getLineWidth,getColor:b.getLineColor,getDashArray:b.getLineDashArray}}),{data:H,positionFormat:f,getPath:ge=>ge.path});return[!s&&X,oe,s&&X]}}Hf.layerName="PolygonLayer";Hf.defaultProps=n9;function r9(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?i9(t,r,n):null}function i9(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function s9(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const s=[];for(let o=0;o<i.length;o++)e(i[o],s),n[r][o*3+0]=s[0],n[r][o*3+1]=s[1],n[r][o*3+2]=s[2]}return n}const o9=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,d1=192/256,A1=[],a9={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class Em extends Gh{getShaders(){return{...super.getShaders(),fs:o9}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,r)=>{let{index:i,target:s}=r;return this.encodePickingColor(i,s)}}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&me.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:d1,outlineBuffer:i?Math.max(r,d1*(1-i)):-1,gamma:r,sdf:Boolean(n),outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).map(n=>super.getInstanceOffset(n)):A1}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).map(n=>super.getInstanceIconFrame(n)):A1}}Em.layerName="MultiIconLayer";Em.defaultProps=a9;var vm={exports:{}};vm.exports=yc;vm.exports.default=yc;var So=1e20;function yc(t,e,n,r,i,s){this.fontSize=t||24,this.buffer=e===void 0?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=s||"normal",this.radius=n||8;var o=this.size=this.fontSize+this.buffer*2,a=o+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function l9(t,e,n,r,i,s,o){s.fill(So,0,e*n),o.fill(0,0,e*n);for(var a=(e-r)/2,l=0;l<i;l++)for(var c=0;c<r;c++){var u=(l+a)*e+c+a,f=t.data[4*(l*r+c)+3]/255;if(f===1)s[u]=0,o[u]=So;else if(f===0)s[u]=So,o[u]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);s[u]=h*h,o[u]=d*d}}}function c9(t,e,n,r,i,s,o){for(var a=0;a<e*n;a++){var l=Math.sqrt(r[a])-Math.sqrt(i[a]);t[a]=Math.round(255-255*(l/s+o))}}yc.prototype._draw=function(t,e){var n=this.ctx.measureText(t),r=n.width,i=2*this.buffer,s,o,a,l,c,u,f,h;e&&this.useMetrics?(c=Math.floor(n.actualBoundingBoxAscent),h=this.buffer+Math.ceil(n.actualBoundingBoxAscent),u=this.buffer,f=this.buffer,o=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),l=Math.min(this.size-u,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),s=o+i,a=l+i,this.ctx.textBaseline="alphabetic"):(s=o=this.size,a=l=this.size,c=19*this.fontSize/24,u=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;o&&l&&(this.ctx.clearRect(f,u,o,l),this.ctx.fillText(t,this.buffer,h),d=this.ctx.getImageData(f,u,o,l));var A=new Uint8ClampedArray(s*a);return l9(d,s,a,o,l,this.gridOuter,this.gridInner),g1(this.gridOuter,s,a,this.f,this.v,this.z),g1(this.gridInner,s,a,this.f,this.v,this.z),c9(A,s,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:A,metrics:{width:o,height:l,sdfWidth:s,sdfHeight:a,top:c,left:0,advance:r}}};yc.prototype.draw=function(t){return this._draw(t,!1).data};yc.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};function g1(t,e,n,r,i,s){for(var o=0;o<e;o++)p1(t,o,e,n,r,i,s);for(var a=0;a<n;a++)p1(t,a*e,1,e,r,i,s)}function p1(t,e,n,r,i,s,o){var a,l,c,u;for(s[0]=0,o[0]=-So,o[1]=So,a=0;a<r;a++)i[a]=t[e+a*n];for(a=1,l=0,c=0;a<r;a++){do u=s[l],c=(i[a]-i[u]+a*a-u*u)/(a-u)/2;while(c<=o[l]&&--l>-1);l++,s[l]=a,o[l]=c,o[l+1]=So}for(a=0,l=0;a<r;a++){for(;o[l+1]<a;)l++;u=s[l],t[e+a*n]=i[u]+(a-u)*(a-u)}}const u9=32,f9=[];function h9(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function d9(t){let{characterSet:e,getFontWidth:n,fontHeight:r,buffer:i,maxCanvasWidth:s,mapping:o={},xOffset:a=0,yOffset:l=0}=t,c=0,u=a,f=0;for(const d of e)if(!o[d]){const A=n(d,f++);u+A+i*2>s&&(u=0,c++),o[d]={x:u+i,y:l+c*(r+i*2)+i,width:A,height:r},u+=A+i*2}const h=r+i*2;return{mapping:o,xOffset:u,yOffset:l+c*h,canvasHeight:h9(l+(c+1)*h)}}function C2(t,e,n,r){let i=0;for(let s=e;s<n;s++){const o=t[s];let a=null;const l=r&&r[o];l&&(a=l.width),i+=a}return i}function w2(t,e,n,r,i,s){let o=e,a=0;for(let l=e;l<n;l++){const c=C2(t,l,l+1,i);a+c>r&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function A9(t,e,n,r,i,s){let o=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if((t[u]===" "||t[u+1]===" "||u+1===n)&&(l=u+1),l>a){let f=C2(t,a,l,i);c+f>r&&(o<a&&(s.push(a),o=a,c=0),f>r&&(f=w2(t,a,l,r,i,s),o=s[s.length-1])),a=l,c+=f}return c}function g9(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;s===void 0&&(s=t.length);const o=[];return e==="break-all"?w2(t,i,s,n,r,o):A9(t,i,s,n,r,o),o}function p9(t,e,n,r,i,s){let o=0,a=0;for(let l=e;l<n;l++){const c=t[l],u=r[c];u?(a||(a=u.height),i[l]=o+u.width/2,o+=u.width):(me.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),i[l]=o,o+=u9)}s[0]=o,s[1]=a}function m1(t,e,n,r,i){t=Array.from(t);const s=t.length,o=new Array(s),a=new Array(s),l=new Array(s),c=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,u=[0,0],f=[];let h=0,d=0,A=0;for(let p=0;p<=s;p++){const g=t[p];if((g===`
`||p===s)&&(A=p),A>d){const m=c?g9(t,n,r,i,d,A):f9;for(let E=0;E<=m.length;E++){const v=E===0?d:m[E-1],y=E<m.length?m[E]:A;p9(t,v,y,i,o,f);for(let C=v;C<y;C++)a[C]=h+f[1]/2,l[C]=f[0];h=h+f[1]*e,u[0]=Math.max(u[0],f[0])}d=A}g===`
`&&(o[d]=0,a[d]=0,l[d]=0,d++)}return u[1]=h,{x:o,y:a,rowWidth:l,size:u}}function m9(t){let{value:e,length:n,stride:r,offset:i,startIndices:s,characterSet:o}=t;const a=e.BYTES_PER_ELEMENT,l=r?r/a:1,c=i?i/a:0,u=s[n]||Math.ceil((e.length-c)/l),f=o&&new Set,h=new Array(n);let d=e;if(l>1||c>0){d=new e.constructor(u);for(let A=0;A<u;A++)d[A]=e[A*l+c]}for(let A=0;A<n;A++){const p=s[A],g=s[A+1]||u,m=d.subarray(p,g);h[A]=String.fromCodePoint.apply(null,m),f&&m.forEach(f.add,f)}if(f)for(const A of f)o.add(String.fromCodePoint(A));return{texts:h,characterCount:u}}class T2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;this.limit=e,this.clear()}clear(){this._cache={},this._order=[]}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}_deleteCache(e){delete this._cache[e]}_deleteOrder(e){const n=this._order.findIndex(r=>r===e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function E9(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const S2=E9(),b2="Monaco, monospace",R2="normal",B2=64,P2=4,N2=.25,L2=12,E1=1024,v9=.9,v1=1.2,M2=3;let Wf=new T2(M2);const y9=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function _9(t,e){const n=Wf.get(t);if(!n)return e;const r=[],i=n.mapping;let s=Object.keys(i);s=new Set(s);let o=e;return o instanceof Array&&(o=new Set(o)),o.forEach(a=>{s.has(a)||r.push(a)}),r}function x9(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function y1(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}function I9(t){me.assert(Number.isFinite(t)&&t>=M2,"Invalid cache limit"),Wf=new T2(t)}class C9{constructor(){this.props={fontFamily:b2,fontWeight:R2,characterSet:S2,fontSize:B2,buffer:P2,sdf:!1,cutoff:N2,radius:L2},this._key=null,this._atlas=null}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return v1}setProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};y9.forEach(o=>{o in e&&(this.props[o]=e[o])});const n=this._key;this._key=this._getKey();const r=_9(this._key,this.props.characterSet),i=Wf.get(this._key);if(i&&r.length===0){this._key!==n&&(this._atlas=i);return}const s=this._generateFontAtlas(this._key,r,i);this._atlas=s,Wf.set(this._key,s)}_generateFontAtlas(e,n,r){const{fontFamily:i,fontWeight:s,fontSize:o,buffer:a,sdf:l,radius:c,cutoff:u}=this.props;let f=r&&r.data;f||(f=document.createElement("canvas"),f.width=E1);const h=f.getContext("2d");y1(h,i,o,s);const{mapping:d,canvasHeight:A,xOffset:p,yOffset:g}=d9({getFontWidth:m=>h.measureText(m).width,fontHeight:o*v1,buffer:a,characterSet:n,maxCanvasWidth:E1,...r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}});if(f.height!==A){const m=h.getImageData(0,0,f.width,f.height);f.height=A,h.putImageData(m,0,0)}if(y1(h,i,o,s),l){const m=new vm.exports(o,a,c,u,i,s),E=h.getImageData(0,0,m.size,m.size);for(const v of n)x9(m.draw(v),E),h.putImageData(E,d[v].x-a,d[v].y+a)}else for(const m of n)h.fillText(m,d[m].x,d[m].y+o*v9);return{xOffset:p,yOffset:g,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const w9=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,T9=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,S9={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class ym extends En{getShaders(){return super.getShaders({vs:w9,fs:T9,modules:[Vi,zi]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){let{props:n,oldProps:r,changeFlags:i}=e;if(super.updateState({props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var s;const{gl:o}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:n}=e;const{billboard:r,sizeScale:i,sizeUnits:s,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:l}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(n).setUniforms({billboard:r,stroked:Boolean(l),padding:c,sizeUnits:Ni[s],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}ym.layerName="TextBackgroundLayer";ym.defaultProps=S9;const _1={fontSize:B2,buffer:P2,sdf:!1,radius:L2,cutoff:N2,smoothing:.1},x1={start:1,middle:0,end:-1},I1={top:1,center:0,bottom:-1},vA=[0,0,0,255],b9=1,R9=["fontSize","buffer","sdf","radius","cutoff"],B9={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:vA},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:S2},fontFamily:b2,fontWeight:R2,lineHeight:b9,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:vA},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:vA},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class ea extends Nn{initializeState(){this.state={styleVersion:0,fontAtlasManager:new C9}}updateState(e){let{props:n,oldProps:r,changeFlags:i}=e;const s=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText),o=this.state.characterSet;s&&this._updateText();const a=o!==this.state.characterSet||this._fontChanged(r,n);a&&this._updateFontAtlas(r,n),(a||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(e){let{info:n}=e;return n.object=n.index>=0?this.props.data[n.index]:null,n}_updateFontAtlas(e,n){const{fontSettings:r,fontFamily:i,fontWeight:s}=n,{fontAtlasManager:o,characterSet:a}=this.state;o.setProps({..._1,...r,characterSet:a,fontFamily:i,fontWeight:s})}_fontChanged(e,n){if(e.fontFamily!==n.fontFamily||e.fontWeight!==n.fontWeight)return!0;if(e.fontSettings===n.fontSettings)return!1;const r=e.fontSettings||{},i=n.fontSettings||{};return R9.some(s=>r[s]!==i[s])}_updateText(){const{data:e,characterSet:n}=this.props,r=e.attributes&&e.attributes.getText;let{getText:i}=this.props,{startIndices:s}=e,o;const a=n==="auto"&&new Set;if(r&&s){const{texts:l,characterCount:c}=m9({...ArrayBuffer.isView(r)?{value:r}:r,length:e.length,startIndices:s,characterSet:a});o=c,i=(u,f)=>{let{index:h}=f;return l[h]}}else{const{iterable:l,objectInfo:c}=mc(e);s=[0],o=0;for(const u of l){c.index++;const f=Array.from(i(u,c)||"");a&&f.forEach(a.add,a),o+=f.length,s.push(o)}}this.setState({getText:i,startIndices:s,numInstances:o,characterSet:a||n})}getBoundingRect(e,n){const r=this.state.fontAtlasManager.mapping,{getText:i}=this.state,{wordBreak:s,maxWidth:o,lineHeight:a,getTextAnchor:l,getAlignmentBaseline:c}=this.props,u=i(e,n)||"",{size:[f,h]}=m1(u,a,s,o,r),d=x1[typeof l=="function"?l(e,n):l],A=I1[typeof c=="function"?c(e,n):c];return[(d-1)*f/2,(A-1)*h/2,f,h]}getIconOffsets(e,n){const r=this.state.fontAtlasManager.mapping,{getText:i}=this.state,{wordBreak:s,maxWidth:o,lineHeight:a,getTextAnchor:l,getAlignmentBaseline:c}=this.props,u=i(e,n)||"",{x:f,y:h,rowWidth:d,size:[A,p]}=m1(u,a,s,o,r),g=x1[typeof l=="function"?l(e,n):l],m=I1[typeof c=="function"?c(e,n):c],E=f.length,v=new Array(E*2);let y=0;for(let C=0;C<E;C++){const x=(1-g)*(A-d[C])/2;v[y++]=(g-1)*A/2+x+f[C],v[y++]=(m-1)*p/2+h[C]}return v}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:s,mapping:o},styleVersion:a}=this.state,{data:l,_dataDiff:c,getPosition:u,getColor:f,getSize:h,getAngle:d,getPixelOffset:A,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:E,background:v,billboard:y,fontSettings:C,outlineWidth:x,outlineColor:B,sizeScale:R,sizeUnits:b,sizeMinPixels:N,sizeMaxPixels:H,transitions:D,updateTriggers:G}=this.props,W=this.getSubLayerClass("characters",Em),X=this.getSubLayerClass("background",ym);return[v&&new X({getFillColor:p,getLineColor:g,getLineWidth:m,padding:E,getPosition:u,getSize:h,getAngle:d,getPixelOffset:A,billboard:y,sizeScale:R/this.state.fontAtlasManager.props.fontSize,sizeUnits:b,sizeMinPixels:N,sizeMaxPixels:H,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getSize:D.getSize,getFillColor:D.getBackgroundColor,getLineColor:D.getBorderColor,getLineWidth:D.getBorderWidth,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:G.getPosition,getAngle:G.getAngle,getSize:G.getSize,getFillColor:G.getBackgroundColor,getLineColor:G.getBorderColor,getLineWidth:G.getBorderWidth,getPixelOffset:G.getPixelOffset,getBoundingRect:{getText:G.getText,getTextAnchor:G.getTextAnchor,getAlignmentBaseline:G.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes?{length:l.length,attributes:l.attributes.background||{}}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new W({sdf:C.sdf,smoothing:Number.isFinite(C.smoothing)?C.smoothing:_1.smoothing,outlineWidth:x,outlineColor:B,iconAtlas:s,iconMapping:o,getPosition:u,getColor:f,getSize:h,getAngle:d,getPixelOffset:A,billboard:y,sizeScale:R*i,sizeUnits:b,sizeMinPixels:N*i,sizeMaxPixels:H*i,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getColor:D.getColor,getSize:D.getSize,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:G.getText,getPosition:G.getPosition,getAngle:G.getAngle,getColor:G.getColor,getSize:G.getSize,getPixelOffset:G.getPixelOffset,getIconOffsets:{getText:G.getText,getTextAnchor:G.getTextAnchor,getAlignmentBaseline:G.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:c,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets.bind(this),getIcon:r})]}static set fontAtlasCacheLimit(e){I9(e)}}ea.layerName="TextLayer";ea.defaultProps=B9;const Ju={circle:{type:pm,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Gh,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:ea,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Zu={type:Vh,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Ap={type:vc,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function La(t){let{type:e,props:n}=t;const r={};for(const i in n)r[i]=e.defaultProps[n[i]];return r}function yA(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const o=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[o]=r[s],n&&(i.transitions[o]=n[s])),i[o]=a}return i}function P9(t){if(Array.isArray(t))return t;switch(me.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return me.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function C1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let o=i;o<s;o++){const a=t[o];me.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:l}=a;if(l.type==="GeometryCollection"){me.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:c}=l;for(let u=0;u<c.length;u++){const f=c[u];w1(f,r,e,a,o)}}else w1(l,r,e,a,o)}return r}function w1(t,e,n,r,i){const{type:s,coordinates:o}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(!L9(s,o)){me.warn("".concat(s," coordinates are malformed"))();return}switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":o.forEach(f=>{a.push(n({geometry:{type:"Point",coordinates:f}},r,i))});break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":o.forEach(f=>{l.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"Polygon":c.push(n({geometry:t},r,i)),o.forEach(f=>{u.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"MultiPolygon":o.forEach(f=>{c.push(n({geometry:{type:"Polygon",coordinates:f}},r,i)),f.forEach(h=>{u.push(n({geometry:{type:"LineString",coordinates:h}},r,i))})});break}}const N9={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function L9(t,e){let n=N9[t];for(me.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function O2(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function fu(t){return t.geometry.coordinates}function M9(t,e){const n=O2(),{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=fu,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=fu,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=fu,n.polygonsOutline.data=o,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=fu,n}function O9(t,e){const n=O2(),{points:r,lines:i,polygons:s}=t,o=s9(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{getPosition:r.positions,instancePickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{getPath:i.positions,instancePickingColors:{size:3,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const D9=["points","linestrings","polygons"],F9={...La(Ju.circle),...La(Ju.icon),...La(Ju.text),...La(Zu),...La(Ap),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class _m extends Nn{initializeState(){this.state={layerProps:{},features:{}},this.props.getLineDashArray&&me.removed("getLineDashArray","PathStyleExtension")()}updateState(e){let{props:n,changeFlags:r}=e;if(!r.dataChanged)return;const{data:i}=this.props,s=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:s}),s?this._updateStateBinary({props:n,changeFlags:r}):this._updateStateJSON({props:n,changeFlags:r})}_updateStateBinary(e){let{props:n,changeFlags:r}=e;const i=O9(n.data,this.encodePickingColor);this.setState({layerProps:i})}_updateStateJSON(e){let{props:n,changeFlags:r}=e;const i=P9(n.data),s=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const c=this.state.features;for(const u in c)o[u]=c[u].slice(),a[u]=[];for(const u of r.dataChanged){const f=C1(i,s,u);for(const h in c)a[h].push(x2({data:o[h],getIndex:d=>d.__source.index,dataRange:u,replace:f[h]}))}}else o=C1(i,s);const l=M9(o,a);this.setState({features:o,featuresDiff:a,layerProps:l})}getPickingInfo(e){const n=super.getPickingInfo(e),{sourceLayer:r}=n;return n.featureType=D9.find(i=>r.id.startsWith("".concat(this.id,"-").concat(i,"-"))),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,Ap.type);if(s){const o=yA(this,Ap.props),a=e&&n;return a||delete o.getLineColor,o.updateTriggers.lineColors=a,new s(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",s="linestrings",o=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,Zu.type),a=this.shouldRenderSubLayer(s,r.lines.data)&&this.getSubLayerClass(s,Zu.type);if(o||a){const l=yA(this,Zu.props);return[o&&new o(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),r.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:s,updateTriggers:l.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const s=new Set(e.split("+")),o=[];for(const a of s){const l="points-".concat(a),c=Ju[a],u=c&&this.shouldRenderSubLayer(l,n.points.data)&&this.getSubLayerClass(l,c.type);if(u){const f=yA(this,c.props);o.push(new u(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),n.points))}}return o}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:s,index:o}=i,a=r9(s,o);return e(a,i)}}}_m.layerName="GeoJsonLayer";_m.defaultProps=F9;class Q9{constructor(e){let{x:n,y:r,z:i}=e;this.x=n,this.y=r,this.z=i,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||me.error("byteLength not defined in tile data")(),e}async _loadData(e){let{getData:n,requestScheduler:r,onLoad:i,onError:s}=e;const{x:o,y:a,z:l,bbox:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,p=>p.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,A;try{d=await n({x:o,y:a,z:l,bbox:c,signal:f})}catch(p){A=p||!0}finally{h.done()}if(u===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,A?s(A,this):i(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){this.isLoaded||(this._isCancelled=!0,this._abortController.abort())}}const Dt=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),T1=new q,k9=new q;class xm{constructor(e=[0,0,0],n=[0,0,0],r=null){r=r||T1.copy(e).add(n).scale(.5),this.center=new q(r),this.halfDiagonal=new q(n).subtract(this.center),this.minimum=new q(e),this.maximum=new q(n)}clone(){return new xm(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:n}=this,r=k9.from(e.normal),i=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),s=this.center.dot(r)+e.distance;return s-i>0?Dt.INSIDE:s+i<0?Dt.OUTSIDE:Dt.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=T1.from(e).subtract(this.center),{halfDiagonal:r}=this;let i=0,s;return s=Math.abs(n.x)-r.x,s>0&&(i+=s*s),s=Math.abs(n.y)-r.y,s>0&&(i+=s*s),s=Math.abs(n.z)-r.z,s>0&&(i+=s*s),i}}const Ma=new q,S1=new q;class Im{constructor(e=[0,0,0],n=0){this.radius=-0,this.center=new q,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=Ma.from(n),this.center=new q().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new Im(this.center,this.radius)}union(e){const n=this.center,r=this.radius,i=e.center,s=e.radius,o=Ma.copy(i).subtract(n),a=o.magnitude();if(r>=a+s)return this.clone();if(s>=a+r)return e.clone();const l=(r+a+s)*.5;return S1.copy(o).scale((-r+l)/a).add(n),this.center.copy(S1),this.radius=l,this}expand(e){e=Ma.from(e);const n=e.subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(e){this.center.transform(e);const n=xD(Ma,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){e=Ma.from(e);const n=e.subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(e){const n=this.center,r=this.radius,s=e.normal.dot(n)+e.distance;return s<-r?Dt.OUTSIDE:s<r?Dt.INTERSECTING:Dt.INSIDE}}const U9=new q,G9=new q,hu=new q,du=new q,Au=new q,V9=new q,z9=new q,wr={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class Cm{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){this.center=new q().from(e),this.halfAxes=new Et(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new q(e).len(),new q(n).len(),new q(r).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),i=new q(e).normalize(),s=new q(n).normalize(),o=new q(r).normalize();return new g_().fromMatrix3(new Et([...i,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,r){const i=new g_(r),s=new Et().fromQuaternion(i);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=new q().from(e),this.halfAxes=s,this}clone(){return new Cm(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new Im){const n=this.halfAxes,r=n.getColumn(0,hu),i=n.getColumn(1,du),s=n.getColumn(2,Au),o=U9.copy(r).add(i).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,r=e.normal,i=this.halfAxes,s=r.x,o=r.y,a=r.z,l=Math.abs(s*i[wr.COLUMN0ROW0]+o*i[wr.COLUMN0ROW1]+a*i[wr.COLUMN0ROW2])+Math.abs(s*i[wr.COLUMN1ROW0]+o*i[wr.COLUMN1ROW1]+a*i[wr.COLUMN1ROW2])+Math.abs(s*i[wr.COLUMN2ROW0]+o*i[wr.COLUMN2ROW1]+a*i[wr.COLUMN2ROW2]),c=r.dot(n)+e.distance;return c<=-l?Dt.OUTSIDE:c>=l?Dt.INSIDE:Dt.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=G9.from(e).subtract(this.center),r=this.halfAxes,i=r.getColumn(0,hu),s=r.getColumn(1,du),o=r.getColumn(2,Au),a=i.magnitude(),l=s.magnitude(),c=o.magnitude();i.normalize(),s.normalize(),o.normalize();let u=0,f;return f=Math.abs(n.dot(i))-a,f>0&&(u+=f*f),f=Math.abs(n.dot(s))-l,f>0&&(u+=f*f),f=Math.abs(n.dot(o))-c,f>0&&(u+=f*f),u}computePlaneDistances(e,n,r=[-0,-0]){let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,l=a.getColumn(0,hu),c=a.getColumn(1,du),u=a.getColumn(2,Au),f=V9.copy(l).add(c).add(u).add(o),h=z9.copy(f).subtract(e);let d=n.dot(h);return i=Math.min(d,i),s=Math.max(d,s),f.copy(o).add(l).add(c).subtract(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),f.copy(o).add(l).subtract(c).add(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),f.copy(o).add(l).subtract(c).subtract(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),o.copy(f).subtract(l).add(c).add(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),o.copy(f).subtract(l).add(c).subtract(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),o.copy(f).subtract(l).subtract(c).add(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),o.copy(f).subtract(l).subtract(c).subtract(u),h.copy(f).subtract(e),d=n.dot(h),i=Math.min(d,i),s=Math.max(d,s),r[0]=i,r[1]=s,r}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,hu);n.transformAsPoint(e);const r=this.halfAxes.getColumn(1,du);r.transformAsPoint(e);const i=this.halfAxes.getColumn(2,Au);return i.transformAsPoint(e),this.halfAxes=new Et([...n,...r,...i]),this}getTransform(){throw new Error("not implemented")}}const b1=new q,R1=new q;class Ci{constructor(e=[0,0,1],n=0){this.normal=new q,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return Wt(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=b1.from(e),this.normal.from(n).normalize();const r=-this.normal.dot(e);return this.distance=r,this}fromCoefficients(e,n,r,i){return this.normal.set(e,n,r),Wt(Ii(this.normal.len(),1)),this.distance=i,this}clone(e){return new Ci(this.normal,this.distance)}equals(e){return Ii(this.distance,e.distance)&&Ii(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=R1.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,n)}projectPointOntoPlane(e,n=[0,0,0]){e=b1.from(e);const r=this.getPointDistance(e),i=R1.copy(this.normal).scale(r);return e.subtract(i).to(n)}}const B1=[new q([1,0,0]),new q([0,1,0]),new q([0,0,1])],P1=new q,j9=new q;new Ci(new q(1,0,0),0);class fo{static get MASK_OUTSIDE(){return 4294967295}static get MASK_INSIDE(){return 0}static get MASK_INDETERMINATE(){return 2147483647}constructor(e=[]){this.planes=e,Wt(this.planes.every(n=>n instanceof Ci))}fromBoundingSphere(e){this.planes.length=2*B1.length;const n=e.center,r=e.radius;let i=0;for(const s of B1){let o=this.planes[i],a=this.planes[i+1];o||(o=this.planes[i]=new Ci),a||(a=this.planes[i+1]=new Ci);const l=P1.copy(s).scale(-r).add(n);-s.dot(l),o.fromPointNormal(l,s);const c=P1.copy(s).scale(r).add(n),u=j9.copy(s).negate();-u.dot(c),a.fromPointNormal(c,u),i+=2}return this}computeVisibility(e){Wt(e);let n=Dt.INSIDE;for(const r of this.planes)switch(e.intersectPlane(r)){case Dt.OUTSIDE:return Dt.OUTSIDE;case Dt.INTERSECTING:n=Dt.INTERSECTING;break}return n}computeVisibilityWithPlaneMask(e,n){if(Wt(e,"boundingVolume is required."),Wt(Number.isFinite(n),"parentPlaneMask is required."),n===fo.MASK_OUTSIDE||n===fo.MASK_INSIDE)return n;let r=fo.MASK_INSIDE;const i=this.planes;for(let s=0;s<this.planes.length;++s){const o=s<31?1<<s:0;if(s<31&&(n&o)===0)continue;const a=i[s],l=e.intersectPlane(a);if(l===Dt.OUTSIDE)return fo.MASK_OUTSIDE;l===Dt.INTERSECTING&&(r|=o)}return r}}new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;const rr=new Et,H9=new Et,W9=new Et,gu=new Et,N1=new Et;function Y9(t,e={}){const n=wT.EPSILON20,r=10;let i=0,s=0;const o=H9,a=W9;o.identity(),a.copy(t);const l=n*$9(a);for(;s<r&&X9(a)>l;)K9(a,gu),N1.copy(gu).transpose(),a.multiplyRight(gu),a.multiplyLeft(N1),o.multiplyRight(gu),++i>2&&(++s,i=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=a.toTarget(e.diagonal),e}function $9(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}const gp=[1,0,0],pp=[2,2,1];function X9(t){let e=0;for(let n=0;n<3;++n){const r=t[rr.getElementIndex(pp[n],gp[n])];e+=2*r*r}return Math.sqrt(e)}function K9(t,e){const n=wT.EPSILON15;let r=0,i=1;for(let c=0;c<3;++c){const u=Math.abs(t[rr.getElementIndex(pp[c],gp[c])]);u>r&&(i=c,r=u)}const s=gp[i],o=pp[i];let a=1,l=0;if(Math.abs(t[rr.getElementIndex(o,s)])>n){const c=t[rr.getElementIndex(o,o)],u=t[rr.getElementIndex(s,s)],f=t[rr.getElementIndex(o,s)],h=(c-u)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),a=1/Math.sqrt(1+d*d),l=d*a}return Et.IDENTITY.to(e),e[rr.getElementIndex(s,s)]=e[rr.getElementIndex(o,o)]=a,e[rr.getElementIndex(o,s)]=l,e[rr.getElementIndex(s,o)]=-l,e}const ni=new q,q9=new q,J9=new q,Z9=new q,eG=new q,tG=new Et,nG={diagonal:new Et,unitary:new Et};function rG(t,e=new Cm){if(!t||t.length===0)return e.halfAxes=new Et([0,0,0,0,0,0,0,0,0]),e.center=new q,e;const n=t.length,r=new q(0,0,0);for(const b of t)r.add(b);const i=1/n;r.multiplyByScalar(i);let s=0,o=0,a=0,l=0,c=0,u=0;for(const b of t){const N=ni.copy(b).subtract(r);s+=N.x*N.x,o+=N.x*N.y,a+=N.x*N.z,l+=N.y*N.y,c+=N.y*N.z,u+=N.z*N.z}s*=i,o*=i,a*=i,l*=i,c*=i,u*=i;const f=tG;f[0]=s,f[1]=o,f[2]=a,f[3]=o,f[4]=l,f[5]=c,f[6]=a,f[7]=c,f[8]=u;const{unitary:h}=Y9(f,nG),d=e.halfAxes.copy(h);let A=d.getColumn(0,J9),p=d.getColumn(1,Z9),g=d.getColumn(2,eG),m=-Number.MAX_VALUE,E=-Number.MAX_VALUE,v=-Number.MAX_VALUE,y=Number.MAX_VALUE,C=Number.MAX_VALUE,x=Number.MAX_VALUE;for(const b of t)ni.copy(b),m=Math.max(ni.dot(A),m),E=Math.max(ni.dot(p),E),v=Math.max(ni.dot(g),v),y=Math.min(ni.dot(A),y),C=Math.min(ni.dot(p),C),x=Math.min(ni.dot(g),x);A=A.multiplyByScalar(.5*(y+m)),p=p.multiplyByScalar(.5*(C+E)),g=g.multiplyByScalar(.5*(x+v)),e.center.copy(A).add(p).add(g);const B=q9.set(m-y,E-C,v-x).multiplyByScalar(.5),R=new Et([B[0],0,0,0,B[1],0,0,0,B[2]]);return e.halfAxes.multiplyRight(R),e}const ho=512,L1=3,D2=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],F2=D2.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),iG=F2.concat([[.25,.5],[.75,.5]]);class Ao{constructor(e,n,r){this.x=e,this.y=n,this.z=r}get children(){if(!this._children){const e=this.x*2,n=this.y*2,r=this.z+1;this._children=[new Ao(e,n,r),new Ao(e,n+1,r),new Ao(e+1,n,r),new Ao(e+1,n+1,r)]}return this._children}update(e){const{viewport:n,cullingVolume:r,elevationBounds:i,minZ:s,maxZ:o,bounds:a,offset:l,project:c}=e,u=this.getBoundingVolume(i,l,c);if(a&&!this.insideBounds(a)||r.computeVisibility(u)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<o&&h>=s){const d=u.distanceTo(n.cameraPosition)*n.scale/n.height;h+=Math.floor(Math.log2(d))}if(h>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(e);return!0}getSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(this.selected&&e.push(this),this._children)for(const n of this._children)n.getSelected(e);return e}insideBounds(e){let[n,r,i,s]=e;const o=Math.pow(2,this.z),a=ho/o;return this.x*a<i&&this.y*a<s&&(this.x+1)*a>n&&(this.y+1)*a>r}getBoundingVolume(e,n,r){if(r){const l=this.z<1?iG:this.z<2?F2:D2,c=[];for(const u of l){const f=mp(this.x+u[0],this.y+u[1],this.z);f[2]=e[0],c.push(r(f)),e[0]!==e[1]&&(f[2]=e[1],c.push(r(f)))}return rG(c)}const i=Math.pow(2,this.z),s=ho/i,o=this.x*s+n*ho,a=ho-(this.y+1)*s;return new xm([o,a,e[0]],[o+s,a+s,e[1]])}}function sG(t,e,n,r){const i=t.resolution?t.projectPosition:null,s=Object.values(t.getFrustumPlanes()).map(d=>{let{normal:A,distance:p}=d;return new Ci(A.clone().negate(),p)}),o=new fo(s),a=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=t.pitch<=60?e:0;if(r){const[d,A,p,g]=r,m=Li([d,g]),E=Li([p,A]);r=[m[0],ho-m[1],E[0],ho-E[1]]}const f=new Ao(0,0,0),h={viewport:t,project:i,cullingVolume:o,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:r,offset:0};if(f.update(h),t.subViewports&&t.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-L1););for(h.offset=1;f.update(h)&&!(++h.offset>L1););}return f.getSelected()}const kr=512,oG=[-1/0,-1/0,1/0,1/0],aG={type:"url",value:null,validate:(t,e)=>e.optional&&t===null||typeof t=="string"||Array.isArray(t)&&t.every(n=>typeof n=="string"),equals:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function Q2(t,e){const n=[e.transformPoint([t[0],t[1]]),e.transformPoint([t[2],t[1]]),e.transformPoint([t[0],t[3]]),e.transformPoint([t[2],t[3]])];return[Math.min(...n.map(i=>i[0])),Math.min(...n.map(i=>i[1])),Math.max(...n.map(i=>i[0])),Math.max(...n.map(i=>i[1]))]}function lG(t,e){if(!t||!t.length)return null;if(Array.isArray(t)){const s=Math.abs(e.x+e.y)%t.length;t=t[s]}const{x:n,y:r,z:i}=e;return t.replace(/\{x\}/g,n).replace(/\{y\}/g,r).replace(/\{z\}/g,i).replace(/\{-y\}/g,Math.pow(2,i)-r-1)}function cG(t,e,n){let r;if(e&&e.length===2){const[i,s]=e,o=t.getBounds({z:i}),a=t.getBounds({z:s});r=[Math.min(o[0],a[0]),Math.min(o[1],a[1]),Math.max(o[2],a[2]),Math.max(o[3],a[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}function uG(t,e,n){return n?Q2(t,n).map(i=>i*e/kr):t.map(r=>r*e/kr)}function wm(t,e){return Math.pow(2,t)*kr/e}function mp(t,e,n){const r=wm(n,kr),i=t/r*360-180,s=Math.PI-2*Math.PI*e/r,o=180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)));return[i,o]}function M1(t,e,n,r){const i=wm(n,r);return[t/i*kr,e/i*kr]}function fG(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:kr;if(t.isGeospatial){const[c,u]=mp(e,n,r),[f,h]=mp(e+1,n+1,r);return{west:c,north:u,east:f,south:h}}const[s,o]=M1(e,n,r,i),[a,l]=M1(e+1,n+1,r,i);return{left:s,top:o,right:a,bottom:l}}function hG(t,e,n,r,i){const s=cG(t,null,r),o=wm(e,n),[a,l,c,u]=uG(s,o,i),f=[];for(let h=Math.floor(a);h<c;h++)for(let d=Math.floor(l);d<u;d++)f.push({x:h,y:d,z:e});return f}function dG(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,extent:s,tileSize:o=kr,modelMatrix:a,modelMatrixInverse:l,zoomOffset:c=0}=t,u=e.isGeospatial?Math.round(e.zoom+Math.log2(kr/o))+c:Math.ceil(e.zoom)+c;if(Number.isFinite(r)&&u<r){if(!s)return[];u=r}Number.isFinite(n)&&u>n&&(u=n);let f=s;return a&&l&&s&&!e.isGeospatial&&(f=Q2(s,a)),e.isGeospatial?sG(e,u,i,s):hG(e,u,o,f||oG,l)}const AG=0,k2=1,U2=3,gG=4,O1=5,pG="never",Tm="best-available",mG=5;class EG{constructor(e){this.opts=e,this.onTileLoad=n=>{this.opts.onTileLoad(n),this.opts.maxCacheByteSize&&(this._cacheByteSize+=n.byteLength,this._resizeCache())},this._requestScheduler=new iN({maxRequests:e.maxRequests,throttleRequests:e.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new De,this._modelMatrixInverse=new De,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const n=this._cache.get(e);this._selectedTiles.includes(n)?n.setNeedsReload():this._cache.delete(e)}}update(e){let{zRange:n,modelMatrix:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new De(r),s=!i.equals(this._modelMatrix);if(!e.equals(this._viewport)||s){s&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e;const a=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile({x:a.x,y:a.y,z:a.z})));const o=this.updateTileStates();return this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}getTileIndices(e){let{viewport:n,maxZoom:r,minZoom:i,zRange:s,modelMatrix:o,modelMatrixInverse:a}=e;const{tileSize:l,extent:c,zoomOffset:u}=this.opts;return dG({viewport:n,maxZoom:r,minZoom:i,zRange:s,tileSize:l,extent:c,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileMetadata(e){let{x:n,y:r,z:i}=e;const{tileSize:s}=this.opts;return{bbox:fG(this._viewport,n,r,i,s)}}getParentIndex(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}updateTileStates(){this._updateTileStates(this.selectedTiles);const{maxRequests:e}=this.opts,n=[];let r=0,i=!1;for(const s of this._cache.values()){const o=Boolean(s.state&k2);s.isVisible!==o&&(i=!0,s.isVisible=o),s.isSelected=s.state===O1,s.isLoading&&(r++,s.isSelected||n.push(s))}if(e>0)for(;r>e&&n.length>0;)n.shift().abort(),r--;return i}_rebuildTree(){const{_cache:e}=this;for(const n of e.values())n.parent=null,n.children.length=0;for(const n of e.values()){const r=this._getNearestAncestor(n.x,n.y,n.z);n.parent=r,r&&r.children.push(n)}}_updateTileStates(e){const{_cache:n}=this,r=this.opts.refinementStrategy||Tm;for(const i of n.values())i.state=AG;for(const i of e)i.state=O1;if(r!==pG){for(const i of e)yG(i,r);for(const i of e)vG(i)&&G2(i)}}_resizeCache(){const{_cache:e,opts:n}=this,r=n.maxCacheSize||(n.maxCacheByteSize?1/0:mG*this.selectedTiles.length),i=n.maxCacheByteSize||1/0;if(e.size>r||this._cacheByteSize>i){for(const[o,a]of e)if(a.isVisible||(this._cacheByteSize-=n.maxCacheByteSize?a.byteLength:0,e.delete(o),this.opts.onTileUnload(a)),e.size<=r&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((o,a)=>o.z-a.z),this._dirty=!1)}_getTile(e,n){let{x:r,y:i,z:s}=e;const o="".concat(r,",").concat(i,",").concat(s);let a=this._cache.get(o),l=!1;return!a&&n?(a=new Q9({x:r,y:i,z:s}),Object.assign(a,this.getTileMetadata(a)),l=!0,this._cache.set(o,a),this._dirty=!0):a&&a.needsReload&&(l=!0),l&&a.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),a}_getNearestAncestor(e,n,r){const{_minZoom:i=0}=this;let s={x:e,y:n,z:r};for(;s.z>i;){s=this.getParentIndex(s);const o=this._getTile(s);if(o)return o}return null}}function vG(t){let e=t;for(;e;){if(e.state&k2===0)return!0;if(e.isLoaded)return!1;e=e.parent}return!0}function yG(t,e){let n,r=U2;for(;n=t.parent;){if(t.isLoaded&&(r=gG,e===Tm))return;n.state=Math.max(n.state,r),t=n}}function G2(t){for(const e of t.children)e.state=Math.max(e.state,U2),e.isLoaded||G2(e)}const _G={data:[],dataComparator:aG.equals,renderSubLayers:{type:"function",value:t=>new _m(t),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:t=>{},compare:!1},onTileUnload:{type:"function",value:t=>{},compare:!1},onTileError:{type:"function",value:t=>console.error(t),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Tm,zRange:null,maxRequests:6,zoomOffset:0};class Sm extends Nn{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e;(e=this.state.tileset)===null||e===void 0||e.finalize()}get isLoaded(){const{tileset:e}=this.state;return e.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(r=>r.isLoaded))}shouldUpdateState(e){let{changeFlags:n}=e;return n.somethingChanged}updateState(e){let{props:n,changeFlags:r}=e,{tileset:i}=this.state;const s=r.propsOrDataChanged||r.updateTriggersChanged,o=r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getTileData);i?s&&(i.setOptions(this._getTilesetOptions(n)),o?i.reloadAll():this.state.tileset.tiles.forEach(a=>{a.layers=null})):(i=new EG(this._getTilesetOptions(n)),this.setState({tileset:i})),this._updateTileset()}_getTilesetOptions(e){const{tileSize:n,maxCacheSize:r,maxCacheByteSize:i,refinementStrategy:s,extent:o,maxZoom:a,minZoom:l,maxRequests:c,zoomOffset:u}=e;return{maxCacheSize:r,maxCacheByteSize:i,maxZoom:a,minZoom:l,tileSize:n,refinementStrategy:s,extent:o,maxRequests:c,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:e}=this.state,{zRange:n,modelMatrix:r}=this.props,i=e.update(this.context.viewport,{zRange:n,modelMatrix:r}),{isLoaded:s}=e,o=this.state.isLoaded!==s,a=this.state.frameNumber!==i;s&&(o||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=s}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:n}=this.props;n&&n(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,e.isVisible&&this.setNeedsUpdate()}_onTileError(e,n){this.props.onTileError(e),n.layers=null,n.isVisible&&this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:n,getTileData:r,fetch:i}=this.props,{signal:s}=e;return e.url=lG(n,e),r?r(e):e.url?i(e.url,{propName:"data",layer:this,signal:s}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo(e){let{info:n,sourceLayer:r}=e;return n.tile=r.props.tile,n}_updateAutoHighlight(e){e.sourceLayer&&e.sourceLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{const n=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)n&&e.layers[0]&&Object.keys(n).some(r=>e.layers[0].props[r]!==n[r])&&(e.layers=e.layers.map(r=>r.clone(n)));else{const r=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(e.x,"-").concat(e.y,"-").concat(e.z),data:e.content,_offset:0,tile:e});e.layers=kh(r,Boolean).map(i=>i.clone({tile:e,...n}))}return e.layers})}filterSubLayer(e){let{layer:n}=e;return n.props.tile.isVisible}}Sm.layerName="TileLayer";Sm.defaultProps=_G;const xG=new Map;function Hr(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>xG.set(n,e))}Hr([void 0,1],()=>Gt(()=>import("./raw.83a009eb.js"),[],import.meta.url).then(t=>t.default));Hr(5,()=>Gt(()=>import("./lzw.df0339ea.js"),[],import.meta.url).then(t=>t.default));Hr(6,()=>{throw new Error("old style JPEG compression is not supported.")});Hr(7,()=>Gt(()=>import("./jpeg.c372d227.js"),[],import.meta.url).then(t=>t.default));Hr([8,32946],()=>Gt(()=>import("./deflate.7fbcdd11.js"),["deflate.7fbcdd11.js","pako.esm.cc5c97cd.js"],import.meta.url).then(t=>t.default));Hr(32773,()=>Gt(()=>import("./packbits.990094a6.js"),[],import.meta.url).then(t=>t.default));Hr(34887,()=>Gt(()=>import("./lerc.08066434.js"),["lerc.08066434.js","pako.esm.cc5c97cd.js"],import.meta.url).then(t=>t.default));Hr(50001,()=>Gt(()=>import("./webimage.f49254f4.js"),[],import.meta.url).then(t=>t.default));class IG extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,r]of e)this.onEviction(n,r.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const r=n.get(e);return this._getItemValue(e,r)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield e)}for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;this.cache.has(e)?this.cache.set(e,{value:n,expiry:i}):this._set(e,{value:n,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-e;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[r,i]of this.entriesAscending())e.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}function CG(t,e){let n=t.length-e,r=0;do{for(let i=e;i>0;i--)t[r+e]+=t[r],r++;n-=e}while(n>0)}function wG(t,e,n){let r=0,i=t.length;const s=i/n;for(;i>e;){for(let a=e;a>0;--a)t[r+e]+=t[r],++r;i-=e}const o=t.slice();for(let a=0;a<s;++a)for(let l=0;l<n;++l)t[n*a+l]=o[(n-l-1)*s+a]}function TG(t,e,n,r,i,s){if(!e||e===1)return t;for(let l=0;l<i.length;++l){if(i[l]%8!==0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[l]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const o=i[0]/8,a=s===2?1:i.length;for(let l=0;l<r&&!(l*a*n*o>=t.byteLength);++l){let c;if(e===2){switch(i[0]){case 8:c=new Uint8Array(t,l*a*n*o,a*n*o);break;case 16:c=new Uint16Array(t,l*a*n*o,a*n*o/2);break;case 32:c=new Uint32Array(t,l*a*n*o,a*n*o/4);break;default:throw new Error(`Predictor 2 not allowed with ${i[0]} bits per sample.`)}CG(c,a)}else e===3&&(c=new Uint8Array(t,l*a*n*o,a*n*o),wG(c,a,o))}return t}class SG{async decode(e,n){const r=await this.decodeBlock(n),i=e.Predictor||1;if(i!==1){const s=!e.StripOffsets,o=s?e.TileWidth:e.ImageWidth,a=s?e.TileLength:e.RowsPerStrip||e.ImageLength;return TG(r,i,o,a,e.BitsPerSample,e.PlanarConfiguration)}return r}}let Vn,pu=null;function D1(){return pu!==null&&pu.buffer===Vn.memory.buffer||(pu=new Uint8Array(Vn.memory.buffer)),pu}let F1=0,mu=null;function Q1(){return mu!==null&&mu.buffer===Vn.memory.buffer||(mu=new Int32Array(Vn.memory.buffer)),mu}async function bm(t){t===void 0&&(t="".replace(/\.js$/,"_bg.wasm")),(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:e,module:n}=await async function(r,i){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,i)}catch(o){if(r.headers.get("Content-Type")=="application/wasm")throw o;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o)}const s=await r.arrayBuffer();return await WebAssembly.instantiate(s,i)}{const s=await WebAssembly.instantiate(r,i);return s instanceof WebAssembly.Instance?{instance:s,module:r}:s}}(await t,{});return Vn=e.exports,bm.__wbindgen_wasm_module=n,Vn}var bG=Object.freeze({__proto__:null,decompress:function(t,e){try{const c=Vn.__wbindgen_add_to_stack_pointer(-16);var n=function(u,f){const h=f(1*u.length);return D1().set(u,h/1),F1=u.length,h}(t,Vn.__wbindgen_malloc),r=F1;Vn.decompress(c,n,r,e);var i=Q1()[c/4+0],s=Q1()[c/4+1],o=(a=i,l=s,D1().subarray(a/1,a/1+l)).slice();return Vn.__wbindgen_free(i,1*s),o}finally{Vn.__wbindgen_add_to_stack_pointer(16)}var a,l},default:bm});const RG=[62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function Eu(t){return RG[t-43]}const BG=function(t){let e,n=t.endsWith("==")?2:t.endsWith("=")?1:0,r=t.length,i=new Uint8Array(r/4*3);for(let s=0,o=0;s<r;s+=4,o+=3)e=Eu(t.charCodeAt(s))<<18|Eu(t.charCodeAt(s+1))<<12|Eu(t.charCodeAt(s+2))<<6|Eu(t.charCodeAt(s+3)),i[o]=e>>16,i[o+1]=e>>8&255,i[o+2]=255&e;return i.subarray(0,i.length-n)}("AGFzbQEAAAABWQ5gAn9/AX9gA39/fwF/YAJ/fwBgAX8AYAN/f38AYAF/AX9gBH9/f38AYAR/f39/AX9gBn9/f39/fwBgAX8BfmAAAGAFf39/f38AYAV/f39/fwF/YAJ+fwF/A21sBQgICwMBAgUMAQABAAIABQACAgYGDQYDAgACAAAEBAQCAgYGAAYBBgIHAwQDBAQDAwADBQMDBAQEBAQCAgAHAAQAAgMBAgcFBAIDAQUCAgIDAgIDAwcCAQAABAIACgAAAQAFAgADBQkJCQMCBAUBcAErKwUDAQARBgkBfwFBgIDAAAsHXwUGbWVtb3J5AgAKZGVjb21wcmVzcwAnH19fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIAYhFfX3diaW5kZ2VuX21hbGxvYwBMD19fd2JpbmRnZW5fZnJlZQBWCTABAEEBCypqJDUCZmVDNQFmZUNha2pXDD1pVBohSVtTaGdfXDEOXlhqaQscQWAbP2QKsugBbNMqAgh/AX4CQAJAAkACQCAAQfUBTwRAIABBzf97Tw0CIABBC2oiAEF4cSEGQZCnwAAoAgAiCEUNAUEAIAZrIQQCQAJAAn9BACAAQQh2IgBFDQAaQR8gBkH///8HSw0AGiAGQQYgAGciAGtBH3F2QQFxIABBAXRrQT5qCyIHQQJ0QZypwABqKAIAIgAEQCAGQQBBGSAHQQF2a0EfcSAHQR9GG3QhAgNAAkAgAEEEaigCAEF4cSIFIAZJDQAgBSAGayIFIARPDQAgACEDIAUiBA0AQQAhBAwDCyAAQRRqKAIAIgUgASAFIAAgAkEddkEEcWpBEGooAgAiAEcbIAEgBRshASACQQF0IQIgAA0ACyABBEAgASEADAILIAMNAgtBACEDQQIgB0EfcXQiAEEAIABrciAIcSIARQ0DIABBACAAa3FoQQJ0QZypwABqKAIAIgBFDQMLA0AgACADIABBBGooAgBBeHEiAiAGTyACIAZrIgIgBElxIgEbIQMgAiAEIAEbIQQgACgCECICBH8gAgUgAEEUaigCAAsiAA0ACyADRQ0CC0GcqsAAKAIAIgAgBk9BACAEIAAgBmtPGw0BIAMoAhghBwJAAkAgAyADKAIMIgFGBEAgA0EUQRAgA0EUaiICKAIAIgEbaigCACIADQFBACEBDAILIAMoAggiACABNgIMIAEgADYCCAwBCyACIANBEGogARshAgNAIAIhBSAAIgFBFGoiAigCACIARQRAIAFBEGohAiABKAIQIQALIAANAAsgBUEANgIACwJAIAdFDQACQCADIAMoAhxBAnRBnKnAAGoiACgCAEcEQCAHQRBBFCAHKAIQIANGG2ogATYCACABRQ0CDAELIAAgATYCACABDQBBkKfAAEGQp8AAKAIAQX4gAygCHHdxNgIADAELIAEgBzYCGCADKAIQIgAEQCABIAA2AhAgACABNgIYCyADQRRqKAIAIgBFDQAgAUEUaiAANgIAIAAgATYCGAsCQCAEQRBPBEAgAyAGQQNyNgIEIAMgBmoiBSAEQQFyNgIEIAQgBWogBDYCACAEQYACTwRAIAVCADcCECAFAn9BACAEQQh2IgBFDQAaQR8gBEH///8HSw0AGiAEQQYgAGciAGtBH3F2QQFxIABBAXRrQT5qCyIANgIcIABBAnRBnKnAAGohAgJAAkACQAJAQZCnwAAoAgAiAUEBIABBH3F0IgZxBEAgAigCACICQQRqKAIAQXhxIARHDQEgAiEADAILQZCnwAAgASAGcjYCACACIAU2AgAMAwsgBEEAQRkgAEEBdmtBH3EgAEEfRht0IQEDQCACIAFBHXZBBHFqQRBqIgYoAgAiAEUNAiABQQF0IQEgACECIABBBGooAgBBeHEgBEcNAAsLIAAoAggiAiAFNgIMIAAgBTYCCCAFQQA2AhggBSAANgIMIAUgAjYCCAwECyAGIAU2AgALIAUgAjYCGCAFIAU2AgwgBSAFNgIIDAILIARBA3YiAkEDdEGUp8AAaiEAAn9BjKfAACgCACIBQQEgAnQiAnEEQCAAKAIIDAELQYynwAAgASACcjYCACAACyECIAAgBTYCCCACIAU2AgwgBSAANgIMIAUgAjYCCAwBCyADIAQgBmoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAsgA0EIag8LAkACQEGMp8AAKAIAIgFBECAAQQtqQXhxIABBC0kbIgZBA3YiAHYiAkEDcUUEQCAGQZyqwAAoAgBNDQMgAg0BQZCnwAAoAgAiAEUNAyAAQQAgAGtxaEECdEGcqcAAaigCACIBQQRqKAIAQXhxIAZrIQQgASECA0AgASgCECIARQRAIAFBFGooAgAiAEUNBAsgAEEEaigCAEF4cSAGayIBIAQgASAESSIBGyEEIAAgAiABGyECIAAhAQwACwALAkAgAkF/c0EBcSAAaiIAQQN0QYynwABqIgNBEGooAgAiAkEIaiIFKAIAIgQgA0EIaiIDRwRAIAQgAzYCDCADIAQ2AggMAQtBjKfAACABQX4gAHdxNgIACyACIABBA3QiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBCAFDwsCQEECIAB0IgRBACAEa3IgAiAAdHEiAEEAIABrcWgiAkEDdEGMp8AAaiIDQRBqKAIAIgBBCGoiBSgCACIEIANBCGoiA0cEQCAEIAM2AgwgAyAENgIIDAELQYynwAAgAUF+IAJ3cTYCAAsgACAGQQNyNgIEIAAgBmoiAyACQQN0IgIgBmsiAUEBcjYCBCAAIAJqIAE2AgBBnKrAACgCACIABEAgAEEDdiIEQQN0QZSnwABqIQBBpKrAACgCACECAn9BjKfAACgCACIGQQEgBEEfcXQiBHEEQCAAKAIIDAELQYynwAAgBCAGcjYCACAACyEEIAAgAjYCCCAEIAI2AgwgAiAANgIMIAIgBDYCCAtBpKrAACADNgIAQZyqwAAgATYCACAFDwsgAigCGCEHAkACQCACIAIoAgwiAUYEQCACQRRBECACQRRqIgEoAgAiAxtqKAIAIgANAUEAIQEMAgsgAigCCCIAIAE2AgwgASAANgIIDAELIAEgAkEQaiADGyEDA0AgAyEFIAAiAUEUaiIDKAIAIgBFBEAgAUEQaiEDIAEoAhAhAAsgAA0ACyAFQQA2AgALIAdFDQMgAiACKAIcQQJ0QZypwABqIgAoAgBHBEAgB0EQQRQgBygCECACRhtqIAE2AgAgAUUNBAwDCyAAIAE2AgAgAQ0CQZCnwABBkKfAACgCAEF+IAIoAhx3cTYCAAwDCwJAAkACQAJAAkBBnKrAACgCACIAIAZJBEBBoKrAACgCACIAIAZLDQNBACECIAZBr4AEaiIAQRB2QAAiAUF/Rg0GIAFBEHQiBUUNBkGsqsAAIABBgIB8cSIEQayqwAAoAgBqIgA2AgBBsKrAAEGwqsAAKAIAIgEgACABIABLGzYCAEGoqsAAKAIAIgNFDQFBtKrAACEAA0AgACgCACIBIAAoAgQiB2ogBUYNAyAAKAIIIgANAAsMBAtBpKrAACgCACECAn8gACAGayIBQQ9NBEBBpKrAAEEANgIAQZyqwABBADYCACACIABBA3I2AgQgACACaiIBQQRqIQAgASgCBEEBcgwBC0GcqsAAIAE2AgBBpKrAACACIAZqIgQ2AgAgBCABQQFyNgIEIAAgAmogATYCACACQQRqIQAgBkEDcgshASAAIAE2AgAgAkEIag8LQciqwAAoAgAiAEEAIAAgBU0bRQRAQciqwAAgBTYCAAtBzKrAAEH/HzYCAEG0qsAAIAU2AgBBwKrAAEEANgIAQbiqwAAgBDYCAEGgp8AAQZSnwAA2AgBBqKfAAEGcp8AANgIAQZynwABBlKfAADYCAEGwp8AAQaSnwAA2AgBBpKfAAEGcp8AANgIAQbinwABBrKfAADYCAEGsp8AAQaSnwAA2AgBBwKfAAEG0p8AANgIAQbSnwABBrKfAADYCAEHIp8AAQbynwAA2AgBBvKfAAEG0p8AANgIAQdCnwABBxKfAADYCAEHEp8AAQbynwAA2AgBB2KfAAEHMp8AANgIAQcynwABBxKfAADYCAEHgp8AAQdSnwAA2AgBB1KfAAEHMp8AANgIAQdynwABB1KfAADYCAEHop8AAQdynwAA2AgBB5KfAAEHcp8AANgIAQfCnwABB5KfAADYCAEHsp8AAQeSnwAA2AgBB+KfAAEHsp8AANgIAQfSnwABB7KfAADYCAEGAqMAAQfSnwAA2AgBB/KfAAEH0p8AANgIAQYiowABB/KfAADYCAEGEqMAAQfynwAA2AgBBkKjAAEGEqMAANgIAQYyowABBhKjAADYCAEGYqMAAQYyowAA2AgBBlKjAAEGMqMAANgIAQaCowABBlKjAADYCAEGoqMAAQZyowAA2AgBBnKjAAEGUqMAANgIAQbCowABBpKjAADYCAEGkqMAAQZyowAA2AgBBuKjAAEGsqMAANgIAQayowABBpKjAADYCAEHAqMAAQbSowAA2AgBBtKjAAEGsqMAANgIAQciowABBvKjAADYCAEG8qMAAQbSowAA2AgBB0KjAAEHEqMAANgIAQcSowABBvKjAADYCAEHYqMAAQcyowAA2AgBBzKjAAEHEqMAANgIAQeCowABB1KjAADYCAEHUqMAAQcyowAA2AgBB6KjAAEHcqMAANgIAQdyowABB1KjAADYCAEHwqMAAQeSowAA2AgBB5KjAAEHcqMAANgIAQfiowABB7KjAADYCAEHsqMAAQeSowAA2AgBBgKnAAEH0qMAANgIAQfSowABB7KjAADYCAEGIqcAAQfyowAA2AgBB/KjAAEH0qMAANgIAQZCpwABBhKnAADYCAEGEqcAAQfyowAA2AgBBmKnAAEGMqcAANgIAQYypwABBhKnAADYCAEGoqsAAIAU2AgBBlKnAAEGMqcAANgIAQaCqwAAgBEFYaiIANgIAIAUgAEEBcjYCBCAAIAVqQSg2AgRBxKrAAEGAgIABNgIADAMLIABBDGooAgAgBSADTXIgASADS3INASAAIAQgB2o2AgRBqKrAAEGoqsAAKAIAIgBBD2pBeHEiAUF4ajYCAEGgqsAAQaCqwAAoAgAgBGoiBCAAIAFrakEIaiIDNgIAIAFBfGogA0EBcjYCACAAIARqQSg2AgRBxKrAAEGAgIABNgIADAILQaCqwAAgACAGayICNgIAQaiqwABBqKrAACgCACIAIAZqIgE2AgAgASACQQFyNgIEIAAgBkEDcjYCBCAAQQhqIQIMAgtByKrAAEHIqsAAKAIAIgAgBSAAIAVJGzYCACAEIAVqIQFBtKrAACEAAkADQCABIAAoAgBHBEAgACgCCCIADQEMAgsLIABBDGooAgANACAAIAU2AgAgACAAKAIEIARqNgIEIAUgBkEDcjYCBCAFIAZqIQAgASAFayAGayEGAkACQCABQaiqwAAoAgBHBEBBpKrAACgCACABRg0BIAFBBGooAgAiAkEDcUEBRgRAIAEgAkF4cSICEBEgAiAGaiEGIAEgAmohAQsgASABKAIEQX5xNgIEIAAgBkEBcjYCBCAAIAZqIAY2AgAgBkGAAk8EQCAAQgA3AhAgAAJ/QQAgBkEIdiICRQ0AGkEfIAZB////B0sNABogBkEGIAJnIgJrQR9xdkEBcSACQQF0a0E+agsiATYCHCABQQJ0QZypwABqIQICQAJAAkACQEGQp8AAKAIAIgRBASABQR9xdCIDcQRAIAIoAgAiAkEEaigCAEF4cSAGRw0BIAIhBAwCC0GQp8AAIAMgBHI2AgAgAiAANgIADAMLIAZBAEEZIAFBAXZrQR9xIAFBH0YbdCEBA0AgAiABQR12QQRxakEQaiIDKAIAIgRFDQIgAUEBdCEBIAQiAkEEaigCAEF4cSAGRw0ACwsgBCgCCCICIAA2AgwgBCAANgIIIABBADYCGCAAIAQ2AgwgACACNgIIDAULIAMgADYCAAsgACACNgIYIAAgADYCDCAAIAA2AggMAwsgBkEDdiIBQQN0QZSnwABqIQICf0GMp8AAKAIAIgRBASABdCIBcQRAIAIoAggMAQtBjKfAACABIARyNgIAIAILIQEgAiAANgIIIAEgADYCDCAAIAI2AgwgACABNgIIDAILQaiqwAAgADYCAEGgqsAAQaCqwAAoAgAgBmoiAjYCACAAIAJBAXI2AgQMAQtBpKrAACAANgIAQZyqwABBnKrAACgCACAGaiICNgIAIAAgAkEBcjYCBCAAIAJqIAI2AgALIAVBCGoPC0G0qsAAIQADQAJAIAAoAgAiASADTQRAIAEgACgCBGoiByADSw0BCyAAKAIIIQAMAQsLQaiqwAAgBTYCAEGgqsAAIARBWGoiADYCACAFIABBAXI2AgQgACAFakEoNgIEQcSqwABBgICAATYCACADIAdBYGpBeHFBeGoiACAAIANBEGpJGyIBQRs2AgRBtKrAACkCACEJIAFBEGpBvKrAACkCADcCACABIAk3AghBwKrAAEEANgIAQbiqwAAgBDYCAEG0qsAAIAU2AgBBvKrAACABQQhqNgIAIAFBHGohAANAIABBBzYCACAHIABBBGoiAEsNAAsgASADRg0AIAEgASgCBEF+cTYCBCADIAEgA2siBUEBcjYCBCABIAU2AgAgBUGAAk8EQCADQgA3AhAgA0EcagJ/QQAgBUEIdiIARQ0AGkEfIAVB////B0sNABogBUEGIABnIgBrQR9xdkEBcSAAQQF0a0E+agsiADYCACAAQQJ0QZypwABqIQECQAJAAkACQEGQp8AAKAIAIgRBASAAQR9xdCIHcQRAIAEoAgAiBEEEaigCAEF4cSAFRw0BIAQhAAwCC0GQp8AAIAQgB3I2AgAgASADNgIAIANBGGogATYCAAwDCyAFQQBBGSAAQQF2a0EfcSAAQR9GG3QhAQNAIAQgAUEddkEEcWpBEGoiBygCACIARQ0CIAFBAXQhASAAIQQgAEEEaigCAEF4cSAFRw0ACwsgACgCCCIBIAM2AgwgACADNgIIIANBGGpBADYCACADIAA2AgwgAyABNgIIDAMLIAcgAzYCACADQRhqIAQ2AgALIAMgAzYCDCADIAM2AggMAQsgBUEDdiIBQQN0QZSnwABqIQACf0GMp8AAKAIAIgRBASABdCIBcQRAIAAoAggMAQtBjKfAACABIARyNgIAIAALIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIC0GgqsAAKAIAIgAgBk0NAEGgqsAAIAAgBmsiAjYCAEGoqsAAQaiqwAAoAgAiACAGaiIBNgIAIAEgAkEBcjYCBCAAIAZBA3I2AgQgAEEIag8LIAIPCyABIAc2AhggAigCECIABEAgASAANgIQIAAgATYCGAsgAkEUaigCACIARQ0AIAFBFGogADYCACAAIAE2AhgLAkAgBEEQTwRAIAIgBkEDcjYCBCACIAZqIgMgBEEBcjYCBCADIARqIAQ2AgBBnKrAACgCACIABEAgAEEDdiIFQQN0QZSnwABqIQBBpKrAACgCACEBAn9BjKfAACgCACIGQQEgBUEfcXQiBXEEQCAAKAIIDAELQYynwAAgBSAGcjYCACAACyEFIAAgATYCCCAFIAE2AgwgASAANgIMIAEgBTYCCAtBpKrAACADNgIAQZyqwAAgBDYCAAwBCyACIAQgBmoiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAsgAkEIagvhEAISfwJ+IwBBgAFrIgYkACAGIAM2AiwgBiACNgIoAkACfwJAAkACQAJAIAEtAEdFBEAgASkDOCEYIAFCADcDOAJ/IBhC//8Dg1BFBEAgGEIwiKchESAYQhCIpyEMIBhCIIinDAELIAZBIGogASAGQShqECsgBi8BIEUEQEEBIQ0MBgtBAyENIAYvASIiDCICIAEvAUBPDQUgAiABLwFCRg0CIAEvAUQgDEH//wNxRg0DIAFBGGooAgBFDQUgAUEoaiABQRBqIgcgDBAmGiABKAIYIgIgDEH//wNxIgpNDQQgBygCACAKQQJ0aiICLQACIREgAi8BAAshEyAGQRhqIAFBKGoQQiAGKAIYIQICQCAGKAIcIgcgBU0EQCAHDQFBASESQQEhDSAFIQdBAQwHCyAFRQRAQQEhDUEAIQdBAQwHCyAEIAIgBRBLGiABQTBqIgIgAigCACAFajYCAEGIg8AAIQRBACENQQAhB0EBDAYLIAQgAiAHEEsgAUEwaiICIAIoAgAgB2o2AgAgB2ohBCAFIAdrIQdBACENQQEMBQsgAEECOgAIIABCADcCAAwFCyABIAEtAEYiB0EBaiICOgAKIAFBASAHQQ9xdEECajsBQCABQX8gAkEPcXRBf3M7AQggAUEQaiAHEA1BACEMQQAhDSAFIQdBAAwDCyABQQE6AEdBAiENDAELIAogAkHohsAAEDYAC0EAIQwgBSEHQQALIQIgBkE4akEANgIAIAZCADcDMCAGQcgAakEANgIAIAZCADcDQCAGQfwAakEANgIAIAZB9ABqQQA2AgAgBkHsAGpBADYCACAGQeQAakEANgIAIAZB3ABqQQA2AgAgBkHYicAANgJ4IAZB2InAADYCcCAGQdiJwAA2AmggBkHYicAANgJgIAZB2InAADYCWCAGQQA2AlQgBkHYicAANgJQAkACfwJAIAJFDQAgAUEQaiEUIAFBKGohFSAGQcgAaiEXIAZBPmohFgJAAkACQAJAAkACQAJAAkADQAJAAkAgBw0AIAZBEGogFRBCIAYoAhRFDQBBACEHDAELIAEgBkEoahAYQQAhCyAXIRBBACEOAkACQAJAAkACQAJAAkACQAJAA0AgAS0ACyICIAEtAAoiCEkNASABIAIgCGs6AAsgBkEwaiALaiIKIAEvAQgiAiABKQMAIAitiSIYp3E7AQAgASAYIAKtQn+FQoCAfISDNwMAIA4EQCAOQX9qQQVLDQUgByALIBZqLwEAIgJJDQYgECAENgIAIBBBBGogAjYCACAHIAJrIQcgAiAEaiEECyABLwFAIgIgDmpB//8DcSABLwEIIAEtAEhrQf//A3FGDQIgCi8BACIKIAEvAUJGIAogAk9yDQIgCiABLwFERg0CIAEoAiQiAiAKTQ0GIAcgASgCHCAKQQF0ai8BACICSQ0CIA5BAWohDiALIBZqQQJqIAI7AQAgEEEIaiEQIAtBAmoiC0EMRw0AC0EGIQ5BBSEQIAYvATohCAwHCyAODQFBASANIBIbIQ0MCAsgDkEBaiEOCyAOQQdPDQMgBkEwaiAOQX9qIhBBAXRqLwEAIQggEA0EIAwhCgwFCyAOQX9qQQZBmITAABA2AAtB6IHAAEEjQfiCwAAQSAALIAogAkGohMAAEDYACyAOQQZBuITAABA3AAsgBkHQAGohAiAGQTBqIQsDQCAGQQhqIBQgFCALLwEAIgogAigCACACQQRqKAIAECkgDBAjIAYtAAohESAGLwEIIRMgASABLwFAQQFqOwFAIAtBAmohCyACQQhqIQIgCiEMIBBBf2oiEA0ACyAOQQN0IAZqQUBrIgIoAgQhCSACQQA2AgQgAigCACEPIAJBiIPAADYCAAsgCCIMIAEvAUJGDQMCQCABLwFEIAhHBEAgCCABLwFAIgJNDQFBAyENQQAMDQsgAUEBOgBHQQIhDUEADAwLAn8gBwJ/AkACQCACIAhHBEAgASgCJCICIAhLDQEgCCACQdiEwAAQNgALIAEoAiQiAiAKQf//A3EiCE0NCCAHIAEoAhwgCEEBdGovAQBBAWpB//8DcSICTw0BIA8EQCABKAIsIgIgCUkNCiABKAIoIA8gCRBLGiABIAk2AjAgASAJNgI0C0EAIQ8gFRAzIQtBAQwDCyAHIAEoAhwgCEEBdGovAQAiAkkEQEEAIQ8gFSAUIAwQJiELQQEMAwsgFCAMIAQgAhApIQsgAgwBCyAPRQRAIAEoAiwiCCABKAI0IglJDQkgFSgCACEPCyAJRQ0EIAkgAksNCSAPLQAAIQsgBCAPIAkQSyACIAlGDQogCWogCzoAACACCyIJayEHIAkgBCIPaiEEQQALIAEoAhhB/x9NBEAgBiAUIAsgChAjIAEvAUAhECAGLQACIREgBi8BACETAkAgAS0ACiIIQQtLDQAgECABLwEIIgogAS0ASGtB//8DcUcNACABIAhBAWo6AAogASAKQQF0QQFyOwEICyABIBBBAWo7AUALQQAhEkUNAQsLQgEhGSAPRQ0KIAEoAiwiAiAJSQ0HIAEoAiggDyAJEEsaIAEgCTYCMCABIAk2AjQMCgtBAEEAQYiFwAAQNgALIAEQNAwGCyAIIAJByITAABA2AAsgCSACQeiEwAAQNwALIAkgCEH4hMAAEDcACyAJIAJBmIXAABA3AAtBAEEAQaiFwAAQNgALIAkgAkG4hcAAEDcAC0EACyEMQQAhE0EAIRELIAAgBSAHazYCBCAAIAMgBigCLCICazYCACAAQQAgDSADIAJLGyANIA1BAUYbOgAIIAEgDK1C//8Dg0IQhiAZhCATrUL//wODQiCGhCARrUL/AYNCMIaENwM4CyAGQYABaiQAC9YQAhF/An4jAEGAAWsiBiQAIAYgAzYCLCAGIAI2AigCQAJ/AkACQAJAAkAgAS0AR0UEQCABKQM4IRcgAUIANwM4An8gF0L//wODUEUEQCAXQjCIpyERIBdCEIinIQwgF0IgiKcMAQsgBkEgaiABIAZBKGoQLiAGLwEgRQRAQQEhDQwGC0EDIQ0gBi8BIiIMIgIgAS8BQE8NBSACIAEvAUJGDQIgAS8BRCAMQf//A3FGDQMgAUEYaigCAEUNBSABQShqIAFBEGoiByAMECYaIAEoAhgiAiAMQf//A3EiCU0NBCAHKAIAIAlBAnRqIgItAAIhESACLwEACyESIAZBGGogAUEoahBCIAYoAhghAgJAIAYoAhwiByAFTQRAIAcNAUEBIQhBASENIAUhB0EBDAcLIAVFBEBBASENQQAhB0EBDAcLIAQgAiAFEEsaIAFBMGoiAiACKAIAIAVqNgIAQYiDwAAhBEEAIQ1BACEHQQEMBgsgBCACIAcQSyABQTBqIgIgAigCACAHajYCACAHaiEEIAUgB2shB0EAIQ1BAQwFCyAAQQI6AAggAEIANwIADAULIAEgAS0ARiIHQQFqIgI6AAogAUEBIAdBD3F0QQJqOwFAIAFBfyACQQ9xdEF/czsBCCABQRBqIAcQDUEAIQxBACENIAUhB0EADAMLIAFBAToAR0ECIQ0MAQsgCSACQeiGwAAQNgALQQAhDCAFIQdBAAshAiAGQThqQQA2AgAgBkIANwMwIAZByABqQQA2AgAgBkIANwNAIAZB/ABqQQA2AgAgBkH0AGpBADYCACAGQewAakEANgIAIAZB5ABqQQA2AgAgBkHcAGpBADYCACAGQdiJwAA2AnggBkHYicAANgJwIAZB2InAADYCaCAGQdiJwAA2AmAgBkHYicAANgJYIAZBADYCVCAGQdiJwAA2AlACQAJ/AkAgAkUNACABQRBqIRMgAUEoaiEUIAZByABqIRYgBkE+aiEVAkACQAJAAkACQAJAAkACQANAAkACQCAHDQAgBkEQaiAUEEIgBigCFEUNAEEAIQcMAQsgASAGQShqECBBACELIBYhEEEAIQ4CQAJAAkACQAJAAkACQAJAAkADQCABLQALIgIgAS0ACiIJSQ0BIAEgAiAJazoACyABIAEpAwAiFyAJrUI/g4g3AwAgBkEwaiALaiIJIAEvAQggF6dxOwEAIA4EQCAOQX9qQQVLDQUgByALIBVqLwEAIgJJDQYgECAENgIAIBBBBGogAjYCACAHIAJrIQcgAiAEaiEECyABLwFAIgIgDmpB//8DcSABLwEIIAEtAEhrQf//A3FGDQIgCS8BACIJIAEvAUJGIAkgAk9yDQIgCSABLwFERg0CIAEoAiQiAiAJTQ0GIAcgASgCHCAJQQF0ai8BACICSQ0CIA5BAWohDiALIBVqQQJqIAI7AQAgEEEIaiEQIAtBAmoiC0EMRw0AC0EGIQ5BBSEQIAYvATohCAwHCyAODQFBASANIAgbIQ0MCAsgDkEBaiEOCyAOQQdPDQMgBkEwaiAOQX9qIhBBAXRqLwEAIQggEA0EIAwhCQwFCyAOQX9qQQZBmITAABA2AAtB6IHAAEEjQfiCwAAQSAALIAkgAkGohMAAEDYACyAOQQZBuITAABA3AAsgBkHQAGohAiAGQTBqIQsDQCAGQQhqIBMgEyALLwEAIgkgAigCACACQQRqKAIAECkgDBAjIAYtAAohESAGLwEIIRIgASABLwFAQQFqOwFAIAtBAmohCyACQQhqIQIgCSEMIBBBf2oiEA0ACyAOQQN0IAZqQUBrIgIoAgQhCiACQQA2AgQgAigCACEPIAJBiIPAADYCAAsgCCIMIAEvAUJGDQMCQCABLwFEIAhHBEAgCCABLwFAIgJNDQFBAyENQQAMDQsgAUEBOgBHQQIhDUEADAwLAn8gBwJ/AkACQCACIAhHBEAgASgCJCICIAhLDQEgCCACQdiEwAAQNgALIAEoAiQiAiAJQf//A3EiCE0NCCAHIAEoAhwgCEEBdGovAQBBAWpB//8DcSICTw0BIA8EQCABKAIsIgIgCkkNCiABKAIoIA8gChBLGiABIAo2AjAgASAKNgI0C0EAIQ8gFBAzIQtBAQwDCyAHIAEoAhwgCEEBdGovAQAiAkkEQEEAIQ8gFCATIAwQJiELQQEMAwsgEyAMIAQgAhApIQsgAgwBCyAPRQRAIAEoAiwiCCABKAI0IgpJDQkgFCgCACEPCyAKRQ0EIAogAksNCSAPLQAAIQsgBCAPIAoQSyACIApGDQogCmogCzoAACACCyIKayEHIAogBCIPaiEEQQALIAEoAhhB/x9NBEAgBiATIAsgCRAjIAEvAUAhECAGLQACIREgBi8BACESAkAgAS0ACiIIQQtLDQAgECABLwEIIgkgAS0ASGtB//8DcUcNACABIAhBAWo6AAogASAJQQF0QQFyOwEICyABIBBBAWo7AUALQQAhCEUNAQsLQgEhGCAPRQ0KIAEoAiwiAiAKSQ0HIAEoAiggDyAKEEsaIAEgCjYCMCABIAo2AjQMCgtBAEEAQYiFwAAQNgALIAEQNAwGCyAIIAJByITAABA2AAsgCiACQeiEwAAQNwALIAogCEH4hMAAEDcACyAKIAJBmIXAABA3AAtBAEEAQaiFwAAQNgALIAogAkG4hcAAEDcAC0EACyEMQQAhEkEAIRELIAAgBSAHazYCBCAAIAMgBigCLCICazYCACAAQQAgDSADIAJLGyANIA1BAUYbOgAIIAEgDK1C//8Dg0IQhiAYhCASrUL//wODQiCGhCARrUL/AYNCMIaENwM4CyAGQYABaiQAC6oIAQZ/IwBB8ABrIgUkACAFIAM2AgwgBSACNgIIQQEhByABIQYCQCABQYECSQ0AQQAgAWshCUGAAiEIA0ACQCAIIAFPDQBBACEHIAAgCGosAABBv39MDQAgCCEGDAILIAhBf2ohBkEAIQcgCEEBRg0BIAggCWogBiEIQQFHDQALCyAFIAY2AhQgBSAANgIQIAVBAEEFIAcbNgIcIAVB8IvAAEHAksAAIAcbNgIYAkACfwJAAkAgAiABSyIHIAMgAUtyRQRAIAIgA0sNAQJAIAJFIAEgAkZyRQRAIAEgAk0NASAAIAJqLAAAQUBIDQELIAMhAgsgBSACNgIgIAJBACABIAJHG0UEQCACIQcMAwsgAUEBaiEDA0ACQCACIAFPDQAgACACaiwAAEFASA0AIAIhByAFQSRqDAULIAJBf2ohByACQQFGDQMgAiADRiAHIQJFDQALDAILIAUgAiADIAcbNgIoIAVBxABqQQM2AgAgBUHcAGpBHTYCACAFQdQAakEdNgIAIAVCAzcCNCAFQeiSwAA2AjAgBUEcNgJMIAUgBUHIAGo2AkAgBSAFQRhqNgJYIAUgBUEQajYCUCAFIAVBKGo2AkgMAwsgBUHkAGpBHTYCACAFQdwAakEdNgIAIAVB1ABqQRw2AgAgBUHEAGpBBDYCACAFQgQ3AjQgBUGkk8AANgIwIAVBHDYCTCAFIAVByABqNgJAIAUgBUEYajYCYCAFIAVBEGo2AlggBSAFQQxqNgJQIAUgBUEIajYCSAwCCyAFQSRqCyEIAkAgASAHRg0AQQEhAwJAAkACQCAAIAdqIgYsAAAiAkF/TARAQQAhAyAAIAFqIgEhACABIAZBAWpHBEAgBi0AAUE/cSEDIAZBAmohAAsgAkEfcSEJIAJB/wFxQd8BSw0BIAMgCUEGdHIhAgwCCyAFIAJB/wFxNgIkIAVBKGohAQwCC0EAIQogASEGIAAgAUcEQCAALQAAQT9xIQogAEEBaiEGCyAKIANBBnRyIQAgAkH/AXFB8AFJBEAgACAJQQx0ciECDAELQQAhAiABIAZHBH8gBi0AAEE/cQVBAAsgCUESdEGAgPAAcSAAQQZ0cnIiAkGAgMQARg0CCyAFIAI2AiRBASEDIAVBKGohASACQYABSQ0AQQIhAyACQYAQSQ0AQQNBBCACQYCABEkbIQMLIAUgBzYCKCAFIAMgB2o2AiwgBUHEAGpBBTYCACAFQewAakEdNgIAIAVB5ABqQR02AgAgBUHcAGpBHjYCACAFQdQAakEfNgIAIAVCBTcCNCAFQfiTwAA2AjAgBSABNgJYIAUgCDYCUCAFQRw2AkwgBSAFQcgAajYCQCAFIAVBGGo2AmggBSAFQRBqNgJgIAUgBUEgajYCSAwBC0H8i8AAQSsgBBBIAAsgBUEwaiAEEFEAC9IIAQV/IABBeGoiASAAQXxqKAIAIgNBeHEiAGohAgJAAkAgA0EBcQ0AIANBA3FFDQEgASgCACIDIABqIQAgASADayIBQaSqwAAoAgBGBEAgAigCBEEDcUEDRw0BQZyqwAAgADYCACACIAIoAgRBfnE2AgQgASAAQQFyNgIEIAAgAWogADYCAA8LIAEgAxARCwJAIAJBBGoiBCgCACIDQQJxBEAgBCADQX5xNgIAIAEgAEEBcjYCBCAAIAFqIAA2AgAMAQsCQCACQaiqwAAoAgBHBEBBpKrAACgCACACRg0BIAIgA0F4cSICEBEgASAAIAJqIgBBAXI2AgQgACABaiAANgIAIAFBpKrAACgCAEcNAkGcqsAAIAA2AgAPC0GoqsAAIAE2AgBBoKrAAEGgqsAAKAIAIABqIgA2AgAgASAAQQFyNgIEQaSqwAAoAgAgAUYEQEGcqsAAQQA2AgBBpKrAAEEANgIAC0HEqsAAKAIAIgIgAE8NAkGoqsAAKAIAIgBFDQICQEGgqsAAKAIAIgNBKUkNAEG0qsAAIQEDQCABKAIAIgQgAE0EQCAEIAEoAgRqIABLDQILIAEoAggiAQ0ACwtBzKrAAAJ/Qf8fQbyqwAAoAgAiAEUNABpBACEBA0AgAUEBaiEBIAAoAggiAA0ACyABQf8fIAFB/x9LGws2AgAgAyACTQ0CQcSqwABBfzYCAA8LQaSqwAAgATYCAEGcqsAAQZyqwAAoAgAgAGoiADYCACABIABBAXI2AgQgACABaiAANgIADwtBzKrAAAJ/AkAgAEGAAk8EQCABQgA3AhAgAUEcagJ/QQAgAEEIdiICRQ0AGkEfIABB////B0sNABogAEEGIAJnIgJrQR9xdkEBcSACQQF0a0E+agsiAzYCACADQQJ0QZypwABqIQICQAJAAkACQAJAQZCnwAAoAgAiBEEBIANBH3F0IgVxBEAgAigCACICQQRqKAIAQXhxIABHDQEgAiEDDAILQZCnwAAgBCAFcjYCACACIAE2AgAMAwsgAEEAQRkgA0EBdmtBH3EgA0EfRht0IQQDQCACIARBHXZBBHFqQRBqIgUoAgAiA0UNAiAEQQF0IQQgAyICQQRqKAIAQXhxIABHDQALCyADKAIIIgAgATYCDCADIAE2AgggAUEYakEANgIAIAEgAzYCDCABIAA2AggMAgsgBSABNgIACyABQRhqIAI2AgAgASABNgIMIAEgATYCCAtBzKrAAEHMqsAAKAIAQX9qIgA2AgAgAA0DQbyqwAAoAgAiAA0BQf8fDAILIABBA3YiAkEDdEGUp8AAaiEAAn9BjKfAACgCACIDQQEgAnQiAnEEQCAAKAIIDAELQYynwAAgAiADcjYCACAACyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCA8LQQAhAQNAIAFBAWohASAAKAIIIgANAAsgAUH/HyABQf8fSxsLNgIACwuWBwEKfyAAKAIQIQMCQAJAAkAgACgCCCIMQQFHBEAgA0EBRg0BDAMLIANBAUcNAQsgASACaiEDAkACQCAAQRRqKAIAIghFBEAgASEEDAELIAEhBANAIAMgBCIHRg0CIAdBAWohBAJAIAcsAAAiBkF/Sg0AIAZB/wFxIQkCfyADIARGBEBBACEKIAMMAQsgBy0AAUE/cSEKIAdBAmoiBAshBiAJQeABSQ0AAn8gAyAGRgRAQQAhCyADDAELIAYtAABBP3EhCyAGQQFqIgQLIQYgCUHwAUkNACADIAZGBH9BAAUgBkEBaiEEIAYtAABBP3ELIAlBEnRBgIDwAHEgCkEMdHIgC0EGdHJyQYCAxABGDQMLIAQgB2sgBWohBSAIQX9qIggNAAsLIAMgBEYNAAJAIAQsAAAiB0F/Sg0AAn8gAyAEQQFqRgRAIAMhCEEADAELIARBAmohCCAELQABQT9xQQZ0CyAHQf8BcUHgAUkNAAJ/IAMgCEYEQCADIQZBAAwBCyAIQQFqIQYgCC0AAEE/cQsgB0H/AXFB8AFJDQAgB0H/AXEhB3IhBCADIAZGBH9BAAUgBi0AAEE/cQsgB0ESdEGAgPAAcSAEQQZ0cnJBgIDEAEYNAQsCQCAFRSACIAVGckUEQEEAIQMgBSACTw0BIAEgBWosAABBQEgNAQsgASEDCyAFIAIgAxshAiADIAEgAxshAQsgDEEBRg0ADAELAkAgAgRAQQAhBCACIQUgASEDA0AgBCADLQAAQcABcUGAAUZqIQQgA0EBaiEDIAVBf2oiBQ0ACyACIARrIAAoAgwiBk8NAkEAIQQgAiEFIAEhAwNAIAQgAy0AAEHAAXFBgAFGaiEEIANBAWohAyAFQX9qIgUNAAsMAQtBACEEIAAoAgwiBg0ADAELQQAhAyAEIAJrIAZqIgQhBQJAAkACQEEAIAAtACAiBiAGQQNGG0EDcUEBaw4DAQABAgsgBEEBdiEDIARBAWpBAXYhBQwBC0EAIQUgBCEDCyADQQFqIQMCQANAIANBf2oiAwRAIAAoAhggACgCBCAAKAIcKAIQEQAARQ0BDAILCyAAKAIEIQQgACgCGCABIAIgACgCHCgCDBEBAA0AIAVBAWohAyAAKAIcIQEgACgCGCEAA0AgA0F/aiIDRQRAQQAPCyAAIAQgASgCEBEAAEUNAAsLQQEPCyAAKAIYIAEgAiAAQRxqKAIAKAIMEQEAC7sGAQR/IAAgAWohAgJAAkAgAEEEaigCACIDQQFxDQAgA0EDcUUNASAAKAIAIgMgAWohASAAIANrIgBBpKrAACgCAEYEQCACKAIEQQNxQQNHDQFBnKrAACABNgIAIAIgAigCBEF+cTYCBCAAIAFBAXI2AgQgAiABNgIADwsgACADEBELAkAgAkEEaigCACIDQQJxBEAgAkEEaiADQX5xNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgAMAQsCQCACQaiqwAAoAgBHBEBBpKrAACgCACACRg0BIAIgA0F4cSICEBEgACABIAJqIgFBAXI2AgQgACABaiABNgIAIABBpKrAACgCAEcNAkGcqsAAIAE2AgAPC0GoqsAAIAA2AgBBoKrAAEGgqsAAKAIAIAFqIgE2AgAgACABQQFyNgIEIABBpKrAACgCAEcNAkGcqsAAQQA2AgBBpKrAAEEANgIADwtBpKrAACAANgIAQZyqwABBnKrAACgCACABaiIBNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgAPCyABQYACTwRAIABCADcCECAAQRxqAn9BACABQQh2IgJFDQAaQR8gAUH///8HSw0AGiABQQYgAmciAmtBH3F2QQFxIAJBAXRrQT5qCyIDNgIAIANBAnRBnKnAAGohAgJAAkACQAJAQZCnwAAoAgAiBEEBIANBH3F0IgVxBEAgAigCACICQQRqKAIAQXhxIAFHDQEgAiEDDAILQZCnwAAgBCAFcjYCACACIAA2AgAMAwsgAUEAQRkgA0EBdmtBH3EgA0EfRht0IQQDQCACIARBHXZBBHFqQRBqIgUoAgAiA0UNAiAEQQF0IQQgAyICQQRqKAIAQXhxIAFHDQALCyADKAIIIgEgADYCDCADIAA2AgggAEEYakEANgIAIAAgAzYCDCAAIAE2AggPCyAFIAA2AgALIABBGGogAjYCACAAIAA2AgwgACAANgIIDwsgAUEDdiICQQN0QZSnwABqIQECf0GMp8AAKAIAIgNBASACdCICcQRAIAEoAggMAQtBjKfAACACIANyNgIAIAELIQIgASAANgIIIAIgADYCDCAAIAE2AgwgACACNgIICwuqBgEHfwJAAkACQAJAAkACQAJAAkAgAEGAgARPBEAgAEGAgAhJDQEgAEG12XNqQbXbK0kgAEHii3RqQeILSXIgAEGfqHRqQZ8YSSAAQd7idGpBDklyciAAQf7//wBxQZ7wCkYgAEGisnVqQSJJciAAQcuRdWpBC0lycg0CIABB8IM4SQ8LIABBgP4DcUEIdiEGQeiUwAAhASAAQf8BcSEHA0ACQCABQQJqIQUgAiABLQABIgRqIQMgBiABLQAAIgFHBEAgASAGSw0BIAMhAiAFIgFBupXAAEcNAgwBCyADIAJJDQQgA0GiAksNBSACQbqVwABqIQECQANAIARFDQEgBEF/aiEEIAEtAAAgAUEBaiEBIAdHDQALQQAhBAwECyADIQIgBSIBQbqVwABHDQELCyAAQf//A3EhA0Hcl8AAIQFBASEEA0AgAUEBaiEAAn8gACABLQAAIgJBGHRBGHUiBUEATg0AGiAAQZGawABGDQYgAS0AASAFQf8AcUEIdHIhAiABQQJqCyEBIAMgAmsiA0EASA0CIARBAXMhBCABQZGawABHDQALDAELIABBgP4DcUEIdiEGQZGawAAhASAAQf8BcSEHA0ACQCABQQJqIQUgAiABLQABIgRqIQMgBiABLQAAIgFHBEAgASAGSw0BIAMhAiAFIgFB3ZrAAEcNAgwBCyADIAJJDQYgA0GvAUsNByACQd2awABqIQECQANAIARFDQEgBEF/aiEEIAEtAAAgAUEBaiEBIAdHDQALQQAhBAwDCyADIQIgBSIBQd2awABHDQELCyAAQf//A3EhA0GMnMAAIQFBASEEA0AgAUEBaiEAAn8gACABLQAAIgJBGHRBGHUiBUEATg0AGiAAQa+fwABGDQggAS0AASAFQf8AcUEIdHIhAiABQQJqCyEBIAMgAmsiA0EASA0BIARBAXMhBCABQa+fwABHDQALCyAEQQFxDwsgAiADQciUwAAQOAALIANBogJByJTAABA3AAtB/IvAAEErQdiUwAAQSAALIAIgA0HIlMAAEDgACyADQa8BQciUwAAQNwALQfyLwABBK0HYlMAAEEgAC7EFAQd/QStBgIDEACAAKAIAIglBAXEiBRshCiAEIAVqIQgCQCAJQQRxRQRAQQAhAQwBCyACBEAgAiEGIAEhBQNAIAcgBS0AAEHAAXFBgAFGaiEHIAVBAWohBSAGQX9qIgYNAAsLIAIgCGogB2shCAsCQAJAIAAoAghBAUcEQCAAIAogASACEEYNAQwCCyAAQQxqKAIAIgYgCE0EQCAAIAogASACEEYNAQwCCwJAAkACQAJAIAlBCHEEQCAAKAIEIQkgAEEwNgIEIAAtACAhCyAAQQE6ACAgACAKIAEgAhBGDQVBACEFIAYgCGsiASECQQEgAC0AICIGIAZBA0YbQQNxQQFrDgMCAQIDC0EAIQUgBiAIayIGIQgCQAJAAkBBASAALQAgIgcgB0EDRhtBA3FBAWsOAwEAAQILIAZBAXYhBSAGQQFqQQF2IQgMAQtBACEIIAYhBQsgBUEBaiEFA0AgBUF/aiIFRQ0EIAAoAhggACgCBCAAKAIcKAIQEQAARQ0AC0EBDwsgAUEBdiEFIAFBAWpBAXYhAgwBC0EAIQIgASEFCyAFQQFqIQUCQANAIAVBf2oiBUUNASAAKAIYIAAoAgQgACgCHCgCEBEAAEUNAAtBAQ8LIAAoAgQhASAAKAIYIAMgBCAAKAIcKAIMEQEADQEgAkEBaiEHIAAoAhwhAiAAKAIYIQMDQCAHQX9qIgcEQCADIAEgAigCEBEAAEUNAQwDCwsgACALOgAgIAAgCTYCBEEADwsgACgCBCEFIAAgCiABIAIQRg0AIAAoAhggAyAEIAAoAhwoAgwRAQANACAIQQFqIQcgACgCHCEBIAAoAhghAANAIAdBf2oiB0UEQEEADwsgACAFIAEoAhARAABFDQALC0EBDwsgACgCGCADIAQgAEEcaigCACgCDBEBAAv0BQEKfyMAQTBrIgMkACADQSRqIAE2AgAgA0EDOgAoIANCgICAgIAENwMIIAMgADYCICADQQA2AhggA0EANgIQAn8CQAJAAkAgAigCCCIEBEAgAigCACEGIAIoAgQiCCACQQxqKAIAIgUgBSAISxsiBUUNASAAIAYoAgAgBigCBCABKAIMEQEADQMgBkEMaiEAIAIoAhQhByACKAIQIQogBSEJA0AgAyAEQRxqLQAAOgAoIAMgBEEEaikCAEIgiTcDCCAEQRhqKAIAIQJBACELQQAhAQJAAkACQCAEQRRqKAIAQQFrDgIAAgELIAIgB08EQCACIAdBtJDAABA2AAsgAkEDdCAKaiIMKAIEQSBHDQEgDCgCACgCACECC0EBIQELIAMgAjYCFCADIAE2AhAgBEEQaigCACECAkACQAJAIARBDGooAgBBAWsOAgACAQsgAiAHTwRAIAIgB0G0kMAAEDYACyACQQN0IApqIgEoAgRBIEcNASABKAIAKAIAIQILQQEhCwsgAyACNgIcIAMgCzYCGCAEKAIAIgEgB0kEQCAKIAFBA3RqIgEoAgAgA0EIaiABKAIEEQAADQUgCUF/aiIJRQ0EIARBIGohBCAAQXxqIQEgACgCACECIABBCGohACADKAIgIAEoAgAgAiADKAIkKAIMEQEARQ0BDAULCyABIAdBpJDAABA2AAsgAigCACEGIAIoAgQiCCACQRRqKAIAIgUgBSAISxsiBUUNACACKAIQIQQgACAGKAIAIAYoAgQgASgCDBEBAA0CIAZBDGohACAFIQIDQCAEKAIAIANBCGogBEEEaigCABEAAA0DIAJBf2oiAkUNAiAEQQhqIQQgAEF8aiEBIAAoAgAhCSAAQQhqIQAgAygCICABKAIAIAkgAygCJCgCDBEBAEUNAAsMAgtBACEFCyAIIAVLBEAgAygCICAGIAVBA3RqIgAoAgAgACgCBCADKAIkKAIMEQEADQELQQAMAQtBAQsgA0EwaiQAC40FAQd/AkAgAUHM/3tLDQBBECABQQtqQXhxIAFBC0kbIQIgAEF8aiIFKAIAIgZBeHEhAwJAAkACQAJAAkACQCAGQQNxBEAgAEF4aiIHIANqIQggAyACTw0BQaiqwAAoAgAgCEYNAkGkqsAAKAIAIAhGDQMgCEEEaigCACIGQQJxDQYgBkF4cSIGIANqIgMgAk8NBAwGCyACQYACSSADIAJBBHJJciADIAJrQYGACE9yDQUMBAsgAyACayIBQRBJDQMgBSACIAZBAXFyQQJyNgIAIAIgB2oiBCABQQNyNgIEIAggCCgCBEEBcjYCBCAEIAEQBgwDC0GgqsAAKAIAIANqIgMgAk0NAyAFIAIgBkEBcXJBAnI2AgAgAiAHaiIBIAMgAmsiBEEBcjYCBEGgqsAAIAQ2AgBBqKrAACABNgIADAILQZyqwAAoAgAgA2oiAyACSQ0CAkAgAyACayIBQQ9NBEAgBSAGQQFxIANyQQJyNgIAIAMgB2oiASABKAIEQQFyNgIEQQAhAQwBCyAFIAIgBkEBcXJBAnI2AgAgAiAHaiIEIAFBAXI2AgQgAyAHaiICIAE2AgAgAiACKAIEQX5xNgIEC0GkqsAAIAQ2AgBBnKrAACABNgIADAELIAggBhARIAMgAmsiAUEQTwRAIAUgAiAFKAIAQQFxckECcjYCACACIAdqIgQgAUEDcjYCBCADIAdqIgIgAigCBEEBcjYCBCAEIAEQBgwBCyAFIAMgBSgCAEEBcXJBAnI2AgAgAyAHaiIBIAEoAgRBAXI2AgQLIAAhBAwBCyABEAAiAkUNACACIAAgAUF8QXggBSgCACIEQQNxGyAEQXhxaiIEIAQgAUsbEEsgABAEDwsgBAv0BAEJfyMAQTBrIgQkAAJAAn8gAgRAIARBKGohCQNAAkAgACgCCC0AAEUNACAAKAIAQciNwABBBCAAKAIEKAIMEQEARQ0AQQEMAwsgBEEKNgIoIARCioCAgBA3AyAgBCACNgIcQQAhBSAEQQA2AhggBCACNgIUIAQgATYCEEEBIQcgASEGIAIiAyEIAn8CQAJAA0AgBSAGaiEGIAQgB2pBJ2otAAAhCgJAAkACQCADQQdNBEAgA0UNASAIIAVrIQtBACEDA0AgAyAGai0AACAKRg0EIAsgA0EBaiIDRw0ACwwBCyAEQQhqIAogBiADEBQgBCgCCEEBRg0BIAQoAhwhCAsgBCAINgIYDAQLIAQoAgwhAyAEKAIkIQcgBCgCGCEFCyAEIAMgBWpBAWoiBTYCGAJAAkAgBSAHSQRAIAQoAhQhAwwBCyAEKAIUIgMgBUkNACAHQQVPDQMgBSAHayIGIAQoAhBqIgggCUYNASAIIAkgBxBERQ0BCyAEKAIcIgggBUkgAyAISXINAyAIIAVrIQMgBCgCECEGDAELCyAAKAIIQQE6AAAgBkEBagwCCyAHQQRBsJLAABA3AAsgACgCCEEAOgAAIAILIQMgACgCBCEGIAAoAgAhBQJAAkAgA0UgAiADRnJFBEAgAiADSwRAIAEgA2oiBywAAEG/f0oNAgsgASACQQAgA0HMjcAAEAMACyAFIAEgAyAGKAIMEQEARQ0BQQEMBAtBASAFIAEgAyAGKAIMEQEADQMaIAcsAABBv39MDQQLIAEgA2ohASACIANrIgINAAsLQQALIARBMGokAA8LIAEgAiADIAJB3I3AABADAAu6AwEEfyMAQRBrIgIkACAAKAIAIQQCQAJAAkACfwJAAkAgAUGAAU8EQCACQQA2AgwgAUGAEEkNASACQQxqIQAgAUGAgARJBEAgAiABQT9xQYABcjoADiACIAFBDHZB4AFyOgAMIAIgAUEGdkE/cUGAAXI6AA1BAyEBDAYLIAIgAUE/cUGAAXI6AA8gAiABQRJ2QfABcjoADCACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA1BBCEBDAULIAQoAggiACAEQQRqKAIARwRAIAQoAgAhBQwECwJAIABBAWoiAyAASQ0AIABBAXQiBSADIAUgA0sbIgNBCCADQQhLGyEDIAAEQCADQQBIDQEgBCgCACIFRQ0DIAUgAEEBIAMQVQwECyADQQBODQILEF0ACyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEAQQIhAQwDCyADQQEQWQsiBQRAIAQgBTYCACAEQQRqIAM2AgAgBCgCCCEADAELIANBARBjAAsgACAFaiABOgAAIAQgBCgCCEEBajYCCAwBCyAEIAAgACABahAfCyACQRBqJABBAAu0AwEEfyAAQQA2AgggAEEUakEANgIAIAFBD3EhBCAAQQxqIQJBACEBA0AgACgCBCABRgRAIAAgARA8IAAoAgghAQsgACgCACABQQJ0aiIBIAM6AAIgAUEAOwEAIAAgACgCCEEBajYCCCAAKAIUIgEgACgCEEYEQCACIAEQOyAAKAIUIQELIAAoAgwgAUEBdGpBATsBACAAIAAoAhRBAWo2AhQgACgCCCEBIANBAWoiBSEDIAVB//8DcSAEdkUNAAsgACgCBCABRgRAIAAgARA8IAAoAgghAQsgACgCACABQQJ0aiIBQQA6AAIgAUEAOwEAIAAgACgCCEEBajYCCCAAKAIUIgEgACgCEEYEQCACIAEQOyAAKAIUIQELIAAoAgwgAUEBdGpBADsBACAAIAAoAhRBAWo2AhQgACgCCCIBIAAoAgRGBEAgACABEDwgACgCCCEBCyAAKAIAIAFBAnRqIgFBADoAAiABQQA7AQAgACAAKAIIQQFqNgIIIAAoAhQiASAAKAIQRgRAIAIgARA7IAAoAhQhAQsgACgCDCABQQF0akEAOwEAIAAgACgCFEEBajYCFAv+AwIDfwF+IAEoAhhBJyABQRxqKAIAKAIQEQAARQRAQfQAIQNBAiECAkACQAJAAkACQAJAIAAoAgAiAEF3ag4fBQEDAwADAwMDAwMDAwMDAwMDAwMDAwMDAwQDAwMDBAILQfIAIQMMBAtB7gAhAwwDCyAAQdwARg0BCwJ/An4CQCAAEA9FBEAgABAHRQ0BQQEMAwsgAEEBcmdBAnZBB3OtQoCAgIDQAIQMAQsgAEEBcmdBAnZBB3OtQoCAgIDQAIQLIQVBAwshAiAAIQMMAQsgACEDCwNAIAIhBEHcACEAQQEhAgJAAn4CQAJAAkACQCAEQQFrDgMBBQACCwJAAkACQAJAIAVCIIinQf8BcUEBaw4FAwIBAAYFC0H1ACEAIAVC/////49gg0KAgICAMIQMBgtB+wAhACAFQv////+PYINCgICAgCCEDAULQTBB1wAgAyAFpyIEQQJ0QRxxdkEPcSIAQQpJGyAAaiEAIAVCf3xC/////w+DIAVCgICAgHCDhCAEDQQaIAVC/////49gg0KAgICAEIQMBAtB/QAhACAFQv////+PYIMMAwtBACECIAMhAAwDCyABKAIYQScgASgCHCgCEBEAAA8LIAVC/////49gg0KAgICAwACECyEFQQMhAgsgASgCGCAAIAEoAhwoAhARAABFDQALC0EBC6ADAQV/AkACQEEAQQ8gAEGkmgRJGyIBIAFBCGoiASABQQJ0QZigwABqKAIAQQt0IABBC3QiAksbIgEgAUEEaiIBIAFBAnRBmKDAAGooAgBBC3QgAksbIgEgAUECaiIBIAFBAnRBmKDAAGooAgBBC3QgAksbIgEgAUEBaiIBIAFBAnRBmKDAAGooAgBBC3QgAksbIgNBAnRBmKDAAGooAgBBC3QiASACRiABIAJJaiADaiICQR5NBEBBsQUhBCACQR5HBEAgAkECdEGcoMAAaigCAEEVdiEEC0EAIQEgAkF/aiIDIAJNBEAgA0EfTw0DIANBAnRBmKDAAGooAgBB////AHEhAQsCQCAEIAJBAnRBmKDAAGooAgBBFXYiA0EBakYNACAAIAFrIQIgA0GxBSADQbEFSxshBSAEQX9qIQFBACEAA0AgAyAFRg0DIAAgA0GUocAAai0AAGoiACACSw0BIAEgA0EBaiIDRw0ACyABIQMLIANBAXEPCyACQR9B2J/AABA2AAsgBUGxBUHon8AAEDYACyADQR9B+J/AABA2AAvoAgEFfwJAQc3/eyAAQRAgAEEQSxsiAGsgAU0NACAAQRAgAUELakF4cSABQQtJGyIEakEMahAAIgJFDQAgAkF4aiEBAkAgAEF/aiIDIAJxRQRAIAEhAAwBCyACQXxqIgUoAgAiBkF4cSACIANqQQAgAGtxQXhqIgIgACACaiACIAFrQRBLGyIAIAFrIgJrIQMgBkEDcQRAIAAgAyAAKAIEQQFxckECcjYCBCAAIANqIgMgAygCBEEBcjYCBCAFIAIgBSgCAEEBcXJBAnI2AgAgACAAKAIEQQFyNgIEIAEgAhAGDAELIAEoAgAhASAAIAM2AgQgACABIAJqNgIACwJAIABBBGooAgAiAUEDcUUNACABQXhxIgIgBEEQak0NACAAQQRqIAQgAUEBcXJBAnI2AgAgACAEaiIBIAIgBGsiBEEDcjYCBCAAIAJqIgIgAigCBEEBcjYCBCABIAQQBgsgAEEIaiEDCyADC4UDAQR/AkACQCABQYACTwRAIABBGGooAgAhBAJAAkAgACAAKAIMIgJGBEAgAEEUQRAgAEEUaiICKAIAIgMbaigCACIBDQFBACECDAILIAAoAggiASACNgIMIAIgATYCCAwBCyACIABBEGogAxshAwNAIAMhBSABIgJBFGoiAygCACIBRQRAIAJBEGohAyACKAIQIQELIAENAAsgBUEANgIACyAERQ0CIAAgAEEcaigCAEECdEGcqcAAaiIBKAIARwRAIARBEEEUIAQoAhAgAEYbaiACNgIAIAJFDQMMAgsgASACNgIAIAINAUGQp8AAQZCnwAAoAgBBfiAAKAIcd3E2AgAPCyAAQQxqKAIAIgIgAEEIaigCACIARwRAIAAgAjYCDCACIAA2AggPC0GMp8AAQYynwAAoAgBBfiABQQN2d3E2AgAMAQsgAiAENgIYIAAoAhAiAQRAIAIgATYCECABIAI2AhgLIABBFGooAgAiAEUNACACQRRqIAA2AgAgACACNgIYCwujAwIEfwJ+IwBBQGoiAiQAQQEhBAJAIAAtAAQNACAALQAFIQUgACgCACIDLQAAQQRxRQRAIAMoAhhB8Y3AAEHzjcAAIAUbQQJBAyAFGyADQRxqKAIAKAIMEQEADQEgACgCACIDKAIYQc6mwABBByADQRxqKAIAKAIMEQEADQEgACgCACIDKAIYQaeMwABBAiADQRxqKAIAKAIMEQEADQEgASAAKAIAQZSgwAAoAgARAAAhBAwBCyAFRQRAIAMoAhhB7I3AAEEDIANBHGooAgAoAgwRAQANASAAKAIAIQMLIAJBAToAFyACQTRqQbCNwAA2AgAgAiADKQIYNwMIIAIgAkEXajYCECADKQIIIQYgAykCECEHIAIgAy0AIDoAOCACIAc3AyggAiAGNwMgIAIgAykCADcDGCACIAJBCGo2AjAgAkEIakHOpsAAQQcQCw0AIAJBCGpBp4zAAEECEAsNACABIAJBGGpBlKDAACgCABEAAA0AIAIoAjBB743AAEECIAIoAjQoAgwRAQAhBAsgAEEBOgAFIAAgBDoABCACQUBrJAAL5gICBn8BfiMAQTBrIgQkACAEQRBqECogBCAEKAIUIgU2AhwgBCAEKAIQIgY2AhggBEEIaiADQQAQQCAEKQMIIQogAEEANgIIIAAgCjcCAAJAAkAgAwRAQQAhBkEAIQUDQCAAIAVBgCAQOiAAIAMgACgCBCIHIAcgA0sbEE8gBiACSw0CIAAoAgAhCCAAKAIIIgcgBUkNAyAEQSBqIARBGGoiCSgCACABIAZqIAIgBmsgBSAIaiAHIAVrIAkoAgQoAgwRCAAgBCgCJCAFaiEHIAQoAiAhCCAAKAIIIgUgB08EQCAAKAIAGiAAIAc2AgggByEFCyAELQAoQQJHBEAgBiAIaiEGIAUgA0kNAQsLIAQoAhghBiAEKAIcIQULIAYgBSgCABEDACAEKAIcIgAoAggaIAQoAhghASAAKAIEBEAgARAECyAEQTBqJAAPCyAGIAJByIHAABA5AAsgBSAHQdiBwAAQOQAL2AIBBX8CQAJAAkACQAJAIAJBA2pBfHEgAmsiBEUNACADIAQgBCADSxsiBUUNAEEAIQQgAUH/AXEhBgJAA0AgAiAEai0AACAGRg0BIAUgBEEBaiIERw0ACyAFIANBeGoiBE0NAgwDC0EBIQcMAwsgA0F4aiEEQQAhBQsgAUH/AXFBgYKECGwhBgNAIAIgBWoiB0EEaigCACAGcyIIQX9zIAhB//37d2pxIAcoAgAgBnMiB0F/cyAHQf/9+3dqcXJBgIGChHhxRQRAIAVBCGoiBSAETQ0BCwsgBSADSw0CC0EAIQYCf0EAIAMgBUYNABogAiAFaiECIAMgBWshBkEAIQQgAUH/AXEhAQJAA0AgAiAEai0AACABRg0BIAYgBEEBaiIERw0AC0EADAELIAQhBkEBCyEHIAUgBmohBAsgACAENgIEIAAgBzYCAA8LIAUgA0HokMAAEDkAC74CAgV/AX4jAEEwayIEJABBJyECAkAgAEKQzgBUBEAgACEHDAELA0AgBEEJaiACaiIDQXxqIAAgAEKQzgCAIgdCkM4Afn2nIgVB//8DcUHkAG4iBkEBdEGmjsAAai8AADsAACADQX5qIAUgBkHkAGxrQf//A3FBAXRBpo7AAGovAAA7AAAgAkF8aiECIABC/8HXL1YgByEADQALCyAHpyIDQeMASgRAIAJBfmoiAiAEQQlqaiAHpyIDIANB//8DcUHkAG4iA0HkAGxrQf//A3FBAXRBpo7AAGovAAA7AAALAkAgA0EKTgRAIAJBfmoiAiAEQQlqaiADQQF0QaaOwABqLwAAOwAADAELIAJBf2oiAiAEQQlqaiADQTBqOgAACyABQfCLwABBACAEQQlqIAJqQScgAmsQCCAEQTBqJAALowICBH8BfiMAQUBqIgQkAAJAAkACQCACIANqIgMgAk8EQCABKAIEIQUgBEEYakKBgICAEDcDACAEKAIcIgJBf2oiBiAEKAIYakEAIAJrIgdxrSAFQQF0IgUgAyAFIANLGyIDQQggA0EISxutfiIIQiCIpyACRXINASACaUEBRgRAIAinIAZqIAdxIQMMAwsgBEEwahAwAAsgBEEIaiADQQAQWiAAIAQpAwg3AgRBASECDAILQQAhAgsgBEEwaiABEE0gBEEgaiADIAIgBEEwahAlQQEhAiAEQShqKAIAIQMgBCgCJCEFIAQoAiBBAUcEQCABIAUgAxBaQQAhAgwBCyAEQRBqIAUgAxBaIAAgBCkDEDcCBAsgACACNgIAIARBQGskAAuuAgEIfyMAQTBrIgEkAEGAICECIAFBGGoQLyABKAIcIQQgASgCGCEFIAFBEGoQMiABKAIUIQYgASgCECEHIAFBCGpBgCBBARBAIAFBgCA2AiggASABKAIMIgg2AiQgASABKAIIIgM2AiAgCEGBIE8EQCABQSBqQYAgEEUgASgCICEDIAEoAighAgsgAEEAOwBHIABBADsBOCAAIAM2AiggACAFNgIQIABBCDoARiAAQQA6AAsgAEIANwMAIABBMGpCADcDACAAQSxqIAI2AgAgAEEkakEANgIAIABBIGogBjYCACAAQRxqIAc2AgAgAEEYakEANgIAIABBFGogBDYCACAAQQk6AAogAEGAAjsBQiAAQYECOwFEIABBggI7AUAgAEH/AzsBCCABQTBqJAALxwICBX8BfiMAQRBrIgMkACAALQALIQIgA0IANwMIIAEoAgAhBQJAAkAgAAJ/IAEoAgQiBEHAACACayIGQfgBcUEDdiICSQRAIARBCU8NAiADQQhqIAUgBBBLGiABQQA2AgQgAUGIg8AANgIAIARBA3QMAQsgBkH/AXFByABPDQIgA0EIaiAFIAIQSxogASAEIAJrNgIEIAEgAiAFajYCACAGQfgBcQsgAC0ACyIBajoACyAAIAApAwAgAykDCCIHQjiGIAdCKIZCgICAgICAwP8Ag4QgB0IYhkKAgICAgOA/gyAHQgiGQoCAgIDwH4OEhCAHQgiIQoCAgPgPgyAHQhiIQoCA/AeDhCAHQiiIQoD+A4MgB0I4iISEhCABQT9xrYiENwMAIANBEGokAA8LIARBCEHYhcAAEDcACyACQQhByIXAABA3AAuqAgEDfyMAQYABayIEJAACQAJAAn8CQCABKAIAIgNBEHFFBEAgACgCACECIANBIHENASACrSABEBUMAgsgACgCACECQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQdcAaiADQQpJGzoAACAAQX9qIQAgAkEEdiICDQALIABBgAFqIgJBgQFPDQIgAUGkjsAAQQIgACAEakGAAWpBACAAaxAIDAELQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQTdqIANBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8NAiABQaSOwABBAiAAIARqQYABakEAIABrEAgLIARBgAFqJAAPCyACQYABQZSOwAAQOQALIAJBgAFBlI7AABA5AAuxAgEEfyMAQUBqIgIkACABKAIEIgNFBEAgAUEEaiEDIAEoAgAhBCACQQA2AiAgAkIBNwMYIAIgAkEYajYCJCACQThqIARBEGopAgA3AwAgAkEwaiAEQQhqKQIANwMAIAIgBCkCADcDKCACQSRqQdiJwAAgAkEoahAJGiACQRBqIgQgAigCIDYCACACIAIpAxg3AwgCQCABKAIEIgVFDQAgAUEIaigCAEUNACAFEAQLIAMgAikDCDcCACADQQhqIAQoAgA2AgAgAygCACEDCyABQQE2AgQgAUEMaigCACEEIAFBCGoiASgCACEFIAFCADcCAEEMQQQQWSIBRQRAQQxBBBBjAAsgASAENgIIIAEgBTYCBCABIAM2AgAgAEGQi8AANgIEIAAgATYCACACQUBrJAAL/AEBAn8jAEEQayICJAAgACgCACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohACABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQBBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEAQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgARALIAJBEGokAAv5AQECfyMAQRBrIgIkACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohAyABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQNBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEDQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgAyABEAsgAkEQaiQAC/wBAQN/IwBBIGsiBCQAAkAgAkEBaiIDIAJPBEAgASgCBCICQQF0IgUgAyAFIANLGyIDQQQgA0EESxsiA0H/////A3EgA0ZBAXQhBSADQQJ0IQMCQCACBEAgBEEYakECNgIAIAQgAkECdDYCFCAEIAEoAgA2AhAMAQsgBEEANgIQCyAEIAMgBSAEQRBqECVBASECIARBCGooAgAhAyAEKAIEIQUgBCgCAEEBRwRAIAEgBTYCACABIANBAnY2AgRBACECDAILIAAgBTYCBCAAQQhqIAM2AgAMAQsgACADNgIEIABBCGpBADYCAEEBIQILIAAgAjYCACAEQSBqJAAL8AEBBH8jAEEgayIEJAACQCACQQFqIgMgAk8EQCABKAIEIgVBAXQiAiADIAIgA0sbIgNBBCADQQRLGyIDIANqIgYgA09BAXQhAwJAIAUEQCAEQRhqQQI2AgAgBCACNgIUIAQgASgCADYCEAwBCyAEQQA2AhALIAQgBiADIARBEGoQJUEBIQIgBEEIaigCACEDIAQoAgQhBSAEKAIAQQFHBEAgASAFNgIAIAEgA0EBdjYCBEEAIQIMAgsgACAFNgIEIABBCGogAzYCAAwBCyAAIAM2AgQgAEEIakEANgIAQQEhAgsgACACNgIAIARBIGokAAvZAQEDfwJAIABBBGooAgAiBCAAQQhqKAIAIgNrIAIgAWsiBU8EQCAAKAIAIQQMAQsCfwJAAkAgAyAFaiICIANJDQAgBEEBdCIDIAIgAyACSxsiAkEIIAJBCEsbIQIgBARAIAJBAEgNASAAKAIAIgNFDQIgAyAEQQEgAhBVDAMLIAJBAE4NAQsQXQALIAJBARBZCyIEBEAgACAENgIAIABBBGogAjYCACAAQQhqKAIAIQMMAQsgAkEBEGMACyADIARqIAEgBRBLGiAAQQhqIgAgACgCACAFajYCAAvoAQEFfyMAQRBrIgMkACAALQALIQIgA0IANwMIIAEoAgAhBQJAAkAgAAJ/IAEoAgQiBEHAACACayIGQfgBcUEDdiICSQRAIARBCU8NAiADQQhqIAUgBBBLGiABQQA2AgQgAUGIg8AANgIAIARBA3QMAQsgBkH/AXFByABPDQIgA0EIaiAFIAIQSxogASAEIAJrNgIEIAEgAiAFajYCACAGQfgBcQsgAC0ACyIBajoACyAAIAApAwAgAykDCCABQT9xrYaENwMAIANBEGokAA8LIARBCEH4hcAAEDcACyACQQhB6IXAABA3AAvcAQEEfyMAQUBqIgIkACABQQRqIQQgASgCBEUEQCABKAIAIQMgAkEANgIgIAJCATcDGCACIAJBGGo2AiQgAkE4aiADQRBqKQIANwMAIAJBMGogA0EIaikCADcDACACIAMpAgA3AyggAkEkakHYicAAIAJBKGoQCRogAkEQaiIDIAIoAiA2AgAgAiACKQMYNwMIAkAgASgCBCIFRQ0AIAFBCGooAgBFDQAgBRAECyAEIAIpAwg3AgAgBEEIaiADKAIANgIACyAAQZCLwAA2AgQgACAENgIAIAJBQGskAAuYAgECfyMAQSBrIgQkAEEBIQVBiKfAAEGIp8AAKAIAQQFqNgIAAkACQAJAQdCqwAAoAgBBAUcEQEHQqsAAQoGAgIAQNwMADAELQdSqwABB1KrAACgCAEEBaiIFNgIAIAVBAksNAQsgBCADNgIcIAQgAjYCGCAEQfCJwAA2AhQgBEHwicAANgIQQfymwAAoAgAiAkF/TA0AQfymwAAgAkEBaiICNgIAQfymwABBhKfAACgCACIDBH9BgKfAACgCACAEQQhqIAAgASgCEBECACAEIAQpAwg3AxAgBEEQaiADKAIMEQIAQfymwAAoAgAFIAILQX9qNgIAIAVBAU0NAQsACyMAQRBrIgIkACACIAE2AgwgAiAANgIIAAvMAQECfyABQRRqKAIAIgUgA0H//wNxIgRLBEAgASgCDCAEQQF0ai8BACEFIAEoAggiBCABKAIERgRAIAEgBBA8IAEoAgghBAsgASgCACAEQQJ0aiIEIAI6AAIgBCADOwEAIAEgASgCCEEBajYCCCABKAIUIgQgAUEQaigCAEYEQCABQQxqIAQQOyABKAIUIQQLIAEoAgwgBEEBdGogBUEBajsBACABIAEoAhRBAWo2AhQgACACOgACIAAgAzsBAA8LIAQgBUH4hsAAEDYAC8QBAQJ/IwBBEGsiAiQAIAIgAa1CgICAgBBCACABKAIYQcWmwABBCSABQRxqKAIAKAIMEQEAG4Q3AwAgAiAANgIMIAIgAkEMahASIAItAAQhASACLQAFBEAgAUH/AXEhACACAn9BASAADQAaIAIoAgAiAEEcaigCACgCDCEBIAAoAhghAyAALQAAQQRxRQRAIANB943AAEECIAERAQAMAQsgA0H2jcAAQQEgAREBAAsiAToABAsgAkEQaiQAIAFB/wFxQQBHC6oBAQJ/AkACQAJAIAIEQEEBIQQgAUEATg0BDAILIAAgATYCBEEBIQQMAQsCQAJAAkACQAJAIAMoAgAiBUUEQCABRQ0BDAMLIAMoAgQiAw0BIAENAgsgAiEDDAMLIAUgAyACIAEQVSIDRQ0BDAILIAEgAhBZIgMNAQsgACABNgIEIAIhAQwCCyAAIAM2AgRBACEEDAELQQAhAQsgACAENgIAIABBCGogATYCAAufAQEDfyAAQgA3AggCQCABQRRqKAIAIgQgAkH//wNxIgNLBEAgASgCDCADQQF0ai8BACEDIAAoAgQhBCAAQQA2AgQgACgCACEFIABBATYCACAEIANJDQEgASACIAUgAxApIAAoAgQEQCAAKAIAEAQLIAAgAzYCDCAAIAQ2AgQgACAFNgIADwsgAyAEQbiGwAAQNgALIAMgBEHIhsAAEDcAC4cBAQJ/IwBBMGsiBCQAIARBIGoiBSACNgIIIAUgAjYCBCAFIAE2AgAgBEEIaiAEQSBqEE4gBEEQaiAEKAIIIgEgBCgCDCICIAMQEyACBEAgARAECyAEQShqIARBGGooAgA2AgAgBCAEKQMQNwMgIAQgBEEgahBOIAAgBCkDADcDACAEQTBqJAALggEBBn8jAEEQayIDJAAgACAAKAIIIAEQOiAAKAIAIQUgACgCCCECIANBCGpBASABEFogAiAFaiEEIAMoAgwiBiADKAIIIgdLBEAgBCAGIAdrEFIgBSACIAZqIAdrIgJqIQQLIAAgAQR/IARBADoAACACQQFqBSACCzYCCCADQRBqJAALjgEBA38gACgCCCIEIAFB//8DcSIFSwRAIAMEQCAAKAIAIQQgAkF/aiEFIAEhAANAIAQgAEH//wNxQQJ0aiIGLwEAIQAgAyAFaiAGLQACOgAAIAAgASAAIAFB//8DcUkbIQAgA0F/aiIDDQALIAItAAAPC0EAQQBBmIfAABA2AAsgBUEBaiAEQYiHwAAQNwALaAECfyMAQdAAayICJAAjAEEwayIBJAAgAUEIOgAPIAFBMGokACACEBdB0ABBCBBZIgEEQCABIAJB0AAQSxogAUEBOgBIIABBpIPAADYCBCAAIAE2AgAgAkHQAGokAA8LQdAAQQgQYwALgAECAn8BfiABLQALIgQgAS0ACiIDSQRAIAEgAhAYIAEtAAshBCABLQAKIQMLIAQgA0H/AXFJBH9BAAUgASAEIANrOgALIAEgASkDACADrYkiBSABLwEIIgGtQn+FQoCAfISDNwMAIAEgBadxIQNBAQshASAAIAM7AQIgACABOwEAC6IBAQN/IwBBEGsiASQAIAAoAgAiAkEUaigCACEDAkACfwJAAkAgAigCBA4CAAEDCyADDQJBACECQfCJwAAMAQsgAw0BIAIoAgAiAygCBCECIAMoAgALIQMgASACNgIEIAEgAzYCACABQfyKwAAgACgCBCgCCCAAKAIIECIACyABQQA2AgQgASACNgIAIAFB6IrAACAAKAIEKAIIIAAoAggQIgALgQEBA38gASgCBCIDIAJPBEACQCADRQ0AIAEoAgAhBAJAAkAgAkUEQEEBIQMgBBAEDAELIAQgA0EBIAIQVSIDRQ0BCyABIAI2AgQgASADNgIADAELIAAgAjYCBCAAQQhqQQE2AgBBASEFCyAAIAU2AgAPC0GUiMAAQSRBuIjAABBIAAt1AgJ/AX4gAS0ACyIEIAEtAAoiA0kEQCABIAIQICABLQALIQQgAS0ACiEDCyAEIANB/wFxSQR/QQAFIAEgBCADazoACyABIAEpAwAiBSADrUI/g4g3AwAgAS8BCCAFp3EhA0EBCyEBIAAgAzsBAiAAIAE7AQALMAEBfwJAAkBBgIABQQIQWSIBDQEMAAtBgIABQQIQYwALIAAgATYCACAAQYAgNgIEC4YBAQF/IwBBQGoiASQAIAFBKzYCDCABQYCBwAA2AgggAUGsgcAANgIUIAEgADYCECABQSxqQQI2AgAgAUE8akEhNgIAIAFCAjcCHCABQayMwAA2AhggAUEdNgI0IAEgAUEwajYCKCABIAFBEGo2AjggASABQQhqNgIwIAFBGGpB8IDAABBRAAtxAQN/IwBBIGsiAiQAAkAgACABEBkNACABQRxqKAIAIQMgASgCGCACQRxqQQA2AgAgAkHwi8AANgIYIAJCATcCDCACQfSLwAA2AgggAyACQQhqEAkNACAAQQRqIAEQGSACQSBqJAAPCyACQSBqJABBAQswAQF/AkACQEGAwABBAhBZIgENAQwAC0GAwABBAhBjAAsgACABNgIAIABBgCA2AgQLewECfwJAAkAgACgCBCIBBEAgACgCDCICIAFPDQEgACgCACIBIAJqIAEtAAA6AAAgAEEANgIIIAAgACgCDEEBajYCDCAAKAIERQ0CIAAoAgAtAAAPC0EAQQBBiIbAABA2AAsgAiABQZiGwAAQNgALQQBBAEGohsAAEDYAC2gBAn8gACAALQBGIgFBAWoiAjoACiAAQQEgAUEPcXRBAmoiATsBQCAAQX8gAkEPcXRBf3M7AQggAEEYaigCACABQf//A3EiAU8EQCAAIAE2AhgLIABBJGooAgAgAU8EQCAAIAE2AiQLC1ABAX8gAEEUaigCACIBRSABQQJ0RXJFBEAgACgCEBAECyAAQSBqKAIAIgFFIAFBAXRFckUEQCAAKAIcEAQLIABBLGooAgAEQCAAKAIoEAQLC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQYCNwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIAM2AiggAyADQQRqNgIgIANBCGogAhBRAAtsAQF/IwBBMGsiAyQAIAMgATYCBCADIAA2AgAgA0EcakECNgIAIANBLGpBHDYCACADQgI3AgwgA0HMkcAANgIIIANBHDYCJCADIANBIGo2AhggAyADQQRqNgIoIAMgAzYCICADQQhqIAIQUQALbAEBfyMAQTBrIgMkACADIAE2AgQgAyAANgIAIANBHGpBAjYCACADQSxqQRw2AgAgA0ICNwIMIANBgJLAADYCCCADQRw2AiQgAyADQSBqNgIYIAMgA0EEajYCKCADIAM2AiAgA0EIaiACEFEAC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQayRwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIANBBGo2AiggAyADNgIgIANBCGogAhBRAAtcAQF/IwBBEGsiAyQAAkAgACgCBCABayACTwRAIANBADYCAAwBCyADIAAgASACEBYgAygCAEEBRw0AIANBCGooAgAiAARAIAMoAgQgABBjAAsQXQALIANBEGokAAtaAQF/IwBBEGsiAiQAAkAgACgCBCABa0EBTwRAIAJBADYCAAwBCyACIAAgARAeIAIoAgBBAUcNACACQQhqKAIAIgAEQCACKAIEIAAQYwALEF0ACyACQRBqJAALWgEBfyMAQRBrIgIkAAJAIAAoAgQgAWtBAU8EQCACQQA2AgAMAQsgAiAAIAEQHSACKAIAQQFHDQAgAkEIaigCACIABEAgAigCBCAAEGMACxBdAAsgAkEQaiQAC1kBAX8jAEEgayICJAAgAiAAKAIANgIEIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAJBBGpB2InAACACQQhqEAkgAkEgaiQAC0YAAkBBCCACSQRAAn9BCCACSQRAIAIgAxAQDAELIAMQAAsiAg0BQQAPCyAAIAMQCg8LIAIgACADIAEgASADSxsQSyAAEAQLWQEBfyMAQSBrIgIkACACIAAoAgA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQACQAJAAkAgAUF/SgRAAkAgAgRAIAENAQwECyABRQ0DIAFBARBZIgINBAwCCyABEEciAkUNAQwDCxBdAAsgAUEBEGMAC0EBIQILIAAgATYCBCAAIAI2AgALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQEDfwJAIAEoAgwiAiABKAIIIgNPBEAgASgCBCIEIAJJDQEgASgCACEBIAAgAiADazYCBCAAIAEgA2o2AgAPCyADIAJB2IbAABA4AAsgAiAEQdiGwAAQNwALVQEBfyAAQRBqIAAtAEYQDSAAQQA6AEcgAEEAOwE4IABBMGpCADcDACAAQQA6AAsgAEIANwMAIAAgAC0ARkEBaiIBOgAKIABBfyABQQ9xdEF/czsBCAtDAQN/AkAgAkUNAANAIAAtAAAiBCABLQAAIgVGBEAgAEEBaiEAIAFBAWohASACQX9qIgINAQwCCwsgBCAFayEDCyADC0UBAX8jAEEQayICJAAgAiAAIAEQLQJAIAIoAgBBAUYEQCACQQhqKAIAIgBFDQEgAigCBCAAEGMACyACQRBqJAAPCxBdAAtKAAJ/IAFBgIDEAEcEQEEBIAAoAhggASAAQRxqKAIAKAIQEQAADQEaCyACRQRAQQAPCyAAKAIYIAIgAyAAQRxqKAIAKAIMEQEACwsmAQF/AkAgABAAIgFFDQAgAUF8ai0AAEEDcUUNACABIAAQUgsgAQtHAQF/IwBBIGsiAyQAIANBFGpBADYCACADQfCLwAA2AhAgA0IBNwIEIAMgATYCHCADIAA2AhggAyADQRhqNgIAIAMgAhBRAAtEAQJ/IAEoAgQhAiABKAIAIQNBCEEEEFkiAUUEQEEIQQQQYwALIAEgAjYCBCABIAM2AgAgAEGgi8AANgIEIAAgATYCAAtbAQN/IwBBEGsiASQAIAAoAgwiAkUEQEGAisAAQStByIrAABBIAAsgACgCCCIDRQRAQYCKwABBK0HYisAAEEgACyABIAI2AgggASAANgIEIAEgAzYCACABEFAACzMBAX8gAgRAIAAhAwNAIAMgAS0AADoAACABQQFqIQEgA0EBaiEDIAJBf2oiAg0ACwsgAAssAAJAIABBfE0EQCAARQRAQQQhAAwCCyAAIABBfUlBAnQQWSIADQELAAsgAAsxAQF/IAEoAgQiAgRAIAAgAjYCBCAAQQhqQQE2AgAgACABKAIANgIADwsgAEEANgIACzEBAX8gACABKAIEIAEoAggiAksEfyABIAIQRSABKAIIBSACCzYCBCAAIAEoAgA2AgALKAEBfyAAKAIIIgIgAU8EQCAAKAIAGiAAIAE2AggPCyAAIAEgAmsQKAssAQF/IwBBEGsiASQAIAFBCGogAEEIaigCADYCACABIAApAgA3AwAgARAsAAs0AQF/IwBBEGsiAiQAIAIgATYCDCACIAA2AgggAkG8jMAANgIEIAJB8IvAADYCACACEEoACyEAIAEEQANAIABBADoAACAAQQFqIQAgAUF/aiIBDQALCwsgAQF/AkAgACgCACIBRQ0AIABBBGooAgBFDQAgARAECwsgAQF/AkAgACgCBCIBRQ0AIABBCGooAgBFDQAgARAECwsMACAAIAEgAiADED4LCwAgAQRAIAAQBAsLEgAgACgCACABIAEgAmoQH0EACxQAIAAoAgAgASAAKAIEKAIMEQAACxkAAn9BCCABSQRAIAEgABAQDAELIAAQAAsLEAAgACACNgIEIAAgATYCAAsTACAAQaCLwAA2AgQgACABNgIACxAAIAEgACgCACAAKAIEEAULEQBBzIvAAEERQeCLwAAQSAALDgAgACgCABoDQAwACwALCwAgADUCACABEBULDQAgACgCACABIAIQCwsLACAAMQAAIAEQFQsLACAAIwBqJAAjAAsZACAAIAFB+KbAACgCACIAQQ4gABsRAgAACw0AIAFBxJDAAEECEAULCQAgAEEAOgBHCwcAIAAtAEcLDQBC9Pme5u6jqvn+AAsNAEL3uO76qszV7uUACwwAQunQotvMouq7RgsDAAELAwABCwvfJgEAQYCAwAAL1SYvVXNlcnMvZm04MTMvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L2xpYnJhcnkvY29yZS9zcmMvYWxsb2MvbGF5b3V0LnJzAAAQAHAAAAALAQAAOQAAAGNhbGxlZCBgUmVzdWx0Ojp1bndyYXAoKWAgb24gYW4gYEVycmAgdmFsdWUAAQAAAAAAAAABAAAAAgAAAHNyYy9saWIucnMAALwAEAAKAAAAGwAAAA4AAAC8ABAACgAAABwAAAASAAAAYXNzZXJ0aW9uIGZhaWxlZDogbWlkIDw9IHNlbGYubGVuKCkvVXNlcnMvZm04MTMvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L2xpYnJhcnkvY29yZS9zcmMvc2xpY2UvbW9kLnJzCwEQAG0AAAD9BAAACQAAAAMAAABQAAAACAAAAAQAAAAFAAAABgAAAAcAAAAIAAAAUAAAAAgAAAAJAAAACgAAAAsAAAAMAAAAL1VzZXJzL2ZtODEzLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL3dlZXpsLTAuMS40L3NyYy9kZWNvZGUucnMAAMABEABWAAAAWgIAAB8AAADAARAAVgAAAG0CAAAbAAAAwAEQAFYAAACCAgAAJgAAAMABEABWAAAAqwIAABEAAADAARAAVgAAAK0CAAARAAAAwAEQAFYAAAC5AgAAGQAAAMABEABWAAAAzQIAACIAAADAARAAVgAAAM8CAAAbAAAAwAEQAFYAAADQAgAAFQAAAMABEABWAAAA0QIAABUAAADAARAAVgAAAPoCAAANAAAAwAEQAFYAAABFAwAAEQAAAMABEABWAAAASwMAABEAAADAARAAVgAAAIoDAAARAAAAwAEQAFYAAACQAwAAEQAAAMABEABWAAAAvAMAACcAAADAARAAVgAAALwDAAAJAAAAwAEQAFYAAAC/AwAACQAAAMABEABWAAAAxgMAABUAAADAARAAVgAAAMkDAAAYAAAAwAEQAFYAAADSAwAACgAAAMABEABWAAAA+AMAAAoAAADAARAAVgAAAAUEAAAVAAAAwAEQAFYAAAANBAAAFgAAAMABEABWAAAAGAQAAAkAAAAvVXNlcnMvZm04MTMvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L2xpYnJhcnkvYWxsb2Mvc3JjL3Jhd192ZWMucnNUcmllZCB0byBzaHJpbmsgdG8gYSBsYXJnZXIgY2FwYWNpdHmoAxAAbAAAAMUBAAAJAAAATWF4aW11bSBjb2RlIHNpemUgMTIgcmVxdWlyZWQsIGdvdCAASAQQACMAAAAvVXNlcnMvZm04MTMvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9naXRodWIuY29tLTFlY2M2Mjk5ZGI5ZWM4MjMvd2VlemwtMC4xLjQvc3JjL2xpYi5ycwB0BBAAUwAAAE0AAAAFAAAADwAAAAQAAAAEAAAAEAAAABEAAAASAAAADwAAAAAAAAABAAAAEwAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWVsaWJyYXJ5L3N0ZC9zcmMvcGFuaWNraW5nLnJzACsFEAAcAAAA7QEAAB8AAAArBRAAHAAAAO4BAAAeAAAAFAAAABAAAAAEAAAAFQAAABYAAAAPAAAACAAAAAQAAAAXAAAAGAAAABkAAAAMAAAABAAAABoAAAAPAAAACAAAAAQAAAAbAAAAbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93AAAAsAUQABwAAAAeAgAABQAAAGAuLgDxBRAAAgAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWU6IAAAAPAFEAAAAAAAJwYQAAIAAAAiAAAAAAAAAAEAAAAjAAAAaW5kZXggb3V0IG9mIGJvdW5kczogdGhlIGxlbiBpcyAgYnV0IHRoZSBpbmRleCBpcyAAAEwGEAAgAAAAbAYQABIAAABsaWJyYXJ5L2NvcmUvc3JjL2ZtdC9idWlsZGVycy5ycyIAAAAMAAAABAAAACQAAAAlAAAAJgAAACAgICCQBhAAIAAAADIAAAAhAAAAkAYQACAAAAAzAAAAEgAAACB7CiwKLCAgeyB9IH1saWJyYXJ5L2NvcmUvc3JjL2ZtdC9udW0ucnP5BhAAGwAAAGUAAAAUAAAAMHgwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OQAAIgAAAAQAAAAEAAAAJwAAACgAAAApAAAAbGlicmFyeS9jb3JlL3NyYy9mbXQvbW9kLnJzAAgIEAAbAAAAVQQAABEAAAAICBAAGwAAAF8EAAAkAAAAKClsaWJyYXJ5L2NvcmUvc3JjL3NsaWNlL21lbWNoci5ycwAARggQACAAAABaAAAABQAAAHJhbmdlIHN0YXJ0IGluZGV4ICBvdXQgb2YgcmFuZ2UgZm9yIHNsaWNlIG9mIGxlbmd0aCB4CBAAEgAAAIoIEAAiAAAAcmFuZ2UgZW5kIGluZGV4ILwIEAAQAAAAiggQACIAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IADcCBAAFgAAAPIIEAANAAAAbGlicmFyeS9jb3JlL3NyYy9zdHIvcGF0dGVybi5ycwAQCRAAHwAAALABAAAmAAAAWy4uLl1ieXRlIGluZGV4ICBpcyBvdXQgb2YgYm91bmRzIG9mIGAAAEUJEAALAAAAUAkQABYAAADwBRAAAQAAAGJlZ2luIDw9IGVuZCAoIDw9ICkgd2hlbiBzbGljaW5nIGAAAIAJEAAOAAAAjgkQAAQAAACSCRAAEAAAAPAFEAABAAAAIGlzIG5vdCBhIGNoYXIgYm91bmRhcnk7IGl0IGlzIGluc2lkZSAgKGJ5dGVzICkgb2YgYEUJEAALAAAAxAkQACYAAADqCRAACAAAAPIJEAAGAAAA8AUQAAEAAABsaWJyYXJ5L2NvcmUvc3JjL3VuaWNvZGUvcHJpbnRhYmxlLnJzAAAAIAoQACUAAAAKAAAAHAAAACAKEAAlAAAAGgAAADYAAAAAAQMFBQYGAwcGCAgJEQocCxkMFA0QDg0PBBADEhITCRYBFwUYAhkDGgccAh0BHxYgAysDLAItCy4BMAMxAjIBpwKpAqoEqwj6AvsF/QT+A/8JrXh5i42iMFdYi4yQHB3dDg9LTPv8Li8/XF1fteKEjY6RkqmxurvFxsnK3uTl/wAEERIpMTQ3Ojs9SUpdhI6SqbG0urvGys7P5OUABA0OERIpMTQ6O0VGSUpeZGWEkZudyc7PDREpRUlXZGWNkam0urvFyd/k5fANEUVJZGWAhLK8vr/V1/Dxg4WLpKa+v8XHzs/a20iYvc3Gzs9JTk9XWV5fiY6Psba3v8HGx9cRFhdbXPb3/v+ADW1x3t8ODx9ubxwdX31+rq+7vPoWFx4fRkdOT1haXF5+f7XF1NXc8PH1cnOPdHWWL18mLi+nr7e/x8/X35pAl5gwjx/Awc7/Tk9aWwcIDxAnL+7vbm83PT9CRZCR/v9TZ3XIydDR2Nnn/v8AIF8igt8EgkQIGwQGEYGsDoCrNSgLgOADGQgBBC8ENAQHAwEHBgcRClAPEgdVBwMEHAoJAwgDBwMCAwMDDAQFAwsGAQ4VBToDEQcGBRAHVwcCBxUNUARDAy0DAQQRBg8MOgQdJV8gbQRqJYDIBYKwAxoGgv0DWQcVCxcJFAwUDGoGCgYaBlkHKwVGCiwEDAQBAzELLAQaBgsDgKwGCgYhP0wELQN0CDwDDwM8BzgIKwWC/xEYCC8RLQMgECEPgIwEgpcZCxWIlAUvBTsHAg4YCYCzLXQMgNYaDAWA/wWA3wzuDQOEjQM3CYFcFIC4CIDLKjgDCgY4CEYIDAZ0Cx4DWgRZCYCDGBwKFglMBICKBqukDBcEMaEEgdomBwwFBYClEYFtEHgoKgZMBICNBIC+AxsDDw0ABgEBAwEEAggICQIKBQsCDgQQARECEgUTERQBFQIXAhkNHAUdCCQBagNrArwC0QLUDNUJ1gLXAtoB4AXhAugC7iDwBPgC+QL6AvsBDCc7Pk5Pj56enwYHCTY9Plbz0NEEFBg2N1ZXf6qur7014BKHiY6eBA0OERIpMTQ6RUZJSk5PZGVctrcbHAcICgsUFzY5Oqip2NkJN5CRqAcKOz5maY+Sb1/u71pimpsnKFWdoKGjpKeorbq8xAYLDBUdOj9FUaanzM2gBxkaIiU+P8XGBCAjJSYoMzg6SEpMUFNVVlhaXF5gY2Vma3N4fX+KpKqvsMDQrq95zG5vk14iewUDBC0DZgMBLy6Agh0DMQ8cBCQJHgUrBUQEDiqAqgYkBCQEKAg0CwGAkIE3CRYKCICYOQNjCAkwFgUhAxsFAUA4BEsFLwQKBwkHQCAnBAwJNgM6BRoHBAwHUEk3Mw0zBy4ICoEmUk4oCCpWHBQXCU4EHg9DDhkHCgZICCcJdQs/QSoGOwUKBlEGAQUQAwWAi2IeSAgKgKZeIkULCgYNEzkHCjYsBBCAwDxkUwxICQpGRRtICFMdOYEHRgodA0dJNwMOCAoGOQcKgTYZgLcBDzINg5tmdQuAxIq8hC+P0YJHobmCOQcqBAJgJgpGCigFE4KwW2VLBDkHEUAFCwIOl/gIhNYqCaL3gR8xAxEECIGMiQRrBQ0DCQcQk2CA9gpzCG4XRoCaFAxXCRmAh4FHA4VCDxWFUCuA1S0DGgQCgXA6BQGFAIDXKUwECgQCgxFETD2AwjwGAQRVBRs0AoEOLARkDFYKgK44HQ0sBAkHAg4GgJqD2AgNAw0DdAxZBwwUDAQ4CAoGKAgiToFUDBUDAwUHCRkHBwkDDQcpgMslCoQGbGlicmFyeS9jb3JlL3NyYy91bmljb2RlL3VuaWNvZGVfZGF0YS5ycwCvDxAAKAAAAEsAAAAoAAAArw8QACgAAABXAAAAFgAAAK8PEAAoAAAAUgAAAD4AAAAiAAAABAAAAAQAAAAqAAAAAAMAAIMEIACRBWAAXROgABIXoB4MIOAe7ywgKyowoCtvpmAsAqjgLB774C0A/qA1nv/gNf0BYTYBCqE2JA1hN6sO4TgvGCE5MBxhRvMeoUrwamFOT2+hTp28IU9l0eFPANohUADg4VEw4WFT7OKhVNDo4VQgAC5V8AG/VQBwAAcALQEBAQIBAgEBSAswFRABZQcCBgICAQQjAR4bWws6CQkBGAQBCQEDAQUrA3cPASA3AQEBBAgEAQMHCgIdAToBAQECBAgBCQEKAhoBAgI5AQQCBAICAwMBHgIDAQsCOQEEBQECBAEUAhYGAQE6AQECAQQIAQcDCgIeATsBAQEMAQkBKAEDATkDBQMBBAcCCwIdAToBAgECAQMBBQIHAgsCHAI5AgEBAgQIAQkBCgIdAUgBBAECAwEBCAFRAQIHDAhiAQIJCwZKAhsBAQEBATcOAQUBAgULASQJAWYEAQYBAgICGQIEAxAEDQECAgYBDwEAAwADHQMdAh4CQAIBBwgBAgsJAS0DdwIiAXYDBAIJAQYD2wICAToBAQcBAQEBAggGCgIBMBE/BDAHAQEFASgJDAIgBAICAQM4AQECAwEBAzoIAgKYAwENAQcEAQYBAwLGOgEFAAHDIQADjQFgIAAGaQIABAEKIAJQAgABAwEEARkCBQGXAhoSDQEmCBkLLgMwAQIEAgInAUMGAgICAgwBCAEvATMBAQMCAgUCAQEqAggB7gECAQQBAAEAEBAQAAIAAeIBlQUAAwECBQQoAwQBpQIABAACmQuwATYPOAMxBAICRQMkBQEIPgEMAjQJCgQCAV8DAgEBAgYBoAEDCBUCOQIBAQEBFgEOBwMFwwgCAwEBFwFRAQIGAQECAQECAQLrAQIEBgIBAhsCVQgCAQECagEBAQIGAQFlAwIEAQUACQEC9QEKAgEBBAGQBAICBAEgCigGAgQIAQkGAgMuDQECAAcBBgEBUhYCBwECAQJ6BgMBAQIBBwEBSAIDAQEBAAIABTsHAAE/BFEBAAIAAQEDBAUICAIHHgSUAwA3BDIIAQ4BFgUBDwAHARECBwECAQUABwAEAAdtBwBggPAATGF5b3V0RXJycHJpdmF0ZQB7CXByb2R1Y2VycwIIbGFuZ3VhZ2UBBFJ1c3QADHByb2Nlc3NlZC1ieQMFcnVzdGMdMS40OS4wIChlMTg4NGE4ZTMgMjAyMC0xMi0yOSkGd2FscnVzBjAuMTguMAx3YXNtLWJpbmRnZW4SMC4yLjcwIChiNjM1NWMyNzAp");let _A;async function PG(t,e){_A||(_A=await(async()=>(await bm(BG),bG))());const n=_A.decompress(t,e);if(n.length===0)throw Error("Failed to decode with LZW decoder.");return n}var NG={},V2={},pr={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+n+"]*",i=new RegExp("^"+r+"$"),s=function(a,l){const c=[];let u=l.exec(a);for(;u;){const f=[];f.startIndex=l.lastIndex-u[0].length;const h=u.length;for(let d=0;d<h;d++)f.push(u[d]);c.push(f),u=l.exec(a)}return c},o=function(a){const l=i.exec(a);return!(l===null||typeof l>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,l,c){if(l){const u=Object.keys(l),f=u.length;for(let h=0;h<f;h++)c==="strict"?a[u[h]]=[l[u[h]]]:a[u[h]]=l[u[h]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.buildOptions=function(a,l,c){let u={};if(!a)return l;for(let f=0;f<c.length;f++)a[c[f]]!==void 0?u[c[f]]=a[c[f]]:u[c[f]]=l[c[f]];return u},t.isTagNameInArrayMode=function(a,l,c){return l===!1?!1:l instanceof RegExp?l.test(a):typeof l=="function"?!!l(a,c):l==="strict"},t.isName=o,t.getAllMatches=s,t.nameRegexp=r})(pr);const qi=pr,Ep=function(t,e,n){const r={};if(!e.alwaysCreateTextNode&&(!t.child||qi.isEmptyObject(t.child))&&(!t.attrsMap||qi.isEmptyObject(t.attrsMap)))return qi.isExist(t.val)?t.val:"";if(qi.isExist(t.val)&&!(typeof t.val=="string"&&(t.val===""||t.val===e.cdataPositionChar))){const s=qi.isTagNameInArrayMode(t.tagname,e.arrayMode,n);r[e.textNodeName]=s?[t.val]:t.val}qi.merge(r,t.attrsMap,e.arrayMode);const i=Object.keys(t.child);for(let s=0;s<i.length;s++){const o=i[s];if(t.child[o]&&t.child[o].length>1){r[o]=[];for(let a in t.child[o])t.child[o].hasOwnProperty(a)&&r[o].push(Ep(t.child[o][a],e,o))}else{const a=Ep(t.child[o][0],e,o),l=e.arrayMode===!0&&typeof a=="object"||qi.isTagNameInArrayMode(o,e.arrayMode,n);r[o]=l?[a]:a}}return r};V2.convertToJson=Ep;var Is={},LG=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=n,this.addChild=function(r){Array.isArray(this.child[r.tagname])?this.child[r.tagname].push(r):this.child[r.tagname]=[r]}};const MG=/^[-+]?0x[a-fA-F0-9]+$/,OG=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const DG={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function FG(t,e={}){if(e=Object.assign({},DG,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(e.hex&&MG.test(n))return Number.parseInt(n,16);{const r=OG.exec(n);if(r){const i=r[1],s=r[2];let o=QG(r[3]);const a=r[4]||r[6];if(!e.leadingZeros&&s.length>0&&i&&n[2]!==".")return t;if(!e.leadingZeros&&s.length>0&&!i&&n[1]!==".")return t;{const l=Number(n),c=""+l;return c.search(/[eE]/)!==-1||a?e.eNotation?l:t:n.indexOf(".")!==-1?c==="0"&&o===""||c===o||i&&c==="-"+o?l:t:s?o===c||i+o===c?l:t:n===c||n===i+c?l:t}}else return t}}function QG(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var kG=FG;const us=pr,UG=pr.buildOptions,vu=LG,GG=kG;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,us.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const z2={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[],alwaysCreateTextNode:!1};Is.defaultOptions=z2;const j2=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];Is.props=j2;function yu(t,e,n){return e&&(n.trimValues&&(e=e.trim()),e=n.tagValueProcessor(e,t),e=H2(e,n.parseNodeValue,n.numParseOptions)),e}function VG(t,e){if(e.ignoreNameSpace){const n=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(n[0]==="xmlns")return"";n.length===2&&(t=r+n[1])}return t}function H2(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:GG(t,n)}else return us.isExist(t)?t:""}const zG=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function k1(t,e){if(!e.ignoreAttributes&&typeof t=="string"){t=t.replace(/\r?\n/g," ");const n=us.getAllMatches(t,zG),r=n.length,i={};for(let s=0;s<r;s++){const o=VG(n[s][1],e);o.length&&(n[s][4]!==void 0?(e.trimValues&&(n[s][4]=n[s][4].trim()),n[s][4]=e.attrValueProcessor(n[s][4],o),i[e.attributeNamePrefix+o]=H2(n[s][4],e.parseAttributeValue,e.numParseOptions)):e.allowBooleanAttributes&&(i[e.attributeNamePrefix+o]=!0))}if(!Object.keys(i).length)return;if(e.attrNodeName){const s={};return s[e.attrNodeName]=i,s}return i}}const jG=function(t,e){t=t.replace(/\r\n?/g,`
`),e=UG(e,z2,j2);const n=new vu("!xml");let r=n,i="";for(let s=0;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const a=Oa(t,">",s,"Closing Tag is not closed.");let l=t.substring(s+2,a).trim();if(e.ignoreNameSpace){const c=l.indexOf(":");c!==-1&&(l=l.substr(c+1))}r&&(r.val?r.val=us.getValue(r.val)+""+yu(l,i,e):r.val=yu(l,i,e)),e.stopNodes.length&&e.stopNodes.includes(r.tagname)&&(r.child=[],r.attrsMap==null&&(r.attrsMap={}),r.val=t.substr(r.startIndex+1,s-r.startIndex-1)),r=r.parent,i="",s=a}else if(t[s+1]==="?")s=Oa(t,"?>",s,"Pi Tag is not closed.");else if(t.substr(s+1,3)==="!--")s=Oa(t,"-->",s,"Comment is not closed.");else if(t.substr(s+1,2)==="!D"){const a=Oa(t,">",s,"DOCTYPE is not closed.");t.substring(s,a).indexOf("[")>=0?s=t.indexOf("]>",s)+1:s=a}else if(t.substr(s+1,2)==="!["){const a=Oa(t,"]]>",s,"CDATA is not closed.")-2,l=t.substring(s+9,a);if(i&&(r.val=us.getValue(r.val)+""+yu(r.tagname,i,e),i=""),e.cdataTagName){const c=new vu(e.cdataTagName,r,l);r.addChild(c),r.val=us.getValue(r.val)+e.cdataPositionChar,l&&(c.val=l)}else r.val=(r.val||"")+(l||"");s=a+2}else{const a=HG(t,s+1);let l=a.data;const c=a.index,u=l.indexOf(" ");let f=l,h=!0;if(u!==-1&&(f=l.substr(0,u).replace(/\s\s*$/,""),l=l.substr(u+1)),e.ignoreNameSpace){const d=f.indexOf(":");d!==-1&&(f=f.substr(d+1),h=f!==a.data.substr(d+1))}if(r&&i&&r.tagname!=="!xml"&&(r.val=us.getValue(r.val)+""+yu(r.tagname,i,e)),l.length>0&&l.lastIndexOf("/")===l.length-1){f[f.length-1]==="/"?(f=f.substr(0,f.length-1),l=f):l=l.substr(0,l.length-1);const d=new vu(f,r,"");f!==l&&(d.attrsMap=k1(l,e)),r.addChild(d)}else{const d=new vu(f,r);e.stopNodes.length&&e.stopNodes.includes(d.tagname)&&(d.startIndex=c),f!==l&&h&&(d.attrsMap=k1(l,e)),r.addChild(d),r=d}i="",s=c}else i+=t[s];return n};function HG(t,e){let n,r="";for(let i=e;i<t.length;i++){let s=t[i];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else{if(s===">")return{data:r,index:i};s==="	"&&(s=" ")}r+=s}}function Oa(t,e,n,r){const i=t.indexOf(e,n);if(i===-1)throw new Error(r);return i+e.length-1}Is.getTraversalObj=jG;var W2={};const Hh=pr,WG={allowBooleanAttributes:!1},YG=["allowBooleanAttributes"];W2.validate=function(t,e){e=Hh.buildOptions(e,WG,YG);const n=[];let r=!1,i=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=U1(t,s),s.err)return s}else if(t[s]==="<"){let o=s;if(s++,t[s]==="!"){s=G1(t,s);continue}else{let a=!1;t[s]==="/"&&(a=!0,s++);let l="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!==`
`&&t[s]!=="\r";s++)l+=t[s];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),s--),!tV(l)){let f;return l.trim().length===0?f="Invalid space after '<'.":f="Tag '"+l+"' is an invalid name.",mt("InvalidTag",f,sn(t,s))}const c=KG(t,s);if(c===!1)return mt("InvalidAttr","Attributes for '"+l+"' have open quote.",sn(t,s));let u=c.value;if(s=c.index,u[u.length-1]==="/"){const f=s-u.length;u=u.substring(0,u.length-1);const h=V1(u,e);if(h===!0)r=!0;else return mt(h.err.code,h.err.msg,sn(t,f+h.err.line))}else if(a)if(c.tagClosed){if(u.trim().length>0)return mt("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",sn(t,o));{const f=n.pop();if(l!==f.tagName){let h=sn(t,f.tagStartPos);return mt("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",sn(t,o))}n.length==0&&(i=!0)}}else return mt("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",sn(t,s));else{const f=V1(u,e);if(f!==!0)return mt(f.err.code,f.err.msg,sn(t,s-u.length+f.err.line));if(i===!0)return mt("InvalidXml","Multiple possible root nodes found.",sn(t,s));n.push({tagName:l,tagStartPos:o}),r=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=G1(t,s);continue}else if(t[s+1]==="?"){if(s=U1(t,++s),s.err)return s}else break;else if(t[s]==="&"){const f=ZG(t,s);if(f==-1)return mt("InvalidChar","char '&' is not expected.",sn(t,s));s=f}t[s]==="<"&&s--}}else{if(t[s]===" "||t[s]==="	"||t[s]===`
`||t[s]==="\r")continue;return mt("InvalidChar","char '"+t[s]+"' is not expected.",sn(t,s))}if(r){if(n.length==1)return mt("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",sn(t,n[0].tagStartPos));if(n.length>0)return mt("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return mt("InvalidXml","Start tag expected.",1);return!0};function U1(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return mt("InvalidXml","XML declaration allowed only at the start of the document.",sn(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function G1(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const $G='"',XG="'";function KG(t,e){let n="",r="",i=!1;for(;e<t.length;e++){if(t[e]===$G||t[e]===XG)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){i=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:i}}const qG=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function V1(t,e){const n=Hh.getAllMatches(t,qG),r={};for(let i=0;i<n.length;i++){if(n[i][1].length===0)return mt("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",_u(n[i]));if(n[i][3]===void 0&&!e.allowBooleanAttributes)return mt("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",_u(n[i]));const s=n[i][2];if(!eV(s))return mt("InvalidAttr","Attribute '"+s+"' is an invalid name.",_u(n[i]));if(!r.hasOwnProperty(s))r[s]=1;else return mt("InvalidAttr","Attribute '"+s+"' is repeated.",_u(n[i]))}return!0}function JG(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function ZG(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,JG(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function mt(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function eV(t){return Hh.isName(t)}function tV(t){return Hh.isName(t)}function sn(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function _u(t){return t.startIndex+t[1].length}var xA={},z1;function nV(){if(z1)return xA;z1=1;const t=function(f){return String.fromCharCode(f)},e={nilChar:t(176),missingChar:t(201),nilPremitive:t(175),missingPremitive:t(200),emptyChar:t(178),emptyValue:t(177),boundryChar:t(179),objStart:t(198),arrStart:t(204),arrayEnd:t(185)},n=[e.nilChar,e.nilPremitive,e.missingChar,e.missingPremitive,e.boundryChar,e.emptyChar,e.emptyValue,e.arrayEnd,e.objStart,e.arrStart],r=function(f,h,d){if(typeof h=="string")return f&&f[0]&&f[0].val!==void 0?i(f[0].val):i(f);{const A=a(f);if(A===!0){let p="";if(Array.isArray(h)){p+=e.arrStart;const g=h[0],m=f.length;if(typeof g=="string")for(let E=0;E<m;E++){const v=i(f[E].val);p=s(p,v)}else for(let E=0;E<m;E++){const v=r(f[E],g,d);p=s(p,v)}p+=e.arrayEnd}else{p+=e.objStart;const g=Object.keys(h);Array.isArray(f)&&(f=f[0]);for(let m in g){const E=g[m];let v;!d.ignoreAttributes&&f.attrsMap&&f.attrsMap[E]?v=r(f.attrsMap[E],h[E],d):E===d.textNodeName?v=r(f.val,h[E],d):v=r(f.child[E],h[E],d),p=s(p,v)}}return p}else return A}},i=function(f){switch(f){case void 0:return e.missingPremitive;case null:return e.nilPremitive;case"":return e.emptyValue;default:return f}},s=function(f,h){return!o(h[0])&&!o(f[f.length-1])&&(f+=e.boundryChar),f+h},o=function(f){return n.indexOf(f)!==-1};function a(f){return f===void 0?e.missingChar:f===null?e.nilChar:f.child&&Object.keys(f.child).length===0&&(!f.attrsMap||Object.keys(f.attrsMap).length===0)?e.emptyChar:!0}const l=Is,c=pr.buildOptions,u=function(f,h,d){return d=c(d,l.defaultOptions,l.props),r(f,h,d)};return xA.convert2nimn=u,xA}var IA={},j1;function rV(){if(j1)return IA;j1=1;const t=pr,e=pr.buildOptions,n=Is,r=function(o,a){return a=e(a,n.defaultOptions,n.props),a.indentBy=a.indentBy||"",i(o,a)},i=function(o,a,l){let c="{";const u=Object.keys(o.child);for(let f=0;f<u.length;f++){const h=u[f];if(o.child[h]&&o.child[h].length>1){c+='"'+h+'" : [ ';for(let d in o.child[h])c+=i(o.child[h][d],a)+" , ";c=c.substr(0,c.length-1)+" ] "}else c+='"'+h+'" : '+i(o.child[h][0],a)+" ,"}return t.merge(c,o.attrsMap),t.isEmptyObject(c)?t.isExist(o.val)?o.val:"":(t.isExist(o.val)&&(typeof o.val=="string"&&(o.val===""||o.val===a.cdataPositionChar)||(c+='"'+a.textNodeName+'" : '+s(o.val))),c[c.length-1]===","&&(c=c.substr(0,c.length-2)),c+"}")};function s(o){return o===!0||o===!1||!isNaN(o)?o:'"'+o+'"'}return IA.convertToJsonString=r,IA}var CA,H1;function iV(){if(H1)return CA;H1=1;const t=pr.buildOptions,e={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(A){return A},attrValueProcessor:function(A){return A}},n=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function r(A){this.options=t(A,e,n),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=h),this.options.cdataTagName?this.isCDATA=d:this.isCDATA=function(){return!1},this.replaceCDATAstr=s,this.replaceCDATAarr=o,this.processTextOrObjNode=i,this.options.format?(this.indentate=f,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=u,this.buildObjNode=l):(this.buildTextNode=c,this.buildObjNode=a),this.buildTextValNode=c,this.buildObjectNode=a}r.prototype.parse=function(A){return Array.isArray(A)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(A={[this.options.rootNodeName]:A}),this.j2x(A,0).val},r.prototype.j2x=function(A,p){let g="",m="";for(let E in A)if(!(typeof A[E]>"u"))if(A[E]===null)m+=this.indentate(p)+"<"+E+"/"+this.tagEndChar;else if(A[E]instanceof Date)m+=this.buildTextNode(A[E],E,"",p);else if(typeof A[E]!="object"){const v=this.isAttribute(E);v?g+=" "+v+'="'+this.options.attrValueProcessor(""+A[E])+'"':this.isCDATA(E)?A[this.options.textNodeName]?m+=this.replaceCDATAstr(A[this.options.textNodeName],A[E]):m+=this.replaceCDATAstr("",A[E]):E===this.options.textNodeName?A[this.options.cdataTagName]||(m+=this.options.tagValueProcessor(""+A[E])):m+=this.buildTextNode(A[E],E,"",p)}else if(Array.isArray(A[E]))if(this.isCDATA(E))m+=this.indentate(p),A[this.options.textNodeName]?m+=this.replaceCDATAarr(A[this.options.textNodeName],A[E]):m+=this.replaceCDATAarr("",A[E]);else{const v=A[E].length;for(let y=0;y<v;y++){const C=A[E][y];typeof C>"u"||(C===null?m+=this.indentate(p)+"<"+E+"/"+this.tagEndChar:typeof C=="object"?m+=this.processTextOrObjNode(C,E,p):m+=this.buildTextNode(C,E,"",p))}}else if(this.options.attrNodeName&&E===this.options.attrNodeName){const v=Object.keys(A[E]),y=v.length;for(let C=0;C<y;C++)g+=" "+v[C]+'="'+this.options.attrValueProcessor(""+A[E][v[C]])+'"'}else m+=this.processTextOrObjNode(A[E],E,p);return{attrStr:g,val:m}};function i(A,p,g){const m=this.j2x(A,g+1);return A[this.options.textNodeName]!==void 0&&Object.keys(A).length===1?this.buildTextNode(m.val,p,m.attrStr,g):this.buildObjNode(m.val,p,m.attrStr,g)}function s(A,p){return A=this.options.tagValueProcessor(""+A),this.options.cdataPositionChar===""||A===""?A+"<![CDATA["+p+"]]"+this.tagEndChar:A.replace(this.options.cdataPositionChar,"<![CDATA["+p+"]]"+this.tagEndChar)}function o(A,p){if(A=this.options.tagValueProcessor(""+A),this.options.cdataPositionChar===""||A==="")return A+"<![CDATA["+p.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let g in p)A=A.replace(this.options.cdataPositionChar,"<![CDATA["+p[g]+"]]>");return A+this.newLine}function a(A,p,g,m){return g&&A.indexOf("<")===-1?this.indentate(m)+"<"+p+g+">"+A+"</"+p+this.tagEndChar:this.indentate(m)+"<"+p+g+this.tagEndChar+A+this.indentate(m)+"</"+p+this.tagEndChar}function l(A,p,g,m){return A!==""?this.buildObjectNode(A,p,g,m):this.indentate(m)+"<"+p+g+"/"+this.tagEndChar}function c(A,p,g,m){return this.indentate(m)+"<"+p+g+">"+this.options.tagValueProcessor(A)+"</"+p+this.tagEndChar}function u(A,p,g,m){return A!==""?this.buildTextValNode(A,p,g,m):this.indentate(m)+"<"+p+g+"/"+this.tagEndChar}function f(A){return this.options.indentBy.repeat(A)}function h(A){return A.startsWith(this.options.attributeNamePrefix)?A.substr(this.attrPrefixLen):!1}function d(A){return A===this.options.cdataTagName}return CA=r,CA}(function(t){const e=V2,n=Is,r=Is,i=pr.buildOptions,s=W2;t.parse=function(o,a={},l){if(l){l===!0&&(l={});const f=s.validate(o,l);if(f!==!0)throw Error(f.err.msg)}a.parseTrueNumberOnly&&a.parseNodeValue!==!1&&!a.numParseOptions&&(a.numParseOptions={leadingZeros:!1});let c=i(a,r.defaultOptions,r.props);const u=n.getTraversalObj(o,c);return e.convertToJson(u,c)},t.convertTonimn=nV().convert2nimn,t.getTraversalObj=n.getTraversalObj,t.convertToJson=e.convertToJson,t.convertToJsonString=rV().convertToJsonString,t.validate=s.validate,t.j2xParser=iV(),t.parseToNimn=function(o,a,l){return t.convertTonimn(t.getTraversalObj(o,l),a,l)}})(NG);const vp=new Map;function sV(t,e){vp.set(t,e)}async function oV(t){if(!vp.has(t.id))throw new Error(`Compression codec ${t.id} is not supported by Zarr.js yet.`);return(await vp.get(t.id)()).fromConfig(t)}function Rm(t){return new Proxy(t,{set(e,n,r,i){return e.setItem(n,r)},get(e,n,r){return e.getItem(n)},deleteProperty(e,n){return e.deleteItem(n)},has(e,n){return e.containsItem(n)}})}function aV(t){return typeof t=="object"&&t!==null&&"__zarr__"in t}function wA(t){return aV(t)&&t.__zarr__==="KeyError"}class dr extends Error{constructor(e){super(`path ${e} contains an array`),this.__zarr__="ContainsArrayError",Object.setPrototypeOf(this,dr.prototype)}}class Or extends Error{constructor(e){super(`path ${e} contains a group`),this.__zarr__="ContainsGroupError",Object.setPrototypeOf(this,Or.prototype)}}class Bm extends Error{constructor(e){super(`array not found at path ${e}`),this.__zarr__="ArrayNotFoundError",Object.setPrototypeOf(this,Bm.prototype)}}class Wh extends Error{constructor(e){super(`ground not found at path ${e}`),this.__zarr__="GroupNotFoundError",Object.setPrototypeOf(this,Wh.prototype)}}class jt extends Error{constructor(e){super(e),this.__zarr__="PermissionError",Object.setPrototypeOf(this,jt.prototype)}}class _c extends Error{constructor(e){super(`key ${e} not present`),this.__zarr__="KeyError",Object.setPrototypeOf(this,_c.prototype)}}class Pm extends RangeError{constructor(e,n){super(`too many indices for array; expected ${n.length}, got ${e.length}`),this.__zarr__="TooManyIndicesError",Object.setPrototypeOf(this,Pm.prototype)}}class Cs extends RangeError{constructor(e){super(e),this.__zarr__="BoundsCheckError",Object.setPrototypeOf(this,Cs.prototype)}}class Yf extends RangeError{constructor(e,n,r,i){super(`slice arguments slice(${e}, ${n}, ${r}) invalid: ${i}`),this.__zarr__="InvalidSliceError",Object.setPrototypeOf(this,Yf.prototype)}}class Nm extends Error{constructor(){super("Negative step size is not supported when indexing."),this.__zarr__="NegativeStepError",Object.setPrototypeOf(this,Nm.prototype)}}class bt extends Error{constructor(e){super(e),this.__zarr__="ValueError",Object.setPrototypeOf(this,bt.prototype)}}class Lm extends Error{constructor(e){super(e),this.__zarr__="HTTPError",Object.setPrototypeOf(this,Lm.prototype)}}function Ur(t,e=void 0,n=null){if(t===void 0)throw new Yf(t,e,n,"The first argument must not be undefined");if(typeof t=="string"&&t!==":"||typeof e=="string"&&e!==":")throw new Yf(t,e,n,'Arguments can only be integers, ":" or null');return e===void 0&&(e=t,t=null),{start:t===":"?null:t,stop:e===":"?null:e,step:n,_slice:!0}}function lV(t,e,n,r){if(t<0?(t+=r,t<0&&(t=n<0?-1:0)):t>=r&&(t=n<0?r-1:r),e<0?(e+=r,e<0&&(e=n<0?-1:0)):e>=r&&(e=n<0?r-1:r),n<0){if(e<t){const i=Math.floor((t-e-1)/-n+1);return[t,e,n,i]}}else if(t<e){const i=Math.floor((e-t-1)/n+1);return[t,e,n,i]}return[t,e,n,0]}function Y2(t,e){let n,r,i;t.step===null?i=1:i=t.step,t.start===null?n=i<0?Number.MAX_SAFE_INTEGER:0:(n=t.start,n<0&&(n+=e)),t.stop===null?r=i<0?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:(r=t.stop,r<0&&(r+=e));const s=lV(n,r,i,e);if(n=s[0],r=s[1],i=s[2],e=s[3],i===0)throw new Error("Step size 0 is invalid");return[n,r,i,e]}function $2(t){return Array.isArray(t)?t:[t]}function cV(t,e){if(t.length>e.length)throw new Pm(t,e)}function ws(t,e){const n=[],r=[];for(let i=0;i<t.length;i++){const s=t[i];if(typeof s=="number")n.push(s);else{const o=Y2(s,e[i]),a=o[3];r.push(a),n.push(o)}}return[n,r]}function Di(t,e,n=!1){t=uV(t,e);for(let r=0;r<t.length;r++){const i=t[r];if(typeof i=="number")n?t[r]=Ur(i,i+1,1):t[r]=Mm(i,e[r]);else{if(X2(i))throw new TypeError("Integer array selections are not supported (yet)");(i===":"||i===null)&&(t[r]=Ur(null,null,1))}}return t}function uV(t,e){t=$2(t);let n=-1,r=0;for(let i=0;i<t.length;i++)t[i]==="..."&&(n=i,r+=1);if(r>1)throw new RangeError("an index can only have a single ellipsis ('...')");if(r===1){const i=n,s=t.length-(i+1),o=t.length-1;if(o>=e.length)t=t.filter(a=>a!=="...");else{const a=e.length-o;let l=t.slice(0,i).concat(new Array(a).fill(null));s>0&&(l=l.concat(t.slice(t.length-s))),t=l}}if(t.length<e.length){const i=e.length-t.length;t=t.concat(new Array(i).fill(null))}return cV(t,e),t}function Mm(t,e){if(t<0&&(t=e+t),t>=e||t<0)throw new Cs(`index out of bounds for dimension with length ${e}`);return t}function fV(t){return typeof t=="number"}function X2(t){if(!Array.isArray(t))return!1;for(const e of t)if(typeof e!="number")return!1;return!0}function Om(t){return t!==null&&t._slice===!0}function hV(t){return Om(t)&&(t.step===null||t.step===1)}function dV(t){t=$2(t);for(let e=0;e<t.length;e++){const n=t[e];if(!(X2(n)||hV(n)||n==="..."))return!1}return!0}function*AV(...t){if(t.length===0)return;const e=t.map(r=>r()),n=e.map(r=>r.next());for(let r=0;;){if(n[r].done){if(e[r]=t[r](),n[r]=e[r].next(),++r>=e.length)return}else yield n.map(({value:i})=>i),r=0;n[r]=e[r].next()}}class W1{constructor(e,n){e=Di(e,n.shape),this.dimIndexers=[];const r=n.shape;for(let i=0;i<r.length;i++){let s=e[i];const o=r[i],a=n.chunks[i];if(s===null&&(s=Ur(null)),fV(s))this.dimIndexers.push(new gV(s,o,a));else if(Om(s))this.dimIndexers.push(new Y1(s,o,a));else throw new RangeError(`Unspported selection item for basic indexing; expected integer or slice, got ${s}`)}this.shape=[];for(const i of this.dimIndexers)i instanceof Y1&&this.shape.push(i.numItems);this.dropAxes=null}*iter(){const e=this.dimIndexers.map(r=>()=>r.iter()),n=AV(...e);for(const r of n){const i=[],s=[],o=[];for(const a of r)i.push(a.dimChunkIndex),s.push(a.dimChunkSelection),a.dimOutSelection!==null&&o.push(a.dimOutSelection);yield{chunkCoords:i,chunkSelection:s,outSelection:o}}}}class gV{constructor(e,n,r){e=Mm(e,n),this.dimSelection=e,this.dimLength=n,this.dimChunkLength=r,this.numItems=1}*iter(){const e=Math.floor(this.dimSelection/this.dimChunkLength),n=e*this.dimChunkLength,r=this.dimSelection-n;yield{dimChunkIndex:e,dimChunkSelection:r,dimOutSelection:null}}}class Y1{constructor(e,n,r){const[i,s,o]=Y2(e,n);if(this.start=i,this.stop=s,this.step=o,this.step<1)throw new Nm;this.dimLength=n,this.dimChunkLength=r,this.numItems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.numChunks=Math.ceil(this.dimLength/this.dimChunkLength)}*iter(){const e=Math.floor(this.start/this.dimChunkLength),n=Math.ceil(this.stop/this.dimChunkLength);for(let r=e;r<n;r++){const i=r*this.dimChunkLength,s=Math.min(this.dimLength,(r+1)*this.dimChunkLength),o=s-i;let a,l,c;if(this.start<i){a=0;const d=(i-this.start)%this.step;d>0&&(a+=this.step-d),c=Math.ceil((i-this.start)/this.step)}else a=this.start-i,c=0;this.stop>s?l=o:l=this.stop-i;const u=Ur(a,l,this.step),f=Math.ceil((l-a)/this.step),h=Ur(c,c+f);yield{dimChunkIndex:r,dimChunkSelection:u,dimOutSelection:h}}}}const ta=typeof process<"u"&&process.versions&&process.versions.node;function $1(){}function wn(t){if(t===null)return"";for(t instanceof String&&(t=t.valueOf()),t=t.replace(/\\/g,"/");t.length>0&&t[0]==="/";)t=t.slice(1);for(;t.length>0&&t[t.length-1]==="/";)t=t.slice(0,t.length-1);t=t.replace(/\/\/+/g,"/");const e=t.split("/");for(const n of e)if(n==="."||n==="..")throw Error("path containing '.' or '..' segment not allowed");return t}function Dm(t){return typeof t=="number"&&(t=[t]),t.map(e=>Math.floor(e))}function pV(t,e){if(t===null||t===!0)throw new Error("Chunk guessing is not supported yet");return t===!1?e:(typeof t=="number"&&(t=[t]),t.length<e.length&&(t=t.concat(e.slice(t.length))),t.map((n,r)=>n===-1||n===null?e[r]:Math.floor(n)))}function mV(t){return t=t.toUpperCase(),t}function X1(t,e){if(t===null)return!0;Array.isArray(t)||(t=[t]);for(let n=0;n<Math.min(t.length,e.length);n++){const r=t[n];if(r!==null){if(Om(r)){const i=r,s=i.step===1||i.step===null;if(i.start===null&&i.stop===null&&s||i.stop-i.start===e[n]&&s)continue;return!1}return!1}}return!0}function EV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function vV(t){const e=t.length,n=Array(e);let r=1;for(let i=e-1;i>=0;i--)n[i]=r,r*=t[i];return n}function TA(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const r=new URL(e,n);return r.search=n.search,r.href}function K2(t){const e=t.BYTES_PER_ELEMENT;if(e===1)return;if(ta){const o=Buffer.from(t.buffer,t.byteOffset,t.length*e);e===2&&o.swap16(),e===4&&o.swap32(),e===8&&o.swap64();return}const n=new Uint8Array(t.buffer,t.byteOffset,t.length*e),r=e/2,i=e-1;let s;for(let o=0;o<n.length;o+=e)for(let a=0;a<r;a++)s=n[o+a],n[o+a]=n[o+i-a],n[o+i-a]=s}function yV(t){const e=t.slice();return K2(e),e}function _V(t,e,n){let r=0;const i=n[0],s=n[1],o=s;for(let a=0;a<s;a++)for(let l=0;l<i;l++)e[l*o+a]=t[r++]}function xV(t,e,n){let r=0;const i=n[0],s=n[1],o=n[2],a=o*s,l=o;for(let c=0;c<o;c++)for(let u=0;u<s;u++)for(let f=0;f<i;f++)e[f*a+u*l+c]=t[r++]}function IV(t,e,n){let r=0;const i=n[0],s=n[1],o=n[2],a=n[3],l=a*o*s,c=a*o,u=a;for(let f=0;f<a;f++)for(let h=0;h<o;h++)for(let d=0;d<s;d++)for(let A=0;A<i;A++)e[A*l+d*c+h*u+f]=t[r++]}function CV(t,e,n){const r=n.length,i=n.reduce((a,l)=>a*l),s=n.map((a,l)=>l+1===r?1:n.slice(l+1).reduce((c,u)=>c*u,1)),o=Array(r).fill(0);for(let a=0;a<i;a++){let l=0;for(let c=0;c<r;c++)l+=o[c]*s[c];e[l]=t[a],o[0]+=1;for(let c=0;c<r;c++)if(o[c]===n[c]){if(c+1===r)return;o[c]=0,o[c+1]+=1}}}const wV={[0]:$1,[1]:$1,[2]:_V,[3]:xV,[4]:IV};function TV(t,e,n){return(wV[n.length]||CV)(t,e,n)}function Fm(t){return t===null?!1:t instanceof ArrayBuffer||typeof SharedArrayBuffer=="function"&&t instanceof SharedArrayBuffer?!0:ta?t.toString().startsWith("[object ArrayBuffer]")||t.toString().startsWith("[object SharedArrayBuffer]"):!1}const $f=".zarray",Qm=".zgroup",q2=".zattrs";async function Tn(t,e=null){e=wn(e);const r=Fi(e)+$f;return t.containsItem(r)}async function An(t,e=null){e=wn(e);const r=Fi(e)+Qm;return t.containsItem(r)}function Fi(t){return t.length>0?t+"/":""}async function J2(t,e,n,r){if(e.length===0)return;const i=e.split("/");let s="";for(const o of i.slice(0,i.length-1))s+=o,await Tn(t,s)?await yp(t,s,r):await An(t,s)||await yp(t,s),s+="/"}async function yp(t,e=null,n=!1){if(e=wn(e),n)throw Error("Group overwriting not implemented yet :(");if(await Tn(t,e))throw new dr(e);if(await An(t,e))throw new Or(e);const r={zarr_format:2},i=Fi(e)+Qm;await t.setItem(i,JSON.stringify(r))}async function pl(t,e=null,n=null,r=!1){e=wn(e),await J2(t,e,n,r),await yp(t,e,r)}async function SV(t,e,n,r,i,s,o,a,l,c,u,f){if(l)throw Error("Array overwriting not implemented yet :(");if(await Tn(t,i))throw new dr(i);if(await An(t,i))throw new Or(i);if(r=r,e=Dm(e),n=pV(n,e),a=mV(a),o=o,u!==null&&u.length>0)throw Error("Filters are not supported yet");let h=o;typeof o=="number"&&(Number.isNaN(o)&&(h="NaN"),Number.POSITIVE_INFINITY===o&&(h="Infinity"),Number.NEGATIVE_INFINITY===o&&(h="-Infinity")),u=null;const d={zarr_format:2,shape:e,chunks:n,dtype:r,fill_value:h,order:a,compressor:s,filters:u};f&&(d.dimension_separator=f);const A=Fi(i)+$f;await t.setItem(A,JSON.stringify(d))}async function ef(t,e,n,r,i=null,s=null,o=null,a="C",l=!1,c=null,u=null,f){i=wn(i),await J2(t,i,c,l),await SV(t,e,n,r,i,s,o,a,l,c,u,f)}function Xf(t){if(typeof t!="string"){if(ta&&Buffer.isBuffer(t))return JSON.parse(t.toString());if(Fm(t)){const e=new TextDecoder,n=new Uint8Array(t);return JSON.parse(e.decode(n))}else return t}return JSON.parse(t)}class Z2{constructor(e,n,r,i=!0){this.store=e,this.key=n,this.readOnly=r,this.cache=i,this.cachedValue=null}async asObject(){if(this.cache&&this.cachedValue!==null)return this.cachedValue;const e=await this.getNoSync();return this.cache&&(this.cachedValue=e),e}async getNoSync(){try{const e=await this.store.getItem(this.key);return Xf(e)}catch{return{}}}async setNoSync(e,n){const r=await this.getNoSync();return r[e]=n,await this.putNoSync(r),!0}async putNoSync(e){await this.store.setItem(this.key,JSON.stringify(e)),this.cache&&(this.cachedValue=e)}async delNoSync(e){const n=await this.getNoSync();return delete n[e],await this.putNoSync(n),!0}async put(e){if(this.readOnly)throw new jt("attributes are read-only");return this.putNoSync(e)}async setItem(e,n){if(this.readOnly)throw new jt("attributes are read-only");return this.setNoSync(e,n)}async getItem(e){return(await this.asObject())[e]}async deleteItem(e){if(this.readOnly)throw new jt("attributes are read-only");return this.delNoSync(e)}async containsItem(e){return(await this.asObject())[e]!==void 0}proxy(){return Rm(this)}}const bV={"|b":Int8Array,"|B":Uint8Array,"|u1":Uint8Array,"|i1":Int8Array,"<b":Int8Array,"<B":Uint8Array,"<u1":Uint8Array,"<i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f8":Float64Array,">b":Int8Array,">B":Uint8Array,">u1":Uint8Array,">i1":Int8Array,">u2":Uint16Array,">i2":Int16Array,">u4":Uint32Array,">i4":Int32Array,">f4":Float32Array,">f8":Float64Array};function ur(t){const e=bV[t];if(!e)throw Error(`Dtype not recognized or not supported in zarr.js, got ${t}.`);return e}function eS(t){if(t instanceof Uint8Array)return"|u1";if(t instanceof Int8Array)return"|i1";if(t instanceof Uint16Array)return"<u2";if(t instanceof Int16Array)return"<i2";if(t instanceof Uint32Array)return"<u4";if(t instanceof Int32Array)return"<i4";if(t instanceof Float32Array)return"<f4";if(t instanceof Float64Array)return"<f8";throw new bt("Mapping for TypedArray to Dtypestring not known")}function km(t){return t.byteLength!==void 0?t.constructor:km(t[0])}function RV(t,e,n){const r=Di(n,e),[i,s]=ws(r,e);return[_p(t,e,i),s]}function _p(t,e,n){const r=n[0];if(typeof r=="number")return e.length===1?t[r]:_p(t[r],e.slice(1),n.slice(1));const[i,s,o,a]=r;if(a===0)return new(km(t))(0);if(e.length===1){if(o===1)return t.slice(i,s);const c=new t.constructor(a);for(let u=0;u<a;u++)c[u]=t[i+u*o];return c}let l=new Array(a);for(let c=0;c<a;c++)l[c]=_p(t[i+c*o],e.slice(1),n.slice(1));return a>0&&typeof l[0]=="number"&&(l=t[0].constructor.from(l)),l}function BV(t,e,n,r){const i=Di(r,n,!0),[s,o]=ws(i,n);Um(t,e,n,s)}function PV(t,e,n,r,i){const s=Di(i,n,!1),[o,a]=ws(s,n);if(JSON.stringify(a)!==JSON.stringify(r))throw new bt(`Shape mismatch in target and source NestedArray: ${a} and ${r}`);xp(t,e,n,o)}function xp(t,e,n,r){const i=r[0];if(typeof e=="number"){Um(t,e,n,r.map(c=>typeof c=="number"?[c,c+1,1,1]:c));return}if(typeof i=="number"){xp(t[i],e,n.slice(1),r.slice(1));return}const[s,o,a,l]=i;if(n.length===1){if(a===1)t.set(e,s);else for(let c=0;c<l;c++)t[s+c*a]=e[c];return}for(let c=0;c<l;c++)xp(t[s+c*a],e[c],n.slice(1),r.slice(1))}function Um(t,e,n,r){const i=r[0],[s,o,a,l]=i;if(n.length===1){if(a===1)t.fill(e,s,o);else for(let c=0;c<l;c++)t[s+c*a]=e;return}for(let c=0;c<l;c++)Um(t[s+c*a],e,n.slice(1),r.slice(1))}function NV(t,e,n){n===void 0&&(n=km(t));const r=e.reduce((s,o)=>s*o,1),i=new n(r);return tS(t,e,i,0),i}function tS(t,e,n,r){if(e.length===1){n.set(t,r);return}if(e.length===2){for(let o=0;o<e[0];o++)n.set(t[o],r+e[1]*o);return t}const i=e.slice(1),s=i.reduce((o,a)=>o*a,1);for(let o=0;o<e[0];o++)tS(t[o],i,n,r+s*o);return t}class Rr{constructor(e,n,r){const i=e!==null&&!!e.BYTES_PER_ELEMENT;if(n===void 0){if(!i)throw new bt("Shape argument is required unless you pass in a TypedArray");n=[e.length]}if(r===void 0){if(!i)throw new bt("Dtype argument is required unless you pass in a TypedArray");r=eS(e)}if(n=Dm(n),this.shape=n,this.dtype=r,i&&n.length!==1&&(e=e.buffer),this.shape.length===0)this.data=new(ur(r))(1);else if(ta&&Buffer.isBuffer(e)||Fm(e)||e===null){const s=n.reduce((l,c)=>l*c,1);e===null&&(e=new ArrayBuffer(s*parseInt(r[r.length-1],10)));const o=e.byteLength/parseInt(r[r.length-1],10);if(s!==o)throw new Error(`Buffer has ${o} of dtype ${r}, shape is too large or small ${n} (flat=${s})`);const a=ur(r);this.data=nS(e,a,n)}else this.data=e}get(e){const[n,r]=RV(this.data,this.shape,e);return r.length===0?n:new Rr(n,r,this.dtype)}set(e=null,n){e===null&&(e=[Ur(null)]),typeof n=="number"?this.shape.length===0?this.data[0]=n:BV(this.data,n,this.shape,e):PV(this.data,n.data,this.shape,n.shape,e)}flatten(){return this.shape.length===1?this.data:NV(this.data,this.shape,ur(this.dtype))}static arange(e,n="<i4"){const r=ur(n),i=LV([e],r);return new Rr(i,[e],n)}}function LV(t,e){const n=t.reduce((i,s)=>i*s,1),r=new e(n);return r.set([...Array(n).keys()]),r}function nS(t,e,n,r=0){if(n.length===1)return new e(t.slice(r,r+n[0]*e.BYTES_PER_ELEMENT));const i=new Array(n[0]);if(n.length===2){for(let a=0;a<n[0];a++)i[a]=new e(t.slice(r+n[1]*a*e.BYTES_PER_ELEMENT,r+n[1]*(a+1)*e.BYTES_PER_ELEMENT));return i}const s=n.slice(1),o=s.reduce((a,l)=>a*l,1);for(let a=0;a<n[0];a++)i[a]=nS(t,e,s,r+o*a*e.BYTES_PER_ELEMENT);return i}function MV(t,e,n,r,i){const s=Di(r,n,!0),[o]=ws(s,n);rS(i,t,e,o)}function OV(t,e,n,r,i,s,o){const a=Di(r,n,!1),[l,c]=ws(a,n);if(JSON.stringify(c)!==JSON.stringify(o))throw new bt(`Shape mismatch in target and source RawArray: ${c} and ${o}`);Ip(t,e,l,i,s)}function DV(t,e,n,r,i,s,o,a){const l=Di(r,n,!0),[c]=ws(l,n),u=Di(a,o,!1),[f]=ws(u,o);Cp(t,e,c,i,s,f)}function rS(t,e,n,r){const[i,...s]=r,[o,...a]=n,[l,c,u,f]=i;if(n.length===1){if(u===1&&o===1)e.fill(t,l,l+f);else for(let h=0;h<f;h++)e[o*(l+u*h)]=t;return}for(let h=0;h<f;h++)rS(t,e.subarray(o*(l+u*h)),a,s)}function Ip(t,e,n,r,i){if(n.length===0){t.set(r);return}const[s,...o]=n,[a,...l]=e;if(typeof s=="number"){Ip(t.subarray(s*a),l,o,r,i);return}const[c,...u]=i,[f,h,d,A]=s;if(e.length===1){if(d===1&&a===1&&c===1)t.set(r.subarray(0,A),f);else for(let p=0;p<A;p++)t[a*(f+d*p)]=r[c*p];return}for(let p=0;p<A;p++)Ip(t.subarray(a*(f+p*d)),l,o,r.subarray(c*p),u)}function Cp(t,e,n,r,i,s){if(s.length===0){t.set(r.subarray(0,t.length));return}const[o,...a]=n,[l,...c]=s,[u,...f]=e,[h,...d]=i;if(typeof l=="number"){Cp(t,e,n,r.subarray(h*l),d,c);return}const[A,p,g,m]=o,[E,v,y,C]=l;if(e.length===1&&i.length===1){if(g===1&&u===1&&y===1&&h===1)t.set(r.subarray(E,E+m),A);else for(let x=0;x<m;x++)t[u*(A+g*x)]=r[h*(E+y*x)];return}for(let x=0;x<m;x++)Cp(t.subarray(u*(A+x*g)),f,a,r.subarray(h*(E+x*y)),d,c)}class rs{constructor(e,n,r,i){const s=e!==null&&!!e.BYTES_PER_ELEMENT;if(n===void 0){if(!s)throw new bt("Shape argument is required unless you pass in a TypedArray");n=[e.length]}if(n=Dm(n),r===void 0){if(!s)throw new bt("Dtype argument is required unless you pass in a TypedArray");r=eS(e)}if(i===void 0&&(i=vV(n)),this.shape=n,this.dtype=r,this.strides=i,s&&n.length!==1&&(e=e.buffer),this.shape.length===0)this.data=new(ur(r))(1);else if(ta&&Buffer.isBuffer(e)||Fm(e)||e===null){const o=n.reduce((c,u)=>c*u,1);e===null&&(e=new ArrayBuffer(o*parseInt(r[r.length-1],10)));const a=e.byteLength/parseInt(r[r.length-1],10);if(o!==a)throw new Error(`Buffer has ${a} of dtype ${r}, shape is too large or small ${n} (flat=${o})`);const l=ur(r);this.data=new l(e)}else this.data=e}set(e=null,n,r){e===null&&(e=[Ur(null)]),typeof n=="number"?this.shape.length===0?this.data[0]=n:MV(this.data,this.strides,this.shape,e,n):n instanceof rs&&r?DV(this.data,this.strides,this.shape,e,n.data,n.strides,n.shape,r):OV(this.data,this.strides,this.shape,e,n.data,n.strides,n.shape)}}var iS={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),A=n?n+c:c;return l._events[A]?l._events[A].fn?l._events[A]=[l._events[A],d]:l._events[A].push(d):(l._events[A]=d,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,A=new Array(d);h<d;h++)A[h]=f[h].fn;return A},a.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,h,d,A){var p=n?n+c:c;if(!this._events[p])return!1;var g=this._events[p],m=arguments.length,E,v;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,d),!0;case 6:return g.fn.call(g.context,u,f,h,d,A),!0}for(v=1,E=new Array(m-1);v<m;v++)E[v-1]=arguments[v];g.fn.apply(g.context,E)}else{var y=g.length,C;for(v=0;v<y;v++)switch(g[v].once&&this.removeListener(c,g[v].fn,void 0,!0),m){case 1:g[v].fn.call(g[v].context);break;case 2:g[v].fn.call(g[v].context,u);break;case 3:g[v].fn.call(g[v].context,u,f);break;case 4:g[v].fn.call(g[v].context,u,f,h);break;default:if(!E)for(C=1,E=new Array(m-1);C<m;C++)E[C-1]=arguments[C];g[v].fn.apply(g[v].context,E)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return o(this,d),this;var A=this._events[d];if(A.fn)A.fn===u&&(!h||A.once)&&(!f||A.context===f)&&o(this,d);else{for(var p=0,g=[],m=A.length;p<m;p++)(A[p].fn!==u||h&&!A[p].once||f&&A[p].context!==f)&&g.push(A[p]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(iS);var FV=iS.exports;class sS extends Error{constructor(e){super(e),this.name="TimeoutError"}}function QV(t,e,n,r){let i;const s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===Number.POSITIVE_INFINITY){o(t);return}r={customTimers:{setTimeout,clearTimeout},...r},i=r.customTimers.setTimeout.call(void 0,()=>{if(typeof n=="function"){try{o(n())}catch(u){a(u)}return}const l=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,c=n instanceof Error?n:new sS(l);typeof t.cancel=="function"&&t.cancel(),a(c)},e),(async()=>{try{o(await t)}catch(l){a(l)}finally{r.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function kV(t,e,n){let r=0,i=t.length;for(;i>0;){const s=Math.trunc(i/2);let o=r+s;n(t[o],e)<=0?(r=++o,i-=s+1):i=s}return r}class UV{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(e,n){var r;n={priority:0,...n};const i={priority:n.priority,run:e};if(this.size&&((r=this._queue[this.size-1])===null||r===void 0?void 0:r.priority)>=n.priority){this._queue.push(i);return}const s=kV(this._queue,i,(o,a)=>a.priority-o.priority);this._queue.splice(s,0,i)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}const xu=()=>{},GV=new sS;class K1 extends FV{constructor(e){var n,r,i,s;if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:xu}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:xu}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:UV,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=xu,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=xu,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=await(this._timeout===void 0&&n.timeout===void 0?e():QV(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(GV)}));r(a),this.emit("completed",a)}catch(o){i(o),this.emit("error",o)}this._next()};this._queue.enqueue(s,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onSizeLessThan(e){if(!(this._queue.size<e))return new Promise(n=>{const r=()=>{this._queue.size<e&&(this.removeListener("next",r),n())};this.on("next",r)})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}class na{constructor(e,n=null,r,i=!1,s=null,o=!0,a=!0){this.store=e,this._chunkStore=s,this.path=wn(n),this.keyPrefix=Fi(this.path),this.readOnly=i,this.cacheMetadata=o,this.cacheAttrs=a,this.meta=r,this.meta.compressor!==null?this.compressor=oV(this.meta.compressor):this.compressor=null;const l=this.keyPrefix+q2;this.attrs=new Z2(this.store,l,this.readOnly,a)}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:null}get basename(){const e=this.name;if(e===null)return null;const n=e.split("/");return n[n.length-1]}get shape(){return this.meta.shape}get chunks(){return this.meta.chunks}get chunkSize(){return this.chunks.reduce((e,n)=>e*n,1)}get dtype(){return this.meta.dtype}get fillValue(){const e=this.meta.fill_value;return e==="NaN"?NaN:e==="Infinity"?1/0:e==="-Infinity"?-1/0:this.meta.fill_value}get nDims(){return this.meta.shape.length}get size(){return this.meta.shape.reduce((e,n)=>e*n,1)}get length(){return this.shape[0]}get _chunkDataShape(){if(this.shape.length===0)return[1];{const e=[];for(let n=0;n<this.shape.length;n++)e[n]=Math.ceil(this.shape[n]/this.chunks[n]);return e}}get chunkDataShape(){return this._chunkDataShape}get numChunks(){return this.chunkDataShape.reduce((e,n)=>e*n,1)}static async create(e,n=null,r=!1,i=null,s=!0,o=!0){const a=await this.loadMetadataForConstructor(e,n);return new na(e,n,a,r,i,s,o)}static async loadMetadataForConstructor(e,n){try{n=wn(n);const r=Fi(n),i=await e.getItem(r+$f);return Xf(i)}catch(r){throw await An(e,n)?new Or(n!=null?n:""):new Error("Failed to load metadata for ZarrArray:"+r.toString())}}async reloadMetadata(){const e=this.keyPrefix+$f,n=this.store.getItem(e);return this.meta=Xf(await n),this.meta}async refreshMetadata(){this.cacheMetadata||await this.reloadMetadata()}get(e=null,n={}){return this.getBasicSelection(e,!1,n)}getRaw(e=null,n={}){return this.getBasicSelection(e,!0,n)}async getBasicSelection(e,n=!1,{concurrencyLimit:r=10,progressCallback:i}={}){if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");return this.getBasicSelectionND(e,n,r,i)}getBasicSelectionND(e,n,r,i){const s=new W1(e,this);return this.getSelection(s,n,r,i)}async getSelection(e,n,r,i){const s=this.dtype,o=e.shape,a=e.shape.reduce((u,f)=>u*f,1);if(n&&a===this.chunkSize){const u=e.iter(),f=u.next();if(f.done===!1&&u.next().done===!0){const h=f.value;return await this.decodeDirectToRawArray(h,o,a)}}const l=n?new rs(null,o,s):new Rr(null,o,s);if(a===0)return l;const c=new K1({concurrency:r});if(i){let u=0,f=0;for(const h of e.iter())f+=1;i({progress:0,queueSize:f});for(const h of e.iter())(async()=>(await c.add(()=>this.chunkGetItem(h.chunkCoords,h.chunkSelection,l,h.outSelection,e.dropAxes)),u+=1,i({progress:u,queueSize:f})))()}else for(const u of e.iter())c.add(()=>this.chunkGetItem(u.chunkCoords,u.chunkSelection,l,u.outSelection,e.dropAxes));return await c.onIdle(),l.shape.length===0?l.data[0]:l}async chunkGetItem(e,n,r,i,s){if(e.length!==this._chunkDataShape.length)throw new bt(`Inconsistent shapes: chunkCoordsLength: ${e.length}, cDataShapeLength: ${this.chunkDataShape.length}`);const o=this.chunkKey(e);try{const a=await this.chunkStore.getItem(o),l=await this.decodeChunk(a);if(r instanceof Rr){if(dV(i)&&X1(n,this.chunks)&&!this.meta.filters){r.set(i,this.toNestedArray(l));return}const u=this.toNestedArray(l).get(n);if(s!==null)throw new Error("Drop axes is not supported yet");r.set(i,u)}else r.set(i,this.chunkBufferToRawArray(l),n)}catch(a){if(wA(a))this.fillValue!==null&&r.set(i,this.fillValue);else throw a}}async getRawChunk(e,n){if(e.length!==this.shape.length)throw new Error(`Chunk coordinates ${e.join(".")} do not correspond to shape ${this.shape}.`);try{for(let a=0;a<e.length;a++){const l=Math.ceil(this.shape[a]/this.chunks[a]);e[a]=Mm(e[a],l)}}catch(a){throw a instanceof Cs?new Cs(`index ${e.join(".")} is out of bounds for shape: ${this.shape} and chunks ${this.chunks}`):a}const r=this.chunkKey(e),i=this.chunkStore.getItem(r,n==null?void 0:n.storeOptions),s=await this.decodeChunk(await i),o=this.chunks.filter(a=>a!==1);return new rs(s,o,this.dtype)}chunkKey(e){var n;const r=(n=this.meta.dimension_separator)!==null&&n!==void 0?n:".";return this.keyPrefix+e.join(r)}ensureByteArray(e){return typeof e=="string"?new Uint8Array(Buffer.from(e).buffer):new Uint8Array(e)}toTypedArray(e){return new(ur(this.dtype))(e)}toNestedArray(e){const n=this.ensureByteArray(e).buffer;return new Rr(n,this.chunks,this.dtype)}async decodeChunk(e){let n=this.ensureByteArray(e);if(this.compressor!==null&&(n=await(await this.compressor).decode(n)),this.dtype.includes(">")&&K2(this.toTypedArray(n.buffer)),this.meta.order==="F"&&this.nDims>1){const r=this.toTypedArray(n.buffer),i=new(ur(this.dtype))(r.length);return TV(r,i,this.chunks),i.buffer}return n.buffer}chunkBufferToRawArray(e){return new rs(e,this.chunks,this.dtype)}async decodeDirectToRawArray({chunkCoords:e},n,r){const i=this.chunkKey(e);try{const s=await this.chunkStore.getItem(i);return new rs(await this.decodeChunk(s),n,this.dtype)}catch(s){if(wA(s)){const o=new(ur(this.dtype))(r);return new rs(o.fill(this.fillValue),n)}else throw s}}async set(e=null,n,r={}){await this.setBasicSelection(e,n,r)}async setBasicSelection(e,n,{concurrencyLimit:r=10,progressCallback:i}={}){if(this.readOnly)throw new jt("Object is read only");if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");await this.setBasicSelectionND(e,n,r,i)}async setBasicSelectionND(e,n,r,i){const s=new W1(e,this);await this.setSelection(s,n,r,i)}getChunkValue(e,n,r,i){let s;if(i.length===0)s=r;else if(typeof r=="number")s=r;else if(s=r.get(e.outSelection),n.dropAxes!==null)throw new Error("Handling drop axes not supported yet");return s}async setSelection(e,n,r,i){const s=e.shape;if(s.length!==0){if(typeof n!="number")if(n instanceof Rr){if(!EV(n.shape,s))throw new bt(`Shape mismatch in source NestedArray and set selection: ${n.shape} and ${s}`)}else throw new Error("Unknown data type for setting :(")}const o=new K1({concurrency:r});if(i){let a=0;for(const c of e.iter())a+=1;let l=0;i({progress:0,queueSize:a});for(const c of e.iter()){const u=this.getChunkValue(c,e,n,s);(async()=>(await o.add(()=>this.chunkSetItem(c.chunkCoords,c.chunkSelection,u)),l+=1,i({progress:l,queueSize:a})))()}}else for(const a of e.iter()){const l=this.getChunkValue(a,e,n,s);o.add(()=>this.chunkSetItem(a.chunkCoords,a.chunkSelection,l))}await o.onIdle()}async chunkSetItem(e,n,r){if(this.meta.order==="F"&&this.nDims>1)throw new Error("Setting content for arrays in F-order is not supported.");const i=this.chunkKey(e);let s=null;const o=ur(this.dtype),a=this.chunkSize;if(X1(n,this.chunks))typeof r=="number"?(s=new o(a),s.fill(r)):s=r.flatten();else{let c;try{const f=await this.chunkStore.getItem(i),h=await this.decodeChunk(f);c=this.toTypedArray(h)}catch(f){if(wA(f))c=new o(a),this.fillValue!==null&&c.fill(this.fillValue);else throw f}const u=new Rr(c,this.chunks,this.dtype);u.set(n,r),s=u.flatten()}const l=await this.encodeChunk(s);this.chunkStore.setItem(i,l)}async encodeChunk(e){if(this.dtype.includes(">")&&(e=yV(e)),this.compressor!==null){const n=new Uint8Array(e.buffer);return(await(await this.compressor).encode(n)).buffer}return e.buffer}}class VV{constructor(e={}){this.root=e}proxy(){return Rm(this)}getParent(e){let n=this.root;const r=e.split("/");for(const i of r.slice(0,r.length-1))if(n=n[i],!n)throw Error(e);return[n,r[r.length-1]]}requireParent(e){let n=this.root;const r=e.split("/");for(const i of r.slice(0,r.length-1))n[i]===void 0&&(n[i]={}),n=n[i];return[n,r[r.length-1]]}getItem(e){const[n,r]=this.getParent(e),i=n[r];if(i===void 0)throw new _c(e);return i}setItem(e,n){const[r,i]=this.requireParent(e);return r[i]=n,!0}deleteItem(e){const[n,r]=this.getParent(e);return delete n[r]}containsItem(e){try{return this.getItem(e)!==void 0}catch{return!1}}keys(){throw new Error("Method not implemented.")}}var sr;(function(t){t.HEAD="HEAD",t.GET="GET",t.PUT="PUT"})(sr||(sr={}));const zV=[sr.HEAD,sr.GET,sr.PUT];class oS{constructor(e,n={}){this.url=e;const{fetchOptions:r={},supportedMethods:i=zV}=n;this.fetchOptions=r,this.supportedMethods=new Set(i)}keys(){throw new Error("Method not implemented.")}async getItem(e,n){const r=TA(this.url,e),i=await fetch(r,{...this.fetchOptions,...n});if(i.status===404)throw new _c(e);if(i.status!==200)throw new Lm(String(i.status));return ta?Buffer.from(await i.arrayBuffer()):i.arrayBuffer()}async setItem(e,n){if(!this.supportedMethods.has(sr.PUT))throw new Error("HTTP PUT no a supported method for store.");const r=TA(this.url,e);return typeof n=="string"&&(n=new TextEncoder().encode(n).buffer),(await fetch(r,{...this.fetchOptions,method:sr.PUT,body:n})).status.toString()[0]==="2"}deleteItem(e){throw new Error("Method not implemented.")}async containsItem(e){const n=TA(this.url,e),r=this.supportedMethods.has(sr.HEAD)?sr.HEAD:sr.GET;return(await fetch(n,{...this.fetchOptions,method:r})).status===200}}async function ra({shape:t,chunks:e=!0,dtype:n="<i4",compressor:r=null,fillValue:i=null,order:s="C",store:o,overwrite:a=!1,path:l,chunkStore:c,filters:u,cacheMetadata:f=!0,cacheAttrs:h=!0,readOnly:d=!1,dimensionSeparator:A}){return o=jl(o),await ef(o,t,e,n,l,r,i,s,a,c,u,A),await na.create(o,l,d,c,f,h)}async function jV(t,e={}){return e.fillValue=null,ra({shape:t,...e})}async function HV(t,e={}){return e.fillValue=0,ra({shape:t,...e})}async function WV(t,e={}){return e.fillValue=1,ra({shape:t,...e})}async function YV(t,e,n={}){return n.fillValue=e,ra({shape:t,...n})}async function q1(t,e={}){let n=null;t instanceof Rr?(n=t.shape,e.dtype=e.dtype===void 0?t.dtype:e.dtype):n=t.byteLength;const r=e.readOnly===void 0?!1:e.readOnly;e.readOnly=!1;const i=await ra({shape:n,...e});return await i.set(null,t),i.readOnly=r,i}async function $V({shape:t,mode:e="a",chunks:n=!0,dtype:r="<i4",compressor:i=null,fillValue:s=null,order:o="C",store:a,overwrite:l=!1,path:c=null,chunkStore:u,filters:f,cacheMetadata:h=!0,cacheAttrs:d=!0,dimensionSeparator:A}={}){if(a=jl(a),u===void 0&&(u=jl(a)),c=wn(c),e==="r"||e==="r+"){if(!await Tn(a,c))throw await An(a,c)?new Or(c):new Bm(c)}else if(e==="w"){if(t===void 0)throw new bt("Shape can not be undefined when creating a new array");await ef(a,t,n,r,c,i,s,o,l,u,f,A)}else if(e==="a"){if(!await Tn(a,c)){if(await An(a,c))throw new Or(c);if(t===void 0)throw new bt("Shape can not be undefined when creating a new array");await ef(a,t,n,r,c,i,s,o,l,u,f,A)}}else if(e==="w-"||e==="x"){if(await Tn(a,c))throw new dr(c);if(await An(a,c))throw new Or(c);if(t===void 0)throw new bt("Shape can not be undefined when creating a new array");await ef(a,t,n,r,c,i,s,o,l,u,f,A)}else throw new bt(`Invalid mode argument: ${e}`);const p=e==="r";return na.create(a,c,p,u,h,d)}function jl(t){return t===void 0?new VV:typeof t=="string"?new oS(t):t}class fs{constructor(e,n=null,r,i=!1,s=null,o=!0){this.store=e,this._chunkStore=s,this.path=wn(n),this.keyPrefix=Fi(this.path),this.readOnly=i,this.meta=r;const a=this.keyPrefix+q2;this.attrs=new Z2(this.store,a,this.readOnly,o)}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:"/"}get basename(){const e=this.name.split("/");return e[e.length-1]}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}static async create(e,n=null,r=!1,i=null,s=!0){const o=await this.loadMetadataForConstructor(e,n);return new fs(e,n,o,r,i,s)}static async loadMetadataForConstructor(e,n){n=wn(n);const r=Fi(n);try{const i=await e.getItem(r+Qm);return Xf(i)}catch{throw await Tn(e,n)?new dr(n):new Wh(n)}}itemPath(e){const n=typeof e=="string"&&e.length>0&&e[0]==="/",r=wn(e);return!n&&this.path.length>0?this.keyPrefix+r:r}async createGroup(e,n=!1){if(this.readOnly)throw new jt("group is read only");const r=this.itemPath(e);return await pl(this.store,r,this._chunkStore,n),fs.create(this.store,r,this.readOnly,this._chunkStore,this.attrs.cache)}async requireGroup(e,n=!1){if(this.readOnly)throw new jt("group is read only");const r=this.itemPath(e);return await An(this.store,r)||await pl(this.store,r,this._chunkStore,n),fs.create(this.store,r,this.readOnly,this._chunkStore,this.attrs.cache)}getOptsForArrayCreation(e,n={}){const r=this.itemPath(e);return n.path=r,n.cacheAttrs===void 0&&(n.cacheAttrs=this.attrs.cache),n.store=this.store,n.chunkStore=this.chunkStore,n}array(e,n,r,i){if(this.readOnly)throw new jt("group is read only");return r=this.getOptsForArrayCreation(e,r),r.overwrite=i===void 0?r.overwrite:i,q1(n,r)}empty(e,n,r={}){if(this.readOnly)throw new jt("group is read only");return r=this.getOptsForArrayCreation(e,r),jV(n,r)}zeros(e,n,r={}){if(this.readOnly)throw new jt("group is read only");return r=this.getOptsForArrayCreation(e,r),HV(n,r)}ones(e,n,r={}){if(this.readOnly)throw new jt("group is read only");return r=this.getOptsForArrayCreation(e,r),WV(n,r)}full(e,n,r,i={}){if(this.readOnly)throw new jt("group is read only");return i=this.getOptsForArrayCreation(e,i),YV(n,r,i)}createDataset(e,n,r,i){if(this.readOnly)throw new jt("group is read only");i=this.getOptsForArrayCreation(e,i);let s;if(r===void 0){if(n===void 0)throw new bt("Shape must be set if no data is passed to CreateDataset");s=ra({shape:n,...i})}else s=q1(r,i);return s}async getItem(e){const n=this.itemPath(e);if(await Tn(this.store,n))return na.create(this.store,n,this.readOnly,this.chunkStore,void 0,this.attrs.cache);if(await An(this.store,n))return fs.create(this.store,n,this.readOnly,this._chunkStore,this.attrs.cache);throw new _c(e)}async setItem(e,n){return await this.array(e,n,{},!0),!0}async deleteItem(e){throw this.readOnly?new jt("group is read only"):new Error("Method not implemented.")}async containsItem(e){const n=this.itemPath(e);return await Tn(this.store,n)||An(this.store,n)}proxy(){return Rm(this)}}async function Gm(t,e=null,n="a",r,i=!0){if(t=jl(t),r!==void 0&&(r=jl(t)),e=wn(e),n==="r"||n==="r+"){if(!await An(t,e))throw await Tn(t,e)?new dr(e):new Wh(e)}else if(n==="w")await pl(t,e,r,!0);else if(n==="a"){if(!await An(t,e)){if(await Tn(t,e))throw new dr(e);await pl(t,e,r)}}else if(n==="w-"||n==="x"){if(await Tn(t,e))throw new dr(e);if(await An(t,e))throw new Or(e);await pl(t,e,r)}else throw new bt(`Invalid mode argument: ${n}`);const s=n==="r";return fs.create(t,e,s,r,i)}class XV extends SG{constructor(e){super();const n=e.TileWidth||e.ImageWidth,r=e.TileLength||e.ImageLength,i=e.BitsPerSample[0]/8;this.maxUncompressedSize=n*r*i}async decodeBlock(e){const n=new Uint8Array(e);return(await PG(n,this.maxUncompressedSize)).buffer}}function Vo(t){const e=t[t.length-1];return e===3||e===4}function KV(t){const e=new Map(t.map((n,r)=>[n,r]));if(e.size!==t.length)throw Error("Labels must be unique, found duplicated label.");return n=>{const r=e.get(n);if(r===void 0)throw Error("Invalid dimension.");return r}}function xc(t){const e=Vo(t.shape),[n,r]=t.shape.slice(e?-3:-2);return{height:n,width:r}}const aS="__vivSignalAborted";Hr(5,()=>XV);function qV(t){const e=t.length,n=KV(t);return r=>{if(Array.isArray(r))return[...r];const i=Array(e).fill(0);for(const[s,o]of Object.entries(r))i[n(s)]=o;return i}}const J1={u1:"Uint8",u2:"Uint16",u4:"Uint32",f4:"Float32",f8:"Float64",i1:"Int8",i2:"Int16",i4:"Int32"};class Yh{constructor(e,n,r){this.labels=n,this.tileSize=r,this._indexer=qV(n),this._data=e;const i=e.chunks[this._xIndex],s=e.chunks[this._xIndex-1];this._readChunks=r===i&&r===s}get shape(){return this._data.shape}get dtype(){const e=this._data.dtype.slice(1);if(!(e in J1))throw Error(`Zarr dtype not supported, got ${e}.`);return J1[e]}get _xIndex(){const e=Vo(this._data.shape);return this._data.shape.length-(e?2:1)}_chunkIndex(e,n,r){const i=this._indexer(e);return i[this._xIndex]=n,i[this._xIndex-1]=r,i}_getSlices(e,n){const{height:r,width:i}=xc(this),[s,o]=[e*this.tileSize,Math.min((e+1)*this.tileSize,i)],[a,l]=[n*this.tileSize,Math.min((n+1)*this.tileSize,r)];if(s===o||a===l)throw new Cs("Tile slice is zero-sized.");return[Ur(s,o),Ur(a,l)]}async getRaster({selection:e}){const n=this._chunkIndex(e,null,null),{data:r,shape:i}=await this._data.getRaw(n),[s,o]=i;return{data:r,width:o,height:s}}async getTile(e){const{x:n,y:r,selection:i,signal:s}=e;let o;if(this._readChunks){const u=this._chunkIndex(i,n,r);o=await this._data.getRawChunk(u,{storeOptions:{signal:s}})}else{const[u,f]=this._getSlices(n,r),h=this._chunkIndex(i,u,f);o=await this._data.getRaw(h)}const{data:a,shape:[l,c]}=o;return{data:a,width:c,height:l}}onTileError(e){if(!(e instanceof Cs))throw e}}const Xe={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795},JV=255,Z1=[0,0,0],lS=6,ZV="-apple-system, 'Helvetica Neue', Arial, sans-serif",ex={Uint8:{format:Xe.R8UI,dataFormat:Xe.RED_INTEGER,type:Xe.UNSIGNED_BYTE,max:2**8-1,sampler:"usampler2D"},Uint16:{format:Xe.R16UI,dataFormat:Xe.RED_INTEGER,type:Xe.UNSIGNED_SHORT,max:2**16-1,sampler:"usampler2D"},Uint32:{format:Xe.R32UI,dataFormat:Xe.RED_INTEGER,type:Xe.UNSIGNED_INT,max:2**32-1,sampler:"usampler2D"},Float32:{format:Xe.R32F,dataFormat:Xe.RED,type:Xe.FLOAT,max:3.4*10**38,sampler:"sampler2D"},Int8:{format:Xe.R8I,dataFormat:Xe.RED_INTEGER,type:Xe.BYTE,max:2**(8-1)-1,sampler:"isampler2D"},Int16:{format:Xe.R16I,dataFormat:Xe.RED_INTEGER,type:Xe.SHORT,max:2**(16-1)-1,sampler:"isampler2D"},Int32:{format:Xe.R32I,dataFormat:Xe.RED_INTEGER,type:Xe.INT,max:2**(32-1)-1,sampler:"isampler2D"},Float64:{format:Xe.R32F,dataFormat:Xe.RED,type:Xe.FLOAT,max:3.4*10**38,sampler:"sampler2D",cast:t=>new Float32Array(t)}},cS=`vec4 apply_transparent_color(vec3 color, vec3 transparentColor, bool useTransparentColor, float opacity){
  return vec4(color, (color == transparentColor && useTransparentColor) ? 0. : opacity);
}
`,ez=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,1,1,0);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,tz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,nz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.996078431372549,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,rz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.2;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.9019607843137255,0.8235294117647058,0,1);
  const float e3 = 0.7;
  const vec4 v3 = vec4(1,1,1,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.6274509803921569,0.7843137254901961,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,iz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,sz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.376;
  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);
  const float e2 = 0.753;
  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,oz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,az=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,lz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0,1,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,cz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.804;
  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);
  const float e2 = 1.0;
  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),mix(v1,v2,a1)*step(e1,x)*step(x,e2)
  );
}
`,uz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.07;
  const vec4 v1 = vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);
  const float e2 = 0.13;
  const vec4 v2 = vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);
  const float e3 = 0.2;
  const vec4 v3 = vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);
  const float e4 = 0.27;
  const vec4 v4 = vec4(0.6313725490196078,0,0.5764705882352941,1);
  const float e5 = 0.33;
  const vec4 v5 = vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);
  const float e6 = 0.4;
  const vec4 v6 = vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);
  const float e7 = 0.47;
  const vec4 v7 = vec4(1,0.11372549019607843,0.3803921568627451,1);
  const float e8 = 0.53;
  const vec4 v8 = vec4(1,0.21176470588235294,0.27058823529411763,1);
  const float e9 = 0.6;
  const vec4 v9 = vec4(1,0.3333333333333333,0.1803921568627451,1);
  const float e10 = 0.67;
  const vec4 v10 = vec4(1,0.47058823529411764,0.13333333333333333,1);
  const float e11 = 0.73;
  const vec4 v11 = vec4(1,0.615686274509804,0.1450980392156863,1);
  const float e12 = 0.8;
  const vec4 v12 = vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);
  const float e13 = 0.87;
  const vec4 v13 = vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);
  const float e14 = 0.93;
  const vec4 v14 = vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);
  const float e15 = 1.0;
  const vec4 v15 = vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  float a10 = smoothstep(e10,e11,x);
  float a11 = smoothstep(e11,e12,x);
  float a12 = smoothstep(e12,e13,x);
  float a13 = smoothstep(e13,e14,x);
  float a14 = smoothstep(e14,e15,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),
    max(mix(v9,v10,a9)*step(e9,x)*step(x,e10),
    max(mix(v10,v11,a10)*step(e10,x)*step(x,e11),
    max(mix(v11,v12,a11)*step(e11,x)*step(x,e12),
    max(mix(v12,v13,a12)*step(e12,x)*step(x,e13),
    max(mix(v13,v14,a13)*step(e13,x)*step(x,e14),mix(v14,v15,a14)*step(e14,x)*step(x,e15)
  ))))))))))))));
}
`,fz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,hz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5098039215686274,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0,0.7058823529411765,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);
  const float e3 = 0.4;
  const vec4 v3 = vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);
  const float e4 = 0.6;
  const vec4 v4 = vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,dz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.15;
  const vec4 v1 = vec4(0.11764705882352941,0,0.39215686274509803,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.47058823529411764,0,0.39215686274509803,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.6274509803921569,0.35294117647058826,0,1);
  const float e4 = 0.8;
  const vec4 v4 = vec4(0.9019607843137255,0.7843137254901961,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,0.9803921568627451,0.8627450980392157,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,Az=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,gz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,pz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.26666666666666666,0.10588235294117647,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.42745098039215684,0.17254901960784313,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,mz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,Ez=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.3;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.6;
  const vec4 v2 = vec4(1,0.8235294117647058,0,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,vz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 0.169;
  const vec4 v1 = vec4(0.9921568627450981,1,0.00784313725490196,1);
  const float e2 = 0.173;
  const vec4 v2 = vec4(0.9686274509803922,1,0.00784313725490196,1);
  const float e3 = 0.337;
  const vec4 v3 = vec4(0,0.9882352941176471,0.01568627450980392,1);
  const float e4 = 0.341;
  const vec4 v4 = vec4(0,0.9882352941176471,0.0392156862745098,1);
  const float e5 = 0.506;
  const vec4 v5 = vec4(0.00392156862745098,0.9764705882352941,1,1);
  const float e6 = 0.671;
  const vec4 v6 = vec4(0.00784313725490196,0,0.9921568627450981,1);
  const float e7 = 0.675;
  const vec4 v7 = vec4(0.03137254901960784,0,0.9921568627450981,1);
  const float e8 = 0.839;
  const vec4 v8 = vec4(1,0,0.984313725490196,1);
  const float e9 = 0.843;
  const vec4 v9 = vec4(1,0,0.9607843137254902,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0.023529411764705882,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,yz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,_z=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5137254901960784,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);
  const float e2 = 0.375;
  const vec4 v2 = vec4(0.0196078431372549,1,1,1);
  const float e3 = 0.625;
  const vec4 v3 = vec4(1,1,0,1);
  const float e4 = 0.875;
  const vec4 v4 = vec4(0.9803921568627451,0,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.5019607843137255,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,xz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Iz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Cz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.2,0.0784313725490196,0.09411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,wz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Tz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.2,0.6,1,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.4,0.8,1,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(0.6,0.8,1,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8,0.8,1,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(1,1,1,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(1,0.8,1,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(1,0.6,1,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(1,0.4,0.8,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(1,0.4,0.4,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,Sz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,bz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.047058823529411764,0.2,0.5137254901960784,1);
  const float e1 = 0.25;
  const vec4 v1 = vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);
  const float e3 = 0.75;
  const vec4 v3 = vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,Rz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.7803921568627451,0,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(1,0,0.4745098039215686,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(1,0.4235294117647059,0,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8705882352941177,0.7607843137254902,0,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(0.5882352941176471,1,0,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(0,1,0.21568627450980393,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(0,0.9647058823529412,0.5882352941176471,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(0.403921568627451,0.2,0.9215686274509803,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(0.48627450980392156,0,0.7294117647058823,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,Bz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5882352941176471,0,0.35294117647058826,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0,0.7843137254901961,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0,0.09803921568627451,1,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0,0.596078431372549,1,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.17254901960784313,1,0.5882352941176471,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.592156862745098,1,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(1,0.9176470588235294,0,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.43529411764705883,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Pz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);
  const float e1 = 0.35;
  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);
  const float e4 = 0.7;
  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,Nz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Lz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,Mz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0.4,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,Oz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.01568627450980392,0.13725490196078433,0.2,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09019607843137255,0.2,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Dz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Fz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Qz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0.9921568627450981,0.803921568627451,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,kz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Uz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.6745098039215687,0,0.7333333333333333,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8588235294117647,0,0.6666666666666666,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(1,0,0.5098039215686274,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(1,0.24705882352941178,0.2901960784313726,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(1,0.4823529411764706,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9176470588235294,0.6901960784313725,0,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7450980392156863,0.8941176470588236,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,Gz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(0,1,0.5019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,Vz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8509803921568627,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,zz=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5019607843137255,0,0.14901960784313725,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.7411764705882353,0,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.9294117647058824,0.6274509803921569,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,uS={__proto__:null,alpha:ez,autumn:tz,bathymetry:nz,blackbody:rz,bluered:iz,bone:sz,cdom:oz,chlorophyll:az,cool:lz,copper:cz,cubehelix:uz,density:fz,earth:hz,electric:dz,freesurface_blue:Az,freesurface_red:gz,greens:pz,greys:mz,hot:Ez,hsv:vz,inferno:yz,jet:_z,magma:xz,oxygen:Iz,par:Cz,phase:wz,picnic:Tz,plasma:Sz,portland:bz,rainbow_soft:Rz,rainbow:Bz,rdbu:Pz,salinity:Nz,spring:Lz,summer:Mz,temperature:Oz,turbidity:Dz,velocity_blue:Fz,velocity_green:Qz,viridis:kz,warm:Uz,winter:Gz,yignbu:Vz,yiorrd:zz};function jz(t,e){return{name:`additive-colormap-${t}`,fs:`uniform float opacity;
uniform bool useTransparentColor;

${cS}
${e}

vec4 colormap(float intensity) {
  return vec4(apply_transparent_color(apply_cmap(min(1.,intensity)).xyz, apply_cmap(0.).xyz, useTransparentColor, opacity));
}`,inject:{"fs:DECKGL_MUTATE_COLOR":`  float intensityCombo = 0.;
  intensityCombo += max(0.,intensity0);
  intensityCombo += max(0.,intensity1);
  intensityCombo += max(0.,intensity2);
  intensityCombo += max(0.,intensity3);
  intensityCombo += max(0.,intensity4);
  intensityCombo += max(0.,intensity5);
  rgba = colormap(intensityCombo);`}}}const tf={colormap:{type:"string",value:"viridis",compare:!0},opacity:{type:"number",value:1,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},fS=class extends Ec{getShaders(){var n;const t=((n=this==null?void 0:this.props)==null?void 0:n.colormap)||tf.colormap.value,e=uS[t];if(!e)throw Error(`No colormap named ${t} found in registry`);return{modules:[jz(t,e)]}}updateState({props:t,oldProps:e,changeFlags:n,...r}){if(super.updateState({props:t,oldProps:e,changeFlags:n,...r}),t.colormap!==e.colormap){const{gl:i}=this.context;this.state.model&&(this.state.model.delete(),this.setState({model:this._getModel(i)}))}}draw(){var r;const{useTransparentColor:t=tf.useTransparentColor.value,opacity:e=tf.opacity.value}=this.props,n={opacity:e,useTransparentColor:t};(r=this.state.model)==null||r.setUniforms(n)}};fS.extensionName="AdditiveColormapExtension";fS.defaultProps=tf;const Hz=`uniform vec3 transparentColor;
uniform bool useTransparentColor;
uniform float opacity;

uniform vec3 colors[6];

${cS}

void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5) { 
  rgb += max(0.0, min(1.0, intensity0)) * vec3(colors[0]);
  rgb += max(0.0, min(1.0, intensity1)) * vec3(colors[1]);
  rgb += max(0.0, min(1.0, intensity2)) * vec3(colors[2]);
  rgb += max(0.0, min(1.0, intensity3)) * vec3(colors[3]);
  rgb += max(0.0, min(1.0, intensity4)) * vec3(colors[4]);
  rgb += max(0.0, min(1.0, intensity5)) * vec3(colors[5]);
}

vec4 apply_opacity(vec3 rgb) {
  return vec4(apply_transparent_color(rgb, transparentColor, useTransparentColor, opacity));
}
`,Wz=`vec3 rgb = rgba.rgb;
mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5);
rgba = apply_opacity(rgb);
`,Yz={name:"color-palette-module",fs:Hz,inject:{"fs:DECKGL_MUTATE_COLOR":Wz}};function $z(t,e,n){for(let r=0;r<n;r+=1)t.push(e);return t}const tx=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[255,128,0],[0,255,255],[255,255,255],[255,0,0]];function Vm(t){if(t>tx.length)throw new Error("Too many colors");return tx.slice(0,t)}function zm({colors:t,channelsVisible:e}){const n=t.map((s,o)=>e[o]?s.map(a=>a/JV):Z1),r=lS-n.length;return $z(n,Z1,r).reduce((s,o)=>s.concat(o),[])}const nf={colors:{type:"array",value:null,compare:!0},opacity:{type:"number",value:1,compare:!0},transparentColor:{type:"array",value:null,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},Ic=class extends Ec{getShaders(){return{...super.getShaders(),modules:[Yz]}}draw(){var a;const{colors:t,channelsVisible:e,opacity:n=nf.opacity.value,transparentColor:r=nf.transparentColor.value,useTransparentColor:i=nf.useTransparentColor.value}=this.props,o={colors:zm({channelsVisible:e||this.selections.map(()=>!0),colors:t||Vm(this.props.selections.length)}),opacity:n,transparentColor:(r||[0,0,0]).map(l=>l/255),useTransparentColor:Boolean(i)};(a=this.state.model)==null||a.setUniforms(o)}};Ic.extensionName="ColorPaletteExtension";Ic.defaultProps=nf;const Xz=`// lens bounds for ellipse
uniform float majorLensAxis;
uniform float minorLensAxis;
uniform vec2 lensCenter;

// lens uniforms
uniform bool lensEnabled;
uniform int lensSelection;
uniform vec3 lensBorderColor;
uniform float lensBorderRadius;

// color palette
uniform vec3 colors[6];

bool frag_in_lens_bounds(vec2 vTexCoord) {
  // Check membership in what is (not visually, but effectively) an ellipse.
  // Since the fragment space is a unit square and the real coordinates could be longer than tall,
  // to get a circle visually we have to treat the check as that of an ellipse to get the effect of a circle.

  // Check membership in ellipse.
  return pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.) < (1. - lensBorderRadius);
}

bool frag_on_lens_bounds(vec2 vTexCoord) {
  // Same as the above, except this checks the boundary.

  float ellipseDistance = pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.);

  // Check membership on "bourndary" of ellipse.
  return ellipseDistance <= 1. && ellipseDistance >= (1. - lensBorderRadius);
}
// Return a float for boolean arithmetic calculation.
float get_use_color_float(vec2 vTexCoord, int channelIndex) {
  bool isFragInLensBounds = frag_in_lens_bounds(vTexCoord);
  bool inLensAndUseLens = lensEnabled && isFragInLensBounds;
  return float(int((inLensAndUseLens && channelIndex == lensSelection) || (!inLensAndUseLens)));
 
}
void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord){
  float useColorValue = 0.;

  useColorValue = get_use_color_float(vTexCoord, 0);
  rgb += max(0., min(1., intensity0)) * max(vec3(colors[0]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 1);
  rgb += max(0., min(1., intensity1)) * max(vec3(colors[1]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 2);
  rgb += max(0., min(1., intensity2)) * max(vec3(colors[2]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 3);
  rgb += max(0., min(1., intensity3)) * max(vec3(colors[3]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 4);
  rgb += max(0., min(1., intensity4)) * max(vec3(colors[4]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 5);
  rgb += max(0., min(1., intensity5)) * max(vec3(colors[5]), (1. - useColorValue) * vec3(1., 1., 1.));
}
`,Kz={name:"lens-module",fs:Xz,inject:{"fs:DECKGL_MUTATE_COLOR":`
   vec3 rgb = rgba.rgb;
   mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);
   rgba = vec4(rgb, 1.);
  `,"fs:#main-end":`
      bool isFragOnLensBounds = frag_on_lens_bounds(vTexCoord);
     gl_FragColor = (lensEnabled && isFragOnLensBounds) ? vec4(lensBorderColor, 1.) : gl_FragColor;
  `}},Zs={lensEnabled:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},colors:{type:"array",value:null,compare:!0}},hS=class extends Ec{getShaders(){return{...super.getShaders(),modules:[Kz]}}initializeState(){const t=this.getCurrentLayer();if(t.isComposite)return;const e=()=>{const{viewportId:n}=t.props,{lensRadius:r=Zs.lensRadius.value}=this.props;if(!n){t.setState({unprojectLensBounds:[0,0,0,0]});return}const{mousePosition:i}=t.context,s=t.context.deck.viewManager.views.filter(l=>l.id===n)[0],o=t.context.deck.viewManager.viewState[n],a=s.makeViewport({...o,viewState:o});if(i&&a.containsPixel(i)){const l={x:i.x-a.x,y:i.y-a.y},u=[[l.x-r,l.y],[l.x,l.y+r],[l.x+r,l.y],[l.x,l.y-r]].map((f,h)=>a.unproject(f)[h%2]);t.setState({unprojectLensBounds:u})}else t.setState({unprojectLensBounds:[0,0,0,0]})};this.context.deck&&this.context.deck.eventManager.on({pointermove:e,pointerleave:e,wheel:e}),this.setState({onMouseMove:e,unprojectLensBounds:[0,0,0,0]})}draw(){var x;const{unprojectLensBounds:t=[0,0,0,0]}=this.state,{bounds:e,lensEnabled:n=Zs.lensEnabled.value,lensSelection:r=Zs.lensSelection.value,lensBorderColor:i=Zs.lensBorderColor.value,lensBorderRadius:s=Zs.lensBorderRadius.value,colors:o,channelsVisible:a}=this.props,[l,c,u,f]=t,[h,d,A,p]=e,g=(l-h)/(A-h),m=(c-p)/(d-p),E=(u-h)/(A-h),v=(f-p)/(d-p),y=zm({channelsVisible:a||this.selections.map(()=>!0),colors:o||Vm(this.props.selections.length)}),C={majorLensAxis:(E-g)/2,minorLensAxis:(m-v)/2,lensCenter:[(E+g)/2,(m+v)/2],lensEnabled:n,lensSelection:r,lensBorderColor:i,lensBorderRadius:s,colors:y};(x=this.state.model)==null||x.setUniforms(C)}finalizeState(){var t,e,n;this.context.deck&&this.context.deck.eventManager.off({pointermove:(t=this.state)==null?void 0:t.onMouseMove,pointerleave:(e=this.state)==null?void 0:e.onMouseMove,wheel:(n=this.state)==null?void 0:n.onMouseMove})}};hS.extensionName="LensExtension";hS.defaultProps=Zs;function qz(t,e){const n=`${e}

vec4 colormap(float intensity, float opacity) {
  return vec4(apply_cmap(min(1.,intensity)).xyz, opacity);
}`;return{name:`additive-colormap-3d-${t}`,fs:n}}const dS={colormap:{type:"string",value:"viridis",compare:!0}},Cc=class extends Ec{getShaders(){var n;const t=((n=this==null?void 0:this.props)==null?void 0:n.colormap)||dS.colormap.value,e=uS[t];return{...super.getShaders(),modules:[qz(t,e)]}}updateState({props:t,oldProps:e,changeFlags:n,...r}){if(super.updateState({props:t,oldProps:e,changeFlags:n,...r}),t.colormap!==e.colormap){const{gl:i}=this.context;this.state.model&&(this.state.model.delete(),this.setState({model:this._getModel(i)}))}}};Cc.extensionName="BaseExtension";Cc.defaultProps=dS;const Jz="",Zz=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;

  for(int i = 0; i < 6; i++) {
    total += intensityArray[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);

  vec4 val_color = colormap(total, total);

  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
  p += ray_dir * dt;
`,ej="",tj=class extends Cc{constructor(t){super(t),this.opts.rendering={_BEFORE_RENDER:Jz,_RENDER:Zz,_AFTER_RENDER:ej}}};tj.extensionName="AdditiveBlendExtension";const nj=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,rj=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,ij=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += maxVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,sj=class extends Cc{constructor(t){super(t),this.opts.rendering={_BEFORE_RENDER:nj,_RENDER:rj,_AFTER_RENDER:ij}}};sj.extensionName="MaximumIntensityProjectionExtension";const oj=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,aj=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,lj=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += minVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,cj=class extends Cc{constructor(t){super(t),this.opts.rendering={_BEFORE_RENDER:oj,_RENDER:aj,_AFTER_RENDER:lj}}};cj.extensionName="MinimumIntensityProjectionExtension";const uj={colors:{type:"array",value:null,compare:!0}},ia=class extends Ec{draw(){var i;const{colors:t,channelsVisible:e}=this.props,r={colors:zm({channelsVisible:e||this.selections.map(()=>!0),colors:t||Vm(this.props.selections.length)})};(i=this.state.model)==null||i.setUniforms(r)}};ia.extensionName="BaseExtension";ia.defaultProps=uj;const fj="",hj=`  vec3 rgbCombo = vec3(0.0);
  vec3 hsvCombo = vec3(0.0);
  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    float intensityValue = intensityArray[i];
    rgbCombo += max(0.0, min(1.0, intensityValue)) * colors[i];
    total += intensityValue;
  }
  // Do not go past 1 in opacity.
  total = min(total, 1.0);
  vec4 val_color = vec4(rgbCombo, total);
  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
`,dj="",AS=class extends ia{constructor(t){super(t),this.opts.rendering={_BEFORE_RENDER:fj,_RENDER:hj,_AFTER_RENDER:dj}}};AS.extensionName="AdditiveBlendExtension";const Aj=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,gj=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,pj=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, maxVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,gS=class extends ia{constructor(t){super(t),this.opts.rendering={_BEFORE_RENDER:Aj,_RENDER:gj,_AFTER_RENDER:pj}}};gS.extensionName="MaximumIntensityProjectionExtension";const mj=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,Ej=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,vj=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, minVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,pS=class extends ia{constructor(t){super(t),this.opts.rendering={_BEFORE_RENDER:mj,_RENDER:Ej,_AFTER_RENDER:vj}}};pS.extensionName="MinimumIntensityProjectionExtension";const mS={BaseExtension:ia,AdditiveBlendExtension:AS,MaximumIntensityProjectionExtension:gS,MinimumIntensityProjectionExtension:pS},yj=`float apply_contrast_limits(float intensity, vec2 contrastLimits) {
    return  max(0., (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0])));
}
`,_j={name:"channel-intensity",defines:{SAMPLER_TYPE:"usampler2D",COLORMAP_FUNCTION:""},fs:yj};function xj(t){return[...Array(t).keys()]}function ES(t,e,n){for(let r=0;r<n;r+=1)t.push(e);return t}function jm(t){const e=ex[t];if(!e){const n=Object.keys(ex);throw Error(`Dtype not supported, got ${t}. Must be one of ${n}.`)}return e}function vS({contrastLimits:t=[],channelsVisible:e,domain:n,dtype:r}){const i=n&&n[1]||jm(r).max,s=t.map((l,c)=>e[c]?l:[i,i]),o=lS-s.length;if(o<0)throw Error(`${s.lengths} channels passed in, but only 6 are allowed.`);return ES(s,[i,i],o).reduce((l,c)=>l.concat(c),[])}function Ij(t){var i,s;const{x:e,y:n,z:r}=(s=(i=t==null?void 0:t.meta)==null?void 0:i.physicalSizes)!=null?s:{};if((e==null?void 0:e.size)&&(n==null?void 0:n.size)&&(r==null?void 0:r.size)){const o=Math.min(r.size,e.size,n.size),a=[e.size/o,n.size/o,r.size/o];return new De().scale(a)}return new De().identity()}function Cj(t){const e=new gm().makeViewport({viewState:t,height:t.height,width:t.width});return[e.unproject([0,0]),e.unproject([e.width,0]),e.unproject([e.width,e.height]),e.unproject([0,e.height])]}const wj=`#define SHADER_NAME xr-layer-fragment-shader

precision highp float;
precision highp int;
precision highp SAMPLER_TYPE;

// our texture
uniform SAMPLER_TYPE channel0;
uniform SAMPLER_TYPE channel1;
uniform SAMPLER_TYPE channel2;
uniform SAMPLER_TYPE channel3;
uniform SAMPLER_TYPE channel4;
uniform SAMPLER_TYPE channel5;

in vec2 vTexCoord;

// range
uniform vec2 contrastLimits[6];

void main() {

  float intensity0 = float(texture(channel0, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity0, contrastLimits[0], 0);
  float intensity1 = float(texture(channel1, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity1, contrastLimits[1], 1);
  float intensity2 = float(texture(channel2, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity2, contrastLimits[2], 2);
  float intensity3 = float(texture(channel3, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity3, contrastLimits[3], 3);
  float intensity4 = float(texture(channel4, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity4, contrastLimits[4], 4);
  float intensity5 = float(texture(channel5, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity5, contrastLimits[5], 5);

  DECKGL_MUTATE_COLOR(gl_FragColor, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);


  geometry.uv = vTexCoord;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Tj=`#define SHADER_NAME xr-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;
attribute vec3 instancePickingColors;
varying vec2 vTexCoord;

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;
  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vTexCoord = texCoords;
  vec4 color = vec4(0.);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,nx={fs:wj,vs:Tj};function Sj(t,e){const n=$g(t,Oe.TEXTURE_FLOAT),r=$g(t,Oe.TEXTURE_FILTER_LINEAR_FLOAT);if(!n)throw new Error("WebGL1 context does not support floating point textures.  Unable to display raster data.");return!r&&e===he.LINEAR?(console.warn("LINEAR filtering not supported in WebGL1 context.  Falling back to NEAREST."),he.NEAREST):e}function rx(t,e,n){if(!_e(e))return{format:he.LUMINANCE,dataFormat:he.LUMINANCE,type:he.FLOAT,sampler:"sampler2D",shaderModule:nx,filter:Sj(e,n),cast:a=>new Float32Array(a)};const r=n===he.LINEAR,i={...nx},s=`#version 300 es
`;return i.fs=s.concat(i.fs),i.vs=s.concat(i.vs),{...jm(r?"Float32":t),shaderModule:i,filter:n,cast:r?a=>new Float32Array(a):a=>a}}const bj={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:ue.CARTESIAN,channelData:{type:"object",value:{},compare:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint16",compare:!0},interpolation:{type:"number",value:he.NEAREST,compare:!0}},sa=class extends En{getShaders(){const{dtype:t,interpolation:e}=this.props,{shaderModule:n,sampler:r}=rx(t,this.context.gl,e),i=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),s={..._j,inject:{}};return i||(s.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({...n,defines:{SAMPLER_TYPE:r},modules:[Vi,zi,s]})}_isHookDefinedByExtensions(t){const{extensions:e}=this.props;return e==null?void 0:e.some(n=>{const r=n.getShaders(),{inject:i={},modules:s=[]}=r,o=i[t],a=s.some(l=>l==null?void 0:l.inject[t]);return o||a})}initializeState(){const{gl:t}=this.context;t.pixelStorei(he.UNPACK_ALIGNMENT,1),t.pixelStorei(he.PACK_ALIGNMENT,1),this.getAttributeManager().add({positions:{size:3,type:he.DOUBLE,fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)});const n=Ns.getDefaultProgramManager(t),r="fs:DECKGL_MUTATE_COLOR(inout vec4 rgba, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord)",i="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";n._hookFunctions.includes(r)||n.addShaderHook(r),n._hookFunctions.includes(i)||n.addShaderHook(i)}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(t=>t&&t.delete())}updateState({props:t,oldProps:e,changeFlags:n,...r}){var s,o;if(super.updateState({props:t,oldProps:e,changeFlags:n,...r}),n.extensionsChanged||t.interpolation!==e.interpolation){const{gl:a}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}(t.channelData!==e.channelData&&((s=t.channelData)==null?void 0:s.data)!==((o=e.channelData)==null?void 0:o.data)||t.interpolation!==e.interpolation)&&this.loadChannelTextures(t.channelData);const i=this.getAttributeManager();t.bounds!==e.bounds&&i.invalidate("positions")}_getModel(t){return t?new Rn(t,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:he.TRIANGLE_FAN,vertexCount:4,attributes:{texCoords:new Float32Array([0,1,0,0,1,0,1,1])}}),isInstanced:!1}):null}calculatePositions(t){const{positions:e}=this.state,{bounds:n}=this.props;e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[0],e[4]=n[3],e[5]=0,e[6]=n[2],e[7]=n[3],e[8]=0,e[9]=n[2],e[10]=n[1],e[11]=0,t.value=e}draw({uniforms:t}){const{textures:e,model:n}=this.state;if(e&&n){const{contrastLimits:r,domain:i,dtype:s,channelsVisible:o}=this.props,a=Object.values(e).filter(c=>c).length,l=vS({contrastLimits:r.slice(0,a),channelsVisible:o.slice(0,a),domain:i,dtype:s});n.setUniforms({...t,contrastLimits:l,...e}).draw()}}loadChannelTextures(t){const e={channel0:null,channel1:null,channel2:null,channel3:null,channel4:null,channel5:null};this.state.textures&&Object.values(this.state.textures).forEach(n=>n&&n.delete()),t&&Object.keys(t).length>0&&t.data&&(t.data.forEach((n,r)=>{e[`channel${r}`]=this.dataToTexture(n,t.width,t.height)},this),this.setState({textures:e}))}dataToTexture(t,e,n){var s,o;const{interpolation:r}=this.props,i=rx(this.props.dtype,this.context.gl,r);return new gn(this.context.gl,{width:e,height:n,data:(o=(s=i.cast)==null?void 0:s.call(i,t))!=null?o:t,mipmaps:!1,parameters:{[he.TEXTURE_MIN_FILTER]:i.filter,[he.TEXTURE_MAG_FILTER]:i.filter,[he.TEXTURE_WRAP_S]:he.CLAMP_TO_EDGE,[he.TEXTURE_WRAP_T]:he.CLAMP_TO_EDGE},format:i.format,dataFormat:i.dataFormat,type:i.type})}};sa.layerName="XRLayer";sa.defaultProps=bj;const Nr={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},yS={...Uh.defaultProps,pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:ue.CARTESIAN},Rj=(t,e)=>{const n=e?"true":"false",r=`vec3(${(e||[0,0,0]).map(i=>String(i/255)).join(",")})`;switch(t){case Nr.RGB:return`color[3] = (${n} && (color.rgb == ${r})) ? 0.0 : color.a;`;case Nr.WhiteIsZero:return`          float value = 1.0 - (color.r / 256.0);
          color = vec4(value, value, value, (${n} && vec3(value, value, value) == ${r}) ? 0.0 : color.a);
        `;case Nr.BlackIsZero:return`          float value = (color.r / 256.0);
          color = vec4(value, value, value, (${n} && vec3(value, value, value) == ${r}) ? 0.0 : color.a);
        `;case Nr.YCbCr:return`          float y = color[0];
          float cb = color[1];
          float cr = color[2];
          color[0] = (y + (1.40200 * (cr - .5)));
          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));
          color[2] = (y + (1.77200 * (cb - .5)));
          color[3] = (${n} && distance(color.rgb, ${r}) < 0.01) ? 0.0 : color.a;
        `;default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),""}},Bj=t=>{switch(t){case Nr.RGB:return[0,0,0,0];case Nr.WhiteIsZero:return[255,255,255,0];case Nr.BlackIsZero:return[0,0,0,0];case Nr.YCbCr:return[16,128,128,0];default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),[0,0,0,0]}};class Hm extends Uh{_getModel(e){const{photometricInterpretation:n,transparentColorInHook:r}=this.props,i=Rj(n,r);return e?new Rn(e,{...this.getShaders(),id:this.props.id,geometry:new Er({drawMode:he.TRIANGLES,vertexCount:6}),isInstanced:!1,inject:{"fs:DECKGL_FILTER_COLOR":i}}):null}}const wc=class extends Nn{initializeState(t){const{gl:e}=this.context;e.pixelStorei(he.UNPACK_ALIGNMENT,1),e.pixelStorei(he.PACK_ALIGNMENT,1),super.initializeState(t)}renderLayers(){const{photometricInterpretation:t,transparentColor:e}=this.props,n=Bj(t);return new Hm(this.props,{transparentColor:n,transparentColorInHook:e,id:`${this.props.id}-wrapped`})}};wc.layerName="BitmapLayer";wc.PHOTOMETRIC_INTERPRETATIONS=Nr;wc.defaultProps={...yS,image:{type:"object",value:{},compare:!0},transparentColor:{type:"array",value:[0,0,0],compare:!0},photometricInterpretation:{type:"number",value:2,compare:!0}};Hm.defaultProps=yS;Hm.layerName="BitmapLayerWrapper";function Pj(t){const{bbox:{left:e,top:n,right:r,bottom:i},x:s,y:o,z:a}=t.tile,{data:l,id:c,loader:u,maxZoom:f}=t;if([e,i,r,n].some(g=>g<0)||!l)return null;const h=u[0],{height:d,width:A}=xc(h),p=[e,l.height<h.tileSize?d:i,l.width<h.tileSize?A:r,n];if(Vo(h.shape)){const{photometricInterpretation:g=2}=h.meta;return new wc(t,{image:l,photometricInterpretation:g,bounds:p,id:`tile-sub-layer-${p}-${c}`,tileId:{x:s,y:o,z:a},extensions:[]})}return new sa(t,{channelData:l,bounds:p,id:`tile-sub-layer-${p}-${c}`,tileId:{x:s,y:o,z:a},interpolation:a===f?he.NEAREST:he.LINEAR})}const Nj={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:ue.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},renderSubLayers:{type:"function",value:Pj,compare:!1},dtype:{type:"string",value:"Uint16",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},interpolation:{type:"number",value:null,compare:!0}};class Wm extends Sm{_updateTileset(){this.props.viewportId||super._updateTileset(),(this.props.viewportId&&this.context.viewport.id===this.props.viewportId||!this.state.tileset._viewport)&&super._updateTileset()}}Wm.layerName="MultiscaleImageLayerBase";Wm.defaultProps=Nj;const Lj={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:ue.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[]},compare:!0},onClick:{type:"function",value:null,compare:!0},onViewportLoad:{type:"function",value:null,compare:!0},interpolation:{type:"number",value:he.NEAREST,compare:!0},extensions:{type:"array",value:[new Ic],compare:!0}},Tc=class extends Nn{finalizeState(){this.state.abortController.abort()}updateState({props:t,oldProps:e}){const n=t.loader!==e.loader,r=t.selections!==e.selections;if(n||r){const{loader:i,selections:s=[],onViewportLoad:o}=this.props,a=new AbortController;this.setState({abortController:a});const{signal:l}=a,c=f=>i.getRaster({selection:f,signal:l}),u=s.map(c);Promise.all(u).then(f=>{var d,A;const h={data:f.map(p=>p.data),width:(d=f[0])==null?void 0:d.width,height:(A=f[0])==null?void 0:A.height};Vo(i.shape)&&(h.data=h.data[0],h.data.length===h.width*h.height*3&&(h.format=he.RGB,h.dataFormat=he.RGB)),o&&o(h),this.setState({...h})}).catch(f=>{if(f!==aS)throw f})}}getPickingInfo({info:t,sourceLayer:e}){return t.sourceLayer=e,t.tile=e.props.tile,t}renderLayers(){const{loader:t,id:e}=this.props,{dtype:n}=t,{width:r,height:i,data:s}=this.state;if(!(r&&i))return null;const o=[0,i,r,0];if(Vo(t.shape)){const{photometricInterpretation:a=2}=t.meta;return new wc(this.props,{image:this.state,photometricInterpretation:a,bounds:o,id:`image-sub-layer-${o}-${e}`,extensions:[]})}return new sa(this.props,{channelData:{data:s,height:i,width:r},bounds:o,id:`image-sub-layer-${o}-${e}`,dtype:n})}};Tc.layerName="ImageLayer";Tc.defaultProps=Lj;const Mj={pickable:{type:"boolean",value:!0,compare:!0},onHover:{type:"function",value:null,compare:!1},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},maxRequests:{type:"number",value:10,compare:!0},onClick:{type:"function",value:null,compare:!0},refinementStrategy:{type:"string",value:null,compare:!0},excludeBackground:{type:"boolean",value:!1,compare:!0},extensions:{type:"array",value:[new Ic],compare:!0}},Ym=class extends Nn{renderLayers(){const{loader:t,selections:e,opacity:n,viewportId:r,onTileError:i,onHover:s,id:o,onClick:a,modelMatrix:l,excludeBackground:c,refinementStrategy:u}=this.props,{tileSize:f,dtype:h}=t[0],d=async({x,y:B,z:R,signal:b})=>{if(!e||e.length===0)return null;const N=Math.round(-R),H=D=>{const G={x,y:B,selection:D,signal:b};return t[N].getTile(G)};try{const D=await Promise.all(e.map(H)),G={data:D.map(W=>W.data),width:D[0].width,height:D[0].height};return Vo(t[N].shape)&&(G.data=G.data[0],G.data.length===G.width*G.height*3&&(G.format=he.RGB,G.dataFormat=he.RGB)),G}catch(D){if(D===aS)return null;throw D}},{height:A,width:p}=xc(t[0]),g=new Wm(this.props,{id:`Tiled-Image-${o}`,getTileData:d,dtype:h,tileSize:f,zoomOffset:Math.round(Math.log2(l?l.getScale()[0]:1)),extent:[0,0,p,A],minZoom:Math.round(-(t.length-1)),maxZoom:0,refinementStrategy:u||(n===1?"best-available":"no-overlap"),updateTriggers:{getTileData:[t,e]},onTileError:i||t[0].onTileError}),m=t[t.length-1],E=typeof m.getRaster=="function",v=l?l.clone():new De;return[E&&!c&&new Tc(this.props,{id:`Background-Image-${o}`,loader:m,modelMatrix:v.scale(2**(t.length-1)),visible:!r||this.context.viewport.id===r,onHover:s,onClick:a,interpolation:he.LINEAR,onViewportLoad:null}),g]}};Ym.layerName="MultiscaleImageLayer";Ym.defaultProps=Mj;const Oj={pickable:{type:"boolean",value:!0,compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),getRasterSize:()=>({height:0,width:0}),dtype:"<u2"},compare:!0},id:{type:"string",value:"",compare:!0},boundingBox:{type:"array",value:[[0,0],[0,1],[1,1],[1,0]],compare:!0},boundingBoxColor:{type:"array",value:[255,0,0],compare:!0},boundingBoxOutlineWidth:{type:"number",value:1,compare:!0},viewportOutlineColor:{type:"array",value:[255,190,0],compare:!0},viewportOutlineWidth:{type:"number",value:2,compare:!0},overviewScale:{type:"number",value:1,compare:!0},zoom:{type:"number",value:1,compare:!0}},_S=class extends Nn{renderLayers(){const{loader:t,id:e,zoom:n,boundingBox:r,boundingBoxColor:i,boundingBoxOutlineWidth:s,viewportOutlineColor:o,viewportOutlineWidth:a,overviewScale:l}=this.props,{width:c,height:u}=xc(t[0]),f=t.length-1,h=t[f],d=new Tc(this.props,{id:`viewport-${e}`,modelMatrix:new De().scale(2**f*l),loader:h}),A=new Hf({id:`bounding-box-overview-${e}`,coordinateSystem:ue.CARTESIAN,data:[r],getPolygon:m=>m,filled:!1,stroked:!0,getLineColor:i,getLineWidth:s*2**n}),p=new Hf({id:`viewport-outline-${e}`,coordinateSystem:ue.CARTESIAN,data:[[[0,0],[c*l,0],[c*l,u*l],[0,u*l]]],getPolygon:m=>m,filled:!1,stroked:!0,getLineColor:o,getLineWidth:a*2**n});return[d,A,p]}};_S.layerName="OverviewLayer";_S.defaultProps=Oj;function Dj(t,e,n){const r=t[2][0]-t[0][0];switch(e){case"bottom-right":{const i=t[2][1]-(t[2][1]-t[0][1])*n,s=t[2][0]-r*n;return[i,s]}case"top-right":{const i=(t[2][1]-t[0][1])*n,s=t[2][0]-r*n;return[i,s]}case"top-left":{const i=(t[2][1]-t[0][1])*n,s=r*n;return[i,s]}case"bottom-left":{const i=t[2][1]-(t[2][1]-t[0][1])*n,s=r*n;return[i,s]}default:throw new Error(`Position ${e} not found`)}}const Fj={pickable:{type:"boolean",value:!0,compare:!0},viewState:{type:"object",value:{zoom:0,target:[0,0,0]},compare:!0},unit:{type:"string",value:"",compare:!0},size:{type:"number",value:1,compare:!0},position:{type:"string",value:"bottom-right",compare:!0},length:{type:"number",value:.085,compare:!0}},xS=class extends Nn{renderLayers(){const{id:t,unit:e,size:n,position:r,viewState:i,length:s}=this.props,o=Cj(i),{zoom:a}=i,c=(o[2][0]-o[0][0])*.05,u=Math.max(2**(-a+1.5),(o[2][1]-o[0][1])*.007),f=c*n,[h,d]=Dj(o,r,s),A=new gl({id:`scale-bar-length-${t}`,coordinateSystem:ue.CARTESIAN,data:[[[d,h],[d+c,h]]],getSourcePosition:E=>E[0],getTargetPosition:E=>E[1],getWidth:2,getColor:[220,220,220]}),p=new gl({id:`scale-bar-height-left-${t}`,coordinateSystem:ue.CARTESIAN,data:[[[d,h-u],[d,h+u]]],getSourcePosition:E=>E[0],getTargetPosition:E=>E[1],getWidth:2,getColor:[220,220,220]}),g=new gl({id:`scale-bar-height-right-${t}`,coordinateSystem:ue.CARTESIAN,data:[[[d+c,h-u],[d+c,h+u]]],getSourcePosition:E=>E[0],getTargetPosition:E=>E[1],getWidth:2,getColor:[220,220,220]}),m=new ea({id:`units-label-layer-${t}`,coordinateSystem:ue.CARTESIAN,data:[{text:f.toPrecision(5)+e,position:[d+c*.5,h+u*4]}],getColor:[220,220,220,255],getSize:12,fontFamily:ZV,sizeUnits:"meters",sizeScale:2**-a,characterSet:[...e.split(""),...xj(10).map(E=>String(E)),".","e","+"]});return[A,p,g,m]}};xS.layerName="ScaleBarLayer";xS.defaultProps=Fj;const Qj=`#version 300 es
#define SHADER_NAME xr-layer-vertex-shader

// Unit-cube vertices
in vec3 positions;

// Eye position - last column of the inverted view matrix
uniform vec3 eye_pos;
// Projection matrix
uniform mat4 proj;
// Model Matrix
uniform mat4 model;
// View Matrix
uniform mat4 view;
// A matrix for scaling in the model space before any transformations.
// This projects the unit cube up to match the "pixel size" multiplied by the physical size ratio, if provided.
uniform mat4 scale;
uniform mat4 resolution;


out vec3 vray_dir;
flat out vec3 transformed_eye;

void main() {

  // Step 1: Standard MVP transformation (+ the scale matrix) to place the positions on your 2D screen ready for rasterization + fragment processing.
  gl_Position = proj * view * model * scale * resolution * vec4(positions, 1.);

  // Step 2: Invert the eye back from world space to the normalized 0-1 cube world space because ray casting on the fragment shader runs in 0-1 space.
  // Geometrically, the transformed_eye is a position relative to the 0-1 normalized vertices, which themselves are the inverse of the model + scale trasnformation.
  // See below for an example which does not involve a scale transformation, for simplicity, but motivates geometrically the needed transformation on eye_pos.
  /*
  This first diagram is a skewed volume (i.e a "shear" model matrix applied) top down with the eye marked as #, all in world space
       ^
    ___|__
    \\  |  \\
     \\ |   \\
      \\|____\\
       | 
       | 
       |
       #

  This next diagram shows the volume after the inverse model matrix has placed it back in model coordinates, but the eye still in world space. 
       ^
    ___|___
    |  |  |
    |  |  |
    |__|__|
       |
       |
       |
       #

  Finally, we apply the inverse model matrix transformation to the eye as well to bring it too into world space.
  Notice that the ray here matches the "voxels" through which the first ray also passes, as desired.
         ^
    ____/__
    |  /  |
    | /   |
    |/____|
    /
   /
  /
 #
  */
  transformed_eye = (inverse(resolution) * inverse(scale) * inverse(model) * (vec4(eye_pos, 1.))).xyz;

  // Step 3: Rays are from eye to vertices so that they get interpolated over the fragments.
  vray_dir = positions - transformed_eye;
}
`,kj=`#version 300 es
precision highp int;
precision highp float;
precision highp SAMPLER_TYPE;

uniform highp SAMPLER_TYPE volume0;
uniform highp SAMPLER_TYPE volume1;
uniform highp SAMPLER_TYPE volume2;
uniform highp SAMPLER_TYPE volume3;
uniform highp SAMPLER_TYPE volume4;
uniform highp SAMPLER_TYPE volume5;

uniform vec3 scaledDimensions;

uniform mat4 scale;

uniform vec3 normals[NUM_PLANES];
uniform float distances[NUM_PLANES];

// color
uniform vec3 colors[6];

// slices
uniform vec2 xSlice;
uniform vec2 ySlice;
uniform vec2 zSlice;

// range
uniform vec2 contrastLimits[6];

in vec3 vray_dir;
flat in vec3 transformed_eye;
out vec4 color;

vec2 intersect_box(vec3 orig, vec3 dir) {
	vec3 box_min = vec3(xSlice[0], ySlice[0], zSlice[0]);
	vec3 box_max = vec3(xSlice[1], ySlice[1], zSlice[1]);
	vec3 inv_dir = 1. / dir;
	vec3 tmin_tmp = (box_min - orig) * inv_dir;
	vec3 tmax_tmp = (box_max - orig) * inv_dir;
	vec3 tmin = min(tmin_tmp, tmax_tmp);
	vec3 tmax = max(tmin_tmp, tmax_tmp);
	float t0 = max(tmin.x, max(tmin.y, tmin.z));
  float t1 = min(tmax.x, min(tmax.y, tmax.z));
  vec2 val = vec2(t0, t1);
	return val;
}

float linear_to_srgb(float x) {
	if (x <= 0.0031308f) {
		return 12.92f * x;
	}
	return 1.055f * pow(x, 1.f / 2.4f) - 0.055f;
}

// Pseudo-random number gen from
// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/
// with some tweaks for the range of values
float wang_hash(int seed) {
	seed = (seed ^ 61) ^ (seed >> 16);
	seed *= 9;
	seed = seed ^ (seed >> 4);
	seed *= 0x27d4eb2d;
	seed = seed ^ (seed >> 15);
	return float(seed % 2147483647) / float(2147483647);
}


void main(void) {
	// Step 1: Normalize the view ray
	vec3 ray_dir = normalize(vray_dir);

	// Step 2: Intersect the ray with the volume bounds to find the interval
	// along the ray overlapped by the volume.
	vec2 t_hit = intersect_box(transformed_eye, ray_dir);
	if (t_hit.x > t_hit.y) {
		discard;
	}
	// We don't want to sample voxels behind the eye if it's
	// inside the volume, so keep the starting point at or in front
	// of the eye
	t_hit.x = max(t_hit.x, 0.);

	// Step 3: Compute the step size to march through the volume grid
	vec3 dt_vec = 1. / (scale * vec4(abs(ray_dir), 1.)).xyz;
	float dt = 1. * min(dt_vec.x, min(dt_vec.y, dt_vec.z));

	float offset = wang_hash(int(gl_FragCoord.x + 640. * gl_FragCoord.y));

	// Step 4: Starting from the entry point, march the ray through the volume
	// and sample it
	vec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;

	// TODO: Probably want to stop this process at some point to improve performance when marching down the edges.
	_BEFORE_RENDER
	for (float t = t_hit.x; t < t_hit.y; t += dt) {
		// Check if this point is on the "positive" side or "negative" side of the plane - only show positive.
		float canShow = 1.;
		for (int i = 0; i < NUM_PLANES; i += 1) {
			canShow *= max(0., sign(dot(normals[i], p) + distances[i]));
		}
		// Do not show coordinates outside 0-1 box.
		// Something about the undefined behavior outside the box causes the additive blender to 
		// render some very odd artifacts.
		float canShowXCoordinate = max(p.x - 0., 0.) * max(1. - p.x , 0.);
		float canShowYCoordinate = max(p.y - 0., 0.) * max(1. - p.y , 0.);
		float canShowZCoordinate = max(p.z - 0., 0.) * max(1. - p.z , 0.);
		float canShowCoordinate = float(ceil(canShowXCoordinate * canShowYCoordinate * canShowZCoordinate));
		canShow = canShowCoordinate * canShow;
		float intensityValue0 = float(texture(volume0, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue0, contrastLimits[0], 0);
		intensityValue0 = canShow * intensityValue0;
		float intensityValue1 = float(texture(volume1, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue1, contrastLimits[1], 1);
		intensityValue1 = canShow * intensityValue1;
		float intensityValue2 = float(texture(volume2, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue2, contrastLimits[2], 2);
		intensityValue2 = canShow * intensityValue2;
		float intensityValue3 = float(texture(volume3, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue3, contrastLimits[3], 3);
		intensityValue3 = canShow * intensityValue3;
    	float intensityValue4 = float(texture(volume4, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue4, contrastLimits[4], 4);
		intensityValue4 = canShow * intensityValue4;
		float intensityValue5 = float(texture(volume5, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue5, contrastLimits[5], 5);
		intensityValue5 = canShow * intensityValue5;

		_RENDER

		p += ray_dir * dt;
	}
	_AFTER_RENDER
  color.r = linear_to_srgb(color.r);
  color.g = linear_to_srgb(color.g);
  color.b = linear_to_srgb(color.b);
}
`,Uj={name:"channel-intensity-module",fs:`    float apply_contrast_limits(float intensity, vec2 contrastLimits) {
      float contrastLimitsAppliedToIntensity = (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0]));
      return max(0., contrastLimitsAppliedToIntensity);
    }
  `},Gj=[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0],ix=1,Vj={pickable:!1,coordinateSystem:ue.CARTESIAN,channelData:{type:"object",value:{},compare:!0},contrastLimits:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint8",compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},resolutionMatrix:{type:"object",value:new De,compare:!0},channelsVisible:{type:"array",value:[],compare:!0},extensions:{type:"array",value:[new mS.AdditiveBlendExtension],compare:!0}};function sx(){const t=jm("Float32");return{...t,sampler:t.sampler.replace("2D","3D"),cast:e=>new Float32Array(e)}}function zj(t){let e={};if(t.forEach(n=>{e=n.opts.rendering}),!e._RENDER)throw new Error("XR3DLayer requires at least one extension to define opts.rendering as an object with _RENDER as a property at the minimum.");return e}const $m=class extends En{initializeState(){const{gl:t}=this.context;t.pixelStorei(he.UNPACK_ALIGNMENT,1),t.pixelStorei(he.PACK_ALIGNMENT,1);const e=Ns.getDefaultProgramManager(t),n="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";e._hookFunctions.includes(n)||e.addShaderHook(n)}_isHookDefinedByExtensions(t){const{extensions:e}=this.props;return e==null?void 0:e.some(n=>{const r=n.getShaders();if(r){const{inject:i={},modules:s=[]}=r,o=i[t],a=s.some(l=>l.inject&&(l==null?void 0:l.inject[t]));return o||a}return!1})}getShaders(){const{clippingPlanes:t,extensions:e}=this.props,{sampler:n}=sx(),{_BEFORE_RENDER:r,_RENDER:i,_AFTER_RENDER:s}=zj(e),o=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),a={inject:{},...Uj};return o||(a.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({vs:Qj,fs:kj.replace("_BEFORE_RENDER",r).replace("_RENDER",i).replace("_AFTER_RENDER",s),defines:{SAMPLER_TYPE:n,NUM_PLANES:String(t.length||ix)},modules:[a]})}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(t=>t&&t.delete())}updateState({props:t,oldProps:e,changeFlags:n}){var r,i;if(n.extensionsChanged||t.colormap!==e.colormap||t.renderingMode!==e.renderingMode||t.clippingPlanes.length!==e.clippingPlanes.length){const{gl:s}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)})}t.channelData&&((r=t==null?void 0:t.channelData)==null?void 0:r.data)!==((i=e==null?void 0:e.channelData)==null?void 0:i.data)&&this.loadTexture(t.channelData)}_getModel(t){return t?new Rn(t,{...this.getShaders(),geometry:new Er({drawMode:t.TRIANGLE_STRIP,attributes:{positions:new Float32Array(Gj)}})}):null}draw({uniforms:t}){const{textures:e,model:n,scaleMatrix:r}=this.state,{contrastLimits:i,xSlice:s,ySlice:o,zSlice:a,modelMatrix:l,channelsVisible:c,domain:u,dtype:f,clippingPlanes:h,resolutionMatrix:d}=this.props,{viewMatrix:A,viewMatrixInverse:p,projectionMatrix:g}=this.context.viewport;if(e&&n&&r){const m=vS({contrastLimits:i,channelsVisible:c,domain:u,dtype:f}),E=r.clone().invert(),v=d.clone().invert(),y=ES(h.map(B=>B.clone().transform(E).transform(v)),new Ci([1,0,0]),h.length||ix),C=y.map(B=>B.normal).flat(),x=y.map(B=>B.distance);n.setUniforms({...t,...e,contrastLimits:m,xSlice:new Float32Array(s?s.map(B=>B/r[0]/d[0]):[0,1]),ySlice:new Float32Array(o?o.map(B=>B/r[5]/d[5]):[0,1]),zSlice:new Float32Array(a?a.map(B=>B/r[10]/d[10]):[0,1]),eye_pos:new Float32Array([p[12],p[13],p[14]]),view:A,proj:g,scale:r,resolution:d,model:l||new De,normals:C,distances:x}).draw()}}loadTexture(t){const e={volume0:null,volume1:null,volume2:null,volume3:null,volume4:null,volume5:null};if(this.state.textures&&Object.values(this.state.textures).forEach(n=>n&&n.delete()),t&&Object.keys(t).length>0&&t.data){const{height:n,width:r,depth:i}=t;t.data.forEach((s,o)=>{e[`volume${o}`]=this.dataToTexture(s,r,n,i)},this),this.setState({textures:e,scaleMatrix:new De().scale(this.props.physicalSizeScalingMatrix.transformPoint([r,n,i]))})}}dataToTexture(t,e,n,r){var o,a;const i=sx();return new Ww(this.context.gl,{width:e,height:n,depth:r,data:(a=(o=i.cast)==null?void 0:o.call(i,t))!=null?a:t,format:i.dataFormat,dataFormat:i.format,type:i.type,mipmaps:!1,parameters:{[he.TEXTURE_MIN_FILTER]:he.LINEAR,[he.TEXTURE_MAG_FILTER]:he.LINEAR,[he.TEXTURE_WRAP_S]:he.CLAMP_TO_EDGE,[he.TEXTURE_WRAP_T]:he.CLAMP_TO_EDGE,[he.TEXTURE_WRAP_R]:he.CLAMP_TO_EDGE}})}};$m.layerName="XR3DLayer";$m.defaultProps=Vj;async function jj({source:t,selection:e,onUpdate:n=()=>{},downsampleDepth:r=1,signal:i}){const{shape:s,labels:o,dtype:a}=t,{height:l,width:c}=xc(t),u=s[o.indexOf("z")],f=Math.max(1,Math.floor(u/r)),h=l*c,d=`${a}Array`,A=globalThis[d],p=new A(h*f);return await Promise.all(new Array(f).fill(0).map(async(g,m)=>{const E={...e,z:m*r},{data:v}=await t.getRaster({selection:E,signal:i});let y=0;for(n();y<h;){const C=m*h+(h-y-1),x=(c-y-1)%c+c*Math.floor(y/c);p[C]=v[x],y+=1}n()})),{data:p,height:l,width:c,depth:f}}const ox=(t,e,n)=>new ea({id:`text-${n}`,coordinateSystem:ue.CARTESIAN,data:[{text:t,position:e.position}],getColor:[220,220,220,255],getSize:25,sizeUnits:"meters",sizeScale:2**-e.zoom,fontFamily:"Helvetica"}),Hj={pickable:!1,coordinateSystem:ue.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},resolution:{type:"number",value:0,compare:!0},domain:{type:"array",value:[],compare:!0},loader:{type:"object",value:[{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[1],labels:["z"]}],compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},onUpdate:{type:"function",value:()=>{},compare:!0},useProgressIndicator:{type:"boolean",value:!0,compare:!0},useWebGL1Warning:{type:"boolean",value:!0,compare:!0},extensions:{type:"array",value:[new mS.AdditiveBlendExtension],compare:!0}},IS=class extends Nn{clearState(){this.setState({height:null,width:null,depth:null,data:null,physicalSizeScalingMatrix:null,resolutionMatrix:null,progress:0,abortController:null})}finalizeState(){this.state.abortController.abort()}updateState({oldProps:t,props:e}){const n=e.loader!==t.loader,r=e.resolution!==t.resolution,i=e.selections!==t.selections;if(r&&this.clearState(),n||i||r){const{loader:s,selections:o=[],resolution:a,onViewportLoad:l}=this.props,c=s[a];let u=0;const f=(c.shape[c.labels.indexOf("z")]>>a)*o.length,h=()=>{u+=.5/f,this.props.onUpdate&&this.props.onUpdate({progress:u}),this.setState({progress:u})},d=new AbortController;this.setState({abortController:d});const{signal:A}=d,p=o.map(m=>jj({selection:m,source:c,onUpdate:h,downsampleDepth:2**a,signal:A})),g=Ij(s[a]);Promise.all(p).then(m=>{var v,y,C;l&&l(m);const E={data:m.map(x=>x.data),width:(v=m[0])==null?void 0:v.width,height:(y=m[0])==null?void 0:y.height,depth:(C=m[0])==null?void 0:C.depth};this.setState({...E,physicalSizeScalingMatrix:g,resolutionMatrix:new De().scale(2**a)})})}}renderLayers(){const{loader:t,id:e,resolution:n,useProgressIndicator:r,useWebGL1Warning:i}=this.props,{dtype:s}=t[n],{data:o,width:a,height:l,depth:c,progress:u,physicalSizeScalingMatrix:f,resolutionMatrix:h}=this.state,{gl:d}=this.context;if(!_e(d)&&i){const{viewport:A}=this.context;return ox(["Volume rendering is only available on browsers that support WebGL2. If you","are using Safari, you can turn on WebGL2 by navigating in the top menubar","to check Develop > Experimental Features > WebGL 2.0 and then refreshing","the page."].join(`
`),A,e)}if(!(a&&l)&&r){const{viewport:A}=this.context;return ox(`Loading Volume ${String((u||0)*100).slice(0,5)}%...`,A,e)}return new $m(this.props,{channelData:{data:o,width:a,height:l,depth:c},id:`XR3DLayer-${0}-${l}-${a}-${0}-${n}-${e}`,physicalSizeScalingMatrix:f,parameters:{[he.CULL_FACE]:!0,[he.CULL_FACE_MODE]:he.FRONT,[he.DEPTH_TEST]:!1,blendFunc:[he.SRC_ALPHA,he.ONE],blend:!0},resolutionMatrix:h,dtype:s})}};IS.layerName="VolumeLayer";IS.defaultProps=Hj;const Wj=typeof window<"u"?w.exports.useLayoutEffect:w.exports.useEffect,Yj=Wj;function Kf(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}function wp(t){return t&&(typeof t=="function"?w.exports.createElement(xs,{},t):Array.isArray(t)?t.map(wp):t.type===Me.Fragment?wp(t.props.children):(Kf(t.type,xs),t))}function $j(t){let{children:e,layers:n,views:r}=t;const i=[],s=[],o={};return Me.Children.forEach(wp(e),a=>{if(a){const l=a.type;if(Kf(l,En)){const c=Xj(l,a.props);s.push(c)}else i.push(a);if(l!==xs&&Kf(l,xs)&&a.props.id){const c=new l(a.props);o[c.id]=c}}}),Object.keys(o).length>0&&(Array.isArray(r)?r.forEach(a=>{o[a.id]=a}):r&&(o[r.id]=r),r=Object.values(o)),n=s.length>0?[...s,...n]:n,{layers:n,children:i,views:r}}function Xj(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}const Kj={position:"absolute",zIndex:-1};function CS(t,e){return t&&(typeof t=="function"?t(e):Array.isArray(t)?t.map(n=>CS(n,e)):qj(t)?(e.style=Kj,w.exports.cloneElement(t,e)):Jj(t)?w.exports.cloneElement(t,e):t)}function qj(t){const e=t&&t.type,n=e&&e.defaultProps;return n&&n.mapStyle}function Jj(t){const e=t&&t.type;return e&&e.deckGLViewProps}function Zj(t){let{children:e,deck:n,ContextProvider:r}=t;const{viewManager:i}=n||{};if(!i||!i.views.length)return[];const s={},o=i.views[0].id;for(const a of e){let l=o,c=a;Kf(a.type,xs)&&(l=a.props.id||o,c=a.props.children);const u=i.getViewport(l),f=i.getViewState(l);if(u){const{x:h,y:d,width:A,height:p}=u;c=CS(c,{x:h,y:d,width:A,height:p,viewport:u,viewState:f}),s[l]||(s[l]={viewport:u,children:[]}),s[l].children.push(c)}}return Object.keys(s).map(a=>{const{viewport:l,children:c}=s[a],{x:u,y:f,width:h,height:d}=l,A={position:"absolute",left:u,top:f,width:h,height:d},p="view-".concat(a),g=w.exports.createElement("div",{key:p,id:p,style:A},...c);if(r){const m={viewport:l,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:E=>{E.viewId=a,n._onViewStateChange(E)}};return w.exports.createElement(r,{key:p,value:m},g)}return g})}const eH={mixBlendMode:null};function tH(t){let{width:e,height:n,style:r}=t;const i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},s={left:0,top:0};if(r)for(const o in r)o in eH?s[o]=r[o]:i[o]=r[o];return{containerStyle:i,canvasStyle:s}}function nH(t){const e={pickObject:n=>t.deck.pickObject(n),pickMultipleObjects:n=>t.deck.pickMultipleObjects(n),pickObjects:n=>t.deck.pickObjects(n)};return Object.defineProperty(e,"deck",{get:()=>t.deck}),e}function wS(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function rH(t,e){const n=e.Deck||Zo,r=new n({...e,style:null,width:"100%",height:"100%",_customRender:i=>{t.redrawReason=i;const s=r.viewManager.getViewports();t.lastRenderedViewports!==s?t.forceUpdate(o=>o+1):wS(t)}});return r}const Xm=w.exports.forwardRef((t,e)=>{const r=w.exports.useRef({}).current,[i,s]=w.exports.useState(0);r.forceUpdate=s;const o=w.exports.useRef(null),a=w.exports.useRef(null),l=w.exports.useMemo(()=>$j(t),[t.layers,t.views,t.children]);let c=!0;const u=x=>c&&t.viewState?(r.viewStateUpdateRequested=x,null):(r.viewStateUpdateRequested=null,t.onViewStateChange(x)),f=x=>{c?r.interactionStateUpdateRequested=x:(r.interactionStateUpdateRequested=null,t.onInteractionStateChange(x))},h=w.exports.useMemo(()=>{const x={...t,style:null,width:"100%",height:"100%",layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:f};return r.deck&&r.deck.setProps(x),x},[t]);w.exports.useEffect(()=>(r.deck=rH(r,{...h,parent:o.current,canvas:a.current}),()=>r.deck.finalize()),[]),Yj(()=>{wS(r);const{viewStateUpdateRequested:x,interactionStateUpdateRequested:B}=r;x&&u(x),B&&f(B)}),w.exports.useImperativeHandle(e,()=>nH(r),[]);const{viewManager:d}=r.deck||{},A=d&&d.getViewports(),{ContextProvider:p,width:g,height:m,id:E,style:v}=t,{containerStyle:y,canvasStyle:C}=w.exports.useMemo(()=>tH({width:g,height:m,style:v}),[g,m,v]);if(!r.viewStateUpdateRequested&&r.lastRenderedViewports===A||r.version!==i){r.lastRenderedViewports=A,r.version=i;const x=Zj({children:l.children,deck:r.deck,ContextProvider:p}),B=w.exports.createElement("canvas",{key:"canvas",id:E||"deckgl-overlay",ref:a,style:C});r.control=w.exports.createElement("div",{id:"".concat(E||"deckgl","-wrapper"),ref:o,style:y},[B,x])}return c=!1,r.control});Xm.propTypes=Zo.getPropTypes(LC.exports);Xm.defaultProps=Zo.defaultProps;const iH=Xm;var sH=(t,e=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(e===0)return t;const r=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(r,n.indent.repeat(e))};const oH={homedir:""},aH=Object.freeze(Object.defineProperty({__proto__:null,default:oH},Symbol.toStringTag,{value:"Module"})),lH=Qx(aH),ax=lH,lx=/\s+at.*(?:\(|\s)(.*)\)?/,cH=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,uH=typeof ax.homedir>"u"?"":ax.homedir();var fH=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split(`
`).filter(n=>{const r=n.match(lx);if(r===null||!r[1])return!0;const i=r[1];return i.includes(".app/Contents/Resources/electron.asar")||i.includes(".app/Contents/Resources/default_app.asar")?!1:!cH.test(i)}).filter(n=>n.trim()!=="").map(n=>e.pretty?n.replace(lx,(r,i)=>r.replace(i,i.replace(uH,"~"))):n).join(`
`));const hH=sH,dH=fH,AH=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");class gH extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(r=>r instanceof Error?r:r!==null&&typeof r=="object"?Object.assign(new Error(r.message),r):new Error(r));let n=e.map(r=>typeof r.stack=="string"?AH(dH(r.stack)):String(r)).join(`
`);n=`
`+hH(n,4),super(n),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}var pH=gH;const mH=pH;var TS=async(t,e,{concurrency:n=1/0,stopOnError:r=!0}={})=>new Promise((i,s)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===1/0)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const o=[],a=[],l=t[Symbol.iterator]();let c=!1,u=!1,f=0,h=0;const d=()=>{if(c)return;const A=l.next(),p=h;if(h++,A.done){u=!0,f===0&&(!r&&a.length!==0?s(new mH(a)):i(o));return}f++,(async()=>{try{const g=await A.value;o[p]=await e(g,p),f--,d()}catch(g){r?(c=!0,s(g)):(a.push(g),f--,d())}})()};for(let A=0;A<n&&(d(),!u);A++);});const EH={...sa.defaultProps,loaders:{type:"array",value:[],compare:!0},spacer:{type:"number",value:5,compare:!0},rows:{type:"number",value:0,compare:!0},columns:{type:"number",value:0,compare:!0},concurrency:{type:"number",value:10,compare:!1},text:{type:"boolean",value:!1,compare:!0},onClick:{type:"function",value:null,compare:!0},onHover:{type:"function",value:null,compare:!0}};function vH(t,e,n=[0,0],r=1){const[i,s]=n,o=t*r+i,a=e*r+s;return[i,a,o,s]}function yH(t){const[e]=t,{width:n,height:r}=e.data;return t.forEach(({data:i})=>{if((i==null?void 0:i.width)!==n||(i==null?void 0:i.height)!==r)throw new Error("Grid data is not same shape.")}),{width:n,height:r}}function cx(t){const{loaders:e,selections:n=[]}=t;let{concurrency:r}=t;return r&&n.length>0&&(r=Math.ceil(r/n.length)),TS(e,async s=>{const o=n.map(l=>s.loader.getRaster({selection:l})),a=await Promise.all(o);return{...s,data:{data:a.map(l=>l.data),width:a[0].width,height:a[0].height}}},{concurrency:r})}class Km extends Nn{initializeState(){this.state={gridData:[],width:0,height:0},cx(this.props).then(e=>{const{width:n,height:r}=yH(e);this.setState({gridData:e,width:n,height:r})})}updateState({props:e,oldProps:n,changeFlags:r}){const{propsChanged:i}=r,s=typeof i=="string"&&i.includes("props.loaders"),o=e.selections!==n.selections;(s||o)&&cx(this.props).then(a=>{this.setState({gridData:a})})}getPickingInfo({info:e}){if(!e.coordinate)return e;const n=this.props.spacer||0,{width:r,height:i}=this.state,[s,o]=e.coordinate,a=Math.floor(o/(i+n)),l=Math.floor(s/(r+n));return e.gridCoord={row:a,column:l},e}renderLayers(){const{gridData:e,width:n,height:r}=this.state;if(n===0||r===0)return null;const{rows:i,columns:s,spacer:o=0,id:a=""}=this.props,l=e.map(c=>{const u=c.row*(r+o),f=c.col*(n+o),h={channelData:c.data,bounds:vH(n,r,[f,u]),id:`${a}-GridLayer-${c.row}-${c.col}`,dtype:c.loader.dtype||"Uint16",pickable:!1,extensions:[new Ic]};return new sa({...this.props,...h})});if(this.props.pickable){const[c,u]=[0,0],f=i*(r+o),h=s*(n+o),A={data:[{polygon:[[u,c],[h,c],[h,f],[u,f]]}],getPolygon:g=>g.polygon,getFillColor:[0,0,0,0],getLineColor:[0,0,0,0],pickable:!0,id:`${a}-GridLayer-picking`},p=new vc({...this.props,...A});l.push(p)}if(this.props.text){const c=new ea({id:`${a}-GridLayer-text`,data:e,getPosition:u=>[u.col*(n+o),u.row*(r+o)],getText:u=>u.name,getColor:[255,255,255,255],getSize:16,getAngle:0,getTextAnchor:"start",getAlignmentBaseline:"top"});l.push(c)}return l}}Km.layerName="GridLayer";Km.defaultProps=EH;class _H{constructor(e,n=100){this.store=e,this.cache=new IG({maxSize:n})}getItem(...e){const[n,r]=e;if(this.cache.has(n))return this.cache.get(n);const i=this.store.getItem(n,r).catch(s=>{throw this.cache.delete(n),s});return this.cache.set(n,i),i}async containsItem(e){return this.cache.has(e)||this.store.containsItem(e)}keys(){return this.store.keys()}deleteItem(e){throw new Error("deleteItem not implemented")}setItem(e,n){throw new Error("setItem not implemented")}}const bo=6,Ar={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},xH=[Ar.magenta,Ar.green],IH=[Ar.red,Ar.green,Ar.blue],ux=Object.values(Ar).slice(0,-2);async function CH(t){let e;if(typeof t=="string"){let n;if(t.endsWith(".json")){const[{ReferenceStore:r},i]=await Promise.all([Gt(()=>import("./index.949b4e0f.js"),[],import.meta.url),fetch(t).then(s=>s.json())]);n=r.fromJSON(i)}else{const r=new URL(t);n=new oS(r.origin),e=r.pathname.slice(1)}return{store:new _H(n),path:e}}return{store:t,path:e}}async function wH(t){const{store:e,path:n}=await CH(t);return Gm(e,n).catch(r=>{if(r instanceof dr)return $V({store:e});throw r})}const TH=new TextDecoder;function fx(t,e){return t.store.getItem(hs(t.path,e,".zattrs")).then(n=>TH.decode(n)).then(n=>JSON.parse(n))}async function SS(t,e){const{datasets:n}=e[0]||[{path:"0"}],r=await Promise.all(n.map(({path:i})=>t.getItem(i)));if(r.every(i=>i instanceof na))return r;throw Error("Multiscales metadata included a path to a group.")}function qm(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return[e,n,r]}function Hl(t){return Array.from({length:t},(e,n)=>n)}function SH(t,e=" "){for(;t.length>0&&e.includes(t.charAt(t.length-1));)t=t.substr(0,t.length-1);return t}function hs(...t){return t.filter(Boolean).map(e=>SH(e,"/")).join("/")}function bH(t,e){return(!e||e.length!=t.shape.length)&&(e=t.shape.slice(0,-2).map((r,i)=>""+i).concat(["y","x"])),e}function $h(t){const e=[{type:"time",name:"t"},{type:"channel",name:"c"},{type:"space",name:"z"},{type:"space",name:"y"},{type:"space",name:"x"}];function n(i){return i==="t"?"time":i==="c"?"channel":"space"}let r=e;return t[0].axes&&(r=t[0].axes.map(i=>{if(typeof i=="string")return{name:i,type:n(i)};const{name:s,type:o}=i;return{name:s,type:o!=null?o:n(s)}})),r}function Xh(t){return t.map(n=>n.name)}function bS(t,e){return e||(t<=bo?e=Array(t).fill(!0):e=[...Array(bo).fill(!0),...Array(t-bo).fill(!1)]),e}function RS(t,e){let n=[];if(t==1)n=[Ar.white];else if(t==2)n=xH;else if(t===3)n=IH;else if(t<=bo)n=ux.slice(0,t);else{n=Array(t).fill(Ar.white);const r=e.flatMap((i,s)=>i?s:[]);for(const[i,s]of r.entries())n[s]=ux[i]}return n}function BS(t){const e=t[t.length-1];return e===3||e===4}function Kh(t){const e=BS(t.shape),[n,r]=t.chunks.slice(e?-3:-2),i=Math.min(n,r);return 2**Math.floor(Math.log2(i))}function RH([t,e],[n,r],i,s){const o=(n-s*2)/t,a=(r-s*2)/e;return{zoom:Math.min(i,Math.log2(Math.min(o,a))),target:[t/2,e/2,0]}}function BH(t){return Array.isArray(t)?t.length===16&&t.every(e=>typeof e=="number"):!1}function Sc(t){if(!t)return De.IDENTITY;const e=new De;try{const n=typeof t=="string"?JSON.parse(t):t;if(!BH(n))throw Error("Invalid modelMatrix size. Must be 16.");e.setRowMajor(...n)}catch{const n=`Failed to parse modelMatrix. Got ${JSON.stringify(t)}, using identity.`;console.warn(n)}return e}async function Jm(t,e){if(t.dtype==="Uint8")return[0,255];const{data:n}=await t.getRaster({selection:e});let r=1/0,i=-1/0;for(let s=0;s<n.length;s++)n[s]>i&&(i=n[s]),n[s]<r&&(r=n[s]);return r===i&&(r=0,i=1),[r,i]}async function PS(t,e,n,r){const i=r!=null?r:t.shape.map(()=>0);if(t.shape[e]!==n.length)throw new Error("provided visibilities don't match number of channels");return Promise.all(n.map(async(o,a)=>{if(!o)return;const l=[...i];return l[e]=a,Jm(t,l)}))}async function PH(t,e,n){var x,B,R,b;const r=t.acquisition?parseInt(t.acquisition):void 0;let i=[];if(!(n!=null&&n.images))throw Error("Well .zattrs missing images");if(!e.path)throw Error("Cannot inspect zarr path to open well.");const[s,o]=e.path.split("/").filter(Boolean).slice(-2);let{images:a}=n;const l=a.flatMap(N=>N.acquisition?[N.acquisition]:[]);if(l.length>1){const N=e.path.replace(`${s}/${o}`,""),D=await(await Gm(e.store,N)).attrs.asObject();i=(B=(x=D==null?void 0:D.plate)==null?void 0:x.acquisitions)!=null?B:[],r&&l.includes(r)&&(a=a.filter(G=>G.acquisition===r))}const c=a.map(N=>N.path),u=Math.ceil(Math.sqrt(c.length)),f=Math.ceil(c.length/u),h=await e.getItem(c[0]).then(N=>N.attrs.asObject());if(!("multiscales"in h))throw Error("Path for image is not valid.");let d=h.multiscales[0].datasets[0].path;const A=c.map(N=>e.getItem(hs(N,d))),p=await Promise.all(A),g=$h(h.multiscales),m=Xh(g),E=Kh(p[0]),v=Hl(f).flatMap(N=>Hl(u).map(H=>{const D=H+N*u;return{name:String(D),row:N,col:H,loader:new Yh(p[D],m,E)}}));let y;"omero"in h?y=Zm(h.omero,g):y=await NS(v[0].loader,m);const C={loaders:v,...y,axis_labels:m,loader:[v[0].loader],model_matrix:Sc(t.model_matrix),defaults:{selection:y.defaultSelection,colormap:(R=t.colormap)!=null?R:"",opacity:(b=t.opacity)!=null?b:1},name:`Well ${s}${o}`};return i.length>0&&(C.acquisitions=i,C.acquisitionId=r||-1),C.rows=f,C.columns=u,C.onClick=N=>{let H=N.gridCoord;if(!H)return;const{row:D,column:G}=H;let W;if(typeof t.source=="string"&&e.path&&!isNaN(D)&&!isNaN(G)){const X=D*u+G;W=hs(t.source,c[X])}t.onClick?(delete N.layer,N.imageSource=W,t.onClick(N)):W&&window.open(window.location.origin+window.location.pathname+"?source="+W)},C}async function hx(t,e,n){var x,B;if(!("columns"in n)||!("rows"in n))throw Error("Plate .zattrs missing columns or rows");const r=n.rows.map(R=>R.name),i=n.columns.map(R=>R.name),s=n.wells.map(R=>R.path),o=await fx(e,s[0]);if(!("well"in o))throw Error("Path for image is not valid, not a well.");const a=o.well.images[0].path,l=await e.getItem(hs(s[0],a)).then(R=>R.attrs.asObject());if(!("multiscales"in l))throw Error("Path for image is not valid.");const{datasets:c}=l.multiscales[0],u=c[c.length-1].path;async function f(R){const b=await fx(e,R);return hs(R,b.well.images[0].path)}const h=await Promise.all(s.map(f)),d=([R,b])=>e.getItem(b).then(N=>[R,N]),A=await TS(h.map(R=>[R,hs(R,u)]),d,{concurrency:10}),p=await Promise.all(A),g=$h(l.multiscales),m=Xh(g),E=Kh(p[0][1]),v=p.map(R=>{const[b,N]=R[0].split("/");return{name:`${b}${N}`,row:r.indexOf(b),col:i.indexOf(N),loader:new Yh(R[1],m,E)}});let y;"omero"in l?y=Zm(l.omero,g):y=await NS(v[0].loader,m);const C={loaders:v,...y,axis_labels:m,loader:[v[0].loader],model_matrix:Sc(t.model_matrix),defaults:{selection:y.defaultSelection,colormap:(x=t.colormap)!=null?x:"",opacity:(B=t.opacity)!=null?B:1},name:n.name||"Plate",rows:r.length,columns:i.length};return C.onClick=R=>{let b=R.gridCoord;if(!b)return;const{row:N,column:H}=b;let D;typeof t.source=="string"&&e.path&&!isNaN(N)&&!isNaN(H)&&(D=hs(t.source,r[N],i[H])),t.onClick?(delete R.layer,R.imageSource=D,t.onClick(R)):D&&window.open(window.location.origin+window.location.pathname+"?source="+D)},C}async function NH(t,e,n){var h;const{name:r,opacity:i=1,colormap:s=""}=t,o=await SS(e,n.multiscales),a=$h(n.multiscales),l=Xh(a),c=Zm(n.omero,a),u=Kh(o[0]);return{loader:o.map(d=>new Yh(d,l,u)),axis_labels:l,model_matrix:Sc(t.model_matrix),defaults:{selection:c.defaultSelection,colormap:s,opacity:i},...c,name:(h=c.name)!=null?h:r}}async function NS(t,e){const n=e.indexOf("c"),r=t.shape[n],i=bS(r),s=await PS(t,n,i),o=RS(r,i);return{name:"Image",names:Hl(r).map(a=>`channel_${a}`),colors:o,contrast_limits:s,visibilities:i,channel_axis:e.includes("c")?e.indexOf("c"):null,defaultSelection:e.map(()=>0)}}function Zm({rdefs:t,channels:e,name:n},r){var h,d;const i=(h=t.defaultT)!=null?h:0,s=(d=t.defaultZ)!=null?d:0,o=[],a=[],l=[],c=[];e.forEach((A,p)=>{o.push(A.color),a.push([A.window.start,A.window.end]),l.push(A.active),c.push(A.label||""+p)});const u=r.map(A=>A.type=="time"?i:A.name=="z"?s:0),f=r.findIndex(A=>A.type==="channel");return{name:n,names:c,colors:o,contrast_limits:a,visibilities:l,channel_axis:f,defaultSelection:u}}async function LH(t,e){const{color:n,contrast_limits:r,visibility:i,name:s,colormap:o="",opacity:a=1}=t,l=e[e.length-1],c=Array(e[0].shape.length).fill(0),u=r!=null?r:await(()=>Jm(l,c))();return{loader:e,name:s,channel_axis:null,colors:[n!=null?n:Ar.white],names:["channel_0"],contrast_limits:[u],visibilities:[i!=null?i:!0],model_matrix:Sc(t.model_matrix),defaults:{selection:c,colormap:o,opacity:a},axis_labels:e[0].labels}}async function MH(t,e,n){const{names:r,contrast_limits:i,name:s,model_matrix:o,opacity:a=1,colormap:l=""}=t;let{visibilities:c,colors:u}=t;const f=e[0].shape[n];for(const d of[i,c,r,u])if(d&&d.length!==f){const A=Object.keys({channelProp:d})[0];throw Error(`channel_axis is length ${f} and provided channel_axis property ${A} is different size.`)}c=c||bS(f),u=u||RS(f,c);const h=i!=null?i:await(()=>PS(e[e.length-1],n,c))();return{loader:e,name:s,channel_axis:n,colors:u,names:r!=null?r:Hl(f).map(d=>`channel_${d}`),contrast_limits:h,visibilities:c,model_matrix:Sc(o),defaults:{selection:Array(e[0].shape.length).fill(0),colormap:l,opacity:a},axis_labels:e[0].labels}}async function OH(t){var u;const e=await wH(t.source);let n,r;if(e instanceof fs){const f=await e.attrs.asObject();if("plate"in f)return hx(t,e,f.plate);if("well"in f)return PH(t,e,f.well);if("omero"in f)return NH(t,e,f);if(Object.keys(f).length===0&&e.path){const h=e.path.slice(0,e.path.lastIndexOf("/")),d=await Gm(e.store,h),A=await d.attrs.asObject();if("plate"in A)return hx(t,d,A.plate)}if(!("multiscales"in f))throw Error("Group is missing multiscales specification.");n=await SS(e,f.multiscales),f.multiscales[0].axes&&(r=$h(f.multiscales))}else n=[e];const{channel_axis:i,labels:s}=DH(t,r,n[0]),o=Kh(n[0]),a=n.map(f=>new Yh(f,s,o)),[l]=a;if("channel_axis"in t||i>-1)return t=t,MH(t,a,Number((u=t.channel_axis)!=null?u:i));if(l.shape.length===2||!("channel_axis"in t))return LH(t,a);throw Error("Failed to load image.")}function DH(t,e,n){const r=t.axis_labels,i="channel_axis"in t?Number(t.channel_axis):void 0;if(e){const a=r!=null?r:Xh(e),l=i!=null?i:e.findIndex(c=>c.type==="channel");return{labels:a,channel_axis:l}}const s=r!=null?r:bH(n),o=i!=null?i:s.indexOf("c");return{labels:s,channel_axis:o}}function LS(t){var u;const{selection:e,opacity:n,colormap:r}=t.defaults,i=[],s=[],o=[],a=[],l=t.visibilities.flatMap((f,h)=>f?h:[]);for(const f of l.slice(0,bo)){const h=[...e];Number.isInteger(t.channel_axis)&&(h[t.channel_axis]=f),i.push(h),s.push(qm(t.colors[f])),o.push((u=t.contrast_limits[f])!=null?u:[0,255]),a.push(!0)}const c={id:t.id,selections:i,colors:s,contrastLimits:o,contrastLimitsRange:[...o],channelsVisible:a,opacity:n,colormap:r,modelMatrix:t.model_matrix,onClick:t.onClick};return"loaders"in t?{Layer:Km,layerProps:{...c,loader:t.loader,loaders:t.loaders,columns:t.columns,rows:t.rows},on:!0}:t.loader.length===1?{Layer:Tc,layerProps:{...c,loader:t.loader[0]},on:!0}:{Layer:Ym,layerProps:{...c,loader:t.loader},on:!0}}const FH=Object.freeze(Object.defineProperty({__proto__:null,createSourceData:OH,initLayerStateFromSource:LS},Symbol.toStringTag,{value:"Module"})),QH={zoom:0,target:[0,0,0],default:!0},MS=Gn([]),OS=Gn(QH),DS=_4(MS),FS=p4(t=>Gn({...LS(t),id:t.id}),(t,e)=>t.id===e.id),kH=Gn(t=>{const e=t(DS);if(e.length===0)return[];const n=e.map(r=>FS(t(r)));return t(B4(n))});var qh={exports:{}},bc={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UH=w.exports,QS=60103;bc.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var dx=Symbol.for;QS=dx("react.element"),bc.Fragment=dx("react.fragment")}var GH=UH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VH=Object.prototype.hasOwnProperty,zH={key:!0,ref:!0,__self:!0,__source:!0};function kS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VH.call(e,r)&&!zH.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QS,type:t,key:s,ref:o,props:i,_owner:GH.current}}bc.jsx=kS;bc.jsxs=kS;(function(t){t.exports=bc})(qh);const V=qh.exports.jsx,ze=qh.exports.jsxs,ji=qh.exports.Fragment;function jH(t){const{loader:e}=t,[n,r]=Array.isArray(e)?[e[0],e.length]:[e,0],i=BS(n.shape);let[s,o]=n.shape.slice(i?-3:-2);return"loaders"in t&&t.rows&&t.columns&&(s=(s+5)*t.rows,o=(o+5)*t.columns),{height:s,width:o,maxZoom:r}}function HH({layers:t}){var s,o;const[e,n]=gr(OS),r=w.exports.useRef(null);if(r.current&&(e==null?void 0:e.default)&&((o=(s=t[0])==null?void 0:s.props)==null?void 0:o.loader)){const{deck:a}=r.current,{width:l,height:c,maxZoom:u}=jH(t[0].props),f=a.width<400?10:a.width<600?30:50,{zoom:h,target:d}=RH([l,c],[a.width,a.height],u,f);n({zoom:h,target:d})}const i={preserveDrawingBuffer:!0};return V(iH,{ref:r,layers:t,viewState:e,onViewStateChange:a=>n(a.viewState),views:[new gm({id:"ortho",controller:!0})],glOptions:i})}function WH(){const e=Pn(kH).map(n=>n.on?new n.Layer(n.layerProps):null);return V(HH,{layers:e})}var YH={black:"#000",white:"#fff"};const qf=YH;var $H={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const SA=$H;var XH={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const bA=XH;var KH={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const RA=KH;var qH={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const BA=qH;var JH={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const PA=JH;var ZH={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const NA=ZH;var eW={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const eE=eW;function tE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(e,t),n)}function tW(t){t=t.substr(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&n[0].length===1&&(n=n.map(function(r){return r+r})),n?"rgb".concat(n.length===4?"a":"","(").concat(n.map(function(r,i){return i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3}).join(", "),")"):""}function nW(t){t=Ts(t);var e=t,n=e.values,r=n[0],i=n[1]/100,s=n[2]/100,o=i*Math.min(s,1-s),a=function(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(f+r/30)%12;return s-o*Math.max(Math.min(h-3,9-h,1),-1)},l="rgb",c=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(l+="a",c.push(n[3])),Jh({type:l,values:c})}function Ts(t){if(t.type)return t;if(t.charAt(0)==="#")return Ts(tW(t));var e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla"].indexOf(n)===-1)throw new Error(Nl(3,t));var r=t.substring(e+1,t.length-1).split(",");return r=r.map(function(i){return parseFloat(i)}),{type:n,values:r}}function Jh(t){var e=t.type,n=t.values;return e.indexOf("rgb")!==-1?n=n.map(function(r,i){return i<3?parseInt(r,10):r}):e.indexOf("hsl")!==-1&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(e,"(").concat(n.join(", "),")")}function rW(t,e){var n=Ax(t),r=Ax(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Ax(t){t=Ts(t);var e=t.type==="hsl"?Ts(nW(t)).values:t.values;return e=e.map(function(n){return n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function fi(t,e){return t=Ts(t),e=tE(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.values[3]=e,Jh(t)}function US(t,e){if(t=Ts(t),e=tE(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1)for(var n=0;n<3;n+=1)t.values[n]*=1-e;return Jh(t)}function GS(t,e){if(t=Ts(t),e=tE(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;return Jh(t)}var ri=["xs","sm","md","lg","xl"];function iW(t){var e=t.values,n=e===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:e,r=t.unit,i=r===void 0?"px":r,s=t.step,o=s===void 0?5:s,a=Re(t,["values","unit","step"]);function l(d){var A=typeof n[d]=="number"?n[d]:d;return"@media (min-width:".concat(A).concat(i,")")}function c(d){var A=ri.indexOf(d)+1,p=n[ri[A]];if(A===ri.length)return l("xs");var g=typeof p=="number"&&A>0?p:d;return"@media (max-width:".concat(g-o/100).concat(i,")")}function u(d,A){var p=ri.indexOf(A);return p===ri.length-1?l(d):"@media (min-width:".concat(typeof n[d]=="number"?n[d]:d).concat(i,") and ")+"(max-width:".concat((p!==-1&&typeof n[ri[p+1]]=="number"?n[ri[p+1]]:A)-o/100).concat(i,")")}function f(d){return u(d,d)}function h(d){return n[d]}return j({keys:ri,values:n,up:l,down:c,between:u,only:f,width:h},a)}function sW(t,e,n){var r;return j({gutters:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:",`
      paddingLeft: theme.spacing(2),
      paddingRight: theme.spacing(2),
      [theme.breakpoints.up('sm')]: {
        paddingLeft: theme.spacing(3),
        paddingRight: theme.spacing(3),
      },
      `].join(`
`)),j({paddingLeft:e(2),paddingRight:e(2)},s,Z({},t.up("sm"),j({paddingLeft:e(3),paddingRight:e(3)},s[t.up("sm")])))},toolbar:(r={minHeight:56},Z(r,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),Z(r,t.up("sm"),{minHeight:64}),r)},n)}var gx={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qf.white,default:eE[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},LA={text:{primary:qf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:eE[800],default:"#303030"},action:{active:qf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function px(t,e,n,r){var i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=GS(t.main,i):e==="dark"&&(t.dark=US(t.main,s)))}function oW(t){var e=t.primary,n=e===void 0?{light:RA[300],main:RA[500],dark:RA[700]}:e,r=t.secondary,i=r===void 0?{light:bA.A200,main:bA.A400,dark:bA.A700}:r,s=t.error,o=s===void 0?{light:SA[300],main:SA[500],dark:SA[700]}:s,a=t.warning,l=a===void 0?{light:NA[300],main:NA[500],dark:NA[700]}:a,c=t.info,u=c===void 0?{light:BA[300],main:BA[500],dark:BA[700]}:c,f=t.success,h=f===void 0?{light:PA[300],main:PA[500],dark:PA[700]}:f,d=t.type,A=d===void 0?"light":d,p=t.contrastThreshold,g=p===void 0?3:p,m=t.tonalOffset,E=m===void 0?.2:m,v=Re(t,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function y(R){var b=rW(R,LA.text.primary)>=g?LA.text.primary:gx.text.primary;return b}var C=function(b){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:700;if(b=j({},b),!b.main&&b[N]&&(b.main=b[N]),!b.main)throw new Error(Nl(4,N));if(typeof b.main!="string")throw new Error(Nl(5,JSON.stringify(b.main)));return px(b,"light",H,E),px(b,"dark",D,E),b.contrastText||(b.contrastText=y(b.main)),b},x={dark:LA,light:gx},B=Mo(j({common:qf,type:A,primary:C(n),secondary:C(i,"A400","A200","A700"),error:C(o),warning:C(l),info:C(u),success:C(h),grey:eE,contrastThreshold:g,getContrastText:y,augmentColor:C,tonalOffset:E},x[A]),v);return B}function VS(t){return Math.round(t*1e5)/1e5}function aW(t){return VS(t)}var mx={textTransform:"uppercase"},Ex='"Roboto", "Helvetica", "Arial", sans-serif';function lW(t,e){var n=typeof e=="function"?e(t):e,r=n.fontFamily,i=r===void 0?Ex:r,s=n.fontSize,o=s===void 0?14:s,a=n.fontWeightLight,l=a===void 0?300:a,c=n.fontWeightRegular,u=c===void 0?400:c,f=n.fontWeightMedium,h=f===void 0?500:f,d=n.fontWeightBold,A=d===void 0?700:d,p=n.htmlFontSize,g=p===void 0?16:p,m=n.allVariants,E=n.pxToRem,v=Re(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),y=o/14,C=E||function(R){return"".concat(R/g*y,"rem")},x=function(b,N,H,D,G){return j({fontFamily:i,fontWeight:b,fontSize:C(N),lineHeight:H},i===Ex?{letterSpacing:"".concat(VS(D/N),"em")}:{},G,m)},B={h1:x(l,96,1.167,-1.5),h2:x(l,60,1.2,-.5),h3:x(u,48,1.167,0),h4:x(u,34,1.235,.25),h5:x(u,24,1.334,0),h6:x(h,20,1.6,.15),subtitle1:x(u,16,1.75,.15),subtitle2:x(h,14,1.57,.1),body1:x(u,16,1.5,.15),body2:x(u,14,1.43,.15),button:x(h,14,1.75,.4,mx),caption:x(u,12,1.66,.4),overline:x(u,12,2.66,1,mx)};return Mo(j({htmlFontSize:g,pxToRem:C,round:aW,fontFamily:i,fontSize:o,fontWeightLight:l,fontWeightRegular:u,fontWeightMedium:h,fontWeightBold:A},B),v,{clone:!1})}var cW=.2,uW=.14,fW=.12;function Ke(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(cW,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(uW,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(fW,")")].join(",")}var hW=["none",Ke(0,2,1,-1,0,1,1,0,0,1,3,0),Ke(0,3,1,-2,0,2,2,0,0,1,5,0),Ke(0,3,3,-2,0,3,4,0,0,1,8,0),Ke(0,2,4,-1,0,4,5,0,0,1,10,0),Ke(0,3,5,-1,0,5,8,0,0,1,14,0),Ke(0,3,5,-1,0,6,10,0,0,1,18,0),Ke(0,4,5,-2,0,7,10,1,0,2,16,1),Ke(0,5,5,-3,0,8,10,1,0,3,14,2),Ke(0,5,6,-3,0,9,12,1,0,3,16,2),Ke(0,6,6,-3,0,10,14,1,0,4,18,3),Ke(0,6,7,-4,0,11,15,1,0,4,20,3),Ke(0,7,8,-4,0,12,17,2,0,5,22,4),Ke(0,7,8,-4,0,13,19,2,0,5,24,4),Ke(0,7,9,-4,0,14,21,2,0,5,26,4),Ke(0,8,9,-5,0,15,22,2,0,6,28,5),Ke(0,8,10,-5,0,16,24,2,0,6,30,5),Ke(0,8,11,-5,0,17,26,2,0,6,32,5),Ke(0,9,11,-5,0,18,28,2,0,7,34,6),Ke(0,9,12,-6,0,19,29,2,0,7,36,6),Ke(0,10,13,-6,0,20,31,3,0,8,38,7),Ke(0,10,13,-6,0,21,33,3,0,8,40,7),Ke(0,10,14,-6,0,22,35,3,0,8,42,7),Ke(0,11,14,-7,0,23,36,3,0,9,44,8),Ke(0,11,15,-7,0,24,38,3,0,9,46,8)];const dW=hW;var AW={borderRadius:4};const gW=AW;function zS(t){if(Array.isArray(t))return t}function pW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function jS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zh(t,e){return zS(t)||pW(t,e)||D0(t,e)||jS()}function mW(t){var e=t.spacing||8;return typeof e=="number"?function(n){return e*n}:Array.isArray(e)?function(n){return e[n]}:typeof e=="function"?e:function(){}}function EW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8;if(t.mui)return t;var e=mW({spacing:t}),n=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.length===0?e(1):s.length===1?e(s[0]):s.map(function(a){if(typeof a=="string")return a;var l=e(a);return typeof l=="number"?"".concat(l,"px"):l}).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return t}}),n.mui=!0,n}var vx={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Tp={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yx(t){return"".concat(Math.round(t),"ms")}const vW={easing:vx,duration:Tp,create:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["all"],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.duration,i=r===void 0?Tp.standard:r,s=n.easing,o=s===void 0?vx.easeInOut:s,a=n.delay,l=a===void 0?0:a;return Re(n,["duration","easing","delay"]),(Array.isArray(e)?e:[e]).map(function(c){return"".concat(c," ").concat(typeof i=="string"?i:yx(i)," ").concat(o," ").concat(typeof l=="string"?l:yx(l))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var n=e/36;return Math.round((4+15*Math.pow(n,.25)+n/5)*10)}};var yW={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const HS=yW;function WS(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.breakpoints,n=e===void 0?{}:e,r=t.mixins,i=r===void 0?{}:r,s=t.palette,o=s===void 0?{}:s,a=t.spacing,l=t.typography,c=l===void 0?{}:l,u=Re(t,["breakpoints","mixins","palette","spacing","typography"]),f=oW(o),h=iW(n),d=EW(a),A=Mo({breakpoints:h,direction:"ltr",mixins:sW(h,d,i),overrides:{},palette:f,props:{},shadows:dW,typography:lW(f,c),spacing:d,shape:gW,transitions:vW,zIndex:HS},u),p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];return A=g.reduce(function(E,v){return Mo(E,v)},A),A}var _W=WS();const YS=_W;function nE(){var t=lc()||YS;return t}function _t(t,e){return Ui(t,j({defaultTheme:YS},e))}function Kn(t){if(typeof t!="string")throw new Error(Nl(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Sp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(r,i){return i==null?r:function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];r.apply(this,a),i.apply(this,a)}},function(){})}var xW=function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}},$S=w.exports.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.color,a=o===void 0?"inherit":o,l=e.component,c=l===void 0?"svg":l,u=e.fontSize,f=u===void 0?"medium":u,h=e.htmlColor,d=e.titleAccess,A=e.viewBox,p=A===void 0?"0 0 24 24":A,g=Re(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return w.exports.createElement(c,j({className:be(i.root,s,a!=="inherit"&&i["color".concat(Kn(a))],f!=="default"&&f!=="medium"&&i["fontSize".concat(Kn(f))]),focusable:"false",viewBox:p,color:h,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},g),r,d?w.exports.createElement("title",null,d):null)});$S.muiName="SvgIcon";const _x=_t(xW,{name:"MuiSvgIcon"})($S);function Wr(t,e){var n=function(i,s){return Me.createElement(_x,j({ref:s},i),t)};return n.muiName=_x.muiName,Me.memo(Me.forwardRef(n))}function XS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:166,n;function r(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var a=this,l=function(){t.apply(a,s)};clearTimeout(n),n=setTimeout(l,e)}return r.clear=function(){clearTimeout(n)},r}function Wn(t){return t&&t.ownerDocument||document}function KS(t){var e=Wn(t);return e.defaultView||window}function Jf(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function qS(t){var e=t.controlled,n=t.default;t.name,t.state;var r=w.exports.useRef(e!==void 0),i=r.current,s=w.exports.useState(n),o=s[0],a=s[1],l=i?e:o,c=w.exports.useCallback(function(u){i||a(u)},[]);return[l,c]}var IW=typeof window<"u"?w.exports.useLayoutEffect:w.exports.useEffect;function Lt(t){var e=w.exports.useRef(t);return IW(function(){e.current=t}),w.exports.useCallback(function(){return e.current.apply(void 0,arguments)},[])}function $t(t,e){return w.exports.useMemo(function(){return t==null&&e==null?null:function(n){Jf(t,n),Jf(e,n)}},[t,e])}var ed=!0,bp=!1,xx=null,CW={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function wW(t){var e=t.type,n=t.tagName;return!!(n==="INPUT"&&CW[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function TW(t){t.metaKey||t.altKey||t.ctrlKey||(ed=!0)}function MA(){ed=!1}function SW(){this.visibilityState==="hidden"&&bp&&(ed=!0)}function bW(t){t.addEventListener("keydown",TW,!0),t.addEventListener("mousedown",MA,!0),t.addEventListener("pointerdown",MA,!0),t.addEventListener("touchstart",MA,!0),t.addEventListener("visibilitychange",SW,!0)}function RW(t){var e=t.target;try{return e.matches(":focus-visible")}catch{}return ed||wW(e)}function BW(){bp=!0,window.clearTimeout(xx),xx=window.setTimeout(function(){bp=!1},100)}function JS(){var t=w.exports.useCallback(function(e){var n=zr.exports.findDOMNode(e);n!=null&&bW(n.ownerDocument)},[]);return{isFocusVisible:RW,onBlurVisible:BW,ref:t}}function PW(t){return zS(t)||ZC(t)||D0(t)||jS()}const Ix={disabled:!1},Zf=Me.createContext(null);var Ya="unmounted",es="exited",ts="entering",eo="entered",Rp="exiting",Yr=function(t){mh(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=es,s.appearStatus=ts):l=eo:r.unmountOnExit||r.mountOnEnter?l=Ya:l=es,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Ya?{status:es}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==ts&&o!==eo&&(s=ts):(o===ts||o===eo)&&(s=Rp)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){i===void 0&&(i=!1),s!==null?(this.cancelNextCallback(),s===ts?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===es&&this.setState({status:Ya})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Uu.findDOMNode(this),a],c=l[0],u=l[1],f=this.getTimeouts(),h=a?f.appear:f.enter;if(!i&&!o||Ix.disabled){this.safeSetState({status:eo},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:ts},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:eo},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Uu.findDOMNode(this);if(!s||Ix.disabled){this.safeSetState({status:es},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Rp},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:es},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Uu.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Ya)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Eh(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Me.createElement(Zf.Provider,{value:null},typeof o=="function"?o(i,a):Me.cloneElement(Me.Children.only(o),a))},e}(Me.Component);Yr.contextType=Zf;Yr.propTypes={};function $s(){}Yr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:$s,onEntering:$s,onEntered:$s,onExit:$s,onExiting:$s,onExited:$s};Yr.UNMOUNTED=Ya;Yr.EXITED=es;Yr.ENTERING=ts;Yr.ENTERED=eo;Yr.EXITING=Rp;const ZS=Yr;function rE(t,e){var n=function(s){return e&&w.exports.isValidElement(s)?e(s):s},r=Object.create(null);return t&&w.exports.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function NW(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function ds(t,e,n){return n[e]!=null?n[e]:t.props[e]}function LW(t,e){return rE(t.children,function(n){return w.exports.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ds(n,"appear",t),enter:ds(n,"enter",t),exit:ds(n,"exit",t)})})}function MW(t,e,n){var r=rE(t.children),i=NW(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(!!w.exports.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=w.exports.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=w.exports.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:ds(o,"exit",t),enter:ds(o,"enter",t)}):!l&&a&&!u?i[s]=w.exports.cloneElement(o,{in:!1}):l&&a&&w.exports.isValidElement(c)&&(i[s]=w.exports.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:ds(o,"exit",t),enter:ds(o,"enter",t)}))}}),i}var OW=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},DW={component:"div",childFactory:function(e){return e}},iE=function(t){mh(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Rg(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?LW(i,a):MW(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=rE(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=j({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Eh(i,["component","childFactory"]),l=this.state.contextValue,c=OW(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Me.createElement(Zf.Provider,{value:l},c):Me.createElement(Zf.Provider,{value:l},Me.createElement(s,a,c))},e}(Me.Component);iE.propTypes={};iE.defaultProps=DW;const FW=iE;var QW=function(e){return e.scrollTop};function eh(t,e){var n=t.timeout,r=t.style,i=r===void 0?{}:r;return{duration:i.transitionDuration||typeof n=="number"?n:n[e.mode]||0,delay:i.transitionDelay}}var kW=function(e){return{root:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}},eb=w.exports.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.collapsedHeight,a=e.collapsedSize,l=a===void 0?"0px":a,c=e.component,u=c===void 0?"div":c,f=e.disableStrictModeCompat,h=f===void 0?!1:f,d=e.in,A=e.onEnter,p=e.onEntered,g=e.onEntering,m=e.onExit,E=e.onExited,v=e.onExiting,y=e.style,C=e.timeout,x=C===void 0?Tp.standard:C,B=e.TransitionComponent,R=B===void 0?ZS:B,b=Re(e,["children","classes","className","collapsedHeight","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),N=nE(),H=w.exports.useRef(),D=w.exports.useRef(null),G=w.exports.useRef(),W=typeof(o||l)=="number"?"".concat(o||l,"px"):o||l;w.exports.useEffect(function(){return function(){clearTimeout(H.current)}},[]);var X=N.unstable_strictMode&&!h,oe=w.exports.useRef(null),ge=$t(n,X?oe:void 0),ne=function($){return function(ie,ee){if($){var pe=X?[oe.current,ie]:[ie,ee],ae=Zh(pe,2),ye=ae[0],Ce=ae[1];Ce===void 0?$(ye):$(ye,Ce)}}},fe=ne(function(U,$){U.style.height=W,A&&A(U,$)}),P=ne(function(U,$){var ie=D.current?D.current.clientHeight:0,ee=eh({style:y,timeout:x},{mode:"enter"}),pe=ee.duration;if(x==="auto"){var ae=N.transitions.getAutoHeightDuration(ie);U.style.transitionDuration="".concat(ae,"ms"),G.current=ae}else U.style.transitionDuration=typeof pe=="string"?pe:"".concat(pe,"ms");U.style.height="".concat(ie,"px"),g&&g(U,$)}),S=ne(function(U,$){U.style.height="auto",p&&p(U,$)}),L=ne(function(U){var $=D.current?D.current.clientHeight:0;U.style.height="".concat($,"px"),m&&m(U)}),O=ne(E),k=ne(function(U){var $=D.current?D.current.clientHeight:0,ie=eh({style:y,timeout:x},{mode:"exit"}),ee=ie.duration;if(x==="auto"){var pe=N.transitions.getAutoHeightDuration($);U.style.transitionDuration="".concat(pe,"ms"),G.current=pe}else U.style.transitionDuration=typeof ee=="string"?ee:"".concat(ee,"ms");U.style.height=W,v&&v(U)}),F=function($,ie){var ee=X?$:ie;x==="auto"&&(H.current=setTimeout(ee,G.current||0))};return w.exports.createElement(R,j({in:d,onEnter:fe,onEntered:S,onEntering:P,onExit:L,onExited:O,onExiting:k,addEndListener:F,nodeRef:X?oe:void 0,timeout:x==="auto"?null:x},b),function(U,$){return w.exports.createElement(u,j({className:be(i.root,i.container,s,{entered:i.entered,exited:!d&&W==="0px"&&i.hidden}[U]),style:j({minHeight:W},y),ref:ge},$),w.exports.createElement("div",{className:i.wrapper,ref:D},w.exports.createElement("div",{className:i.wrapperInner},r)))})});eb.muiSupportAuto=!0;const UW=_t(kW,{name:"MuiCollapse"})(eb);var GW=function(e){var n={};return e.shadows.forEach(function(r,i){n["elevation".concat(i)]={boxShadow:r}}),j({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},n)},VW=w.exports.forwardRef(function(e,n){var r=e.classes,i=e.className,s=e.component,o=s===void 0?"div":s,a=e.square,l=a===void 0?!1:a,c=e.elevation,u=c===void 0?1:c,f=e.variant,h=f===void 0?"elevation":f,d=Re(e,["classes","className","component","square","elevation","variant"]);return w.exports.createElement(o,j({className:be(r.root,i,h==="outlined"?r.outlined:r["elevation".concat(u)],!l&&r.rounded),ref:n},d))});const Rc=_t(GW,{name:"MuiPaper"})(VW);var zW=w.exports.createContext({});const tb=zW;var jW=function(e){var n={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],n),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],n)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}},HW=w.exports.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.defaultExpanded,a=o===void 0?!1:o,l=e.disabled,c=l===void 0?!1:l,u=e.expanded,f=e.onChange,h=e.square,d=h===void 0?!1:h,A=e.TransitionComponent,p=A===void 0?UW:A,g=e.TransitionProps,m=Re(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),E=qS({controlled:u,default:a,name:"Accordion",state:"expanded"}),v=Zh(E,2),y=v[0],C=v[1],x=w.exports.useCallback(function(D){C(!y),f&&f(D,!y)},[y,f,C]),B=w.exports.Children.toArray(r),R=PW(B),b=R[0],N=R.slice(1),H=w.exports.useMemo(function(){return{expanded:y,disabled:c,toggle:x}},[y,c,x]);return w.exports.createElement(Rc,j({className:be(i.root,s,y&&i.expanded,c&&i.disabled,!d&&i.rounded),ref:n,square:d},m),w.exports.createElement(tb.Provider,{value:H},b),w.exports.createElement(p,j({in:y,timeout:"auto"},g),w.exports.createElement("div",{"aria-labelledby":b.props.id,id:b.props["aria-controls"],role:"region"},N)))});const WW=_t(jW,{name:"MuiAccordion"})(HW);var YW=function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}},$W=w.exports.forwardRef(function(e,n){var r=e.classes,i=e.className,s=Re(e,["classes","className"]);return w.exports.createElement("div",j({className:be(r.root,i),ref:n},s))});const XW=_t(YW,{name:"MuiAccordionDetails"})($W);var KW=typeof window>"u"?w.exports.useEffect:w.exports.useLayoutEffect;function qW(t){var e=t.classes,n=t.pulsate,r=n===void 0?!1:n,i=t.rippleX,s=t.rippleY,o=t.rippleSize,a=t.in,l=t.onExited,c=l===void 0?function(){}:l,u=t.timeout,f=w.exports.useState(!1),h=f[0],d=f[1],A=be(e.ripple,e.rippleVisible,r&&e.ripplePulsate),p={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},g=be(e.child,h&&e.childLeaving,r&&e.childPulsate),m=Lt(c);return KW(function(){if(!a){d(!0);var E=setTimeout(m,u);return function(){clearTimeout(E)}}},[m,a,u]),w.exports.createElement("span",{className:A,style:p},w.exports.createElement("span",{className:g}))}var Bp=550,JW=80,ZW=function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(Bp,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(Bp,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},eY=w.exports.forwardRef(function(e,n){var r=e.center,i=r===void 0?!1:r,s=e.classes,o=e.className,a=Re(e,["center","classes","className"]),l=w.exports.useState([]),c=l[0],u=l[1],f=w.exports.useRef(0),h=w.exports.useRef(null);w.exports.useEffect(function(){h.current&&(h.current(),h.current=null)},[c]);var d=w.exports.useRef(!1),A=w.exports.useRef(null),p=w.exports.useRef(null),g=w.exports.useRef(null);w.exports.useEffect(function(){return function(){clearTimeout(A.current)}},[]);var m=w.exports.useCallback(function(C){var x=C.pulsate,B=C.rippleX,R=C.rippleY,b=C.rippleSize,N=C.cb;u(function(H){return[].concat(yh(H),[w.exports.createElement(qW,{key:f.current,classes:s,timeout:Bp,pulsate:x,rippleX:B,rippleY:R,rippleSize:b})])}),f.current+=1,h.current=N},[s]),E=w.exports.useCallback(function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=arguments.length>2?arguments[2]:void 0,R=x.pulsate,b=R===void 0?!1:R,N=x.center,H=N===void 0?i||x.pulsate:N,D=x.fakeElement,G=D===void 0?!1:D;if(C.type==="mousedown"&&d.current){d.current=!1;return}C.type==="touchstart"&&(d.current=!0);var W=G?null:g.current,X=W?W.getBoundingClientRect():{width:0,height:0,left:0,top:0},oe,ge,ne;if(H||C.clientX===0&&C.clientY===0||!C.clientX&&!C.touches)oe=Math.round(X.width/2),ge=Math.round(X.height/2);else{var fe=C.touches?C.touches[0]:C,P=fe.clientX,S=fe.clientY;oe=Math.round(P-X.left),ge=Math.round(S-X.top)}if(H)ne=Math.sqrt((2*Math.pow(X.width,2)+Math.pow(X.height,2))/3),ne%2===0&&(ne+=1);else{var L=Math.max(Math.abs((W?W.clientWidth:0)-oe),oe)*2+2,O=Math.max(Math.abs((W?W.clientHeight:0)-ge),ge)*2+2;ne=Math.sqrt(Math.pow(L,2)+Math.pow(O,2))}C.touches?p.current===null&&(p.current=function(){m({pulsate:b,rippleX:oe,rippleY:ge,rippleSize:ne,cb:B})},A.current=setTimeout(function(){p.current&&(p.current(),p.current=null)},JW)):m({pulsate:b,rippleX:oe,rippleY:ge,rippleSize:ne,cb:B})},[i,m]),v=w.exports.useCallback(function(){E({},{pulsate:!0})},[E]),y=w.exports.useCallback(function(C,x){if(clearTimeout(A.current),C.type==="touchend"&&p.current){C.persist(),p.current(),p.current=null,A.current=setTimeout(function(){y(C,x)});return}p.current=null,u(function(B){return B.length>0?B.slice(1):B}),h.current=x},[]);return w.exports.useImperativeHandle(n,function(){return{pulsate:v,start:E,stop:y}},[v,E,y]),w.exports.createElement("span",j({className:be(s.root,o),ref:g},a),w.exports.createElement(FW,{component:null,exit:!0},c))});const tY=_t(ZW,{flip:!1,name:"MuiTouchRipple"})(w.exports.memo(eY));var nY={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},rY=w.exports.forwardRef(function(e,n){var r=e.action,i=e.buttonRef,s=e.centerRipple,o=s===void 0?!1:s,a=e.children,l=e.classes,c=e.className,u=e.component,f=u===void 0?"button":u,h=e.disabled,d=h===void 0?!1:h,A=e.disableRipple,p=A===void 0?!1:A,g=e.disableTouchRipple,m=g===void 0?!1:g,E=e.focusRipple,v=E===void 0?!1:E,y=e.focusVisibleClassName,C=e.onBlur,x=e.onClick,B=e.onFocus,R=e.onFocusVisible,b=e.onKeyDown,N=e.onKeyUp,H=e.onMouseDown,D=e.onMouseLeave,G=e.onMouseUp,W=e.onTouchEnd,X=e.onTouchMove,oe=e.onTouchStart,ge=e.onDragLeave,ne=e.tabIndex,fe=ne===void 0?0:ne,P=e.TouchRippleProps,S=e.type,L=S===void 0?"button":S,O=Re(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),k=w.exports.useRef(null);function F(){return zr.exports.findDOMNode(k.current)}var U=w.exports.useRef(null),$=w.exports.useState(!1),ie=$[0],ee=$[1];d&&ie&&ee(!1);var pe=JS(),ae=pe.isFocusVisible,ye=pe.onBlurVisible,Ce=pe.ref;w.exports.useImperativeHandle(r,function(){return{focusVisible:function(){ee(!0),k.current.focus()}}},[]),w.exports.useEffect(function(){ie&&v&&!p&&U.current.pulsate()},[p,v,ie]);function ve(Ae,Kt){var ua=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m;return Lt(function(Hi){Kt&&Kt(Hi);var vn=ua;return!vn&&U.current&&U.current[Ae](Hi),!0})}var ct=ve("start",H),le=ve("stop",ge),we=ve("stop",G),Bt=ve("stop",function(Ae){ie&&Ae.preventDefault(),D&&D(Ae)}),tt=ve("start",oe),nt=ve("stop",W),Be=ve("stop",X),Ie=ve("stop",function(Ae){ie&&(ye(Ae),ee(!1)),C&&C(Ae)},!1),Qe=Lt(function(Ae){k.current||(k.current=Ae.currentTarget),ae(Ae)&&(ee(!0),R&&R(Ae)),B&&B(Ae)}),Ye=function(){var Kt=F();return f&&f!=="button"&&!(Kt.tagName==="A"&&Kt.href)},Vt=w.exports.useRef(!1),Pt=Lt(function(Ae){v&&!Vt.current&&ie&&U.current&&Ae.key===" "&&(Vt.current=!0,Ae.persist(),U.current.stop(Ae,function(){U.current.start(Ae)})),Ae.target===Ae.currentTarget&&Ye()&&Ae.key===" "&&Ae.preventDefault(),b&&b(Ae),Ae.target===Ae.currentTarget&&Ye()&&Ae.key==="Enter"&&!d&&(Ae.preventDefault(),x&&x(Ae))}),$r=Lt(function(Ae){v&&Ae.key===" "&&U.current&&ie&&!Ae.defaultPrevented&&(Vt.current=!1,Ae.persist(),U.current.stop(Ae,function(){U.current.pulsate(Ae)})),N&&N(Ae),x&&Ae.target===Ae.currentTarget&&Ye()&&Ae.key===" "&&!Ae.defaultPrevented&&x(Ae)}),ut=f;ut==="button"&&O.href&&(ut="a");var Se={};ut==="button"?(Se.type=L,Se.disabled=d):((ut!=="a"||!O.href)&&(Se.role="button"),Se["aria-disabled"]=d);var Ln=$t(i,n),ot=$t(Ce,k),Mn=$t(Ln,ot),On=w.exports.useState(!1),aa=On[0],la=On[1];w.exports.useEffect(function(){la(!0)},[]);var ca=aa&&!p&&!d;return w.exports.createElement(ut,j({className:be(l.root,c,ie&&[l.focusVisible,y],d&&l.disabled),onBlur:Ie,onClick:x,onFocus:Qe,onKeyDown:Pt,onKeyUp:$r,onMouseDown:ct,onMouseLeave:Bt,onMouseUp:we,onDragLeave:le,onTouchEnd:nt,onTouchMove:Be,onTouchStart:tt,ref:Mn,tabIndex:d?-1:fe},Se,O),a,ca?w.exports.createElement(tY,j({ref:U,center:o},P)):null)});const nb=_t(nY,{name:"MuiButtonBase"})(rY);var iY=function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:fi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:fi(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:fi(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}},sY=w.exports.forwardRef(function(e,n){var r=e.edge,i=r===void 0?!1:r,s=e.children,o=e.classes,a=e.className,l=e.color,c=l===void 0?"default":l,u=e.disabled,f=u===void 0?!1:u,h=e.disableFocusRipple,d=h===void 0?!1:h,A=e.size,p=A===void 0?"medium":A,g=Re(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return w.exports.createElement(nb,j({className:be(o.root,a,c!=="default"&&o["color".concat(Kn(c))],f&&o.disabled,p==="small"&&o["size".concat(Kn(p))],{start:o.edgeStart,end:o.edgeEnd}[i]),centerRipple:!0,focusRipple:!d,disabled:f,ref:n},g),w.exports.createElement("span",{className:o.label},s))});const Gr=_t(iY,{name:"MuiIconButton"})(sY);var oY=function(e){var n={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:8*6,transition:e.transitions.create(["min-height","background-color"],n),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused, &$focusVisible":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},focusVisible:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],n),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",n),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}},aY=w.exports.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.expandIcon,a=e.focusVisibleClassName,l=e.IconButtonProps,c=l===void 0?{}:l,u=e.onClick,f=Re(e,["children","classes","className","expandIcon","focusVisibleClassName","IconButtonProps","onClick"]),h=w.exports.useContext(tb),d=h.disabled,A=d===void 0?!1:d,p=h.expanded,g=h.toggle,m=function(v){g&&g(v),u&&u(v)};return w.exports.createElement(nb,j({focusRipple:!1,disableRipple:!0,disabled:A,component:"div","aria-expanded":p,className:be(i.root,s,A&&i.disabled,p&&i.expanded),focusVisibleClassName:be(i.focusVisible,i.focused,a),onClick:m,ref:n},f),w.exports.createElement("div",{className:be(i.content,p&&i.expanded)},r),o&&w.exports.createElement(Gr,j({className:be(i.expandIcon,p&&i.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},c),o))});const lY=_t(oY,{name:"MuiAccordionSummary"})(aY);var cY=function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}},Cx={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},uY=w.exports.forwardRef(function(e,n){var r=e.align,i=r===void 0?"inherit":r,s=e.classes,o=e.className,a=e.color,l=a===void 0?"initial":a,c=e.component,u=e.display,f=u===void 0?"initial":u,h=e.gutterBottom,d=h===void 0?!1:h,A=e.noWrap,p=A===void 0?!1:A,g=e.paragraph,m=g===void 0?!1:g,E=e.variant,v=E===void 0?"body1":E,y=e.variantMapping,C=y===void 0?Cx:y,x=Re(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),B=c||(m?"p":C[v]||Cx[v])||"span";return w.exports.createElement(B,j({className:be(s.root,o,v!=="inherit"&&s[v],l!=="initial"&&s["color".concat(Kn(l))],p&&s.noWrap,d&&s.gutterBottom,m&&s.paragraph,i!=="inherit"&&s["align".concat(Kn(i))],f!=="initial"&&s["display".concat(Kn(f))]),ref:n},x))});const Yn=_t(cY,{name:"MuiTypography"})(uY);var rb=w.exports.createContext();function fY(){return w.exports.useContext(rb)}const ib=rb;function hY(){return w.exports.useContext(ib)}function dY(t){return t=typeof t=="function"?t():t,zr.exports.findDOMNode(t)}var OA=typeof window<"u"?w.exports.useLayoutEffect:w.exports.useEffect,AY=w.exports.forwardRef(function(e,n){var r=e.children,i=e.container,s=e.disablePortal,o=s===void 0?!1:s,a=e.onRendered,l=w.exports.useState(null),c=l[0],u=l[1],f=$t(w.exports.isValidElement(r)?r.ref:null,n);return OA(function(){o||u(dY(i)||document.body)},[i,o]),OA(function(){if(c&&!o)return Jf(n,c),function(){Jf(n,null)}},[n,c,o]),OA(function(){a&&(c||o)&&a()},[a,c,o]),o?w.exports.isValidElement(r)?w.exports.cloneElement(r,{ref:f}):r:c&&zr.exports.createPortal(r,c)});const gY=AY;function pY(){var t=document.createElement("div");t.style.width="99px",t.style.height="99px",t.style.position="absolute",t.style.top="-9999px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function mY(t){var e=Wn(t);return e.body===t?KS(e).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function ml(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function wx(t){return parseInt(window.getComputedStyle(t)["padding-right"],10)||0}function Tx(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,s=[e,n].concat(yh(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,function(a){a.nodeType===1&&s.indexOf(a)===-1&&o.indexOf(a.tagName)===-1&&ml(a,i)})}function DA(t,e){var n=-1;return t.some(function(r,i){return e(r)?(n=i,!0):!1}),n}function EY(t,e){var n=[],r=[],i=t.container,s;if(!e.disableScrollLock){if(mY(i)){var o=pY();n.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(wx(i)+o,"px"),s=Wn(i).querySelectorAll(".mui-fixed"),[].forEach.call(s,function(u){r.push(u.style.paddingRight),u.style.paddingRight="".concat(wx(u)+o,"px")})}var a=i.parentElement,l=a.nodeName==="HTML"&&window.getComputedStyle(a)["overflow-y"]==="scroll"?a:i;n.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}var c=function(){s&&[].forEach.call(s,function(f,h){r[h]?f.style.paddingRight=r[h]:f.style.removeProperty("padding-right")}),n.forEach(function(f){var h=f.value,d=f.el,A=f.key;h?d.style.setProperty(A,h):d.style.removeProperty(A)})};return c}function vY(t){var e=[];return[].forEach.call(t.children,function(n){n.getAttribute&&n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}var yY=function(){function t(){KP(this,t),this.modals=[],this.containers=[]}return N0(t,[{key:"add",value:function(n,r){var i=this.modals.indexOf(n);if(i!==-1)return i;i=this.modals.length,this.modals.push(n),n.modalRef&&ml(n.modalRef,!1);var s=vY(r);Tx(r,n.mountNode,n.modalRef,s,!0);var o=DA(this.containers,function(a){return a.container===r});return o!==-1?(this.containers[o].modals.push(n),i):(this.containers.push({modals:[n],container:r,restore:null,hiddenSiblingNodes:s}),i)}},{key:"mount",value:function(n,r){var i=DA(this.containers,function(o){return o.modals.indexOf(n)!==-1}),s=this.containers[i];s.restore||(s.restore=EY(s,r))}},{key:"remove",value:function(n){var r=this.modals.indexOf(n);if(r===-1)return r;var i=DA(this.containers,function(a){return a.modals.indexOf(n)!==-1}),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(n),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),n.modalRef&&ml(n.modalRef,!0),Tx(s.container,n.mountNode,n.modalRef,s.hiddenSiblingNodes,!1),this.containers.splice(i,1);else{var o=s.modals[s.modals.length-1];o.modalRef&&ml(o.modalRef,!1)}return r}},{key:"isTopModal",value:function(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}]),t}();function _Y(t){var e=t.children,n=t.disableAutoFocus,r=n===void 0?!1:n,i=t.disableEnforceFocus,s=i===void 0?!1:i,o=t.disableRestoreFocus,a=o===void 0?!1:o,l=t.getDoc,c=t.isEnabled,u=t.open,f=w.exports.useRef(),h=w.exports.useRef(null),d=w.exports.useRef(null),A=w.exports.useRef(),p=w.exports.useRef(null),g=w.exports.useCallback(function(v){p.current=zr.exports.findDOMNode(v)},[]),m=$t(e.ref,g),E=w.exports.useRef();return w.exports.useEffect(function(){E.current=u},[u]),!E.current&&u&&typeof window<"u"&&(A.current=l().activeElement),w.exports.useEffect(function(){if(!!u){var v=Wn(p.current);!r&&p.current&&!p.current.contains(v.activeElement)&&(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex",-1),p.current.focus());var y=function(){var R=p.current;if(R!==null){if(!v.hasFocus()||s||!c()||f.current){f.current=!1;return}p.current&&!p.current.contains(v.activeElement)&&p.current.focus()}},C=function(R){s||!c()||R.keyCode!==9||v.activeElement===p.current&&(f.current=!0,R.shiftKey?d.current.focus():h.current.focus())};v.addEventListener("focus",y,!0),v.addEventListener("keydown",C,!0);var x=setInterval(function(){y()},50);return function(){clearInterval(x),v.removeEventListener("focus",y,!0),v.removeEventListener("keydown",C,!0),a||(A.current&&A.current.focus&&A.current.focus(),A.current=null)}}},[r,s,a,c,u]),w.exports.createElement(w.exports.Fragment,null,w.exports.createElement("div",{tabIndex:0,ref:h,"data-test":"sentinelStart"}),w.exports.cloneElement(e,{ref:m}),w.exports.createElement("div",{tabIndex:0,ref:d,"data-test":"sentinelEnd"}))}var Sx={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},xY=w.exports.forwardRef(function(e,n){var r=e.invisible,i=r===void 0?!1:r,s=e.open,o=Re(e,["invisible","open"]);return s?w.exports.createElement("div",j({"aria-hidden":!0,ref:n},o,{style:j({},Sx.root,i?Sx.invisible:{},o.style)})):null});const IY=xY;function CY(t){return t=typeof t=="function"?t():t,zr.exports.findDOMNode(t)}function wY(t){return t.children?t.children.props.hasOwnProperty("in"):!1}var TY=new yY,SY=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}},bY=w.exports.forwardRef(function(e,n){var r=lc(),i=VC({name:"MuiModal",props:j({},e),theme:r}),s=i.BackdropComponent,o=s===void 0?IY:s,a=i.BackdropProps,l=i.children,c=i.closeAfterTransition,u=c===void 0?!1:c,f=i.container,h=i.disableAutoFocus,d=h===void 0?!1:h,A=i.disableBackdropClick,p=A===void 0?!1:A,g=i.disableEnforceFocus,m=g===void 0?!1:g,E=i.disableEscapeKeyDown,v=E===void 0?!1:E,y=i.disablePortal,C=y===void 0?!1:y,x=i.disableRestoreFocus,B=x===void 0?!1:x,R=i.disableScrollLock,b=R===void 0?!1:R,N=i.hideBackdrop,H=N===void 0?!1:N,D=i.keepMounted,G=D===void 0?!1:D,W=i.manager,X=W===void 0?TY:W,oe=i.onBackdropClick,ge=i.onClose,ne=i.onEscapeKeyDown,fe=i.onRendered,P=i.open,S=Re(i,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),L=w.exports.useState(!0),O=L[0],k=L[1],F=w.exports.useRef({}),U=w.exports.useRef(null),$=w.exports.useRef(null),ie=$t($,n),ee=wY(i),pe=function(){return Wn(U.current)},ae=function(){return F.current.modalRef=$.current,F.current.mountNode=U.current,F.current},ye=function(){X.mount(ae(),{disableScrollLock:b}),$.current.scrollTop=0},Ce=Lt(function(){var Qe=CY(f)||pe().body;X.add(ae(),Qe),$.current&&ye()}),ve=w.exports.useCallback(function(){return X.isTopModal(ae())},[X]),ct=Lt(function(Qe){U.current=Qe,Qe&&(fe&&fe(),P&&ve()?ye():ml($.current,!0))}),le=w.exports.useCallback(function(){X.remove(ae())},[X]);if(w.exports.useEffect(function(){return function(){le()}},[le]),w.exports.useEffect(function(){P?Ce():(!ee||!u)&&le()},[P,le,ee,u,Ce]),!G&&!P&&(!ee||O))return null;var we=function(){k(!1)},Bt=function(){k(!0),u&&le()},tt=function(Ye){Ye.target===Ye.currentTarget&&(oe&&oe(Ye),!p&&ge&&ge(Ye,"backdropClick"))},nt=function(Ye){Ye.key!=="Escape"||!ve()||(ne&&ne(Ye),v||(Ye.stopPropagation(),ge&&ge(Ye,"escapeKeyDown")))},Be=SY(r||{zIndex:HS}),Ie={};return l.props.tabIndex===void 0&&(Ie.tabIndex=l.props.tabIndex||"-1"),ee&&(Ie.onEnter=Sp(we,l.props.onEnter),Ie.onExited=Sp(Bt,l.props.onExited)),w.exports.createElement(gY,{ref:ct,container:f,disablePortal:C},w.exports.createElement("div",j({ref:ie,onKeyDown:nt,role:"presentation"},S,{style:j({},Be.root,!P&&O?Be.hidden:{},S.style)}),H?null:w.exports.createElement(o,j({open:P,onClick:tt},a)),w.exports.createElement(_Y,{disableEnforceFocus:m,disableAutoFocus:d,disableRestoreFocus:B,getDoc:pe,isEnabled:ve,open:P},w.exports.cloneElement(l,Ie))))});const RY=bY;var BY=function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:fi(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}},PY=w.exports.forwardRef(function(e,n){var r=e.absolute,i=r===void 0?!1:r,s=e.classes,o=e.className,a=e.component,l=a===void 0?"hr":a,c=e.flexItem,u=c===void 0?!1:c,f=e.light,h=f===void 0?!1:f,d=e.orientation,A=d===void 0?"horizontal":d,p=e.role,g=p===void 0?l!=="hr"?"separator":void 0:p,m=e.variant,E=m===void 0?"fullWidth":m,v=Re(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return w.exports.createElement(l,j({className:be(s.root,o,E!=="fullWidth"&&s[E],i&&s.absolute,u&&s.flexItem,h&&s.light,A==="vertical"&&s.vertical),role:g,ref:n},v))});const un=_t(BY,{name:"MuiDivider"})(PY);function sb(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce(function(i,s){return i[s]=e[s],r&&typeof e[s]>"u"&&(i[s]=r[s]),i},{})}function Iu(t,e){return parseInt(t[e],10)||0}var NY=typeof window<"u"?w.exports.useLayoutEffect:w.exports.useEffect,LY={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}},MY=w.exports.forwardRef(function(e,n){var r=e.onChange,i=e.rows,s=e.rowsMax,o=e.rowsMin,a=e.maxRows,l=e.minRows,c=l===void 0?1:l,u=e.style,f=e.value,h=Re(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),d=a||s,A=i||o||c,p=w.exports.useRef(f!=null),g=p.current,m=w.exports.useRef(null),E=$t(n,m),v=w.exports.useRef(null),y=w.exports.useRef(0),C=w.exports.useState({}),x=C[0],B=C[1],R=w.exports.useCallback(function(){var N=m.current,H=window.getComputedStyle(N),D=v.current;D.style.width=H.width,D.value=N.value||e.placeholder||"x",D.value.slice(-1)===`
`&&(D.value+=" ");var G=H["box-sizing"],W=Iu(H,"padding-bottom")+Iu(H,"padding-top"),X=Iu(H,"border-bottom-width")+Iu(H,"border-top-width"),oe=D.scrollHeight-W;D.value="x";var ge=D.scrollHeight-W,ne=oe;A&&(ne=Math.max(Number(A)*ge,ne)),d&&(ne=Math.min(Number(d)*ge,ne)),ne=Math.max(ne,ge);var fe=ne+(G==="border-box"?W+X:0),P=Math.abs(ne-oe)<=1;B(function(S){return y.current<20&&(fe>0&&Math.abs((S.outerHeightStyle||0)-fe)>1||S.overflow!==P)?(y.current+=1,{overflow:P,outerHeightStyle:fe}):S})},[d,A,e.placeholder]);w.exports.useEffect(function(){var N=XS(function(){y.current=0,R()});return window.addEventListener("resize",N),function(){N.clear(),window.removeEventListener("resize",N)}},[R]),NY(function(){R()}),w.exports.useEffect(function(){y.current=0},[f]);var b=function(H){y.current=0,g||R(),r&&r(H)};return w.exports.createElement(w.exports.Fragment,null,w.exports.createElement("textarea",j({value:f,onChange:b,ref:E,rows:A,style:j({height:x.outerHeightStyle,overflow:x.overflow?"hidden":null},u)},h)),w.exports.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:j({},LY.shadow,u)}))});const OY=MY;function bx(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function DY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return t&&(bx(t.value)&&t.value!==""||e&&bx(t.defaultValue)&&t.defaultValue!=="")}var FY=function(e){var n=e.palette.type==="light",r={color:"currentColor",opacity:n?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},s={opacity:n?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:j({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(8-2,"px 0 ").concat(8-1,"px"),"&$marginDense":{paddingTop:4-1}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(8-2,"px 0 ").concat(8-1,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:4-1},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}},QY=typeof window>"u"?w.exports.useEffect:w.exports.useLayoutEffect,kY=w.exports.forwardRef(function(e,n){var r=e["aria-describedby"],i=e.autoComplete,s=e.autoFocus,o=e.classes,a=e.className;e.color;var l=e.defaultValue,c=e.disabled,u=e.endAdornment;e.error;var f=e.fullWidth,h=f===void 0?!1:f,d=e.id,A=e.inputComponent,p=A===void 0?"input":A,g=e.inputProps,m=g===void 0?{}:g,E=e.inputRef;e.margin;var v=e.multiline,y=v===void 0?!1:v,C=e.name,x=e.onBlur,B=e.onChange,R=e.onClick,b=e.onFocus,N=e.onKeyDown,H=e.onKeyUp,D=e.placeholder,G=e.readOnly,W=e.renderSuffix,X=e.rows,oe=e.rowsMax,ge=e.rowsMin,ne=e.maxRows,fe=e.minRows,P=e.startAdornment,S=e.type,L=S===void 0?"text":S,O=e.value,k=Re(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),F=m.value!=null?m.value:O,U=w.exports.useRef(F!=null),$=U.current,ie=w.exports.useRef(),ee=w.exports.useCallback(function(ut){},[]),pe=$t(m.ref,ee),ae=$t(E,pe),ye=$t(ie,ae),Ce=w.exports.useState(!1),ve=Ce[0],ct=Ce[1],le=fY(),we=sb({props:e,muiFormControl:le,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});we.focused=le?le.focused:ve,w.exports.useEffect(function(){!le&&c&&ve&&(ct(!1),x&&x())},[le,c,ve,x]);var Bt=le&&le.onFilled,tt=le&&le.onEmpty,nt=w.exports.useCallback(function(ut){DY(ut)?Bt&&Bt():tt&&tt()},[Bt,tt]);QY(function(){$&&nt({value:F})},[F,nt,$]);var Be=function(Se){if(we.disabled){Se.stopPropagation();return}b&&b(Se),m.onFocus&&m.onFocus(Se),le&&le.onFocus?le.onFocus(Se):ct(!0)},Ie=function(Se){x&&x(Se),m.onBlur&&m.onBlur(Se),le&&le.onBlur?le.onBlur(Se):ct(!1)},Qe=function(Se){if(!$){var Ln=Se.target||ie.current;if(Ln==null)throw new Error(Nl(1));nt({value:Ln.value})}for(var ot=arguments.length,Mn=new Array(ot>1?ot-1:0),On=1;On<ot;On++)Mn[On-1]=arguments[On];m.onChange&&m.onChange.apply(m,[Se].concat(Mn)),B&&B.apply(void 0,[Se].concat(Mn))};w.exports.useEffect(function(){nt(ie.current)},[]);var Ye=function(Se){ie.current&&Se.currentTarget===Se.target&&ie.current.focus(),R&&R(Se)},Vt=p,Pt=j({},m,{ref:ye});typeof Vt!="string"?Pt=j({inputRef:ye,type:L},Pt,{ref:null}):y?X&&!ne&&!fe&&!oe&&!ge?Vt="textarea":(Pt=j({minRows:X||fe,rowsMax:oe,maxRows:ne},Pt),Vt=OY):Pt=j({type:L},Pt);var $r=function(Se){nt(Se.animationName==="mui-auto-fill-cancel"?ie.current:{value:"x"})};return w.exports.useEffect(function(){le&&le.setAdornedStart(Boolean(P))},[le,P]),w.exports.createElement("div",j({className:be(o.root,o["color".concat(Kn(we.color||"primary"))],a,we.disabled&&o.disabled,we.error&&o.error,h&&o.fullWidth,we.focused&&o.focused,le&&o.formControl,y&&o.multiline,P&&o.adornedStart,u&&o.adornedEnd,we.margin==="dense"&&o.marginDense),onClick:Ye,ref:n},k),P,w.exports.createElement(ib.Provider,{value:null},w.exports.createElement(Vt,j({"aria-invalid":we.error,"aria-describedby":r,autoComplete:i,autoFocus:s,defaultValue:l,disabled:we.disabled,id:d,onAnimationStart:$r,name:C,placeholder:D,readOnly:G,required:we.required,rows:X,value:F,onKeyDown:N,onKeyUp:H},Pt,{className:be(o.input,m.className,we.disabled&&o.disabled,y&&o.inputMultiline,we.hiddenLabel&&o.inputHiddenLabel,P&&o.inputAdornedStart,u&&o.inputAdornedEnd,L==="search"&&o.inputTypeSearch,we.margin==="dense"&&o.inputMarginDense),onBlur:Ie,onChange:Qe,onFocus:Be}))),u,W?W(j({},we,{startAdornment:P})):null)});const UY=_t(FY,{name:"MuiInputBase"})(kY);var GY=[0,1,2,3,4,5,6,7,8,9,10],VY=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function zY(t,e,n){var r={};VY.forEach(function(i){var s="grid-".concat(n,"-").concat(i);if(i===!0){r[s]={flexBasis:0,flexGrow:1,maxWidth:"100%"};return}if(i==="auto"){r[s]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};return}var o="".concat(Math.round(i/12*1e8)/1e6,"%");r[s]={flexBasis:o,flexGrow:0,maxWidth:o}}),n==="xs"?j(t,r):t[e.breakpoints.up(n)]=r}function FA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=parseFloat(t);return"".concat(n/e).concat(String(t).replace(String(n),"")||"px")}function jY(t,e){var n={};return GY.forEach(function(r){var i=t.spacing(r);i!==0&&(n["spacing-".concat(e,"-").concat(r)]={margin:"-".concat(FA(i,2)),width:"calc(100% + ".concat(FA(i),")"),"& > $item":{padding:FA(i,2)}})}),n}var HY=function(e){return j({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},jY(e,"xs"),e.breakpoints.keys.reduce(function(n,r){return zY(n,e,r),n},{}))},WY=w.exports.forwardRef(function(e,n){var r=e.alignContent,i=r===void 0?"stretch":r,s=e.alignItems,o=s===void 0?"stretch":s,a=e.classes,l=e.className,c=e.component,u=c===void 0?"div":c,f=e.container,h=f===void 0?!1:f,d=e.direction,A=d===void 0?"row":d,p=e.item,g=p===void 0?!1:p,m=e.justify,E=e.justifyContent,v=E===void 0?"flex-start":E,y=e.lg,C=y===void 0?!1:y,x=e.md,B=x===void 0?!1:x,R=e.sm,b=R===void 0?!1:R,N=e.spacing,H=N===void 0?0:N,D=e.wrap,G=D===void 0?"wrap":D,W=e.xl,X=W===void 0?!1:W,oe=e.xs,ge=oe===void 0?!1:oe,ne=e.zeroMinWidth,fe=ne===void 0?!1:ne,P=Re(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),S=be(a.root,l,h&&[a.container,H!==0&&a["spacing-xs-".concat(String(H))]],g&&a.item,fe&&a.zeroMinWidth,A!=="row"&&a["direction-xs-".concat(String(A))],G!=="wrap"&&a["wrap-xs-".concat(String(G))],o!=="stretch"&&a["align-items-xs-".concat(String(o))],i!=="stretch"&&a["align-content-xs-".concat(String(i))],(m||v)!=="flex-start"&&a["justify-content-xs-".concat(String(m||v))],ge!==!1&&a["grid-xs-".concat(String(ge))],b!==!1&&a["grid-sm-".concat(String(b))],B!==!1&&a["grid-md-".concat(String(B))],C!==!1&&a["grid-lg-".concat(String(C))],X!==!1&&a["grid-xl-".concat(String(X))]);return w.exports.createElement(u,j({className:S,ref:n},P))}),YY=_t(HY,{name:"MuiGrid"})(WY);const qe=YY;function Pp(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var $Y={entering:{opacity:1,transform:Pp(1)},entered:{opacity:1,transform:"none"}},ob=w.exports.forwardRef(function(e,n){var r=e.children,i=e.disableStrictModeCompat,s=i===void 0?!1:i,o=e.in,a=e.onEnter,l=e.onEntered,c=e.onEntering,u=e.onExit,f=e.onExited,h=e.onExiting,d=e.style,A=e.timeout,p=A===void 0?"auto":A,g=e.TransitionComponent,m=g===void 0?ZS:g,E=Re(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),v=w.exports.useRef(),y=w.exports.useRef(),C=nE(),x=C.unstable_strictMode&&!s,B=w.exports.useRef(null),R=$t(r.ref,n),b=$t(x?B:void 0,R),N=function(fe){return function(P,S){if(fe){var L=x?[B.current,P]:[P,S],O=Zh(L,2),k=O[0],F=O[1];F===void 0?fe(k):fe(k,F)}}},H=N(c),D=N(function(ne,fe){QW(ne);var P=eh({style:d,timeout:p},{mode:"enter"}),S=P.duration,L=P.delay,O;p==="auto"?(O=C.transitions.getAutoHeightDuration(ne.clientHeight),y.current=O):O=S,ne.style.transition=[C.transitions.create("opacity",{duration:O,delay:L}),C.transitions.create("transform",{duration:O*.666,delay:L})].join(","),a&&a(ne,fe)}),G=N(l),W=N(h),X=N(function(ne){var fe=eh({style:d,timeout:p},{mode:"exit"}),P=fe.duration,S=fe.delay,L;p==="auto"?(L=C.transitions.getAutoHeightDuration(ne.clientHeight),y.current=L):L=P,ne.style.transition=[C.transitions.create("opacity",{duration:L,delay:S}),C.transitions.create("transform",{duration:L*.666,delay:S||L*.333})].join(","),ne.style.opacity="0",ne.style.transform=Pp(.75),u&&u(ne)}),oe=N(f),ge=function(fe,P){var S=x?fe:P;p==="auto"&&(v.current=setTimeout(S,y.current||0))};return w.exports.useEffect(function(){return function(){clearTimeout(v.current)}},[]),w.exports.createElement(m,j({appear:!0,in:o,nodeRef:x?B:void 0,onEnter:D,onEntered:G,onEntering:H,onExit:X,onExited:oe,onExiting:W,addEndListener:ge,timeout:p==="auto"?null:p},E),function(ne,fe){return w.exports.cloneElement(r,j({style:j({opacity:0,transform:Pp(.75),visibility:ne==="exited"&&!o?"hidden":void 0},$Y[ne],d,r.props.style),ref:b},fe))})});ob.muiSupportAuto=!0;const XY=ob;var KY=function(e){var n=e.palette.type==="light",r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}},ab=w.exports.forwardRef(function(e,n){var r=e.disableUnderline,i=e.classes,s=e.fullWidth,o=s===void 0?!1:s,a=e.inputComponent,l=a===void 0?"input":a,c=e.multiline,u=c===void 0?!1:c,f=e.type,h=f===void 0?"text":f,d=Re(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return w.exports.createElement(UY,j({classes:j({},i,{root:be(i.root,!r&&i.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:u,ref:n,type:h},d))});ab.muiName="Input";const sE=_t(KY,{name:"MuiInput"})(ab);function Rx(t,e){var n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function Bx(t,e){var n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function Px(t){return[t.horizontal,t.vertical].map(function(e){return typeof e=="number"?"".concat(e,"px"):e}).join(" ")}function qY(t,e){for(var n=e,r=0;n&&n!==t;)n=n.parentElement,r+=n.scrollTop;return r}function QA(t){return typeof t=="function"?t():t}var JY={root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},ZY=w.exports.forwardRef(function(e,n){var r=e.action,i=e.anchorEl,s=e.anchorOrigin,o=s===void 0?{vertical:"top",horizontal:"left"}:s,a=e.anchorPosition,l=e.anchorReference,c=l===void 0?"anchorEl":l,u=e.children,f=e.classes,h=e.className,d=e.container,A=e.elevation,p=A===void 0?8:A,g=e.getContentAnchorEl,m=e.marginThreshold,E=m===void 0?16:m,v=e.onEnter,y=e.onEntered,C=e.onEntering,x=e.onExit,B=e.onExited,R=e.onExiting,b=e.open,N=e.PaperProps,H=N===void 0?{}:N,D=e.transformOrigin,G=D===void 0?{vertical:"top",horizontal:"left"}:D,W=e.TransitionComponent,X=W===void 0?XY:W,oe=e.transitionDuration,ge=oe===void 0?"auto":oe,ne=e.TransitionProps,fe=ne===void 0?{}:ne,P=Re(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),S=w.exports.useRef(),L=w.exports.useCallback(function(ae){if(c==="anchorPosition")return a;var ye=QA(i),Ce=ye&&ye.nodeType===1?ye:Wn(S.current).body,ve=Ce.getBoundingClientRect(),ct=ae===0?o.vertical:"center";return{top:ve.top+Rx(ve,ct),left:ve.left+Bx(ve,o.horizontal)}},[i,o.horizontal,o.vertical,a,c]),O=w.exports.useCallback(function(ae){var ye=0;if(g&&c==="anchorEl"){var Ce=g(ae);if(Ce&&ae.contains(Ce)){var ve=qY(ae,Ce);ye=Ce.offsetTop+Ce.clientHeight/2-ve||0}}return ye},[o.vertical,c,g]),k=w.exports.useCallback(function(ae){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{vertical:Rx(ae,G.vertical)+ye,horizontal:Bx(ae,G.horizontal)}},[G.horizontal,G.vertical]),F=w.exports.useCallback(function(ae){var ye=O(ae),Ce={width:ae.offsetWidth,height:ae.offsetHeight},ve=k(Ce,ye);if(c==="none")return{top:null,left:null,transformOrigin:Px(ve)};var ct=L(ye),le=ct.top-ve.vertical,we=ct.left-ve.horizontal,Bt=le+Ce.height,tt=we+Ce.width,nt=KS(QA(i)),Be=nt.innerHeight-E,Ie=nt.innerWidth-E;if(le<E){var Qe=le-E;le-=Qe,ve.vertical+=Qe}else if(Bt>Be){var Ye=Bt-Be;le-=Ye,ve.vertical+=Ye}if(we<E){var Vt=we-E;we-=Vt,ve.horizontal+=Vt}else if(tt>Ie){var Pt=tt-Ie;we-=Pt,ve.horizontal+=Pt}return{top:"".concat(Math.round(le),"px"),left:"".concat(Math.round(we),"px"),transformOrigin:Px(ve)}},[i,c,L,O,k,E]),U=w.exports.useCallback(function(){var ae=S.current;if(!!ae){var ye=F(ae);ye.top!==null&&(ae.style.top=ye.top),ye.left!==null&&(ae.style.left=ye.left),ae.style.transformOrigin=ye.transformOrigin}},[F]),$=function(ye,Ce){C&&C(ye,Ce),U()},ie=w.exports.useCallback(function(ae){S.current=zr.exports.findDOMNode(ae)},[]);w.exports.useEffect(function(){b&&U()}),w.exports.useImperativeHandle(r,function(){return b?{updatePosition:function(){U()}}:null},[b,U]),w.exports.useEffect(function(){if(!!b){var ae=XS(function(){U()});return window.addEventListener("resize",ae),function(){ae.clear(),window.removeEventListener("resize",ae)}}},[b,U]);var ee=ge;ge==="auto"&&!X.muiSupportAuto&&(ee=void 0);var pe=d||(i?Wn(QA(i)).body:void 0);return w.exports.createElement(RY,j({container:pe,open:b,ref:n,BackdropProps:{invisible:!0},className:be(f.root,h)},P),w.exports.createElement(X,j({appear:!0,in:b,onEnter:v,onEntered:y,onExit:x,onExited:B,onExiting:R,timeout:ee},fe,{onEntering:Sp($,fe.onEntering)}),w.exports.createElement(Rc,j({elevation:p,ref:ie},H,{className:be(f.paper,H.className)}),u)))});const oE=_t(JY,{name:"MuiPopover"})(ZY);var e$=w.exports.forwardRef(function(e,n){var r=e.classes,i=e.className,s=e.disabled,o=e.IconComponent,a=e.inputRef,l=e.variant,c=l===void 0?"standard":l,u=Re(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return w.exports.createElement(w.exports.Fragment,null,w.exports.createElement("select",j({className:be(r.root,r.select,r[c],i,s&&r.disabled),disabled:s,ref:a||n},u)),e.multiple?null:w.exports.createElement(o,{className:be(r.icon,r["icon".concat(Kn(c))],s&&r.disabled)}))});const t$=e$,n$=Wr(w.exports.createElement("path",{d:"M7 10l5 5 5-5z"}));var r$=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:e.palette.type==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},i$=w.exports.createElement(sE,null),lb=w.exports.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.IconComponent,o=s===void 0?n$:s,a=e.input,l=a===void 0?i$:a,c=e.inputProps;e.variant;var u=Re(e,["children","classes","IconComponent","input","inputProps","variant"]),f=hY(),h=sb({props:e,muiFormControl:f,states:["variant"]});return w.exports.cloneElement(l,j({inputComponent:t$,inputProps:j({children:r,classes:i,IconComponent:o,variant:h.variant,type:void 0},c,l?l.props.inputProps:{}),ref:n},u))});lb.muiName="Select";const aE=_t(r$,{name:"MuiNativeSelect"})(lb);var s$=function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:j({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}};function o$(t){var e=t.children,n=t.classes,r=t.className,i=t.open,s=t.value,o=t.valueLabelDisplay;return o==="off"?e:w.exports.cloneElement(e,{className:be(e.props.className,(i||o==="on")&&n.open,n.thumb)},w.exports.createElement("span",{className:be(n.offset,r)},w.exports.createElement("span",{className:n.circle},w.exports.createElement("span",{className:n.label},s))))}const a$=_t(s$,{name:"PrivateValueLabel"})(o$);function kA(t,e){return t-e}function UA(t,e,n){return Math.min(Math.max(e,t),n)}function Nx(t,e){var n=t.reduce(function(i,s,o){var a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null),r=n.index;return r}function Cu(t,e){if(e.current!==void 0&&t.changedTouches){for(var n=0;n<t.changedTouches.length;n+=1){var r=t.changedTouches[n];if(r.identifier===e.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function wu(t,e,n){return(t-e)*100/(n-e)}function l$(t,e,n){return(n-e)*t+e}function c$(t){if(Math.abs(t)<1){var e=t.toExponential().split("e-"),n=e[0].split(".")[1];return(n?n.length:0)+parseInt(e[1],10)}var r=t.toString().split(".")[1];return r?r.length:0}function Lx(t,e,n){var r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(c$(e)))}function Mx(t){var e=t.values,n=t.source,r=t.newValue,i=t.index;if(e[i]===r)return n;var s=e.slice();return s[i]=r,s}function Tu(t){var e=t.sliderRef,n=t.activeIndex,r=t.setActive;(!e.current.contains(document.activeElement)||Number(document.activeElement.getAttribute("data-index"))!==n)&&e.current.querySelector('[role="slider"][data-index="'.concat(n,'"]')).focus(),r&&r(n)}var Su={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},Ox=function(e){return e},u$=function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:e.palette.type==="light"?GS(e.palette.primary.main,.62):US(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(fi(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(fi(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(fi(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(fi(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:j({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}},f$=w.exports.forwardRef(function(e,n){var r=e["aria-label"],i=e["aria-labelledby"],s=e["aria-valuetext"],o=e.classes,a=e.className,l=e.color,c=l===void 0?"primary":l,u=e.component,f=u===void 0?"span":u,h=e.defaultValue,d=e.disabled,A=d===void 0?!1:d,p=e.getAriaLabel,g=e.getAriaValueText,m=e.marks,E=m===void 0?!1:m,v=e.max,y=v===void 0?100:v,C=e.min,x=C===void 0?0:C,B=e.name,R=e.onChange,b=e.onChangeCommitted,N=e.onMouseDown,H=e.orientation,D=H===void 0?"horizontal":H,G=e.scale,W=G===void 0?Ox:G,X=e.step,oe=X===void 0?1:X,ge=e.ThumbComponent,ne=ge===void 0?"span":ge,fe=e.track,P=fe===void 0?"normal":fe,S=e.value,L=e.ValueLabelComponent,O=L===void 0?a$:L,k=e.valueLabelDisplay,F=k===void 0?"off":k,U=e.valueLabelFormat,$=U===void 0?Ox:U,ie=Re(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),ee=nE(),pe=w.exports.useRef(),ae=w.exports.useState(-1),ye=ae[0],Ce=ae[1],ve=w.exports.useState(-1),ct=ve[0],le=ve[1],we=qS({controlled:S,default:h,name:"Slider"}),Bt=Zh(we,2),tt=Bt[0],nt=Bt[1],Be=Array.isArray(tt),Ie=Be?tt.slice().sort(kA):[tt];Ie=Ie.map(function(se){return UA(se,x,y)});var Qe=E===!0&&oe!==null?yh(Array(Math.floor((y-x)/oe)+1)).map(function(se,ce){return{value:x+oe*ce}}):E||[],Ye=JS(),Vt=Ye.isFocusVisible,Pt=Ye.onBlurVisible,$r=Ye.ref,ut=w.exports.useState(-1),Se=ut[0],Ln=ut[1],ot=w.exports.useRef(),Mn=$t($r,ot),On=$t(n,Mn),aa=Lt(function(se){var ce=Number(se.currentTarget.getAttribute("data-index"));Vt(se)&&Ln(ce),le(ce)}),la=Lt(function(){Se!==-1&&(Ln(-1),Pt()),le(-1)}),ca=Lt(function(se){var ce=Number(se.currentTarget.getAttribute("data-index"));le(ce)}),Ae=Lt(function(){le(-1)}),Kt=ee.direction==="rtl",ua=Lt(function(se){var ce=Number(se.currentTarget.getAttribute("data-index")),$e=Ie[ce],Ze=(y-x)/10,Ne=Qe.map(function(Os){return Os.value}),qt=Ne.indexOf($e),ke,Ls=Kt?"ArrowLeft":"ArrowRight",Xr=Kt?"ArrowRight":"ArrowLeft";switch(se.key){case"Home":ke=x;break;case"End":ke=y;break;case"PageUp":oe&&(ke=$e+Ze);break;case"PageDown":oe&&(ke=$e-Ze);break;case Ls:case"ArrowUp":oe?ke=$e+oe:ke=Ne[qt+1]||Ne[Ne.length-1];break;case Xr:case"ArrowDown":oe?ke=$e-oe:ke=Ne[qt-1]||Ne[0];break;default:return}if(se.preventDefault(),oe&&(ke=Lx(ke,oe,x)),ke=UA(ke,x,y),Be){var Ms=ke;ke=Mx({values:Ie,source:tt,newValue:ke,index:ce}).sort(kA),Tu({sliderRef:ot,activeIndex:ke.indexOf(Ms)})}nt(ke),Ln(ce),R&&R(se,ke),b&&b(se,ke)}),Hi=w.exports.useRef(),vn=D;Kt&&D!=="vertical"&&(vn+="-reverse");var Wi=function(ce){var $e=ce.finger,Ze=ce.move,Ne=Ze===void 0?!1:Ze,qt=ce.values,ke=ce.source,Ls=ot.current,Xr=Ls.getBoundingClientRect(),Ms=Xr.width,Os=Xr.height,Bc=Xr.bottom,Pc=Xr.left,yr;vn.indexOf("vertical")===0?yr=(Bc-$e.y)/Os:yr=($e.x-Pc)/Ms,vn.indexOf("-reverse")!==-1&&(yr=1-yr);var at;if(at=l$(yr,x,y),oe)at=Lx(at,oe,x);else{var Kr=Qe.map(function(id){return id.value}),Yi=Nx(Kr,at);at=Kr[Yi]}at=UA(at,x,y);var Fn=0;if(Be){Ne?Fn=Hi.current:Fn=Nx(qt,at);var da=at;at=Mx({values:qt,source:ke,newValue:at,index:Fn}).sort(kA),Fn=at.indexOf(da),Hi.current=Fn}return{newValue:at,activeIndex:Fn}},Dn=Lt(function(se){var ce=Cu(se,pe);if(!!ce){var $e=Wi({finger:ce,move:!0,values:Ie,source:tt}),Ze=$e.newValue,Ne=$e.activeIndex;Tu({sliderRef:ot,activeIndex:Ne,setActive:Ce}),nt(Ze),R&&R(se,Ze)}}),vr=Lt(function(se){var ce=Cu(se,pe);if(!!ce){var $e=Wi({finger:ce,values:Ie,source:tt}),Ze=$e.newValue;Ce(-1),se.type==="touchend"&&le(-1),b&&b(se,Ze),pe.current=void 0;var Ne=Wn(ot.current);Ne.removeEventListener("mousemove",Dn),Ne.removeEventListener("mouseup",vr),Ne.removeEventListener("touchmove",Dn),Ne.removeEventListener("touchend",vr)}}),fa=Lt(function(se){se.preventDefault();var ce=se.changedTouches[0];ce!=null&&(pe.current=ce.identifier);var $e=Cu(se,pe),Ze=Wi({finger:$e,values:Ie,source:tt}),Ne=Ze.newValue,qt=Ze.activeIndex;Tu({sliderRef:ot,activeIndex:qt,setActive:Ce}),nt(Ne),R&&R(se,Ne);var ke=Wn(ot.current);ke.addEventListener("touchmove",Dn),ke.addEventListener("touchend",vr)});w.exports.useEffect(function(){var se=ot.current;se.addEventListener("touchstart",fa);var ce=Wn(se);return function(){se.removeEventListener("touchstart",fa),ce.removeEventListener("mousemove",Dn),ce.removeEventListener("mouseup",vr),ce.removeEventListener("touchmove",Dn),ce.removeEventListener("touchend",vr)}},[vr,Dn,fa]);var td=Lt(function(se){N&&N(se),se.preventDefault();var ce=Cu(se,pe),$e=Wi({finger:ce,values:Ie,source:tt}),Ze=$e.newValue,Ne=$e.activeIndex;Tu({sliderRef:ot,activeIndex:Ne,setActive:Ce}),nt(Ze),R&&R(se,Ze);var qt=Wn(ot.current);qt.addEventListener("mousemove",Dn),qt.addEventListener("mouseup",vr)}),ha=wu(Be?Ie[0]:x,x,y),nd=wu(Ie[Ie.length-1],x,y)-ha,rd=j({},Su[vn].offset(ha),Su[vn].leap(nd));return w.exports.createElement(f,j({ref:On,className:be(o.root,o["color".concat(Kn(c))],a,A&&o.disabled,Qe.length>0&&Qe.some(function(se){return se.label})&&o.marked,P===!1&&o.trackFalse,D==="vertical"&&o.vertical,P==="inverted"&&o.trackInverted),onMouseDown:td},ie),w.exports.createElement("span",{className:o.rail}),w.exports.createElement("span",{className:o.track,style:rd}),w.exports.createElement("input",{value:Ie.join(","),name:B,type:"hidden"}),Qe.map(function(se,ce){var $e=wu(se.value,x,y),Ze=Su[vn].offset($e),Ne;return P===!1?Ne=Ie.indexOf(se.value)!==-1:Ne=P==="normal"&&(Be?se.value>=Ie[0]&&se.value<=Ie[Ie.length-1]:se.value<=Ie[0])||P==="inverted"&&(Be?se.value<=Ie[0]||se.value>=Ie[Ie.length-1]:se.value>=Ie[0]),w.exports.createElement(w.exports.Fragment,{key:se.value},w.exports.createElement("span",{style:Ze,"data-index":ce,className:be(o.mark,Ne&&o.markActive)}),se.label!=null?w.exports.createElement("span",{"aria-hidden":!0,"data-index":ce,style:Ze,className:be(o.markLabel,Ne&&o.markLabelActive)},se.label):null)}),Ie.map(function(se,ce){var $e=wu(se,x,y),Ze=Su[vn].offset($e);return w.exports.createElement(O,{key:ce,valueLabelFormat:$,valueLabelDisplay:F,className:o.valueLabel,value:typeof $=="function"?$(W(se),ce):$,index:ce,open:ct===ce||ye===ce||F==="on",disabled:A},w.exports.createElement(ne,{className:be(o.thumb,o["thumbColor".concat(Kn(c))],ye===ce&&o.active,A&&o.disabled,Se===ce&&o.focusVisible),tabIndex:A?null:0,role:"slider",style:Ze,"data-index":ce,"aria-label":p?p(ce):r,"aria-labelledby":i,"aria-orientation":D,"aria-valuemax":W(y),"aria-valuemin":W(x),"aria-valuenow":W(se),"aria-valuetext":g?g(W(se),ce):s,onKeyDown:ua,onFocus:aa,onBlur:la,onMouseOver:ca,onMouseLeave:Ae}))}))});const lE=_t(u$,{name:"MuiSlider"})(f$),cb=Wr(w.exports.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})),h$=Wr(w.exports.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})),ub=Wr(w.exports.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),d$=Wr(w.exports.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),A$=Wr(w.exports.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),fb=Wr(w.exports.createElement("path",{d:"M19 13H5v-2h14v2z"})),g$=Wr(w.exports.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})),p$=Wr(w.exports.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}));function m$({sourceAtom:t,layerAtom:e}){const n=Pn(t),[r,i]=gr(e),s=o=>{o.stopPropagation(),i(a=>{const l=!a.on;return{...a,on:l}})};return V(Gr,{"aria-label":`toggle-layer-visibility-${n.id}`,onClick:s,style:{backgroundColor:"transparent",marginTop:"2px",color:`rgb(255, 255, 255, ${r.on?1:.5})`},children:r.on?V(g$,{}):V(p$,{})})}const E$=Ui({root:{borderBottom:"1px solid rgba(150, 150, 150, .125)",backgroundColor:"rgba(150, 150, 150, 0.25)",display:"block",padding:"0 3px",height:27,minHeight:27,overflow:"hidden",transition:"none","&$expanded":{minHeight:27}},content:{margin:0,"&$expanded":{margin:0}},expanded:{}})(lY);function v$({sourceAtom:t,layerAtom:e,name:n}){const i=`layer-controller-${Pn(t).id}`;return V(E$,{"aria-controls":i,id:i,children:ze("div",{style:{display:"flex",flexDirection:"row"},children:[V(m$,{sourceAtom:t,layerAtom:e}),V(Yn,{style:{marginTop:"4px",marginLeft:"5px"},variant:"body2",children:n})]})})}function y$({sourceAtom:t}){const e=Pn(t),{acquisitionId:n,acquisitions:r}=e;return r?V(ji,{children:V(qe,{children:ze(aE,{fullWidth:!0,style:{fontSize:"0.7em"},onChange:s=>{let o=s.target.value;const a=new URL(window.location.href);o==="-1"?a.searchParams.delete("acquisition"):a.searchParams.set("acquisition",o),window.location.href=decodeURIComponent(a.href)},value:n,children:[V("option",{value:"-1",children:"Filter by Acquisition"},"-1"),r.map(s=>(s=s,ze("option",{value:s.id,children:["Acquisition: ",s.name]},s.id)))]})})}):null}function _$({sourceAtom:t,layerAtom:e}){const[n,r]=gr(t),[i,s]=gr(e),[o,a]=w.exports.useState(null),l=A=>{a(A.currentTarget)},c=()=>{a(null)},u=async A=>{c();const p=+A.target.value,g=[...n.defaults.selection];n.channel_axis&&(g[n.channel_axis]=p);let m;if(n.contrast_limits[p])m=n.contrast_limits[p];else{const{loader:E}=i.layerProps,v=Array.isArray(E)?E[E.length-1]:E;m=await Jm(v,g),r(y=>{const C=[...y.contrast_limits];return C[p]=m,{...y,contrast_limits:C}})}s(E=>{const{layerProps:v}=E,y=[...v.selections,g],C=[...v.colors,qm(n.colors[p])],x=[...v.contrastLimitsRange,m],B=[...v.channelsVisible,!0];return{...E,layerProps:{...v,selections:y,colors:C,contrastLimits:x,contrastLimitsRange:[...x],channelsVisible:B}}})},{names:f}=n,h=Boolean(o),d=h?`layer-${n.id}-add-channel`:void 0;return ze(ji,{children:[V(Gr,{onClick:l,"aria-describedby":d,style:{backgroundColor:"transparent",padding:0,zIndex:2,cursor:"pointer"},disabled:i.layerProps.selections.length===bo,children:V(cb,{})}),V(oE,{id:d,open:h,anchorEl:o,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:ze(Rc,{style:{padding:"0px 4px",marginBottom:4,width:"8em"},children:[V(Yn,{variant:"caption",children:"selection: "}),V(un,{}),ze(aE,{fullWidth:!0,style:{fontSize:"0.7em"},id:`layer-${n.id}-channel-select`,onChange:u,children:[V("option",{"aria-label":"None",value:"",children:"None"}),f.map((A,p)=>V("option",{value:p,children:A},A))]})]})})]})}const x$=Ui({root:{color:"white",padding:"10px 0px 5px 0px",marginRight:"5px"},active:{boxshadow:"0px 0px 0px 8px rgba(158, 158, 158, 0.16)"}})(lE);function I$({layerAtom:t}){const[e,n]=gr(t),r=(i,s)=>{const o=s;n(a=>({...a,layerProps:{...a.layerProps,opacity:o}}))};return V(x$,{value:e.layerProps.opacity,onChange:r,min:0,max:1,step:.01})}const C$=Ui({root:{width:"5.5em",fontSize:"0.7em"}})(sE);function w$({sourceAtom:t,layerAtom:e,axisIndex:n,max:r}){const i=Pn(t),[s,o]=gr(e),[a,l]=w.exports.useState(null),c=p=>{l(p.currentTarget)},u=()=>{l(null)},f=p=>{let g=+p.target.value;g<0&&(g=0),g>r&&(g=r),o(m=>{let E={...m.layerProps};return E.selections=E.selections.map(v=>{let y=[...v];return y[n]=g,y}),{...m,layerProps:E}})},h=Boolean(a),d=h?`${n}-index-${i.id}-options`:void 0,A=s.layerProps.selections[0]?s.layerProps.selections[0][n]:1;return ze(ji,{children:[V(Gr,{onClick:c,"aria-describedby":d,style:{backgroundColor:"transparent",padding:0,zIndex:2,cursor:"pointer"},children:V(ub,{})}),V(oE,{id:d,open:h,anchorEl:a,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:ze(Rc,{style:{padding:"0px 4px",marginBottom:4},children:[V(Yn,{variant:"caption",children:"Index:"}),V(un,{}),V(C$,{value:A,onChange:f,type:"number",id:"max",fullWidth:!1}),V(un,{})]})})]})}const T$=Ui({root:{color:"white",padding:"10px 0px 5px 0px",marginRight:"5px"},active:{boxshadow:"0px 0px 0px 8px rgba(158, 158, 158, 0.16)"}})(lE);function S$({sourceAtom:t,layerAtom:e,axisIndex:n,max:r}){const[i,s]=gr(e),o=Pn(t),{axis_labels:a}=o;let l=a[n];(l==="t"||l==="z")&&(l=l.toUpperCase());const[c,u]=w.exports.useState(0);return w.exports.useEffect(()=>{u(i.layerProps.selections[0]?i.layerProps.selections[0][n]:1)},[i.layerProps.selections]),ze(ji,{children:[ze(qe,{children:[ze(qe,{container:!0,justifyContent:"space-between",children:[V(qe,{item:!0,xs:10,children:V("div",{style:{width:165,overflow:"hidden",textOverflow:"ellipsis"},children:ze(Yn,{variant:"caption",noWrap:!0,children:[l,": ",c,"/",r]})})}),V(qe,{item:!0,xs:1,children:V(w$,{sourceAtom:t,layerAtom:e,axisIndex:n,max:r})})]}),V(qe,{container:!0,justifyContent:"space-between",children:V(qe,{item:!0,xs:12,children:V(T$,{value:c,onChange:(d,A)=>{u(A)},onChangeCommitted:()=>{s(d=>{let A={...d.layerProps};return A.selections=A.selections.map(p=>{let g=[...p];return g[n]=c,g}),{...d,layerProps:A}})},min:0,max:r,step:1})})})]}),V(un,{})]})}function b$({sourceAtom:t,layerAtom:e}){const n=Pn(t),{axis_labels:r,channel_axis:i,loader:s}=n,o=r.slice(0,-2).map((a,l)=>[a,l,s[0].shape[l]]).filter(a=>a[1]===i?!1:a[2]>1).map(([a,l,c])=>V(S$,{sourceAtom:t,layerAtom:e,axisIndex:l,max:c-1},a));return o.length===0?null:ze(ji,{children:[V(qe,{children:o}),V(un,{})]})}const R$=Q0(()=>({container:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"2px"},button:{padding:"3px",width:"16px",height:"16px"}})),B$=Object.entries(Ar).map(([t,e])=>[t,qm(e)]);function P$({handleChange:t}){const e=R$();return V("div",{className:e.container,"aria-label":"color-swatch",children:B$.map(([n,r])=>V(Gr,{className:e.button,onClick:()=>t(r),children:V(h$,{fontSize:"small",style:{color:`rgb(${r})`}})},n))})}const Dx=Ui({root:{width:"5.5em",fontSize:"0.7em"}})(sE);function N$({sourceAtom:t,layerAtom:e,channelIndex:n}){const r=Pn(t),[i,s]=gr(e),[o,a]=w.exports.useState(null),{channel_axis:l,names:c}=r,u=y=>{a(y.currentTarget)},f=()=>{a(null)},h=y=>{s(C=>{const x=[...C.layerProps.colors];return x[n]=y,{...C,layerProps:{...C.layerProps,colors:x}}})},d=y=>{const C=y.target.id;let x=+y.target.value;x<0&&(x=0),s(B=>{const R=[...B.layerProps.contrastLimitsRange],b=[...B.layerProps.contrastLimits],[N,H]=R[n],[D,G]=b[n],[W,X]=C==="min"?[x,H]:[N,x];return W>D&&(b[n]=[W,G]),X<G&&(b[n]=[D,X]),R[n]=[W,X],{...B,layerProps:{...B.layerProps,contrastLimits:b,contrastLimitsRange:R}}})},A=()=>{s(y=>{const{layerProps:C}=y,x=[...C.colors],B=[...C.contrastLimits],R=[...C.contrastLimitsRange],b=[...C.selections],N=[...C.channelsVisible];return x.splice(n,1),B.splice(n,1),R.splice(n,1),b.splice(n,1),N.splice(n,1),{...y,layerProps:{...C,colors:x,selections:b,channelsVisible:N,contrastLimits:B,contrastLimitsRange:R}}})},p=y=>{s(C=>{const x=[...C.layerProps.selections],B=[...x[n]];return Number.isInteger(l)&&(B[l]=+y.target.value,x[n]=B),{...C,layerProps:{...C.layerProps,selections:x}}})},g=Boolean(o),m=g?`channel-${n}-${r.name}-options`:void 0,[E,v]=i.layerProps.contrastLimitsRange[n];return ze(ji,{children:[V(Gr,{onClick:u,"aria-describedby":m,style:{backgroundColor:"transparent",padding:0,zIndex:2,cursor:"pointer"},children:V(ub,{})}),V(oE,{id:m,open:g,anchorEl:o,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:ze(Rc,{style:{padding:"0px 4px",marginBottom:4},children:[ze("div",{style:{display:"flex",justifyContent:"space-between"},children:[V(Yn,{variant:"caption",children:"remove:"}),V(Gr,{onClick:A,children:V(fb,{})})]}),V(un,{}),V(Yn,{variant:"caption",children:"selection:"}),V(un,{}),V(aE,{fullWidth:!0,style:{fontSize:"0.7em"},id:`layer-${r.name}-channel-select`,onChange:p,value:i.layerProps.selections[n][l],children:c.map((y,C)=>ze("option",{value:C,children:["(",C,") ",y]},y))}),V(un,{}),V(Yn,{variant:"caption",children:"contrast limits:"}),V(un,{}),V(Dx,{value:E,onChange:d,type:"number",id:"min",fullWidth:!1}),V(Dx,{value:v,onChange:d,type:"number",id:"max",fullWidth:!1}),V(un,{}),V(Yn,{variant:"caption",children:"color:"}),V(un,{}),V("div",{style:{display:"flex",justifyContent:"center"},children:V(P$,{handleChange:h})})]})})]})}function L$({sourceAtom:t,layerAtom:e,channelIndex:n}){const r=Pn(t),[i,s]=gr(e),o=(v,y)=>{s(C=>{const x=[...C.layerProps.contrastLimits];return x[n]=y,{...C,layerProps:{...C.layerProps,contrastLimits:x}}})},a=()=>{s(v=>{const y=[...v.layerProps.channelsVisible];return y[n]=!y[n],{...v,layerProps:{...v.layerProps,channelsVisible:y}}})},l=i.layerProps,c=[...l.contrastLimits[n]],u=`rgb(${l.colormap?[255,255,255]:l.colors[n]})`,f=l.channelsVisible[n],[h,d]=l.contrastLimitsRange[n],{channel_axis:A,names:p}=r,g=l.selections[n],m=Number.isInteger(A)?g[A]:0,E=p[m];return ze(ji,{children:[ze(qe,{container:!0,justifyContent:"space-between",wrap:"nowrap",children:[V(qe,{item:!0,xs:10,children:V("div",{style:{width:165,overflow:"hidden",textOverflow:"ellipsis"},children:V(Yn,{variant:"caption",noWrap:!0,children:E})})}),V(qe,{item:!0,xs:1,children:V(N$,{sourceAtom:t,layerAtom:e,channelIndex:n})})]}),ze(qe,{container:!0,justifyContent:"space-between",children:[V(qe,{item:!0,xs:2,children:V(Gr,{style:{color:u,backgroundColor:"transparent",padding:0,zIndex:2},onClick:a,children:f?V(d$,{}):V(A$,{})})}),V(qe,{item:!0,xs:10,children:V(lE,{value:c,onChange:o,min:h,max:d,step:.01,style:{padding:"10px 0px 5px 0px",color:u}})})]})]})}const M$=Ui({root:{padding:"2px 5px",borderLeft:"1px solid rgba(150, 150, 150, .2)",borderRight:"1px solid rgba(150, 150, 150, .2)"}})(XW);function O$({sourceAtom:t,layerAtom:e}){const r=Pn(e).layerProps.selections.length;return V(M$,{children:ze(qe,{container:!0,direction:"column",children:[V(y$,{sourceAtom:t,layerAtom:e}),V(qe,{children:ze(qe,{container:!0,justifyContent:"space-between",children:[V(qe,{item:!0,xs:3,children:V(Yn,{variant:"caption",children:"opacity:"})}),V(qe,{item:!0,xs:8,children:V(I$,{sourceAtom:t,layerAtom:e})})]})}),V(un,{}),V(b$,{sourceAtom:t,layerAtom:e}),ze(qe,{container:!0,justifyContent:"space-between",children:[V(qe,{item:!0,xs:3,children:V(Yn,{variant:"caption",children:"channels:"})}),V(qe,{item:!0,xs:1,children:V(_$,{sourceAtom:t,layerAtom:e})})]}),V(un,{}),V(qe,{children:Hl(r).map(i=>V(L$,{sourceAtom:t,layerAtom:e,channelIndex:i},i))})]})})}const D$=Ui({root:{borderBottom:"1px solid rgba(150, 150, 150, .2)",width:200,boxshadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:0,padding:0}},expanded:{padding:1}})(WW);function F$({sourceAtom:t}){const e=Pn(t),n=FS(e),{name:r=""}=e;return ze(D$,{defaultExpanded:!0,children:[V(v$,{sourceAtom:t,layerAtom:n,name:r}),V(O$,{sourceAtom:t,layerAtom:n})]})}const Q$=Q0({root:{zIndex:1,position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"5px",left:"5px",top:"5px"},scroll:{maxHeight:500,overflowX:"hidden",overflowY:"scroll","&::-webkit-scrollbar":{display:"none",background:"transparent"},scrollbarWidth:"none",flexDirection:"column"}});function k$(){const t=Pn(DS),[e,n]=w.exports.useReducer(i=>!i,!1),r=Q$();return V("div",{className:r.root,style:{padding:`0px 5px ${e?0:5}px 5px`},children:ze(qe,{container:!0,direction:"column",alignItems:"flex-start",children:[V(Gr,{style:{backgroundColor:"transparent",padding:0},onClick:n,children:e?V(cb,{}):V(fb,{})}),V("div",{className:r.scroll,style:{display:e?"none":"flex"},children:t.map(i=>V(F$,{sourceAtom:i},`${i}`))})]})})}const hb="0.3.0";function U$(){const t=Zv(MS),e=Zv(OS);async function n(r){const{createSourceData:i}=await Gt(()=>Promise.resolve().then(()=>FH),void 0,import.meta.url),s=Math.random().toString(36).slice(2),o=await i(r);t(a=>(o.name||(o.name=`image_${Object.keys(a).length}`),[...a,{id:s,...o}]))}return w.exports.useEffect(()=>{const r=new URLSearchParams(window.location.search);if(r.has("source")){const i={};for(const[a,l]of r)i[a]=l;i.source=decodeURIComponent(i.source),n(i);const s=new URL(window.location.href);s.searchParams.set("source",i.source);const o=decodeURIComponent(s.toString());window.location.href!==o&&window.history.pushState(null,"",o)}},[]),w.exports.useEffect(()=>{async function r(){const{imjoyRPC:i}=await Gt(()=>import("./index.01e90947.js").then(l=>l.i),[],import.meta.url),s=await i.setupRPC({name:"vizarr",description:"A minimal, purely client-side program for viewing Zarr-based images with Viv & ImJoy.",version:hb}),o=async l=>n(l),a=async l=>e(l);s.export({add_image:o,set_view_state:a})}window.self!==window.top&&r()},[]),ze(ji,{children:[V(k$,{}),V(WH,{})]})}var cE={};Object.defineProperty(cE,"__esModule",{value:!0});var Np=cE.default=void 0,G$={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},V$=G$;Np=cE.default=V$;const z$=WS({palette:{type:"dark",primary:Np,secondary:Np},props:{MuiButton:{size:"small"},MuiButtonBase:{disableRipple:!0},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiInputLabel:{margin:"dense"},MuiOutlinedInput:{margin:"dense"}},overrides:{MuiSlider:{thumb:{"&:focus, &:hover":{boxShadow:"none"},height:11,width:5,borderRadius:"15%",marginLeft:-1}},MuiInput:{underline:{"&&&&:hover:before":{borderBottom:"1px solid #fff"}}},MuiPaper:{root:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},MuiSvgIcon:{root:{width:"0.7em",height:"0.7em"}}}}),bu=new Map;function oa(t,e){sV(t,()=>{if(!bu.has(t)){const r=e().then(i=>i.default).catch(i=>{throw bu.delete(t),i});bu.set(t,r)}return bu.get(t)})}oa("lz4",()=>Gt(()=>import("./lz4.87389b44.js"),[],import.meta.url));oa("gzip",()=>Gt(()=>import("./gzip.87321722.js"),["gzip.87321722.js","pako.esm-856454b6.df899be9.js"],import.meta.url));oa("zlib",()=>Gt(()=>import("./zlib.c77211ff.js"),["zlib.c77211ff.js","pako.esm-856454b6.df899be9.js"],import.meta.url));oa("zstd",()=>Gt(()=>import("./zstd.d76669c6.js"),[],import.meta.url));oa("blosc",()=>Gt(()=>import("./blosc.4ec40f1c.js"),[],import.meta.url));oa("jpeg2k",()=>Gt(()=>import("./jpeg2k.ef190c07.js"),[],import.meta.url));console.log(`vizarr v${hb}: https://github.com/hms-dbmi/vizarr`);Uu.render(V(f4,{theme:z$,children:V(PB,{children:V(U$,{})})}),document.getElementById("root"));export{SG as B};
